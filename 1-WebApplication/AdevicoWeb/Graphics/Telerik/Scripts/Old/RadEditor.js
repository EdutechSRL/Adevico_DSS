Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(c,b,a){b.Utils={setElementClassName:function(d,f){if(!d){return"";
}if(!f){d.className="";
d.removeAttribute("class",0);
d.removeAttribute("classname",0);
}else{var e=d.className;
d.className=f;
return e;
}},addElementsToSelection:function(e,d){if($telerik.isIE){b.Utils.selectElement(e,d[0]);
return 1;
}var h=e.getSelection();
var f=new b.Selection(e);
var k=f.getRange();
if(!k||!k.selectNodeContents){return -1;
}if(h.removeAllRanges){h.removeAllRanges();
}for(var g=0;
g<d.length;
g++){k.selectNodeContents(d[g]);
h.addRange(k);
}return d.length;
},getFullySelectedElement:function(d){return $telerik.isIE?b.Utils._getFullySelectedElementIE(d):b.Utils._getFullySelectedElementMoz(d);
},_isListFullySelected:function(d,f){if(d.tagName=="UL"||d.tagName=="OL"){var e=f.match(/<LI\/?>/gi);
if(e.length==d.getElementsByTagName("LI").length){return true;
}}return false;
},_getFullySelectedElementIE:function(d){var g=new b.Selection(d);
var n=g.getRange();
var m=(n.length>0?n.item(0):n.parentElement());
if(n.length>0){return m;
}else{if(m.tagName=="A"){var f=n.duplicate();
f.moveToElementText(m);
if(n.inRange(f)){return m;
}}else{if(b.Utils._isListFullySelected(m,g.getHtml())){return m;
}else{if(!n.htmlText){return null;
}}}}var p=n.duplicate();
var i=n.duplicate();
p.collapse(true);
i.collapse(false);
var o=p.parentElement();
if(o.parentNode==m){o=m;
}var h=i.parentElement();
if(o==h){var e=d.document;
var r=e.body.createTextRange();
r.moveToElementText(o);
var q=n.htmlText;
var s=false;
var l=o.outerHTML.replace(/[\r\n\t]/ig,"");
var k=o.innerHTML.replace(/[\r\n\t]/ig,"");
q=q.replace(/[\r\n\t]/ig,"");
if(l==q||k==q){s=true;
}if(s||(0==r.compareEndPoints("StartToStart",n)&&0==r.compareEndPoints("EndToEnd",n))){if("BODY"!=m.tagName){return m;
}}}},_getFullySelectedElementMoz:function(e){var g=e.document;
var i=e.getSelection();
if(i.rangeCount<1){return null;
}var l=i.getRangeAt(0);
var f=l.commonAncestorContainer;
var d=f.parentNode;
var h=new b.Selection(e);
if($telerik.isFirefox){var m=this._tryGetFullySelectedElementInFF(h);
if(m){return m;
}}if(f.tagName=="BODY"){var k=h.getParentElement();
if(k&&k.tagName!="BODY"){return k;
}}else{var n=g.createElement("span");
n.appendChild(l.cloneContents());
if(n.innerHTML==d.innerHTML&&d.tagName!="BODY"){return d;
}}if(b.Utils._isListFullySelected(f,h.getHtml())){return f;
}},_tryGetFullySelectedElementInFF:function(d){var e=a("<div>").html(d.getHtml()).contents();
if(e.length==1&&e.is(function(){return this.nodeType==1;
})){return d.getParentElement();
}else{return null;
}},cleanPastedContent:function(f,i,h,d){var e=f;
e=e.replace(/^<html[^>]*?>\s*<body[^>]*?>\s*<!--StartFragment-->/im,"");
e=e.replace(/<!--EndFragment-->\s*<\/body>\s*<\/html>[\s\S]*$/im,"");
if(i==c.StripFormattingOptions.None){if(this.isPastedFromWord(f)){if(confirm(h)){f=b.Utils.convertWordLists(f);
e=b.Utils.stripFormatting(f,"WORD_NO_MARGINS");
}}}else{if(i&c.StripFormattingOptions.All){e=b.Utils.stripFormatting(f,"ALL");
}else{if(i&c.StripFormattingOptions.AllExceptNewLines){e=b.Utils.stripFormatting(f,"ALL_NO_BRAKES");
}else{if(i&c.StripFormattingOptions.ConvertWordLists){f=b.Utils.convertWordLists(f);
}var g=[];
if(i&c.StripFormattingOptions.MSWordRemoveAll){g.push("WORD_ALL");
}if(i&c.StripFormattingOptions.MSWordNoFonts){g.push("WORD_NO_FONTS");
}if(i&c.StripFormattingOptions.MSWordNoMargins){g.push("WORD_NO_MARGINS");
}if(i&c.StripFormattingOptions.MSWord){g.push("WORD");
}if(g.length>0){f=b.Utils.stripWordFormatting(f,g);
}if(i&c.StripFormattingOptions.Css){f=b.Utils.stripFormatting(f,"CSS");
}if(i&c.StripFormattingOptions.Font){f=b.Utils.stripFormatting(f,"FONT");
}if(i&c.StripFormattingOptions.Span){f=b.Utils.stripFormatting(f,"SPAN");
}e=f;
}}}if(null!=d&&false==d){e=b.Utils.stripFormatting(e,"SCRIPT");
}return e;
},isPastedFromWord:function(h){var e=document.createElement("DIV");
this.setElementInnerHtml(e,h);
var d=$telerik.isIE?e.all:e.getElementsByTagName("*");
for(var k=0;
k<d.length;
k++){var f=d[k];
if(/mso/i.test(f.className)){return true;
}if(f.nodeType==1){var g=this.getOuterHtml(f).replace(f.innerHTML,"");
if(/mso/i.test(g)&&!/^<a /i.test(g)&&!/^<img /i.test(g)){return true;
}}}return false;
},isCursorMovingKey:function(d){if(d>=33&&d<=40){return true;
}return false;
},isSystemKey:function(d){if(d>=112&&d<=123){return true;
}if(d>=8&&d<=27){return true;
}if(d>=32&&d<=46){return true;
}if(d==93){return true;
}return false;
},storeBrowserPosition:function(){var d=document.body;
var e=document.documentElement;
this._browserTop=d.scrollTop>e.scrollTop?d.scrollTop:e.scrollTop;
this._browserLeft=d.scrollLeft>e.scrollLeft?d.scrollTop:e.scrollLeft;
return{x:this._browserLeft,y:this._browserTop};
},restoreBrowserPosition:function(e,h){try{if(null==e){e=this._browserLeft;
}if(null==h){h=this._browserTop;
}var f=document.body;
var g=document.documentElement;
f.scrollTop=h;
f.scrollLeft=e;
g.scrollTop=h;
g.scrollLeft=e;
}catch(d){}},_getPasteIframe:function(i,g){i=i||document;
if(this._pasteIframe&&!this._pasteIframe.contentWindow){a(this._pasteIframe).remove();
this._pasteIframe=null;
}if(!this._pasteIframe){if($telerik.isSafari){this._pasteIframe=i.createElement("div");
this._pasteIframe.id="radePasteHelper";
var l=this._pasteIframe.style;
l.position="absolute";
l.left="-10000px";
l.border="0px solid red";
l.top=i.body.scrollTop+"px";
l.width="1px";
l.height="1px";
l.overflow="hidden";
i.body.appendChild(this._pasteIframe);
}else{this._pasteIframe=document.createElement("iframe");
this._pasteIframe.setAttribute("title","Paste helper element.");
var m=this._pasteIframe.style;
m.width="1px";
m.height="1px";
m.border="0px solid red";
m.overflow="hidden";
m.position="absolute";
if(i===document&&g){g.get_element().appendChild(this._pasteIframe);
}else{i.body.appendChild(this._pasteIframe);
}try{var d=this._pasteIframe.contentWindow.document;
var h=d.open("text/html","replace");
var k="<html><head><title>New Document</title></head><body contentEditable='true' style='overflow:hidden;margin:0px;padding:0px;height:100%'></html>";
h.write(k);
h.close();
}catch(f){}}}return this._pasteIframe;
},getPasteContainer:function(f,e){var d=this._getPasteIframe(f,e);
return $telerik.isSafari?d:d.contentWindow.document.body;
},clearPasteContainer:function(){this._pasteIframe.parentNode.removeChild(this._pasteIframe);
this._pasteIframe=null;
},containsHtmlAtClipboard:function(d){if(!d){return false;
}var e=d.clipboardData&&d.clipboardData.getData&&d.clipboardData.types&&d.clipboardData.types.length&&d.clipboardData.types.length>0&&Telerik.Web.UI.Editor.Utils.containsElement(/text\/html/i,d.clipboardData.types);
return e;
},getClipboardAsHtml:function(e,g){if(Telerik.Web.UI.Editor.Utils.containsHtmlAtClipboard(g)){return g.clipboardData.getData("text/html");
}var d=this.getPasteContainer(null,e);
d.innerHTML="";
if(d.setActive){d.setActive();
}try{document.execCommand("Paste",null);
}catch(f){}var h=d.innerHTML;
d.innerHTML="";
return h;
},convertWordLists:function(d){return new b.WordListConverter().convert(d);
},stripFormatting:function(f,d){switch(d){case"ALL":f=f.replace(new RegExp("<(SCRIPT|STYLE)([^>]*)>[\\s\\S]*?</(\\1)([^>]*)>","ig"),"");
f=f.replace(new RegExp("<!--[\\s\\S]*?-->","ig"),"");
f=f.replace(/<\/?[^>]*>/ig,"");
break;
case"ALL_NO_BRAKES":f=f.replace(/<!\[endif\]-->[\s\n\r]*</ig,"<![endif]--><");
f=f.replace(/<BR(\s[^>]*)?\/?>/ig,"~RADEDITORBRAKE~");
f=f.replace(new RegExp("<(SCRIPT|STYLE)([^>]*)>[\\s\\S]*?</(\\1)([^>]*)>","ig"),"");
f=f.replace(new RegExp("<!--[\\s\\S]*?-->","ig"),"");
f=f.replace(/<\/?[^>]*>/ig,"");
f=f.replace(/~RADEDITORBRAKE~/ig,"<br/>");
f=f.replace(/\n/ig,"<br/>");
f=f.replace(/\r/ig,"");
break;
case"WORD":case"WORD_ALL":case"WORD_NO_FONTS":case"WORD_NO_MARGINS":var e=[];
e.push(d);
f=this.stripWordFormatting(f,e);
break;
case"CSS":f=f.replace(new RegExp("(<[^>]+) class=[^ |^>]*([^>]*>)","ig"),"$1 $2");
f=f.replace(/(<[^>]+) style="[^"]*"([^>]*>)/ig,"$1 $2");
break;
case"FONT":f=f.replace(/<\/?font[^>]*>/ig,"");
break;
case"SPAN":f=f.replace(/<\/?span[^>]*>/ig,"");
break;
case"SCRIPT":f=f.replace(new RegExp("<(SCRIPT)([^>]*)/>","ig"),"");
f=f.replace(new RegExp("<(SCRIPT)([^>]*)>[\\s\\S]*?</(SCRIPT)([^>]*)>","ig"),"");
break;
default:break;
}return f;
},replaceNewLineWithBr:function(e){try{e=e.replace(/\n/g,"<br>");
return e;
}catch(d){}},convertText2Html:function(e){try{e=e.replace(/</g,"&lt;");
e=e.replace(/>/g,"&gt;");
e=e.replace(/\n/g,"<br>");
return e;
}catch(d){}},cssPropertiesToKeep:["color","background","backgroundColor","background-color","opacity","height","width","margin","margin-top","margin-right","margin-bottom","margin-left","marginTop","marginRight","marginBottom","marginLeft","padding","padding-top","padding-right","padding-bottom","padding-left","paddingTop","paddingRight","paddingBottom","paddingLeft","font-size","fontSize","font-family","fontFamily","font-weight","fontWeight","fontStretch","fontStyle","fontVariant","border","borderSpacing","border-top","borderTop","border-right","borderRight","border-bottom","borderBottom","border-left","borderLeft","borderColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderStyle","borderTopStyle","borderRightStyle","borderLeftStyle","borderBottomStyle","borderWidth","listStyleType","listStyleImage","text-align","textAlign","letterSpacing"],getCssPropertiesWordAll:function(f){var d=[];
for(var e=0;
e<f.length;
e++){if(!/^font/.test(f[e])){d.push(f[e]);
}}return d;
},getCssPropertiesWordNoFonts:function(f){var d=[];
for(var e=0;
e<f.length;
e++){if(!/^font/.test(f[e])||(/^font/.test(f[e])&&/size$/i.test(f[e]))){d.push(f[e]);
}}return d;
},getCssPropertiesWordNoMargins:function(f){var d=[];
for(var e=0;
e<f.length;
e++){if(!/margin/i.test(f[e])){d.push(f[e]);
}}return d;
},getCssPropertiesToKeep:function(d){var e=this.cssPropertiesToKeep;
if($telerik.$.inArray("WORD_NO_FONTS",d)!=-1){e=this.getCssPropertiesWordNoFonts(e);
}if($telerik.$.inArray("WORD_ALL",d)!=-1){e=this.getCssPropertiesWordAll(e);
}if($telerik.$.inArray("WORD_NO_MARGINS",d)!=-1){e=this.getCssPropertiesWordNoMargins(e);
}return e;
},setBlockElementsDefaultMarginToZero:false,clearWordAttributesAndStyles:function(f,k){var d=$telerik.isIE?f.all:f.getElementsByTagName("*");
for(var g=0;
g<d.length;
g++){var e=d[g];
if(e.nodeType==1){var h=e.nodeName;
if(h!="TABLE"&&h!="TH"&&h!="TR"&&h!="TD"){this.clearElement(e,k);
}}}},clearWordClasses:function(d){var e=/^mso|wordsection|bullets/i;
if(d.className&&e.test(d.className)){d.className="";
}},clearElement:function(f,i){this.clearWordClasses(f);
f.removeAttribute("lang","",0);
this.clearUnnecessaryStyles(f,i);
if(f.style&&f.style.fontFamily){if($telerik.isIE){f.style.fontFamily=f.style.fontFamily.replace(/\\"/g,"'");
}else{f.style.fontFamily=f.style.fontFamily.replace(/('|"|&quot;)/g,"");
}}if(f.nodeName=="DIV"||f.nodeName=="P"){this.removeInvalidBorderColors(f);
}var h=/mso/i;
for(var g=f.attributes.length-1;
g>=0;
g--){var d=f.attributes[g];
var e=d.name.toLowerCase();
if(e!="src"&&e!="href"&&"null"!=d.value&&""!=d.value){if(h.exec(d.name)||h.exec(d.value)){f.removeAttribute(d.name);
}}}},clearLists:function(d,f){var e=a(d).find("OL");
a(e).removeAttr("type");
a(e).removeAttr("start");
},removeInvalidBorderColors:function(d){if(!d.style){return;
}var f=/windowtext|-moz-use-text-color|currentColor/i;
if(d.style.borderTopColor&&f.test(d.style.borderTopColor)){d.style.borderTopColor="";
}if(d.style.borderRightColor&&f.test(d.style.borderRightColor)){d.style.borderRightColor="";
}if(d.style.borderBottomColor&&f.test(d.style.borderBottomColor)){d.style.borderBottomColor="";
}if(d.style.borderLeftColor&&f.test(d.style.borderLeftColor)){d.style.borderLeftColor="";
}if($telerik.isFirefox){var g=/\s?-moz-[a-z\-]+colors?:\s?[a-z]+;/gmi;
var e=this.getOuterHtml(d);
if(g.test(e)){e=e.replace(g,"");
$telerik.$(d).replaceWith(e);
}}},setNbspInEmptyParagraphs:function(d){var f=/(<p[^>]*?>)(<\/p>)/gmi;
var e=d.innerHTML;
e=e.replace(f,"$1&nbsp;$2");
d.innerHTML=e;
},removeEmptyElements:function(d){var h="(?:b|font|i|s|span|u)";
var f="<"+h+"(?:\\s[^>]*)?></"+h+">";
var e=d.innerHTML;
var g=new RegExp(f,"gmi");
while(new RegExp(f,"mi").test(e)){e=e.replace(g,"");
}d.innerHTML=e;
},removeNodesByTagName:function(d,g){var e=d.getElementsByTagName(g);
while(e.length>0){for(var f=0;
f<e.length;
f++){this.removeNode(e[f]);
}e=d.getElementsByTagName(g);
}},clearWordAttributesInElement:function(k,g){var d=$telerik.isIE?k.all:k.getElementsByTagName("*");
for(var l=0;
l<d.length;
l++){var h=d[l];
var m=/\bmso.*/gi;
if(h.nodeType==1){if(m.exec(h.className)){h.className="";
}h.removeAttribute("lang","",0);
h.removeAttribute("style","",0);
h.style.cssText=h.style.cssText.replace(/(([\w-]*?mso[\w-]*?):(.+?)([;^$]|$))/gi,"");
if($telerik.isIE){h.style.removeAttribute("tab-stops",0);
h.style.removeAttribute("textIndent",0);
}if($telerik.isIE&&(g=="WORD_NO_FONTS"||g=="WORD_ALL")){h.style.removeAttribute("fontFamily",0);
h.removeAttribute("face",0);
}if(h.style&&h.style.fontFamily){h.style.fontFamily=h.style.fontFamily.replace(/('|"|&quot;)/g,"");
}for(j=h.attributes.length-1;
j>=0;
j--){var e=h.attributes[j];
var f=e.name.toLowerCase();
if(f!="src"&&f!="href"&&"null"!=e.value&&""!=e.value){if(m.exec(e.name)||m.exec(e.value)){h.removeAttribute(e.name);
}}}}}},clearUnnecessaryStyles:function(e,k){var d=[];
for(var g=0;
g<k.length;
g++){var i=k[g];
if(e.style[i]&&e.style[i]!=""){d.push({propertyName:i,value:e.style[i]});
}if(i=="text-align"&&e.tagName=="TD"&&e.style.textAlign==""){d.push({propertyName:i,value:"left"});
}}e.removeAttribute("style","",0);
var f=true;
for(var g=0;
g<d.length;
g++){var h=d[g];
e.style[h.propertyName]=h.value;
if(this.setBlockElementsDefaultMarginToZero&&/margin/i.test(h.propertyName)){f=false;
}}if(this.setBlockElementsDefaultMarginToZero&&f&&(e.tagName=="P"||e.tagName.charAt(0)=="H")){e.style.margin="0pt";
}},removeNewLinesBetweenTags:function(d){if(/<[a-z]+[^>]*?>/mi.test(d)){d=d.replace(/^[\r\n\s]+(<)/m,"$1");
d=d.replace(/(>)[\r\n\s]+$/m,"$1");
d=d.replace(/(<\/[a-z]+[^>]*?>)([\r\n\s])+(<[a-z]+[^>]*?>)/gmi,function(i,f,g,h,k,e){var l=f+" "+h;
return l;
});
}return d;
},clearComments:function(d){d=d.replace(/<!--[\s\S]+?-->/g,"");
return d;
},clearInvalidHtml:function(d){d=d.replace(/<\/?[ov]:[^>]*?>/gi,"");
d=d.replace(/<\\?\??xml[^>]*>/gi,"");
d=d.replace(/<(?:link|meta) [^>]+?>/ig,"");
d=d.replace(/<style[^>]*?>\s*<\/style>/ig,"");
d=d.replace(/<\/?st1:.*?>/gi,"");
d=d.replace(/<a name="[a-zA-Z0-9_]+">/gmi,"");
d=d.replace(/v:shapes?="[^"]+"/ig,"");
d=d.replace(/(<\/html>)[\s\S]+$/im,"$1");
return d;
},clearWordTables:function(f,h){var m=f.getElementsByTagName("TABLE");
for(var i=0;
i<m.length;
i++){var k=m[i];
this.clearWordClasses(k);
this.clearUnnecessaryStyles(k,h);
var l=k.getElementsByTagName("TR");
for(var g=0;
g<l.length;
g++){var p=l[g];
this.clearWordClasses(p);
this.clearUnnecessaryStyles(p,h);
for(var e=0;
e<p.cells.length;
e++){var n=p.cells[e];
this.clearWordClasses(n);
this.removeInvalidBorderColors(n);
this.clearUnnecessaryStyles(n,h);
var o=n.innerHTML;
o=o.replace(/(\s*&nbsp;)+/gi,"");
o=o.replace(/(\s*&nbsp;)+$/gi,"");
n.innerHTML=o;
}}}},addCssProperies:function(e){e=typeof(e)==="string"?[].push(e):e;
for(var d=0;
d<e.length;
d++){if($telerik.$.inArray(e[d],Telerik.Web.UI.Editor.Utils.cssPropertiesToKeep)==-1){Telerik.Web.UI.Editor.Utils.cssPropertiesToKeep.push(e[d]);
}}},removeCssProperiesByPattern:function(e){var f=new RegExp(e,"i");
for(var d=Telerik.Web.UI.Editor.Utils.cssPropertiesToKeep.length-1;
d>=0;
d--){if(f.test(Telerik.Web.UI.Editor.Utils.cssPropertiesToKeep[d])){Telerik.Web.UI.Editor.Utils.cssPropertiesToKeep.splice(d,1);
}}},containsElement:function(f,d){for(var e=0;
e<d.length;
e++){if(!d[e]){continue;
}var g=d[e].toString();
if(f.test(g)){return true;
}}return false;
},stripWordFormatting:function(h,d){var l=h;
var n=this.getCssPropertiesToKeep(d);
l=this.clearComments(l);
l=this.clearInvalidHtml(l);
var k=document.createElement("div");
b.Utils.setElementInnerHtml(k,l);
if(!$telerik.isIE){this.validateStylesOnStripWordFormatting(k);
}if($telerik.$.inArray("WORD_ALL",d)!=-1){this.removeNodesByTagName(k,"FONT");
}if($telerik.$.inArray("WORD_NO_FONTS",d)!=-1){var g=$telerik.$(k).find("FONT");
$telerik.$(g).removeAttr("face");
$telerik.$(g).removeAttr("color");
}if(!this.containsElement(/font\-?size/i,n)){var f=g?g:$telerik.$(k).find("FONT");
$telerik.$(f).removeAttr("size");
}this.clearWordTables(k,n);
this.clearLists(k,n);
this.clearWordAttributesAndStyles(k,n);
this.removeEmptyElements(k);
this.setNbspInEmptyParagraphs(k);
if(this.setBlockElementsDefaultMarginToZero){k.innerHTML=k.innerHTML.replace(/<p>(&nbsp;)*[\u00a0]*\s*<\/p>/gi,'<p style="margin: 0pt;">&nbsp;</p>');
for(var m=0;
m<k.children.length;
m++){var e=k.children[m];
if(this.isBlockElement(e)&&!(($telerik.isIE7||$telerik.isIE8)&&(e.nodeName=="UL"||e.nodeName=="OL"))){e.style.marginTop=e.style.marginTop==""?"0pt":e.style.marginTop;
e.style.marginRight=e.style.marginRight==""?"0pt":e.style.marginRight;
e.style.marginBottom=e.style.marginBottom==""?"0pt":e.style.marginBottom;
e.style.marginLeft=e.style.marginLeft==""?"0pt":e.style.marginLeft;
}}}l=k.innerHTML;
l=l.replace(/\s+/ig," ");
return l;
},validateStylesOnStripWordFormatting:function(f){var d=$telerik.isIE?f.all:f.getElementsByTagName("*");
for(var k=0;
k<d.length;
k++){var g=d[k];
if(g.nodeType==1&&!/^(I|A|B)[A-Z]*$/i.test(g.nodeName)){var l=g.innerHTML;
var h=Telerik.Web.UI.Editor.Utils.getOuterHtml(g).replace(l,"");
var m;
if(m=h.match(/^(\r?\n?<[a-z]+[^>]*?>)(<\/[a-z]+[^>]*?>)$/i)){var n=m[1];
var e=m[2];
if(n&&e){n=n.replace(/(background|-webkit-background)-?[a-z]*: initial;/gi,"");
n=n.replace(/none\srepeat\sscroll\s0%\s0%\s/gi,"");
if($telerik.isFirefox||$telerik.isChrome){n=n.replace(/mso-bidi-font-size/gi,"font-size");
n=n.replace(/mso-bidi-font-family/gi,"font-family");
}if(n!=m[1]){$telerik.$(g).replaceWith(n+l+e);
}}}}}},cleanStylesOnStripWordFormatting:function(d){var e=d+"";
e=e.replace(/(<[^>]*style=["'])([^"']*)(["'][^>]*>)/gi,function(k,g,h,i,l,f){var m=g;
h=h.replace(/(background|-webkit-background)-?[a-z]*: initial;/gi,"");
if($telerik.isFirefox){h=h.replace(/none\srepeat\sscroll\s0%\s0%\s/gi,"");
}h=h.replace(/line-height: normal;?/gi,"");
h=h.replace(/margin: 0[a-z]{2} 0[a-z]{2} 0[a-z]{2};?/gi,"");
if(!$telerik.isIe){h=h.replace(/margin-?[a-z]*: 0.0001[a-z]{2};?/gi,"");
}m+=h;
m+=i;
return m;
});
return e;
},createTable:function(i,e,g){if(!g){g=document;
}var f=g.createElement("table");
for(var h=0;
h<i;
h++){oRow=f.insertRow(-1);
for(var d=0;
d<e;
d++){oCell=oRow.insertCell(-1);
oCell.innerHTML="&nbsp;";
}}return f;
},getElementParentByTag:function(f,g){if(null==f){return null;
}if(null==g){return f;
}try{while(f&&null!=f.tagName&&f.tagName!=g){if(b.Utils.isEditorContentArea(f)){break;
}f=f.parentNode;
}return((f.tagName==g)?f:null);
}catch(d){return null;
}},getElementParentByTagWithConstraint:function(g,h,d){if(null==d){d="";
}if(null==g){return null;
}if(null==h){return g;
}try{while(g&&null!=g.tagName&&g.tagName!=h){if(d.indexOf(g.tagName)!=-1){return null;
}if(b.Utils.isEditorContentArea(g)){break;
}g=g.parentNode;
}return((g.tagName==h)?g:null);
}catch(f){return null;
}},isEditorContentArea:function(d){var e=(d&&(d.tagName=="BODY"||(d.tagName=="DIV"&&Sys.UI.DomElement.containsCssClass(d,"reContentArea"))))?true:false;
return e;
},selectElement:function(g,f){if(!f){return;
}var e=g.document;
var i=null;
if($telerik.isIE){switch(f.tagName){case"TABLE":case"IMG":case"HR":case"INPUT":i=e.body.createControlRange();
i.add(f);
break;
case"UL":case"OL":i=e.body.createTextRange();
i.moveToElementText(f);
var h=i.parentElement();
if(h.tagName!="UL"||h.tagName!="OL"){i.moveEnd("character",-1);
}break;
default:i=e.body.createTextRange();
i.moveToElementText(f);
break;
}if(i){try{i.select();
return true;
}catch(d){return false;
}}}else{if(g.getSelection){i=e.createRange();
i.selectNode(f);
if(window.opera){i.selectNodeContents(f);
}var k=g.getSelection();
if($telerik.isSafari){if(f.tagName!="TD"&&f.tagName!="TH"){k.setBaseAndExtent(i.startContainer,i.startOffset,i.endContainer,i.endOffset);
}}else{k.removeAllRanges();
k.addRange(i);
}return true;
}}return false;
},getOuterHtml:function(d){return $telerik.getOuterHtml(d);
},setElementInnerHtml:function(e,f){var d=$telerik.isIE?this.getStoredOriginalPathsAndAttributes(f):f;
e.innerHTML="<span>&nbsp;</span>"+d;
e.removeChild(e.firstChild);
if($telerik.isIE){this.restoreOriginalPathsAndAttributes(e);
}},removeNode:function(d){var e=d.parentNode;
if(e!=null){while(d.childNodes&&d.childNodes.length>0){e.insertBefore(d.childNodes[0],d);
}e.removeChild(d);
return e;
}return true;
},replaceNode:function(e,f){if(e&&f){var d=a(e).wrap("<"+f+"></"+f+">").parent()[0];
$telerik.mergeElementAttributes(e,d);
b.Utils.removeNode(e);
return d;
}else{return null;
}},MoveToNextCell:function(d,e){var g=b.Utils.getElementParentByTag(d,"TR");
var f=g.cells[d.cellIndex+1];
if(typeof(f)=="undefined"){var i=b.Utils.getElementParentByTag(d,"TABLE");
var h=g.rowIndex+1;
nextRow=i.rows[h];
if(typeof(nextRow)!="undefined"){f=nextRow.cells[0];
}else{if(i.rows.length>0&&i.rows[0].cells.length>0){e.fire("InsertRowBelow",{});
f=i.rows[h].cells[0];
}}}if(typeof(f)!="undefined"){b.Utils.selectCell(f,e);
}},MoveToPreviousCell:function(d,g){var i=b.Utils.getElementParentByTag(d,"TR");
var h=null;
var e=d.cellIndex;
if(e>0){h=i.cells[e-1];
}else{var l=b.Utils.getElementParentByTag(i,"TABLE");
var k=i.rowIndex;
if(k>0){previousRow=l.rows[k-1];
var f=previousRow.cells;
h=f[f.length-1];
}}b.Utils.selectCell(h,g);
},selectCell:function(d,f){if(!d||!f){return;
}var e=f.get_document();
if(e.createRange){range=f.get_document().createRange();
range.selectNodeContents(d);
var g=f.get_contentWindow().getSelection();
g.removeAllRanges();
g.addRange(range);
}else{var h=f.getSelection();
h.selectElement(d);
}},getStoredOriginalPathsAndAttributes:function(e){var g=function(q,i,k,l,m,n,o,r,s){if(!l){l="";
m=m+o;
var p=m.search(/(\s|>)/gi);
if(p>0){o=m.substring(p,m.length);
m=m.substring(0,p);
if(m=='""'){m="";
l='"';
}}else{return q;
}}return i+" "+k+"="+l+m+l+' originalAttribute="'+k+'" originalPath="'+m+'"'+o;
};
var h=new RegExp("(<[^>]*?)\\s(href|src)\\s*=\\s*('|\")?([^>]+?)(\\3)([^>]*?>)","ig");
e=e.replace(h,g);
var d=new RegExp('(<!--[\\s\\S]*?) originalAttribute="(?:href|src)" originalPath="[^"]+"([\\s\\S]*?-->)',"ig");
var f=e.length+1;
while(e.length<f){f=e.length;
e=e.replace(d,"$1$2");
}return e;
},storeOriginalPathsAndAttributes:function(f){var d=["src","href"];
var h=a(f).find("[src],[href]").andSelf().toArray();
for(var g=0;
g<h.length;
g++){for(var k=0;
k<d.length;
k++){this.storeOriginalAttribute(h[g],d[k]);
}}},storeOriginalAttribute:function(e,d){if(e.getAttribute(d)){e.setAttribute("originalAttribute",d);
e.setAttribute("originalPath",e.getAttribute(d));
}},restoreOriginalPathsAndAttributes:function(e){var d=e.getElementsByTagName("*");
for(var g=0;
g<d.length;
g++){var f=d[g];
var l=f.getAttribute("originalPath");
var k=f.getAttribute("originalAttribute");
if(l!=null&&k!=null){f.removeAttribute("originalPath");
f.removeAttribute("originalAttribute");
if(l.toLowerCase().indexOf("mailto:")==0){continue;
}l=l.replace(window.location.href+"#","#");
var h=f.innerHTML;
f.setAttribute(k,l,0);
if(h!=f.innerHTML){f.innerHTML=h;
}}}},_encodeHtmlContent:function(e,h){var d=new Array("%","<",">","!",'"',"#","$","&","'","(",")",",",":",";","=","?","[","]","\\","^","`","{","|","}","~","+");
var g=e;
var f;
if(h){for(f=0;
f<d.length;
f++){g=g.replace(new RegExp("\\x"+d[f].charCodeAt(0).toString(16),"ig"),"%"+d[f].charCodeAt(0).toString(16));
}}else{for(f=d.length-1;
f>=0;
f--){g=g.replace(new RegExp("%"+d[f].charCodeAt(0).toString(16),"ig"),d[f]);
}}return g;
},encodePostbackContent:function(d){return b.Utils._encodeHtmlContent(d,true);
},decodePostbackContent:function(d){return b.Utils._encodeHtmlContent(d,false);
},makeUrlAbsolute:function(e){e=e.split("&").join("&amp;").split('"').join("&quot;").split("<").join("&lt;");
var d=document.createElement("div");
d.innerHTML='<a href="'+e+'">a</a>';
return d.childNodes[0].href;
},addStyleSheet:function(i,e,g){if(!i){return;
}e=e||document;
var h=e.createElement("link");
h.setAttribute("href",i,0);
if($telerik.isIE&&h.href.indexOf("https://")==0&&i.indexOf("https://")!=0){h.setAttribute("href",h.href);
}else{if($telerik.isIE7&&i.indexOf("https://")!=0&&h.href.indexOf("https://")!=0&&window.location.protocol=="https:"){h.setAttribute("href",b.Utils.makeUrlAbsolute(i),0);
}}h.setAttribute("type","text/css");
if(g){h.setAttribute("id",g);
}else{g="";
}h.setAttribute("rel","stylesheet",0);
var f=e.getElementsByTagName("head")[0];
if($telerik.isSafari){var d=function(){f.appendChild(h);
};
window.setTimeout(d,200);
}else{f.appendChild(h);
}},_copyElementsBetweenNodes:function(m,k,d){var l=m.getElementsByTagName(d);
var h=k.getElementsByTagName(d);
for(var f=0;
f<l.length;
f++){switch(d){case"script":case"title":h[f].text=l[f].text;
break;
case"style":if(h[f].innerHTML!=l[f].innerHTML){h[f].styleSheet.cssText=l[f].styleSheet.cssText;
}break;
case"select":h[f].selectedIndex=l[f].selectedIndex;
break;
case"input":if(l[f].type=="radio"&&$telerik.$(l[f]).attr("checked")){$telerik.$(h[f]).attr("checked",true);
}break;
case"iframe":var g=l[f].innerHTML;
if(g){var n=h[f].outerHTML;
if(n){var e=n.indexOf(">");
if(e>0){n=n.substr(0,e)+">"+g+n.substr(e+1);
h[f].outerHTML=n;
}}}break;
default:b.Utils.setElementInnerHtml(h[f],l[f].innerHTML);
break;
}}},cloneNodeWithChildren:function(e){if(!e){return null;
}if($telerik.isIE&&e.getElementsByTagName){var d=e.cloneNode(true);
if(typeof(d.innerHTML)!="string"){this.setElementInnerHtml(d,e.innerHTML);
}this._copyElementsBetweenNodes(e,d,"script");
this._copyElementsBetweenNodes(e,d,"map");
this._copyElementsBetweenNodes(e,d,"style");
this._copyElementsBetweenNodes(e,d,"title");
this._copyElementsBetweenNodes(e,d,"select");
this._copyElementsBetweenNodes(e,d,"input");
this._copyElementsBetweenNodes(e,d,"iframe");
return d;
}else{return e.cloneNode(true);
}},escapeRegExSpecialChars:function(d){var e=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");
return d.replace(e,"\\$&");
},getUniqueID:function(){if(!window.RadEditor_uniqueSeed){window.RadEditor_uniqueSeed=new Date()-101;
}if(!window.RadEditor_uniqueIdCounter){window.RadEditor_uniqueIdCounter=1;
}else{window.RadEditor_uniqueIdCounter++;
}var d=window.RadEditor_uniqueSeed-window.RadEditor_uniqueIdCounter;
return"UniqueID"+d;
},hasAnyContent:function(d){return !!(d&&d.innerHTML);
},getTextContent:function(d){if(!d){return null;
}if(d.innerText!=null){return d.innerText;
}if(d.textContent!=null){var e=d.textContent;
e=e.replace(/<!--(.|\s)*?-->/gi,"");
return e;
}return null;
},removeInvalidElementsInLists:function(d){var h=function(l){for(var i=l.children.length-1;
i>=0;
i--){if(l.children[i].nodeName!="LI"){l.removeChild(l.children[i]);
}}};
var k=this.getSelectedParentElement(d);
if(k.nodeName=="OL"||k.nodeName=="UL"){h(k);
}var f=k.getElementsByTagName("OL");
for(var e=0;
e<f.length;
e++){h(f[e]);
}var g=k.getElementsByTagName("UL");
for(var e=0;
e<g.length;
e++){h(g[e]);
}},execDocumentCommand:function(e,d,k){var i;
if(!e||!d){return false;
}try{return e.execCommand(d,false,k);
}catch(f){var h=this.getSelectedParentElement(e);
i=document.createElement("br");
h.insertBefore(i,h.firstChild);
var g=e.execCommand(d,false,k);
return g;
}finally{if(i){i.parentNode.removeChild(i);
}}},isContentOneBlockElementOnly:function(d){return d.childNodes.length==1&&this.isBlockElement(d.childNodes[0]);
},getSelectedParentElement:function(d){var e=new b.Selection(d.defaultView||window);
return e.getParentElement();
},getFirstBlockElementUp:function(d){return this.isBlockElement(d)?d:this.getBlockParent(d);
},getBlockParentUntil:function(d,f){var e=d;
while(e&&e!=f&&!this.isBlockElement(e)){e=e.parentNode;
}return e;
},getBlockParent:function(d){var e=d.parentNode;
while(e&&!this.isBlockElement(e)){e=e.parentNode;
}return e;
},isTextNodeEmpty:function(d){return !/[^\s\x160]+/.test(d.nodeValue);
},isBlockElement:function(d){return this.checkForElement(d,/^(?:body|p|div|h[1-6]|form|fieldset|table|td|ul|ol|li|dl|blockquote|address|hr)$/i);
},isBlockElementOrNewLine:function(d){return this.isBlockElement(d)||this.checkForElement(d,/^br$/i);
},isTextNode:function(d){return d&&d.nodeType&&(d.nodeType==3||d.nodeType==4||d.nodeType==8);
},checkForElement:function(d,e){var f=d&&d.nodeName;
return !!f&&e.test(f);
},isAlignCommand:function(d){return/^Justify(?:None|Left|Center|Right|Full)$/.test(d);
},findNodeIndex:function(e){for(var d=0;
e=e.previousSibling;
d++){}return d;
},isAncestorOf:function(g,f){try{return !this.isTextNode(g)&&(f.parentNode===g||a.contains(g,this.isTextNode(f)?f.parentNode:f));
}catch(d){return false;
}},isAncestorOrSelf:function(e,d){return this.isAncestorOf(e,d)||(e===d);
},findAncestorUntil:function(e,d){if(this.isAncestorOf(e,d)){while(d&&d.parentNode!=e){d=d.parentNode;
}}return d;
},findCommonAncestor:function(d,e){while(d&&d!=e&&!this.isAncestorOf(d,e)){d=d.parentNode;
}return d;
},getContentAreaFirstChild:function(e){var d=e.get_contentArea();
return d.children?d.children[0]:d.firstChild;
},trimWhitespaceTextNodes:function(e){var d=["firstChild","lastChild"];
Array.forEach(d,a.proxy(function(g){var f=e[g];
if(f&&this.isTextNode(f)){this.trimWhitespace(f);
}},this));
},trimWhitespaceLeft:function(d){var e=this.isTextNodeEmpty(d)?this.spacesRegExp.test(d.nodeValue):false;
while(/^[\s\x160]/.test(d.nodeValue)){var f=d.nodeValue.substring(0,1);
if(!e){e=this.spacesRegExp.test(f);
}d.nodeValue=d.nodeValue.substring(1);
}if(e){d.nodeValue=" "+d.nodeValue;
}},trimWhitespaceRight:function(d){var e=this.isTextNodeEmpty(d)?this.spacesRegExp.test(d.nodeValue):false;
while(/[\s\x160]$/.test(d.nodeValue)){var f=d.nodeValue.length;
var g=d.nodeValue.substring(f-2,f-1);
if(!e){e=this.spacesRegExp.test(g);
}d.nodeValue=d.nodeValue.substring(0,f-1);
}if(e){d.nodeValue=d.nodeValue+" ";
}},trimWhitespace:function(d){this.trimWhitespaceLeft(d);
this.trimWhitespaceRight(d);
},spacesRegExp:/[ \x160]/,trimExtraWhitespace:function(d){var e=this.isTextNode(d)&&/\S[ \x160]$/.test(d.nodeValue);
this.trimWhitespace(d);
if(e){d.nodeValue+=" ";
}},_rgbToHex:function(d){if(d.toLowerCase().indexOf("rgb")!=-1){var f="#";
var e=function(h){var g=parseInt(h,10).toString(16);
f+=(g.length==1?"0"+g:g);
return h;
};
d=d.replace(/(\d+)/gi,e);
e=null;
return f;
}else{return d;
}},removeFormattingNodes:function(d){if(!d){return;
}var e=d.getSelectedElement();
this.removeNonXhtmlCompliantParents(e);
},removeNonXhtmlCompliantParents:function(h){if(!h){return;
}h=h.parentNode;
var f=b.Utils.isEditorContentArea;
var d=[];
while(h&&h.tagName!="TD"&&!f(h)){var k=h.tagName;
switch(k){case"P":case"SPAN":case"FONT":case"STRONG":case"EM":case"U":d.push(h);
break;
}h=h.parentNode;
}for(var e=0,g=d.length;
e<g;
e++){b.Utils.removeNode(d[e]);
}},setTargetsForPreview:function(e){var d=e.get_contentArea();
var k=d.getElementsByTagName("A");
for(var f=0,g=k.length;
f<g;
f++){var h=k[f];
var n=h.getAttribute("target");
if(n!=null){h.setAttribute("re_target",n);
}if(n!="_blank"){h.setAttribute("target","blank");
}var m=h.getAttribute("onclick");
if(m!=null){h.setAttribute("re_onclick",m);
}h.setAttribute("onclick","return false;");
}},restoreTargetsAfterPreview:function(e){var d=e.get_contentArea();
var k=d.getElementsByTagName("A");
for(var f=0,g=k.length;
f<g;
f++){var h=k[f];
var n=h.getAttribute("re_target");
if(n!=null&&n!="null"){h.setAttribute("target",n);
}else{h.removeAttribute("target");
}var m=h.getAttribute("re_onclick");
if(m!=null&&m!="null"){h.setAttribute("onclick",m);
}else{h.removeAttribute("onclick");
}h.removeAttribute("re_onclick");
h.removeAttribute("re_target");
}},checkForNonEmptyTextNodes:function(e){var d=e.childNodes;
for(var f=0,g=d.length;
f<g;
f++){return(d[f].nodeType==3&&d[f].nodeValue!="")?true:b.Utils.checkForNonEmptyTextNodes(d[f]);
}return false;
},emptyNodeRegExp:/^&nbsp;?$/,isNodeEmpty:function(d){return !d.innerHTML||this.emptyNodeRegExp.test(d.innerHTML);
},whitespaceRegExp:/^\s*$/,isWhitespaceNode:function(d){return this.isTextNode(d)?this.isTextNodeEmpty(d):this.whitespaceRegExp.test(d.innerHTML);
},isTag:function(e,d){return e.tagName&&e.tagName.toLowerCase()==d;
},convertAttribute:function(f,k,e){var d=f.getAttribute(k);
var m=d;
if(k=="background"){d=f.getAttribute(k,2);
if(d){m="url("+d+")";
}}else{if(k=="width"||k=="height"||k=="vspace"||k=="hspace"){if(!(typeof(m)=="string"&&m.match("%"))){m=parseInt(m)+"px";
}}else{if(k=="noWrap"){d=f.noWrap;
m="nowrap";
}}}if(d){var l=null;
if(typeof(e)=="object"){var h=e.length;
for(var g=0;
g<h;
g++){l=f.style[e[g]];
if(!l){f.style[e[g]]=m;
}}}else{l=f.style[e];
if(!l){f.style[e]=m;
}}}},convertImgAlignAttribute:function(e){var d=e.getAttribute("align");
var f=($telerik.isIE)?"styleFloat":"cssFloat";
if(d){d=d.toLowerCase();
e.style.verticalAlign="";
e.style[f]="";
switch(d){case"left":e.style[f]="left";
break;
case"right":e.style[f]="right";
break;
case"bottom":case"baseline":case"absbottom":e.style[f]="";
e.style.verticalAlign="text-bottom";
break;
case"middle":case"absmiddle":e.style[f]="";
e.style.verticalAlign="middle";
break;
case"top":case"texttop":e.style[f]="";
e.style.verticalAlign="top";
break;
}}},convertTypeAttribute:function(d){var e=d.getAttribute("type");
if(e){if(!d.style.listStyleType){switch(e){case"1":d.style.listStyleType="decimal";
break;
case"a":d.style.listStyleType="lower-alpha";
break;
case"A":d.style.listStyleType="upper-alpha";
break;
case"i":d.style.listStyleType="lower-roman";
break;
case"I":d.style.listStyleType="upper-roman";
break;
case"disc":d.style.listStyleType="disc";
break;
case"circle":d.style.listStyleType="circle";
break;
case"square":d.style.listStyleType="square";
break;
}}}},convertBorderAttribute:function(e){var d=e.getAttribute("border");
if(d){if(!e.style.borderWidth){e.style.borderWidth=d+"px";
}if(!e.style.borderStyle){e.style.borderStyle="solid";
}}},convertCSSProperty:function(e,h,d){var k=e.style[d];
var l=k||e.getAttribute(h)||"";
if(d=="backgroundImage"){l=k.replace(/["']/g,"").slice(4,-1)||l;
}else{if(d=="width"||d=="height"){if(k&&!k.match("%")){l=parseInt(k);
}}else{if(d=="whiteSpace"){l="nowrap";
}else{if(h=="vspace"||h=="hspace"){var g=d.length;
for(var f=0;
f<g;
f++){if(f==0){k=e.style[d[f]];
l=parseInt(k);
}else{if(k!=e.style[d[f]]){k=false;
break;
}}}}}}}if(h.toLowerCase()=="bgcolor"){l=b.Utils._rgbToHex(l);
}if(l){e.setAttribute(h,l);
}else{e.removeAttribute(h);
}b.Utils.cleanStylePorperty(e,d);
},cleanStylePorperty:function(e,d){if(Object.prototype.toString.call(d)==="[object Array]"){for(var f=0,g=d.length;
f<g;
f++){e.style[d[f]]="";
}}else{e.style[d]="";
}if(!e.style.cssText){e.removeAttribute("style");
}},convertImgCssAlignProperty:function(d){var e=($telerik.isIE)?d.style.styleFloat:d.style.cssFloat;
if(e){d.setAttribute("align",e);
}else{var f=d.style.verticalAlign;
if(f){f=f.replace(/text-/i,"");
d.setAttribute("align",f);
}}},convertListStyleTypeStyle:function(d){var e=d.style.listStyleType;
var f=d.getAttribute("type");
if(e&&!f){switch(e){case"decimal":d.type="1";
break;
case"lower-alpha":d.type="a";
break;
case"upper-alpha":d.type="A";
break;
case"lower-roman":d.type="i";
break;
case"upper-roman":d.type="I";
break;
case"disc":d.type="disc";
break;
case"circle":d.type="circle";
break;
case"square":d.type="square";
break;
default:d.type=e;
break;
}d.style.listStyleType="";
}},stripHtmlHeadBodyTags:function(d){return d.replace(/^[\s\S]*<html[\s\S]+?<body[^>]*>([\s\S]*?)<\/body>[\s\S]*$/gi,"$1");
},removeNearBrElements:function(d){if(d){if(!b.Utils.isBlockElement(d)){return;
}var h;
if(d.previousSibling){h=d.previousSibling;
var g=h.nodeValue;
while(h&&(h.nodeValue=="\n"||$telerik.$.trim(g)==""||h.nodeName=="BR")){if(h.nodeName=="BR"){$telerik.$(h).remove();
break;
}h=h.previousSibling;
}}var e;
if(d.nextSibling){e=d.nextSibling;
var f=e.nodeValue;
while(e&&(e.nodeValue=="\n"||$telerik.$.trim(f)==""||e.nodeName=="BR")){if(e.nodeName=="BR"){$telerik.$(e).remove();
break;
}e=e.nextSibling;
}}}},ensureSingleEncodingUrl:function(i){var f=i;
var g=i.substring(0,i.indexOf("?"));
var h=i.substring(i.indexOf("?")+1);
try{g=decodeURI(g);
h=this.decodeQueryString(h);
}catch(d){}f=encodeURI(g)+"?"+this.encodeQueryString(h);
return f;
},encodeQueryString:function(d){return this.manipulateQueryString(d,encodeURIComponent);
},decodeQueryString:function(d){return this.manipulateQueryString(d,decodeURIComponent);
},manipulateQueryString:function(f,d){var e=this.splitQueryString(f);
a(e).each(function(g,h){a(h).each(function(i,k){h[i]=d.call(this,k);
});
});
return this.joinQueryArr(e);
},splitQueryString:function(d){var e=[];
e=d.split("&");
a(e).each(function(f,g){e[f]=g.split("=");
});
return e;
},joinQueryArr:function(d){var e=[];
a(d).each(function(f,g){e[f]=g.join("=");
});
return e.join("&");
}};
})(Telerik.Web.UI,Telerik.Web.UI.Editor,$telerik.$);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.CommandBase=function(d,c,a,b){this.isSafari=$telerik.isSafari;
this.isIE=$telerik.isIE;
this.isOpera=$telerik.isOpera;
this.isFirefox=$telerik.isFirefox;
this._title=d;
this._window=c;
this._isExecuted=false;
this._canUnexecute=(a!=false);
this._editor=b;
};
Telerik.Web.UI.Editor.CommandBase.prototype={get_argument:function(){return null;
},getState:function(a){return Telerik.Web.UI.Editor.CommandStates.Off;
},getValue:function(a){return null;
},set_window:function(a){this._window=a;
},get_window:function(){return this._window;
},get_title:function(){return this._title;
},set_title:function(a){this._title=a;
},set_canUnexecute:function(a){this._canUnexecute=a;
},get_canUnexecute:function(){return this._canUnexecute;
},get_editor:function(){if(Telerik.Web.UI.RadEditor.isInstanceOfType(this._editor)){return this._editor;
}else{return null;
}},set_editor:function(a){this._editor=a;
},get_editorContentArea:function(){var b=this.get_editor();
var a=(b)?b.get_contentArea():null;
return a;
},get_enableUndoRedo:function(){var a=this.get_editor();
if(a){return a.get_enableUndoRedo();
}else{return true;
}},execute:function(){this._isExecuted=false;
if(null==this.onExecute||null==this.get_window()){return false;
}try{if(this.get_enableUndoRedo()){if(!this.RestorePoint1){this.RestorePoint1=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}else{this.RestorePoint1.select();
}}return(this._isExecuted=this.onExecute());
}catch(a){}return false;
},onExecute:function(){if(this.isIE&&null!=this.OnExecuteIE){return this.OnExecuteIE();
}else{if(null!=window.getSelection&&null!=this.OnExecuteMoz){return this.OnExecuteMoz();
}}return false;
},unexecute:function(){try{if(this._canUnexecute&&this._isExecuted){this.RestorePoint1.restore();
}}catch(a){}}};
Telerik.Web.UI.Editor.CommandBase.registerClass("Telerik.Web.UI.Editor.CommandBase",null);
Telerik.Web.UI.Editor.PasteHtmlCommand=function(e,d,c,a,b){Telerik.Web.UI.Editor.PasteHtmlCommand.initializeBase(this,[(e||"Insert Html"),d,true,b]);
this.HtmlText=c;
this.SelectText=(true==a);
this.editor=b;
};
Telerik.Web.UI.Editor.PasteHtmlCommand.prototype={clone:function(){return new Telerik.Web.UI.Editor.PasteHtmlCommand(this.get_title(),this.get_window(),this.HtmlText,null,this.get_editor());
},OnExecuteMoz:function(){var a=new Telerik.Web.UI.Editor.Selection(this.get_window());
a.pasteHtml(this.HtmlText,this.SelectText);
return true;
},OnExecuteIE:function(){var d=this.get_editor();
var j=new Telerik.Web.UI.Editor.Selection(this.get_window());
if(!d){j.pasteHtml(this.HtmlText,this.SelectText);
return true;
}var c=d.get_contentArea();
var a="data-ieFixEmptyParagraphs";
var b="marked";
var h=/^\r?\n?\s*(<O:P|<\?xml:)/i;
var g=function(){var n=$telerik.$(c).find("P");
for(var m=0;
m<n.length;
m++){if(!h.test(Telerik.Web.UI.Editor.Utils.getOuterHtml(n[m]).trim())){n[m].setAttribute(a,b);
}}};
var l=function(){var n=d.getSelectedElement();
var m=Telerik.Web.UI.Editor.Utils.getElementParentByTag(n,"P");
if(m){m.removeAttribute(a);
}};
var i=function(){var o=$telerik.$(c).find("P");
for(var m=0;
m<o.length;
m++){if(!o[m].getAttribute(a)&&!h.test(Telerik.Web.UI.Editor.Utils.getOuterHtml(o[m]).trim())){var n=o[m].innerHTML;
n=n.replace(/&nbsp;/gm,"");
n=n.replace(/\n\r/gm,"");
n=n.replace(/\s*/gm,"");
if(n.trim()==""){Telerik.Web.UI.Editor.Utils.removeNode(o[m]);
}}}};
var k=function(){$telerik.$(c).find("P").removeAttr(a);
};
var f=function(n){var q=n;
if(n.trim()!=""){var m=d.get_document().createElement("DIV");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(m,n);
var p=$telerik.$(m).find("P");
for(var o=0;
o<p.length;
o++){if(!h.test(Telerik.Web.UI.Editor.Utils.getOuterHtml(p[o]).trim())){p[o].setAttribute(a,b);
}}q=m.innerHTML;
}return q;
}(this.HtmlText);
g();
l();
j.pasteHtml(f,this.SelectText);
i();
k();
if($telerik.isIE7||$telerik.isIE8){var e=c.innerHTML;
e=e.innerHTML.replace(new RegExp(a,"gm"),"");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(c,e);
}return true;
}};
Telerik.Web.UI.Editor.PasteHtmlCommand.registerClass("Telerik.Web.UI.Editor.PasteHtmlCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.GenericCommand=function(c,b,a){Telerik.Web.UI.Editor.GenericCommand.initializeBase(this,[c,b,true,a]);
if(this.get_enableUndoRedo()){this.RestorePoint1=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}};
Telerik.Web.UI.Editor.GenericCommand.prototype={execute:function(){if(this.get_enableUndoRedo()){if(null==this.RestorePoint2){this.RestorePoint2=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}else{this.RestorePoint2.restore();
}}return true;
},unexecute:function(){if(this.get_enableUndoRedo()){this.RestorePoint1.restore(true);
}}};
Telerik.Web.UI.Editor.GenericCommand.registerClass("Telerik.Web.UI.Editor.GenericCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.TextTypeCommand=function(c,b,a){Telerik.Web.UI.Editor.TextTypeCommand.initializeBase(this,[(c||"Typing"),b,a]);
};
Telerik.Web.UI.Editor.TextTypeCommand.prototype={update:function(){if(this.RestorePoint2){this.RestorePoint2.update();
}}};
Telerik.Web.UI.Editor.TextTypeCommand.registerClass("Telerik.Web.UI.Editor.TextTypeCommand",Telerik.Web.UI.Editor.GenericCommand);
Telerik.Web.UI.Editor.BrowserCommand=function(e,c,d,f,b){var a=true;
switch(this.CommandID){case"Copy":case"SelectAll":case"Print":a=false;
break;
}Telerik.Web.UI.Editor.BrowserCommand.initializeBase(this,[(e||d),c,a,b]);
this.CommandID=d;
this.Value=f;
};
Telerik.Web.UI.Editor.BrowserCommand.prototype={get_argument:function(){return this.Value;
},clone:function(){return new Telerik.Web.UI.Editor.BrowserCommand(this._title,this.get_window(),this.CommandID,this.Value);
},getState:function(d){try{d=d||this.get_window();
var c=d.document;
if(null==c){return Telerik.Web.UI.Editor.CommandStates.Disabled;
}var a=true;
if(!$telerik.isIE7||"Paste"!=this.CommandID){a=c.queryCommandEnabled(this.CommandID);
}if(!this.isOpera&&!a){if(!this.isSafari||!this.CommandID=="RealFontSize"){return Telerik.Web.UI.Editor.CommandStates.Disabled;
}}var e=null;
if(!$telerik.isIE7||"Paste"!=this.CommandID){e=c.queryCommandState(this.CommandID);
}return e?Telerik.Web.UI.Editor.CommandStates.On:Telerik.Web.UI.Editor.CommandStates.Off;
}catch(b){return Telerik.Web.UI.Editor.CommandStates.Off;
}},getValue:function(b){try{b=b||this.get_window();
return b.document.queryCommandValue(this.CommandID);
}catch(a){}return null;
},onExecute:function(){var f=this.get_window();
if(!f){return false;
}var b=f.document;
if("AbsolutePosition"==this.CommandID){b.execCommand("2D-Position",false,true);
}var g=true;
if(this.CommandID=="BackColor"&&(this.isOpera||this.isFirefox)){this.CommandID="HiliteColor";
g=false;
}if(this.CommandID=="FontSize"&&this.isSafari2){var d=parseInt(this.Value);
switch(d){case 1:this.Value="8pt";
break;
case 2:this.Value="10pt";
break;
case 3:this.Value="12pt";
break;
case 4:this.Value="14pt";
break;
case 5:this.Value="18pt";
break;
case 6:this.Value="24pt";
break;
case 7:this.Value="36pt";
break;
}}try{b.execCommand("UseCSS",false,(false!=g));
b.execCommand("styleWithCSS",false,(false==g));
}catch(a){}if(!this.isIE&&!this.Value&&(this.CommandID=="ForeColor"||this.CommandID=="BackColor"||this.CommandID=="HiliteColor")){this.removeColorMozilla(this.CommandID);
}var c=Telerik.Web.UI.Editor.Utils.execDocumentCommand(b,this.CommandID,this.Value);
if(this.CommandID!="Outdent"&&this.CommandID!="Indent"&&this.CommandID!="SelectAll"){Telerik.Web.UI.Editor.Utils.removeInvalidElementsInLists(b);
}if($telerik.isIE&&!$telerik.isIE9Mode){switch(this.CommandID){case"JustifyLeft":case"JustifyRight":case"JustifyNone":case"JustifyCenter":case"JustifyFull":this.ieFixAlignCommandsParagraphBraking();
break;
}}if($telerik.isFirefox&&(this.CommandID=="BackColor"||this.CommandID=="HiliteColor")&&this._editor.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){this.mozFixContentAreaBackColor();
}try{b.execCommand("UseCSS",false,true);
b.execCommand("styleWithCSS",false,false);
}catch(a){}return c;
},ieFixAlignCommandsParagraphBraking:function(){var a=this.get_editor();
var d=Telerik.Web.UI.Editor.Utils.getElementParentByTag(a.getSelectedElement(),"P");
if(d&&d.firstChild){var b=d.firstChild;
var c=b.innerHTML;
if(c.indexOf("</P>")!=-1&&c.indexOf("<P>")==-1){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(b,c.replace("</P>",""));
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(d,d.innerHTML+"</P>");
}}},mozFixContentAreaBackColor:function(){var b=this._editor.get_contentArea();
var a=b.style.backgroundColor;
if(a!=""){b.style.backgroundColor="";
var h=document.evaluate('.//text()[normalize-space(.) != ""]',b,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);
for(var c=0,d=h.snapshotLength;
c<d;
c++){var g=h.snapshotItem(c);
var f=document.createElement("span");
f.innerHTML=g.nodeValue;
f.style.backgroundColor=a;
var e=g.parentNode;
e.insertBefore(f,g);
e.removeChild(g);
}}},removeColorMozilla:function(a){var b=new Telerik.Web.UI.Editor.Selection();
b._window=this._window;
var c=b.getHtml();
if(c!=""){var g=b.GetParentElement();
if(g.innerHTML.trim()==c.trim()){this.removeNodeColor(g,a);
}var h=window.document.createElement("div");
h.innerHTML=c;
for(var d=0,e=h.childNodes.length;
d<e;
d++){var f=h.childNodes[d];
this.removeNodeColor(f,a);
}b.PasteHtml(h.innerHTML);
}},removeNodeColor:function(b,a){switch(a){case"ForeColor":if(b.style){b.style.color="";
}if(b.removeAttribute){b.removeAttribute("color");
}break;
case"BackColor":case"HiliteColor":if(b.style){b.style.backgroundColor="";
}if(b.removeAttribute){b.removeAttribute("bgColor");
}break;
}}};
Telerik.Web.UI.Editor.BrowserCommand.registerClass("Telerik.Web.UI.Editor.BrowserCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.StyleRuleCommand=function(f,d,c,g,b,a){Telerik.Web.UI.Editor.StyleRuleCommand.initializeBase(this,[(f||sCmdID),d,true,a]);
if(!c){var e=new Telerik.Web.UI.Editor.Selection(this._window);
c=e.getParentElement();
}this._nodeBookmark=new Telerik.Web.UI.Editor.SelectionBookmark(this._window,c);
this._styleAttributeName=g;
this._newValue=b;
};
Telerik.Web.UI.Editor.StyleRuleCommand.prototype={get_argument:function(){return this._newValue;
},clone:function(){return new Telerik.Web.UI.Editor.StyleRuleCommand(this._title,this._window,null,this._styleAttributeName,this._newValue);
},execute:function(){var a=this._nodeBookmark.select();
if(!a){return false;
}if(!this._isExecuted){this._oldValue=a.style[this._styleAttributeName];
}a.style[this._styleAttributeName]=this._newValue;
this._isExecuted=true;
return true;
},unexecute:function(){var a=this._nodeBookmark.select();
a.style[this._styleAttributeName]=this._oldValue;
}};
Telerik.Web.UI.Editor.StyleRuleCommand.registerClass("Telerik.Web.UI.Editor.StyleRuleCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.AttributeCommand=function(g,e,d,a,c,b){Telerik.Web.UI.Editor.AttributeCommand.initializeBase(this,[(g||sCmdID),e,true,b]);
if(!d){var f=new Telerik.Web.UI.Editor.Selection(this._window);
d=f.getParentElement();
}this._nodeBookmark=new Telerik.Web.UI.Editor.SelectionBookmark(this._window,d);
this._attribName=a;
this._newValue=c;
};
Telerik.Web.UI.Editor.AttributeCommand.prototype={get_argument:function(){return this._newValue;
},clone:function(){return new Telerik.Web.UI.Editor.AttributeCommand(this._title,this._window,null,this._attribName,this._newValue);
},execute:function(){var a=this._nodeBookmark.select();
if(!a){return false;
}if(!this._isExecuted){if(this._attribName=="style"){this._oldValue=a.style.cssText;
}else{this._oldValue=a.getAttribute(this._attribName);
}}if(this._attribName&&this._attribName.toLowerCase()=="name"&&document.all){a.name=this._newValue;
a.removeAttribute("name");
a.removeAttribute("NAME");
if($telerik.isIE9Mode&&(a.nodeName=="INPUT"||a.nodeName=="TEXTAREA")){a.removeAttribute("submitName");
a.setAttribute("name",this._newValue);
}}var b=this._newValue.trim();
if(""==b){a.removeAttribute(this._attribName,0);
if("className"==this._attribName){a.removeAttribute("class",0);
}}else{if(this._attribName=="style"){a.style.cssText=this._newValue;
}else{a[this._attribName]=this._newValue;
if(this._attribName.toLowerCase()=="nowrap"||this._attribName=="borderColor"){a.setAttribute(this._attribName,this._newValue);
}}}this._isExecuted=true;
return true;
},unexecute:function(){var a=this._nodeBookmark.select();
if(this._attribName=="style"){a.style.cssText=this._oldValue;
}else{a[this._attribName]=this._oldValue;
}}};
Telerik.Web.UI.Editor.AttributeCommand.registerClass("Telerik.Web.UI.Editor.AttributeCommand",Telerik.Web.UI.Editor.CommandBase);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
b.Editor.ClassNameCommand=function(f,d,e,c){b.Editor.ClassNameCommand.initializeBase(this,[(f||"Classname"),d,true,c]);
};
b.Editor.ClassNameCommand.prototype={getValue:function(c){c=c||this._window;
if($telerik.isIE){return this._getValueIE(c);
}else{return this._getValueMoz(c);
}},_getValueIE:function(d){var c=new b.Editor.Selection(d);
var e=c.getParentElement();
if(b.Editor.Utils.isEditorContentArea(e)){return"";
}else{return(""==e.className?"":e.className);
}},_getValueMoz:function(f){if(!f){return"";
}var e=f.getSelection();
if(!e){return"";
}if(e.rangeCount!=1){return"";
}var i=(e.focusNode.nodeType!=3?e.focusNode:e.focusNode.parentNode);
var d=(e.anchorNode.nodeType!=3?e.anchorNode:e.anchorNode.parentNode);
if(i!=d){return"";
}var h=new b.Editor.Selection(f);
var c="",g;
if(null!=h&&null!=(g=h.getParentElement())){c=g.className;
}return(""==c?"":c);
}};
b.Editor.ClassNameCommand.registerClass("Telerik.Web.UI.Editor.ClassNameCommand",b.Editor.CommandBase);
b.Editor.FormatBlockCommand=function(f,d,e,c){b.Editor.FormatBlockCommand.initializeBase(this,[(f||"Format Block"),d,true,c]);
this.FormatValue=(e)?e:"<p>";
this._editor=c;
};
b.Editor.FormatBlockCommand.prototype={get_argument:function(){try{return this.FormatValue.substring(1,this.FormatValue.length-1).toUpperCase();
}catch(c){}},clone:function(){return new b.Editor.FormatBlockCommand(this.Title,this._window,this.FormatValue,this._editor);
},getValue:function(d){try{d=d||this._window;
var e=d.document.queryCommandValue("FormatBlock");
if(!document.all){switch(e){case"x":case"":e="Normal";
break;
}}return e;
}catch(c){}return null;
},onExecute:function(){var k=this._window.document;
var w=this.FormatValue;
var c=this._editor;
var h=null;
if("<p>"==w.toLowerCase()&&!$telerik.isOpera){k.execCommand("FormatBlock",false,"Normal");
}var p=true;
var t=this._getTagName();
var s=new b.Editor.Selection(this._window);
var e=s.getHtml();
if(e){var q=b.Editor.CommandList._markEditorSelection(c);
var j=q.newElements;
var m=q.oldElements;
var n=Function.createDelegate(this,function(i,l){var B=i.parentNode;
var x;
if(!$telerik.isFireFox&&l&&B.tagName=="A"&&B.childNodes.length==1){x=k.createElement(i.tagName);
b.Editor.Utils.removeNode(i);
B.parentNode.insertBefore(x,B);
x.appendChild(B);
i=x;
B=i.parentNode;
}x=k.createElement(t);
var y=(l)?i.innerHTML:$telerik.getOuterHtml(i);
b.Editor.Utils.setElementInnerHtml(x,y);
B.replaceChild(x,i);
if(/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(B.tagName)&&true!=b.Editor.Utils.isEditorContentArea(B)){$telerik.mergeElementAttributes(B,x,false);
if(B.childNodes.length==1){b.Editor.Utils.removeNode(B);
}else{var A=B.parentNode;
var z;
if(!x.previousSibling){A.insertBefore(x,B);
}else{if(!x.nextSibling){z=B.nextSibling;
if(z){A.insertBefore(x,z);
}else{A.appendChild(x);
}}else{var C=B.cloneNode(false);
while(x.nextSibling){C.appendChild(x.nextSibling);
}z=B.nextSibling;
if(z){B.parentNode.insertBefore(x,z);
B.parentNode.insertBefore(C,z);
}else{B.parentNode.appendChild(x);
B.parentNode.appendChild(C);
}}}}}b.Editor.Utils.removeNonXhtmlCompliantParents(x);
h=x;
this._applyAttributes(x);
});
var f,g;
for(f=0,g=j.length;
f<g;
f++){n(j[f],true);
}for(f=0,g=m.length;
f<g;
f++){n(m[f],false);
}}else{p=k.execCommand("FormatBlock",false,"<"+t+">");
var u=k.createElement("DIV");
u.innerHTML=w+"</"+t+">";
var v=u.getElementsByTagName(t)[0];
var r=c.getSelectedElement();
if(r.tagName==v.tagName){$telerik.mergeElementAttributes(v,r);
}}Telerik.Web.UI.Editor.Utils.removeInvalidElementsInLists(k);
s=new b.Editor.Selection(this._window);
var d=s.getParentElement();
b.Editor.Utils.removeNearBrElements(d);
if(d&&d.tagName!=t){s.collapse(true);
s=new b.Editor.Selection(this._window);
d=s.getParentElement();
}if(e){if($telerik.isFirefox&&h){s=c.getSelection();
var o=s.getRange();
o.selectNodeContents(h);
o.setStart(o.endContainer,o.endOffset);
s.selectRange(o);
}else{b.Editor.Utils.selectElement(this._window,d);
s=new b.Editor.Selection(this._window);
s.collapse(false);
}}return p;
},_getTagName:function(){var c=this.FormatValue.replace(/.*?<([^\s]+)(\s|\/|>).*/i,"$1");
return c.toUpperCase();
},_applyAttributes:function(e){if(!e){return;
}var f=this.FormatValue;
var d=document.createElement("div");
d.innerHTML=f+"</"+this._getTagName()+">";
if(d.firstChild){var c=d.firstChild;
if(c.className){e.className=c.className;
}if(c.style.cssText){e.style.cssText=c.style.cssText;
}}}};
b.Editor.FormatBlockCommand.registerClass("Telerik.Web.UI.Editor.FormatBlockCommand",b.Editor.CommandBase);
b.Editor.InsertListCommand=function(h,g,f,c,e,d){b.Editor.InsertListCommand.initializeBase(this,[(h||"Insert List"),g,true,d]);
this._newLineModeBr=(f==true);
this._commandName=c;
this._listType=(c=="InsertOrderedList")?"OL":"UL";
this._listStyle=e;
this._document=this._window.document;
};
b.Editor.InsertListCommand.prototype={_insertList:function(){var k=b.Editor.Utils.execDocumentCommand(this._document,this._commandName);
var d=this.get_editor();
if(d){var c=d.get_html();
var j=/(<ul>\s*<\/ul>)|(<ol>\s*<\/ol>)/gi;
if(j.test(c)){var h=d.get_contentArea().getElementsByTagName("OL");
var m=d.get_contentArea().getElementsByTagName("UL");
var g=h.concat(m);
for(var e=g.length-1;
e>=0;
e--){this._removeEmptyLists(g[e]);
}}if($telerik.isFirefox&&/\s*<li>\s*<br\/?>\s*<\/li>\s*/mi.test(c)){var l=d.getSelectedElement();
if(l&&l.nodeName&&/ol|ul/i.test(l.nodeName)){for(var e=l.children.length-1;
e>=0;
e--){var f=l.children[e];
if(/\s*<br\/?>\s*/i.test(f.innerHTML)||f.nodeName!="LI"){l.removeChild(l.children[e]);
}}}}if($telerik.isSafari){this._splitWrappingParagraph();
this._fixWrappingFont();
}}this._fixContentAreaDivFirstUL();
return k;
},_removeEmptyLists:function(c){if(/^\s*$/.test(c.innerHTML)){c.parentElement.removeChild(c);
}},_fixWrappingFont:function(){var c=this.get_editor();
var e=c.getSelectedElement();
if(e){var d=b.Editor.Utils.getElementParentByTag(e,this._listType);
if(d){if(d.parentNode.nodeName=="FONT"){b.Editor.Utils.removeNode(d.parentNode);
c.selectElement(d);
c.getSelection().collapse(true);
}}}},_fixContentAreaDivFirstUL:function(){var c=this.get_editor();
if($telerik.isIE&&c.get_contentAreaMode()==b.EditorContentAreaMode.Div&&c.get_html()=="<P>&nbsp;</P>"){c.get_contentArea().innerHTML="";
c.setFocus();
}},_splitWrappingParagraph:function(){var e=this.get_editor(),f=e.getSelectedElement(),k=f;
while(k&&!b.Editor.Utils.isEditorContentArea(k)){if(k.tagName=="P"){var d=k.childNodes,h=d.length-1;
if(h==0){b.Editor.Utils.removeNode(k);
}else{var j=this._insertCloneAfter(k);
for(var g=h;
g>=0;
g--){var c=d[g],l=c.nodeName;
if(l=="UL"||l=="OL"){a(c).insertAfter(k);
j=this._insertCloneAfter(k);
}else{a(j).prepend(c);
}}k.parentNode.removeChild(k);
}e.selectElement(f);
break;
}k=k.parentNode;
}},_insertCloneAfter:function(d){var c=d.cloneNode(false);
a(c).insertAfter(d);
return c;
},OnExecuteMoz:function(){var q=new b.Editor.Selection(this._window),h=q.getHtml(),r=q.getParentElement(),n=(r&&r.previousSibling)?r.previousSibling.nodeName:"";
var d=this.get_editor();
var c=d.get_document();
if(h==""&&(n=="UL"||n=="OL")){var k="_telerikInsertList";
var j='<span id="'+k+'"></span>';
var i;
q.pasteHtml(j,true);
var e=r.innerHTML;
var m=".*<br/?>s*"+j;
var p=new RegExp(m,"gi");
if(e.match(p)){i=c.getElementById(k);
i.parentNode.removeChild(i);
var o=q.getRange();
var g="_telerik_insertList_itemId";
var l="<"+this._listType+'><li id="'+g+'"></li></'+this._listType+">";
q.pasteHtml(l,true);
var f=c.getElementById(g);
f.removeAttribute("id");
o.setStart(f,0);
o.setEnd(f,0);
d.getSelection().selectRange(o);
return true;
}else{i=c.getElementById(k);
i.parentNode.removeChild(i);
}}else{if(h!=""&&(r.nodeName=="OL"||r.nodeName=="UL")){if(this._proceedListCommand(d,q,r,h)){return true;
}}}return this._insertList();
},_proceedListCommand:function(d,o,p,f){var c=d.get_document();
var n=c.createElement(p.nodeName);
if($telerik.isFirefox&&/\s*^<(?:o|u)l[^>]*?>/i.test(f)&&/<\/(?:o|u)l[^>]*?>\s*$/i.test(f)){f=f.replace(/\s*^<(?:o|u)l[^>]*?>/i,"");
f=f.replace(/<\/(?:o|u)l[^>]*?>\s*$/i,"");
}Telerik.Web.UI.Editor.Utils.setElementInnerHtml(n,f);
if(n.children.length==p.children.length){if(p.nodeName!=this._listType){var l=c.createElement(this._listType);
while(p.children.length>0){l.appendChild(p.children[0]);
}var h="_telerik_insertedList_id";
if(l.id&&l.id!=""){h=l.id;
}else{l.id=h;
}p.parentElement.removeChild(p);
o.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(l),false);
var j=c.getElementById(h);
j.id="";
j.removeAttribute("id");
d.selectElement(j);
return true;
}var e=d.get_newLineMode();
var m="";
for(var g=0;
g<p.children.length;
g++){var k=p.children[g];
if(e==Telerik.Web.UI.EditorNewLineModes.Br){if(g==p.children.length-1&&p.nextElementSibling&&Telerik.Web.UI.Editor.Utils.isBlockElement(p.nextElementSibling)){m=m+k.innerHTML;
}else{m=m+k.innerHTML+"<br/>";
}}else{if(e==Telerik.Web.UI.EditorNewLineModes.Div){m=m+"<div>"+k.innerHTML+"</div>";
}else{if(e==Telerik.Web.UI.EditorNewLineModes.P){m=m+"<p>"+k.innerHTML+"</p>";
}}}}if($telerik.isIE&&!$telerik.isIE9Mode){p.parentElement.removeChild(p);
o.pasteHtml(m,false);
}else{p.innerHTML="";
$telerik.$(p).replaceWith(m);
}return true;
}},OnExecuteIE:function(){var O=new b.Editor.Selection(this._window),o=O.getHtml(),h=this.get_editor(),P=O.getParentElement(),K=(P&&P.previousSibling)?P.previousSibling.nodeName:"",Q=(P)?P.nodeName:"",F,c="",L,E,n=b.Editor.Utils.getElementParentByTag,e=true,d=null;
L=O.getRange();
var g=L.duplicate();
if(K=="UL"||K=="OL"){var y="_telerikInsertList";
var x='<span id="'+y+'"></span>';
var f=h.get_document();
var G,M,w,k;
if(o==""){O.pasteHtml(x,true);
var q=P.innerHTML;
G=".*<br/?>s*"+x;
M=new RegExp(G,"gi");
if(q.match(M)){var z="<"+this._listType+"><li></li></"+this._listType+">";
w=f.getElementById(y);
w.parentNode.removeChild(w);
this.pasteNewList(O,P,"");
}else{w=f.getElementById(y);
w.parentNode.removeChild(w);
k=P.innerHTML;
P.parentNode.removeChild(P);
this.pasteNewList(O,P,k);
}}else{k=P.innerHTML;
P.parentNode.removeChild(P);
this.pasteNewList(O,P,k);
}return true;
}if(Q=="P"||(Q=="DIV"&&!b.Editor.Utils.isEditorContentArea(P))){L=h.getSelection().getRange();
b.Editor.Utils.selectElement(this._window,P);
c=O.getHtml();
if(c==o){var S=new RegExp("^\\s*<"+Q+"[^>]*>","i"),m=new RegExp("</"+Q+">s*$","i");
P.parentNode.removeChild(P);
c=c.replace(S,"");
c=c.replace(m,"");
}else{O.selectRange(L);
c="";
}}if("OL"==P.tagName||"UL"==P.tagName||n(P,"UL")||n(P,"OL")||(!c&&o.match(/<P\s*>|<DIV\s*>/i))){if($telerik.isIE9Mode&&/OL|UL/i.test(P.tagName)){if(this._proceedListCommand(h,O,P,o)){return true;
}}this._insertList();
O=new b.Editor.Selection(this._window);
o=O.getHtml();
F=O.getParentElement();
if(F.tagName=="P"){o=F.outerHTML;
}var R=this._document.createElement("span");
R.innerHTML=o;
if(R.getElementsByTagName("P").length>0){var H=new RegExp("<p>([\\s\\S]+?)</p>","gi");
if(h.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Br){o=o.replace(H,"$1<br/>");
}else{if(h.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Div){o=o.replace(H,"<div>$1</div>");
}}if(F.tagName=="P"){F.innerHTML="";
}O.pasteHtml(o,true);
O=new b.Editor.Selection(this._window);
P=O.getParentElement();
if(P.tagName=="P"){E=P.parentNode;
while(P.childNodes.length>0){E.insertBefore(P.childNodes[0],P);
}E.removeChild(P);
g.move("character",-1);
g.select();
}}return true;
}o=c||((O.getBrowserSelection().type=="None")?"":O.getHtml());
if(P.tagName=="P"&&o.match(/^\s*<p[^>]*>/i)&&o.match(/<\/p>\s*$/i)){var T=o.replace(/^\s*<p[^>]*>/i,"");
T=T.replace(/<\/p>\s*$/i,"");
if(P.innerHTML==T){o=T;
}}if(o.toLowerCase().trim()=="<p>&nbsp;</p>"){return this._insertList();
}else{if(!o){L=O.getRange();
d=L.getBookmark();
E=L.parentElement();
if(!E.currentStyle.hasLayout){while(!E.currentStyle.hasLayout&&E.currentStyle.display!="block"){E=E.parentNode;
}}if(!E.currentStyle.hasLayout){o=(E.tagName=="P")?E.innerHTML:E.outerHTML;
e=false;
h.selectElement(E);
}else{L.pasteHTML('<span id="_telerik_reInsertList_mark">&nbsp;</span>');
var f=h.get_document();
var v=f.getElementById("_telerik_reInsertList_mark");
var J=v.previousSibling;
var D=[];
while(J&&J.nodeName!="BR"){if(J.nodeType==3){o=J.nodeValue+o;
D.push(J);
}else{if(J.currentStyle.display!="block"){o=J.outerHTML+o;
D.push(J);
}else{J=null;
}}if(J!=null){J=J.previousSibling;
}}var B=v.nextSibling;
if(B&&B.nodeName=="BR"){D.push(B);
}while(B&&B.nodeName!="BR"){if(B.nodeType==3){o+=B.nodeValue;
D.push(B);
}else{if(B.currentStyle.display!="block"){o+=B.outerHTML;
D.push(B);
}else{B=null;
}}if(B!=null){B=B.nextSibling;
}}for(var p=0,s=D.length;
p<s;
p++){var C=D[p];
C.parentNode.removeChild(C);
}v.parentNode.removeChild(v);
}o=o.replace(/^\s*<br\s*\/?\s*>/i,"");
}}o=this.getLiElementsHtml(o,e);
var r="_telerik_insertedList_id";
o="<"+this._listType+" id='"+r+"'>"+o+"</"+this._listType+">";
O=h.getSelection();
if(!d){O.pasteHtml("");
}O.pasteHtml(o,true);
if(d){L=O.getRange();
L.moveToBookmark(d);
L.collapse();
L.select();
this.removePreviousEmptyNode(L);
}var j=h.get_document().getElementById(r);
if(j){j.id="";
j.removeAttribute("id");
var N=/^\s*<[a-z]+[^>]*?><\/[a-z]+>\s*$/i;
var I=j.previousSibling;
if(I&&((I.nodeType==3&&/^\s+$/.test(I.nodeValue))||N.test(b.Editor.Utils.getOuterHtml(I)))){$telerik.$(I).remove();
}var A=j.nextSibling;
if(A&&A.tagName=="BR"){A.parentNode.removeChild(A);
}else{if(A&&A.nodeType==3&&/^\s+$/.test(A.nodeValue)){$telerik.$(A).remove();
}}A=j.nextSibling;
if(A&&A.innerHTML==""&&N.test(b.Editor.Utils.getOuterHtml(A))){$telerik.$(A).remove();
}if(typeof(g)!="undefined"){var u=j.getElementsByTagName("LI"),t=u.length;
if(t>0){g.moveToElementText(u[t-1]);
g.collapse(false);
g.select();
}return true;
}}O.collapse();
return true;
},pasteNewList:function(e,f,c){var d="<"+this._listType+"><li>"+c+"</li></"+this._listType+">";
e.pasteHtml(d,true);
range=e.getRange();
range.moveStart("character",(d.length/2)+c.length);
range.collapse(true);
range.select();
},removePreviousEmptyNode:function(){var c=this.get_editor();
var f=c.getSelectedElement();
var d=b.Editor.Utils.getElementParentByTag(f,this._listType);
if(!d){while(f.currentStyle.display!="block"&&!b.Editor.Utils.isEditorContentArea(f)){f=f.parentNode;
}var g=f.previousSibling;
if(g.nodeType==3&&g.nodeValue.match(/^\s*$/)){g.parentNode.removeChild(g);
g=f.previousSibling;
c.selectElement(g);
c.getSelection().collapse(true);
}var e=g.nodeName;
if(e=="OL"||e=="UL"){d=g;
c.selectElement(d);
c.getSelection().collapse(true);
}}if(d){var g=d.previousSibling;
if(g&&g.nodeType==3&&g.nodeValue.match(/^\s*$/)){g.parentNode.removeChild(g);
}}},removeFirstParagraph:function(e){var f=e+"";
if(f.match(/^\s*<P/i)){var c=document.createElement("DIV");
c.innerHTML=f.replace(/^\s\s*/,"");
var d=c.firstChild;
if(d&&d.tagName=="P"){b.Editor.Utils.removeNode(d);
}f=c.innerHTML;
}return f;
},getLiElementsHtml:function(e,c){var j="",h,f,g,d=this._document.createElement("div");
e=$telerik.$.trim(e||"");
if(e.match(/<br[^>]*>/ig)&&c!=false){b.Editor.Utils.setElementInnerHtml(d,e);
$telerik.$("br",d).each(function(k,i){i.setAttribute("re_br_"+k,k);
});
e=d.innerHTML;
$telerik.$("br",d).each(function(n,m){var k="<BR>",i,p,l,o=m.parentNode;
while(o&&o!==d){i=o.cloneNode();
p=$telerik.getOuterHtml(i).match(/<[^>]*>/i);
k="</"+i.tagName.toLowerCase()+">"+k+p;
o=o.parentNode;
}if(!m.nextSibling){k="";
}l=new RegExp("<br[^>]*re_br_"+n+"=[^>]*>","ig");
e=e.replace(l,k);
});
h=e.split("<BR>");
for(f=0,g=h.length;
f<g;
f++){j+="<li>"+h[f]+"</li>";
}}else{j+="<li>"+e+"</li>";
}return j;
}};
b.Editor.InsertListCommand.registerClass("Telerik.Web.UI.Editor.InsertListCommand",b.Editor.CommandBase);
b.Editor.InsertLinkCommand=function(e,d,f,c){b.Editor.InsertLinkCommand.initializeBase(this,[e,d,true,c]);
this.utils=b.Editor.Utils;
this.linkProperties={href:f.getAttribute("href"),target:f.target,title:f.title,className:f.className,name:f.name,innerHTML:f.childNodes.length==1&&this.utils.isTextNode(f.firstChild)?f.innerHTML:""};
};
b.Editor.InsertLinkCommand.prototype={onExecute:function(){var c=this.traverseFragments();
if(c.length){return this.insertLinkByFragments(c);
}else{return this.insertSingleLink();
}},insertLinkByFragments:function(d){for(var e=0;
e<d.length;
e++){var c=d[e];
var g=c.getParent();
var h=this.utils.isTag(g,"a");
var f=h?this.applyLinkProperties(g):this.createLink();
if(!h){c.insertBeforeFirst(f);
if(this.linkProperties.innerHTML){c.remove();
}else{c.appendTo(f);
}}if(!this.stripIfEmpty(f)){this.raiseDomChangeEvent(f);
}}return true;
},insertSingleLink:function(){var d=Telerik.Web.UI.Editor.DomRange.toDomRange(this.get_editor().getSelection().getRange());
d.collapse(true);
var c=this.createLink();
d.insertNode(c);
this.raiseDomChangeEvent(c);
},createLink:function(){var c=this.get_window().document;
var d=c.createElement("a");
return this.applyLinkProperties(d);
},applyLinkProperties:function(c){var e=this.linkProperties;
for(var d in e){this._applyDomProperty(c,d,e[d]);
}return c;
},raiseDomChangeEvent:function(f){var e=this.get_editor();
var d=this.get_title();
var c=new b.EditorCommandEventArgs(d,null,f);
e._executeCommandEvent("domChange",d,c);
},_applyDomProperty:function(d,e,f){if(f){d[e]=f;
}else{var c=this.resolveAttributeName(e);
if(c){d.removeAttribute(c);
}}},resolveAttributeName:function(c){return c=="className"?"class":c=="innerHTML"?null:c;
},stripIfEmpty:function(c){c.normalize();
if(this.utils.isWhitespaceNode(c)){c.parentNode.removeChild(c);
return true;
}else{if(c.innerHTML.toLowerCase()=="<br>"){this.utils.removeNode(c);
return true;
}}return false;
},traverseFragments:function(){var c=Telerik.Web.UI.Editor.DomRange.toDomRange(this.get_editor().getSelection().getRange());
var e=new Telerik.Web.UI.Editor.RangeFragmentsTraverser(c);
var d=$telerik.isIE6||$telerik.isIE7||$telerik.isIE8||$telerik.isIE9?b.Editor.FragmentsCondition.inlineNotLinkForIE8:b.Editor.FragmentsCondition.inlineNotLink;
e.traverseFragments(d);
return e.traversedFragments;
}};
b.Editor.InsertLinkCommand.registerClass("Telerik.Web.UI.Editor.InsertLinkCommand",b.Editor.CommandBase);
b.Editor.ieFontCommandFix=function(c){this.editor=c;
this.fixCellText=$telerik.$();
};
b.Editor.ieFontCommandFix.prototype={applyFix:function(){if(this.shouldApplyFix()){this._fix();
}},_fix:function(){$telerik.$(this.editor.getSelectedElement()).find("td").each($telerik.$.proxy(function(c,d){if(b.Editor.Utils.isNodeEmpty(d)){var e=$telerik.$(document.createTextNode("_"));
$telerik.$(d).prepend(e);
this.fixCellText=this.fixCellText.add(e);
}},this));
},shouldApplyFix:function(){var c=this.editor.getSelectedElement();
return $telerik.isIE&&c&&c.tagName&&/^(?:tbody|tr)$/i.test(c.tagName);
},cleanUp:function(){if(!this.fixCellText){return;
}var c=this.fixCellText.parent();
this.fixCellText.remove();
c.filter(":empty").html("&nbsp;").parent().contents().slice(1).remove();
delete this.fixCellText;
}};
b.Editor.FormatSetsCommand=function(f,e,d,c){b.Editor.FormatSetsCommand.initializeBase(this,[(f||"Format Sets"),e,true,c]);
this._formatSets;
this._selectedElement;
this._formatSet=d;
};
b.Editor.FormatSetsCommand.prototype={onExecute:function(){var c=this.get_formatSet();
if(c){if(this._isInlineFormatSet(c)){return this._onExecuteInlineFormatSet();
}else{if(this._isBlockFormatSet(c)){return this._onExecuteBlockFormatSet();
}else{return this._onExecuteElementFormatSet();
}}}return false;
},_isInlineFormatSet:function(c){return !c[0];
},_isBlockFormatSet:function(c){return c[0]&&a.inArray(c[0].toLowerCase(),b.Editor.formatSetBlockElements)!=-1;
},_onExecuteInlineFormatSet:function(){var c=new Telerik.Web.UI.EditorCommandEventArgs("",null,"_RE_TELERIK_FORMATSETS"),d=this.get_editor(),f=this,e=this.get_formatSet();
c.addToUndoRedo=false;
d.fire("ApplyClass",c);
a("._RE_TELERIK_FORMATSETS",d.get_document()).each(function(h,g){g.className="";
f._applyAttributes(g,e[3]);
});
return true;
},_onExecuteBlockFormatSet:function(){var c=this.get_formatBlockCommand();
this.get_editor().executeCommand(c);
return true;
},get_formatBlockCommand:function(){var d=this.get_editor();
var c=new b.Editor.FormatBlockCommand("",d.get_contentWindow(),this.get_formatSetElementString(),d);
c.set_canUnexecute(false);
return c;
},get_formatSetElementString:function(){var c=this.get_formatSet(),d="";
if(c&&c[0]){d+="<"+c[0]+" "+this.get_formatSetAttributesString()+">";
}return d;
},get_formatSetAttributesString:function(){var e="",d=this.get_formatSet()[3];
if(d){for(var f=0,g=d.length;
f<g;
f++){var c=d[f];
e+=c.Name+'="'+c.Value+'" ';
}}return e;
},_onExecuteElementFormatSet:function(){var d=this._getElementToModify();
if(d){var c=this.get_formatSet()[3];
if(c){this._applyAttributes(d,c);
}}},_getElementToModify:function(){var d=this.get_selectedElement(),c=null,e=this.get_formatSet()[0];
if(e){while(d&&!b.Editor.Utils.isEditorContentArea(d)){if(e.toUpperCase()==d.tagName){c=d;
break;
}d=d.parentNode;
}}return c;
},_applyAttributes:function(d,c){for(var e=0,f=c.length;
e<f;
e++){this._applyAttribute(d,c[e]);
}},_applyAttribute:function(e,c){if(c&&c.Name){var d=c.Name.toLowerCase();
if(d=="class"){e.className=c.Value;
}else{if(d=="style"){e.style.cssText=c.Value;
}else{e.setAttribute(c.Name,c.Value,2);
}}}},getValue:function(d){var c=this.get_editor(),e=(c)?c.getSelectedElement():null,f={commandText:"",selectedElement:null};
if(e&&e.nodeType==3){e=e.parentNode;
}if(!(e&&b.Editor.Utils.isEditorContentArea(e))){f={commandText:this._getFormatSetTextByElement(e),selectedElement:e};
}return f;
},_getFormatSetTextByElement:function(c){var e=this.get_formatSets();
for(var f=0,g=e.length;
f<g;
f++){var d=e[f];
if(this._formatSetMatchesElement(d,c)){return d[1];
}}return"";
},_formatSetMatchesElement:function(e,c){var f=e[0],d=c&&c.tagName||"";
if(!f||d.toLowerCase()==f.toLowerCase()){return this._attributesMatch(e[3],c);
}return false;
},_attributesMatch:function(f,e){if(e&&e.getAttribute&&f.length){for(var g=0,h=f.length;
g<h;
g++){var c=f[g],d=c.Name;
if(d&&d.toLowerCase()=="style"){if(!this._ElementCssTextIsEqualToString(e,c.Value)){return false;
}}else{if(!d||e.getAttribute(d)!=c.Value){return false;
}}}return true;
}else{return false;
}},_ElementCssTextIsEqualToString:function(d,c){var e=false;
if(d&&d.style&&c){var f=d.ownerDocument.createElement("div");
f.style.cssText=c;
e=d.style.cssText==f.style.cssText;
}return e;
},get_formatSets:function(){if(!this._formatSets){var c=this.get_editor();
return(c)?c.get_formatSets():[];
}return this._formatSets;
},set_formatSets:function(c){this._formatSets=c;
},get_selectedElement:function(){if(!this._selectedElement){var c=this.get_editor();
this._selectedElement=(c)?c.getSelectedElement():null;
}return this._selectedElement;
},set_selectedElement:function(c){this._selectedElement=c;
},get_formatSet:function(){return this._formatSet;
},set_formatSet:function(c){this._formatSet=c;
}};
b.Editor.FormatSetsCommand.registerClass("Telerik.Web.UI.Editor.FormatSetsCommand",b.Editor.CommandBase);
b.Editor.AlignCommand=function(f,d,e,g,c){b.Editor.AlignCommand.initializeBase(this,[(f||e),d,e,true,c]);
this.utils=Telerik.Web.UI.Editor.Utils;
};
b.Editor.AlignCommand.prototype={getState:function(g){g=g||this.get_window();
var e=g.document;
if($telerik.isFirefox){var c=this.get_alignment();
var i=e.getSelection();
if(i&&i.getRangeAt){try{var h=i.getRangeAt(0).commonAncestorContainer;
var d=this.utils.getFirstBlockElementUp(h);
state=d&&d.style.textAlign==c;
}catch(f){state=false;
}}else{state=false;
}return state?Telerik.Web.UI.Editor.CommandStates.On:Telerik.Web.UI.Editor.CommandStates.Off;
}else{return b.Editor.AlignCommand.callBaseMethod(this,"getState",[g]);
}},get_argument:function(){return"";
},getValue:function(){return"";
},onExecute:function(){var e=this.get_window();
if(!e){return false;
}var c=e.document;
if($telerik.isFirefox){var g;
try{return this.onExecuteFirefox(c);
}catch(d){var f=this.getSelectedParentElement(c);
g=document.createElement("br");
f.insertBefore(g,f.firstChild);
return c.execCommand(this.CommandID,false,value);
}finally{if(g){g.parentNode.removeChild(g);
}}}else{if(this.CommandID=="JustifyNone"&&!$telerik.isIE){return this.applyCustomJustifyNone(c);
}else{return b.Editor.AlignCommand.callBaseMethod(this,"onExecute");
}}},onExecuteFirefox:function(d){var e=this.utils.getSelectedParentElement(d);
if(this.utils.checkForElement(e,/^(?:table|tr|td)$/i)){this.firefoxFirstChildAlign(d,e);
}else{if(this.utils.isBlockElement(e)){this.applyMultiCustomAlign(d);
}else{var c=this.utils.getFirstBlockElementUp(e);
if(this.utils.isEditorContentArea(c)){this.applyMultiCustomAlign(d);
}else{this.applyCustomAlign(c);
}}}return true;
},applyMultiCustomAlign:function(c){var g=c.getSelection().getRangeAt(0);
var h=g.startContainer,i=g.startOffset;
var e=g.endContainer,f=g.endOffset;
var d=g.cloneRange();
this.alignSelectedContent(g,a.proxy(function(j){if(j.nodeType==3||j.tagName.toLowerCase()=="img"){if(this.utils.isTextNodeEmpty(j)){return;
}var k=this.utils.getFirstBlockElementUp(j);
if(this.utils.isEditorContentArea(k)){k=this.wrapInlineContent(this.getNeighborInlineContent(j));
if(h==j){d.setStart(j,i);
}if(e==j){d.setEnd(j,f);
}this._editor.getSelection().selectRange(d);
}j=k;
}if(this.isSuitableToAlign(j)){this.applyCustomAlign(j);
}},this));
},applyCustomJustifyNone:function(c){var d=c.getSelection().getRangeAt(0);
this.alignSelectedContent(d,a.proxy(function(e){if(e.nodeType==3&&this.utils.isTextNodeEmpty(e)){return;
}e=this.utils.getFirstBlockElementUp(e);
if(this.isSuitableToAlign(e)){this.applyCustomAlignNone(e);
}},this));
return true;
},alignSelectedContent:function(h,c){var g=this.utils.isEditorContentArea(h.commonAncestorContainer);
if(h.commonAncestorContainer==h.startContainer&&h.commonAncestorContainer==h.endContainer&&!g){c(h.commonAncestorContainer);
return;
}var i=Infinity,f=-1;
var d=h.commonAncestorContainer;
var e=a(d).contents();
if(!g){e=e.filter(function(l,m){var k=a.contains(m,h.startContainer)||(m==h.startContainer);
var j=a.contains(m,h.endContainer)||(m==h.endContainer);
if(k&&i==Infinity){i=l;
}if(!k&&j&&i!=Infinity&&f==-1){f=l;
}return k||(i<l&&(f==-1||l<=f))||j;
});
}e.each(a.proxy(function(m,n){var k=a.contains(n,h.startContainer);
var j=a.contains(n,h.endContainer);
var l=h.cloneRange();
l.selectNodeContents(n);
if(n.nodeType==1&&(k||j)){if(k){l.setStart(h.startContainer,h.startOffset);
if(!j&&n.childNodes.length){l.setEnd(n.childNodes[n.childNodes.length-1],0);
}}if(j){if(!k&&n.childNodes.length){l.setStart(n.childNodes[0],0);
}l.setEnd(h.endContainer,h.endOffset);
}this.alignSelectedContent(l,c);
}else{if(this.rangeIntercept(l,h)){c(n);
}}},this));
},rangeIntercept:function(c,d){return !((c.compareBoundaryPoints(Range.START_TO_START,d)==-1&&c.compareBoundaryPoints(Range.START_TO_END,d)==-1)||(c.compareBoundaryPoints(Range.END_TO_START,d)==1&&c.compareBoundaryPoints(Range.END_TO_END,d)==1));
},isSuitableToAlign:function(c){return c.nodeType==3&&this.utils.isEditorContentArea(c.parentNode)||c.nodeType==1&&this.utils.checkForElement(c,/^(?:p|div|h[1-6]|form|fieldset|td|li|dl|blockquote|address|hr)$/i)&&!this.utils.isEditorContentArea(c);
},applyCustomAlign:function(d){var c=this.get_alignment();
if(d.nodeType==3){d=this.wrapInlineContent(d);
}d.style.textAlign=c;
},applyCustomAlignNone:function(c){if($telerik.isSafari||$telerik.isFirefox){this.utils.cleanStylePorperty(c,"textAlign");
}c.removeAttribute("align");
},wrapInlineContent:function(c){var d=a(c);
return d.wrapAll("<div></div>").parent()[0];
},getNeighborInlineContent:function(g){var e=a(g);
var d=e.parentsUntil(this.utils.getFirstBlockElementUp(g));
var i=d.length?d.last():e;
var c=a(i);
var j=i[0];
var f=j;
while(f.previousSibling&&!this.utils.isBlockElementOrNewLine(f.previousSibling)){c=c.add(f.previousSibling);
f=f.previousSibling;
}var h=j;
while(h.nextSibling&&!this.utils.isBlockElement(h.nextSibling)){c=c.add(h.nextSibling);
h=h.nextSibling;
if(this.utils.checkForElement(h,/^br$/i)){break;
}}return c;
},firefoxFirstChildAlign:function(d,g,i){var c=this.utils.isEditorContentArea(g)?g:g.parentNode;
if(this.utils.isEditorContentArea(c)&&this.utils.isContentOneBlockElementOnly(c)){c.appendChild(d.createTextNode(" "));
}var h;
if(this.needsFirefoxEditableWorkaround(c,g)){h=d.createElement("br");
c.insertBefore(h,c.firstChild);
}try{return this.finallyExecuteAlignCommand(d,this.CommandID);
}catch(f){if(!i){this.firefoxFirstChildAlign(d,this.CommandID,g,true);
}}finally{this.removeExtraContent(h);
}},finallyExecuteAlignCommand:function(d,c){return d.execCommand(c,false,null);
},needsFirefoxEditableWorkaround:function(c,d){return c==d||!this.utils.checkForElement(c,/^(?:body|tr|thead|tbody|td)$/i);
},removeExtraContent:function(c){if(c){if(c.parentNode.getAttribute("_moz_dirty")!=null){c=c.parentNode;
}c.parentNode.removeChild(c);
}},get_alignment:function(){return this.CommandID.toLowerCase().replace("justify","").replace("full","justify").replace("none","");
}};
b.Editor.AlignCommand.registerClass("Telerik.Web.UI.Editor.AlignCommand",b.Editor.BrowserCommand);
b.Editor.FormatPainterCommand=function(f,e,d,c){b.Editor.FormatPainterCommand.initializeBase(this,[(f||"Format Painter"),e,true,c]);
this._currentFormatting;
this._formatElements=["B","STRONG","U","I","STRIKE","EM","H1","H2","H3","H4","H5","H6","SUP","SUB"];
this._cssProperties=["color","font-family","font-size","font-style","font-variant","font-weight","background-color","background-image","background-position","background-repeat","background-attachment"];
};
b.Editor.FormatPainterCommand.prototype={onExecute:function(){if(this.get_currentFormatting()){this.applyFormatting();
this.get_editor().getSelection().collapse(false);
}return true;
},applyFormatting:function(){this.executeApplyClass();
this.formatTemporaryDecoratedElements();
},executeApplyClass:function(){var d=this.get_editor();
if(d){var c=new Telerik.Web.UI.EditorCommandEventArgs("",null,"_RE_TELERIK_FORMATPAINTER");
c.addToUndoRedo=false;
d.fire("ApplyClass",c);
}},formatTemporaryDecoratedElements:function(){var e=this.get_editor(),d=this.get_currentFormatting(),f=Function.createDelegate(this,this.setCssText),c=Function.createDelegate(this,this.addFormatElements),g=e.get_document().createElement("span");
g.style.cssText=d.cssText;
e.get_contentArea().appendChild(g);
a("._RE_TELERIK_FORMATPAINTER",e.get_document()).each(function(j,h){a(h).removeClass();
if(d.cssText){f(h,g);
}c(h);
var k=h.tagName;
if(k=="FONT"||k=="SPAN"){if(h.style.cssText==""&&a(h).attr("class")==""){b.Editor.Utils.removeNode(h);
}}var i=h.style.fontWeight;
});
a(g).remove();
},setCssText:function(e,j){var d="",h=this._cssProperties.length;
for(var g=0;
g<h;
g++){var c=this._cssProperties[g];
var k=this.getComputedStyle(j,c);
var f=this.getComputedStyle(e,c);
if(f!=k){if(!this.skipFontWeight(c,k)&&!this.skipFontSyleItalic(c,k)){if(c=="font-weight"){k=this.getFontWeightValue(k);
}d+=";"+c+":"+k+";";
}}}a(e).css("cssText",d.replace(/^;/,"").replace(/;$/,""));
},skipFontWeight:function(c,d){return c=="font-weight"&&(d==700||d=="bold")&&this.currentformattingContainsBoldElements();
},skipFontSyleItalic:function(c,d){return c=="font-style"&&d=="italic"&&this.currentformattingContainsItalicElements();
},currentformattingContainsBoldElements:function(){var c=["B","STRONG","H1","H2","H3","H4","H5","H6"],d=this.get_currentFormatting().formatElements,f=d.length;
for(var e=0;
e<f;
e++){if(a.inArray(d[e],c)!=-1){return true;
}}return false;
},currentformattingContainsItalicElements:function(){var e=["I","EM"],c=this.get_currentFormatting().formatElements;
for(var d=0,f=c.length;
d<f;
d++){if(a.inArray(c[d],e)!=-1){return true;
}}return false;
},getFontWeightValue:function(d){var c=d;
switch(d){case"700":c="bold";
break;
case"400":c="normal";
break;
}return c;
},setClassName:function(d){var c=this.get_currentFormatting();
a(d).addClass(c.className);
},addFormatElements:function(e,f){var d=this.get_editor().get_document(),c=this.get_currentFormatting(),f=c.formatElements;
for(var g=0,h=f.length;
g<h;
g++){var j=d.createElement(f[g]),k=e.parentNode;
k.insertBefore(j,e);
j.appendChild(e);
e=j;
}},get_formatting:function(c){var d={formatElements:[],cssText:"",className:""};
if(c){this.set_formatElements(c,d);
d.className=a(c).attr("class");
d.cssText=this.getCssText(c);
}return d;
},getCssText:function(d){var g="",f=this._cssProperties.length;
for(var e=0;
e<f;
e++){var c=this._cssProperties[e];
g+=";"+c+":"+this.getComputedStyle(d,c)+";";
}return g.replace(/^;/,"").replace(/;$/,"");
},getComputedStyle:function(e,c){var d=this.get_editor();
strValue="",doc=d.get_document();
if(doc.defaultView&&doc.defaultView.getComputedStyle){strValue=doc.defaultView.getComputedStyle(e,"").getPropertyValue(c);
}else{if(e.currentStyle){c=c.replace(/\-(\w)/g,function(g,f){return f.toUpperCase();
});
strValue=e.currentStyle[c];
}}return strValue;
},set_formatElements:function(c,d){for(var e=this._formatElements.length-1;
e>=0;
e--){this.pushFormatElementsByTag(c,d,this._formatElements[e]);
}},pushFormatElementsByTag:function(c,d,f){if(a.inArray(f,d.formatElements)==-1){if(c.tagName==f){d.formatElements.push(f);
}else{var e=b.Editor.Utils.getElementParentByTag(c,f);
if(e){d.formatElements.push(f);
}}}},getState:function(c){return b.Editor.CommandStates.Off;
},get_currentFormatting:function(){var c=this.get_editor();
return(c)?c.get_currentFormatting():null;
},set_currentFormatting:function(d){var c=this.get_editor();
if(c){c.set_currentFormatting(d);
}},set_formatPainterToolSelectedIndex:function(d){var c=this.get_editor(),e=c.get_toolAdapter().getToolByName("FormatPainter");
if(e){if(e.set_selectedIndex){e.set_selectedIndex(d);
}else{e._enableButtonSelection=true;
e.set_selectedButtonIndex(d);
$telerik.$(e._element).removeClass("FormatPainterApply FormatPainterCopy FormatPainterClear");
$telerik.$(e._element).addClass((d==1)?"FormatPainterApply":"FormatPainterCopy");
}}}};
b.Editor.FormatPainterCommand.registerClass("Telerik.Web.UI.Editor.FormatPainterCommand",b.Editor.CommandBase);
})();
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.EnterNewLineCommand=function(e,d,a,b,c){Telerik.Web.UI.Editor.EnterNewLineCommand.initializeBase(this,[(e||"Enter pressed"),d,true,b]);
this._newLineMode=(c)?c:b.get_newLineMode();
this._canUnexecute=(a!=false);
this.editor=b;
};
Telerik.Web.UI.Editor.EnterNewLineCommand.prototype={execute:function(){var a=this.editor;
if(a.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}switch(this._newLineMode){case Telerik.Web.UI.EditorNewLineModes.P:case Telerik.Web.UI.EditorNewLineModes.Div:result=this.enterBlockElement();
break;
default:result=this.enterBr();
break;
}if($telerik.isSafari){this.moveScroll(a);
}return true;
},moveScroll:function(){var a=this.editor,g=a.get_contentArea().scrollTop,c=a.get_newLineMode(),d=Telerik.Web.UI.EditorNewLineModes;
try{var e=null,b=0;
if(c==d.Br){a.pasteHtml("<span id='_radEditor_new_line'>&nbsp;</span>","",null,null,false);
e=a.get_document().getElementById("_radEditor_new_line");
b=e.offsetHeight+1;
}else{e=a.getSelectedElement();
b=(c==d.Div)?Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"DIV").offsetHeight:Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"P").offsetHeight+20;
}if(e.offsetTop-g+5>a.get_contentAreaElement().offsetHeight){a.get_contentArea().scrollTop=g+b;
}if(e&&e.id=="_radEditor_new_line"){var f=e.previousSibling;
e.parentNode.removeChild(e);
a.selectElement(f);
a.getSelection().collapse();
}}finally{if(c==d.Br){$telerik.$("#_radEditor_new_line").remove();
}}},enterBr:function(){var a=true;
if(this.isFirefox){a=this.enterBrMozilla();
}else{if($telerik.isOpera11){a=this.enterBrOpera();
}else{if(this.isSafari){a=this.enterBrSafari();
}else{if(this.isIE){a=this.enterBrIE();
}else{this.editor.bubbleKeyEventToBrowser();
}}}}return a;
},enterBrMozilla:function(){var a=this.editor;
var c=a.getSelectedElement();
var b=Telerik.Web.UI.Editor.Utils.getElementParentByTagWithConstraint(c,"P","TD,DIV,LI");
if(b!=null){a.pasteHtml("<br />");
}else{a.bubbleKeyEventToBrowser();
return true;
}},enterBrIE:function(){var c=this.editor;
var l=c.getSelectedElement();
if("LI"==l.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(l,"LI")!=null){if(l.innerHTML==""&&$telerik.isIE9Mode){var h=l.parentNode;
if(h.tagName=="OL"||h.tagName=="UL"){var b=h.childNodes;
for(var e=0;
e<b.length;
e++){var a=b[e];
if(a.innerHTML==undefined){if(a.nodeType==3){a.parentNode.removeChild(a);
}else{$T.Editor.Utils.removeNode(a);
}}}}}c.bubbleKeyEventToBrowser();
return false;
}try{var j=c.get_document().selection.createRange();
if(j.pasteHTML){var f=j.offsetTop;
var m=l.tagName;
var k=j.duplicate();
k.moveToElementText(l);
if((m.charAt(0)=="H"&&parseInt(m.charAt(1))>0)||m.toLowerCase()=="textarea"){c.bubbleKeyEventToBrowser();
return false;
}else{if(m=="A"&&j.text==""&&j.compareEndPoints("StartToStart",k)==0){var g=l.parentNode;
g.insertBefore(c.get_document().createElement("BR"),l);
}else{if($telerik.isIE9Mode&&m=="BR"){j.pasteHTML("<BR /> ");
}else{j.pasteHTML("<BR />");
}}}if(!$telerik.isIE9Mode||f!=j.offsetTop){j.select();
j.moveEnd("character",1);
j.moveStart("character",1);
j.collapse(false);
}}else{if(j(0)){j.execCommand("Delete");
}}}catch(d){alert(d.message);
}return false;
},enterBrOpera:function(){var a=this.editor;
var c=a.getSelectedElement();
if("LI"==c.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"LI")!=null){a.bubbleKeyEventToBrowser();
return false;
}else{if(this.isHeader(c)){a.bubbleKeyEventToBrowser();
return false;
}else{a.pasteHtml("<br />");
selection=a.getSelection();
var b=selection.getRange();
b.collapse(false);
selection.selectRange(b);
}}return true;
},enterBrSafari:function(){var a=this.editor;
var b=a.getSelectedElement();
if("LI"==b.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"LI")!=null){a.bubbleKeyEventToBrowser();
return false;
}else{if(this.isHeader(b)){if($telerik.isChrome){this._newLineMode=Telerik.Web.UI.EditorNewLineModes.P;
this.execute();
this._newLineMode=Telerik.Web.UI.EditorNewLineModes.Br;
return false;
}else{a.bubbleKeyEventToBrowser();
return false;
}}}a.executeBrowserCommand("InsertLineBreak",true,"");
return false;
},enterBlockElement:function(){var a=true;
if(this.isFirefox){a=this.enterBlockElementMozilla();
}else{if(this.isSafari||$telerik.isOpera11){a=this.enterBlockElementSafari();
}else{if(this.isIE){a=this.enterBlockElementIE();
}else{this.editor.bubbleKeyEventToBrowser();
}}}return a;
},enterBlockElementMozilla:function(){var f=this.editor;
var h=Telerik.Web.UI.Editor.Utils.isEditorContentArea;
var n=f.getSelectedElement();
if(n&&(n.tagName=="A"||"LI"==n.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(n,"LI")!=null)){f.bubbleKeyEventToBrowser();
return false;
}function g(r){if(!r){return null;
}var s=r;
var t=s.tagName;
while(t!="TD"&&!h(s)){t=s.tagName;
if(!t){t="";
}if(t=="P"||(t.charAt(0)=="H"&&!isNaN(parseInt(t.charAt(1))))||t=="DIV"||t=="ADDRESS"||t=="PRE"){return s;
}s=s.parentNode;
if(!s){return null;
}}}var c=g(n);
var i=false;
if(c){var q=c.tagName;
i=this.isHeader(c);
if(q!="P"&&!i&&q!="DIV"){f.bubbleKeyEventToBrowser();
return false;
}}var e=h(f.getSelectedElement());
var o=false;
if(!c){f.get_document().execCommand("InsertParagraph",null,false);
c=g(f.getSelectedElement())||Telerik.Web.UI.Editor.Utils.getContentAreaFirstChild(f);
o=true;
}var k=new Telerik.Web.UI.Editor.GenericCommand("Enter",f.get_contentWindow(),f);
var m=f.getSelection().getRange();
m.deleteContents();
var p=m.startOffset;
var d=m.startContainer;
var b=m.cloneRange();
b.setStart(c,0);
b.setEnd(d,p);
var a=b.extractContents();
var j=c.cloneNode(false);
j.appendChild(a);
if(c.parentNode){c.parentNode.insertBefore(j,c);
}else{f.get_contentArea().appendChild(j);
}if(!Telerik.Web.UI.Editor.Utils.hasAnyContent(j)){j.innerHTML=(c.tagName=="P")?"&nbsp;":"<br />";
}if(i){if(c.innerHTML==""||Telerik.Web.UI.Editor.Utils.checkForNonEmptyTextNodes(c)==false){var l=f.get_document().createElement("P");
l.innerHTML="&nbsp;";
c.parentNode.insertBefore(l,c);
c.parentNode.removeChild(c);
f.getSelection().moveToElementText(l);
}}if(o&&!e){c.innerHTML="";
}if(c.tagName=="P"&&c.innerHTML==""){c.innerHTML=(c.tagName=="P")?"&nbsp;":"<br />";
}this.ensureModeElement();
f.executeCommand(k);
return false;
},enterBlockElementSafari:function(){var a=this.editor;
a.executeBrowserCommand("InsertParagraph",true,"");
this.ensureModeElement();
return true;
},enterBlockElementIE:function(){var a=this.editor;
a.bubbleKeyEventToBrowser();
a.get_contentWindow().setTimeout(Function.createDelegate(this,function(){this.ensureModeElement();
}),0);
return true;
},isHeader:function(a){return a.tagName.charAt(0)=="H"&&!isNaN(parseInt(a.tagName.charAt(1)));
},ensureModeElement:function(){var a=this.editor;
var b=a.getSelectedElement();
var e="P";
var h="DIV";
if(this._newLineMode==Telerik.Web.UI.EditorNewLineModes.P){e="DIV";
h="P";
}if($telerik.isFirefox&&b.innerHTML==""){b.innerHTML="<br />";
}var f=Telerik.Web.UI.Editor.Utils.getElementParentByTagWithConstraint(b,e,"TD");
if(e=="DIV"&&$telerik.$("P",f).length>0){f=null;
}if(f&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(f)){var g=f.previousSibling;
if(g){var d=g.nodeName;
if(d==e){g=Telerik.Web.UI.Editor.Utils.replaceNode(g,h);
if(g.innerHTML.match(/^\s*$/)){g.innerHTML="&nbsp;";
}}}var c=Telerik.Web.UI.Editor.Utils.replaceNode(f,h);
if(c.innerHTML.match(/^\s*$/)){c.innerHTML="&nbsp;";
}while(c.firstChild&&c.firstChild.nodeType!=3){c=c.firstChild;
}a.getSelection().moveToElementText(c);
}}};
Telerik.Web.UI.Editor.EnterNewLineCommand.registerClass("Telerik.Web.UI.Editor.EnterNewLineCommand",Telerik.Web.UI.Editor.CommandBase);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.TableCommandBase=function(c,b,a){Telerik.Web.UI.Editor.TableCommandBase.initializeBase(this,[(c||"Table Command"),b,true,a]);
};
Telerik.Web.UI.Editor.TableCommandsBase_Static={};
Telerik.Web.UI.Editor.TableCommandBase.prototype={getLayoutBuilderEngine:function(c,a){if(!Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder){Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder=new Telerik.Web.UI.LayoutBuilderEngine();
}var b=Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder;
b.set_selectedTable(c);
b.set_selectedCell(a);
return b;
},configureLayoutBuilderEngine:function(){var a=this.getSelectedCell();
if(!a){return false;
}var b=a.parentNode;
var c=this.getParentTable(b);
return this.getLayoutBuilderEngine(c,a);
},getState:function(a){return this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled;
},getSelectedCell:function(a){var c=new Telerik.Web.UI.Editor.Selection(a||this._window);
var b;
if(c){b=c.getParentElement();
}while(null!=b&&b.tagName!="TD"&&b.tagName!="TH"&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(b)){b=b.parentNode;
}if(!b||!b.tagName){return null;
}return(b.tagName=="TD"||b.tagName=="TH"?b:null);
},getSelectedRow:function(a){var c=new Telerik.Web.UI.Editor.Selection(this._window||a);
var b;
if(c){b=c.getParentElement();
}if(!b){return null;
}while(null!=b&&b.tagName!="TR"&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(b)){b=b.parentNode;
}return(b&&b.tagName=="TR"?b:null);
},getParentTable:function(a){if(!a){return null;
}while(null!=a&&"TABLE"!=a.tagName&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(a)){a=a.parentNode;
}return(a&&a.tagName=="TABLE"?a:null);
}};
Telerik.Web.UI.Editor.TableCommandBase.registerClass("Telerik.Web.UI.Editor.TableCommandBase",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.TableInsertRow=function(d,c,a,b){Telerik.Web.UI.Editor.TableInsertRow.initializeBase(this,[(d||"Insert row"),c,b]);
this._direction=a||"above";
};
Telerik.Web.UI.Editor.TableInsertRow.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableInsertRow(this._title,this._window,this._direction);
},getState:function(a){return(this.getSelectedRow(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand(("below"==this._direction)?"insertRowBelow":"insertRowAbove");
}};
Telerik.Web.UI.Editor.TableInsertRow.registerClass("Telerik.Web.UI.Editor.TableInsertRow",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteRow=function(c,b,a){Telerik.Web.UI.Editor.TableDeleteRow.initializeBase(this,[(c||"Delete Row"),b,a]);
};
Telerik.Web.UI.Editor.TableDeleteRow.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableDeleteRow(this._title,this._window);
},getState:function(a){return(this.getSelectedRow(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
this.selectAnotherRow(a);
return a.executeCommand("deleteRow");
},selectAnotherRow:function(c){if($telerik.isIE9Mode){var a=c._getLeftTopStateIndexes(c._selectedRowIndex,c._selectedCell.cellIndex);
var e=a.rowIndex;
var d=c._getSelectedTableCellByStateIndexes(e+1,0)||c._getSelectedTableCellByStateIndexes(e-1,0);
if(d){var b=this.get_editor().getSelection();
b.selectElement(d);
b.collapse(true);
}}}};
Telerik.Web.UI.Editor.TableDeleteRow.registerClass("Telerik.Web.UI.Editor.TableDeleteRow",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableInsertColumn=function(d,c,a,b){Telerik.Web.UI.Editor.TableInsertColumn.initializeBase(this,[(d||"Insert column"),c,b]);
this._direction=a||"left";
};
Telerik.Web.UI.Editor.TableInsertColumn.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableInsertColumn(this._title,this._window,this._direction);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
if($telerik.isRightToLeft(a._selectedTable)){this._direction=("right"==this._direction)?"left":"right";
}return a.executeCommand(("right"==this._direction)?"insertColumnToTheRight":"insertColumnToTheLeft");
}};
Telerik.Web.UI.Editor.TableInsertColumn.registerClass("Telerik.Web.UI.Editor.TableInsertColumn",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteColumn=function(c,b,a){Telerik.Web.UI.Editor.TableDeleteColumn.initializeBase(this,[(c||"Delete column"),b,a]);
};
Telerik.Web.UI.Editor.TableDeleteColumn.prototype={clone:function(){return Telerik.Web.UI.Editor.TableDeleteColumn.New(this._title,this._window);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("deleteColumn");
}};
Telerik.Web.UI.Editor.TableDeleteColumn.registerClass("Telerik.Web.UI.Editor.TableDeleteColumn",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableMergeRows=function(c,b,a){Telerik.Web.UI.Editor.TableMergeRows.initializeBase(this,[(c||"Merge rows"),b,a]);
};
Telerik.Web.UI.Editor.TableMergeRows.prototype={clone:function(){return Telerik.Web.UI.Editor.TableMergeRows.New(this._title,this._window);
},getState:function(b){var a=this.getSelectedCell(b);
if(a&&this.getLayoutBuilderEngine(this.getParentTable(a),a).canMergeDown()){return Telerik.Web.UI.Editor.CommandStates.Off;
}return Telerik.Web.UI.Editor.CommandStates.Disabled;
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("mergeDown");
},getLowerCell:function(a){if(!a){return null;
}var f=this.getParentTable(a);
var e=a.parentNode;
var d=f.rows[e.rowIndex+a.rowSpan];
if(!d){return null;
}var c=d.cells[a.cellIndex];
if(!c){for(var b=d.cells.length-1;
b>=0;
b--){if(d.cells[b].offsetLeft==a.offsetLeft){return d.cells[b];
}}}return c;
}};
Telerik.Web.UI.Editor.TableMergeRows.registerClass("Telerik.Web.UI.Editor.TableMergeRows",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableMergeColumns=function(c,b,a){Telerik.Web.UI.Editor.TableMergeColumns.initializeBase(this,[(c||"Merge columns"),b,a]);
};
Telerik.Web.UI.Editor.TableMergeColumns.prototype={clone:function(){return Telerik.Web.UI.Editor.TableMergeColumns.New(this._title,this._window);
},getState:function(b){var a=this.getSelectedCell(b);
if(a&&this.getLayoutBuilderEngine(this.getParentTable(a),a).canMergeRight()){return Telerik.Web.UI.Editor.CommandStates.Off;
}return Telerik.Web.UI.Editor.CommandStates.Disabled;
},getNextSiblingCell:function(a){if(!a){return null;
}var c=a.parentNode;
var b=c.cells[a.cellIndex+1];
if(null!=b&&a.rowSpan==b.rowSpan){return b;
}else{return null;
}},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("mergeRight");
}};
Telerik.Web.UI.Editor.TableMergeColumns.registerClass("Telerik.Web.UI.Editor.TableMergeColumns",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableSplitCell=function(d,c,a,b){Telerik.Web.UI.Editor.TableSplitCell.initializeBase(this,[(d||"Split cell"),c,b]);
this._direction=a||"vertical";
};
Telerik.Web.UI.Editor.TableSplitCell.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableSplitCell(this._title,this._window);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand(("vertical"==this._direction)?"splitCellVertically":"splitCellHorizontally");
},getRealCellIndex:function(a){if(!a){return 0;
}var e=a.parentNode;
var c=0;
var b=0;
while(e.cells.length>c&&e.cells[c]!=a){var d=e.cells[c];
if(d.colSpan>1){b+=d.colSpan;
}else{b++;
}c++;
}return b;
}};
Telerik.Web.UI.Editor.TableSplitCell.registerClass("Telerik.Web.UI.Editor.TableSplitCell",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteCell=function(c,b,a){Telerik.Web.UI.Editor.TableDeleteCell.initializeBase(this,[(c||"Delete cell"),b,a]);
};
Telerik.Web.UI.Editor.TableDeleteCell.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableDeleteCell(this._title,this._window);
},getState:function(b){var a=this.getSelectedCell(b);
if(a&&this.getLayoutBuilderEngine(this.getParentTable(a),a).canDeleteCell()){return Telerik.Web.UI.Editor.CommandStates.Off;
}return Telerik.Web.UI.Editor.CommandStates.Disabled;
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("deleteCell");
}};
Telerik.Web.UI.Editor.TableDeleteCell.registerClass("Telerik.Web.UI.Editor.TableDeleteCell",Telerik.Web.UI.Editor.TableCommandBase);
Type.registerNamespace("Telerik.Web.UI");
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
b.EditorButton=function(c){b.EditorButton.initializeBase(this,[c]);
this._enabled=true;
this._text="";
this._isOn=false;
this._contentAreaMode="";
this._enableAriaSupport=false;
};
b.EditorButton.createToolWrapper=function(f,g){var d=f.get_enableAriaSupport();
var h=document.createElement("ul");
var e=document.createElement("li");
e.innerHTML="&nbsp;";
e.className="reGrip grip_first";
h.appendChild(e);
h.className="reToolbar "+g;
if(d){e.setAttribute("role","presentation");
}e=document.createElement("li");
h.appendChild(e);
var c=f.get_element();
e.appendChild(c);
e=document.createElement("li");
e.innerHTML="&nbsp;";
e.className="reGrip grip_last";
h.appendChild(e);
if(d){e.setAttribute("role","presentation");
h.setAttribute("role","presentation");
}return h;
};
b.EditorButton.getToolRootNode=function(c){while(c&&c.tagName!="A"){c=c.parentNode;
}return c;
};
b.EditorButton._createButton=function(f){var c=document.createElement("a");
c.className=f.showText==true?"reTool_text":"reTool";
var e=f.text;
c.title=e?e:f.name;
c.href="#";
c.setAttribute("unselectable","on");
var d;
if(f.showIcon!=false){d=document.createElement("span");
d.className=f.name;
d.innerHTML="&nbsp;";
d.setAttribute("unselectable","on");
c.appendChild(d);
}if(f.showText==true){d=document.createElement("span");
d.className="reButton_text";
d.innerHTML=f.text?f.text:f.name;
d.setAttribute("unselectable","on");
c.appendChild(d);
}return c;
};
b.EditorButton.createTool=function(i,e,j,d,f){if(!j){j=b.EditorButton;
}if(!d){d=b.EditorButton._createButton(i);
if(d.tagName=="A"){var c=d,g;
if(j==b.EditorSplitButton||j.inheritsFrom(b.EditorSplitButton)){Sys.UI.DomElement.addCssClass(c,"reSplitButton");
g=document.createElement("span");
g.className="split_arrow";
g.innerHTML="&nbsp;";
c.appendChild(g);
}else{if(j==b.EditorDropDown||j.inheritsFrom(b.EditorDropDown)){Sys.UI.DomElement.removeCssClass(c,"reTool");
Sys.UI.DomElement.addCssClass(c,"reDropdown");
c.innerHTML="";
g=document.createElement("span");
g.innerHTML="&nbsp;";
var k=i.width?i.width:"50px";
g.style.width=k;
c.appendChild(g);
}}}}var h=$create(j,i,e,null,d);
if(f&&f.appendChild){f.appendChild(d);
}return h;
};
b.EditorButton.prototype={initialize:function(){var c=this.getAnchorElement();
if(c){c.setAttribute("unselectable","on");
}var e=this.getSpanElement();
if(e){e.setAttribute("unselectable","on");
}if(this.get_addClickHandler()){var d=this.get_element();
$addHandlers(d,{click:this.click},this);
}},dispose:function(){var c=this.get_element();
if(c){$clearHandlers(c);
}b.EditorButton.callBaseMethod(this,"dispose");
},click:function(c){this.raiseEvent("valueSelected");
return $telerik.cancelRawEvent(c);
},add_valueSelected:function(c){this.get_events().addHandler("valueSelected",c);
},remove_valueSelected:function(c){this.get_events().removeHandler("valueSelected",c);
},raiseEvent:function(d,c){var e=this.get_events().getHandler(d);
if(e){if(!c){c=Sys.EventArgs.Empty;
}e(this,c);
}},set_width:function(d){var c=this.getSpanElement();
if(c){c.style.width=d;
}},get_width:function(){return this.get_element().offsetWidth;
},set_height:function(d){var c=this.getSpanElement();
if(c){c.style.height=d;
}},get_height:function(){return this.get_element().offsetHeight;
},get_tooltipIncrease:function(){var c=this.getAnchorElement();
if(c){return c.getElementsByTagName("A")[0].title;
}},set_tooltipIncrease:function(d){var c=this.getAnchorElement();
if(c&&d){c.getElementsByTagName("A")[0].title=d;
}},get_tooltipDecrease:function(){var c=this.getAnchorElement();
if(c){return c.getElementsByTagName("A")[1].title;
}},set_tooltipDecrease:function(d){var c=this.getAnchorElement();
if(c&&d){c.getElementsByTagName("A")[1].title=d;
}},isTarget:function(c){return $telerik.isDescendantOrSelf(this.get_element(),c.target);
},setState:function(c){this.set_enabled(c!=b.Editor.CommandStates.Disabled);
this.setOn(c==b.Editor.CommandStates.On);
},setFocus:function(){var c=this.getAnchorElement();
if(c&&c.focus){c.focus();
}},get_enabled:function(){return this._enabled;
},set_enabled:function(e){if(this._enabled!=e){this._enabled=e;
var c=this.getAnchorElement();
var d=this.get_enableAriaSupport();
if(!this._enabled){this._addAnchorCssClass("reTool_disabled");
c.setAttribute("disabled","disabled");
if(d){c.setAttribute("aria-disabled","true");
}}else{this._removeAnchorCssClass("reTool_disabled");
c.removeAttribute("disabled");
if(d){c.removeAttribute("aria-disabled");
}}}},get_enableAriaSupport:function(){return this._enableAriaSupport;
},set_enableAriaSupport:function(e,d){if(this.get_enableAriaSupport()!=e){this._enableAriaSupport=e;
var c=this.getAnchorElement();
if(!c){return;
}if(this.get_enableAriaSupport()){var d=d?d:"button";
c.setAttribute("role",d);
}}},isOn:function(){return this._isOn;
},setOn:function(g,e){if(this._isOn!=g){var f=this.get_enableAriaSupport();
var c=this.getAnchorElement();
var d=e?e:"aria-pressed";
this._isOn=g;
if(this._isOn){this._addAnchorCssClass("reTool_selected");
if(c&&f){c.setAttribute(d,"true");
}}else{this._removeAnchorCssClass("reTool_selected");
if(c&&f){c.removeAttribute(d);
}}}},get_text:function(){if(this._text){return this._text;
}var c=this.getAnchorElement();
if(c&&c.getAttribute("title")){return c.getAttribute("title");
}return this.get_name();
},set_text:function(c){if(this._text!=c){this._text=c;
if(this.get_showText()){this.getSpanElement().innerHTML=c;
}}},get_contentAreaMode:function(){if(this._contentAreaMode!=""){return this._contentAreaMode;
}else{return b.EditorContentAreaMode.Iframe;
}},set_contentAreaMode:function(c){this._contentAreaMode=c;
},_addAnchorCssClass:function(c){Sys.UI.DomElement.addCssClass(this.getAnchorElement(),c);
},_removeAnchorCssClass:function(c){Sys.UI.DomElement.removeCssClass(this.getAnchorElement(),c);
},getAnchorElement:function(){return this.get_element();
},getSpanElement:function(){var c=this.getAnchorElement();
var d=c.firstChild;
while(d!=null&&(d.tagName==null||d.tagName.toLowerCase()!="span")){d=d.nextSibling;
}return d;
}};
a.registerControlProperties(b.EditorButton,{clientStateFieldID:null,attributes:{},addClickHandler:false,autoPostBack:false,name:"",shortCut:"",showIcon:true,showText:false,skin:"",type:null,clientTypeName:"Telerik.Web.UI.EditorButton"});
a.registerControlEvents(b.EditorButton,["valueSelected"]);
b.EditorButton.registerClass("Telerik.Web.UI.EditorButton",Sys.UI.Control);
Telerik.Web.UI.EditorSpinBoxEventArgs=function(c,d){Telerik.Web.UI.EditorSpinBoxEventArgs.initializeBase(this);
this._newValue=c;
this._oldValue=d;
};
Telerik.Web.UI.EditorSpinBoxEventArgs.prototype={get_oldValue:function(){return this._oldValue;
},get_newValue:function(){return this._newValue;
}};
Telerik.Web.UI.EditorSpinBoxEventArgs.registerClass("Telerik.Web.UI.EditorSpinBoxEventArgs",Sys.CancelEventArgs);
Telerik.Web.UI.EditorSpinBox=function(c){Telerik.Web.UI.EditorSpinBox.initializeBase(this,[c]);
this._width="50px";
this._className="reSpinBox";
this._selectedItem="";
this._initialValue="";
this._visibleInput=true;
this._enabledIncrease=true;
this._enabledDecrease=true;
};
Telerik.Web.UI.EditorSpinBox.prototype={dispose:function(){this._inputElement.onchange=null;
this._inputElement.onkeypress=null;
this._inputElement.onclick=null;
this._inputElement=null;
this._increaseButton.onclick=null;
this._increaseButton=null;
this._decreaseButton.onclick=null;
this._decreaseButton=null;
Telerik.Web.UI.EditorSpinBox.callBaseMethod(this,"dispose");
},initialize:function(){this._createControls();
},_createControls:function(){var i=document.createElement("table");
i.cellSpacing=0;
i.cellPadding=0;
i.className=this.get_visibleInput()?this._className:"reTableWizardSpinBox";
i.insertRow(-1);
var f=i.rows[0].insertCell(-1);
var e=document.createElement("input");
e.className="radfd_skipme";
e.type="text";
e.onclick=function(j){this.focus();
};
e.onkeypress=Function.createDelegate(this,this._onKeyPressHandler);
e.onchange=Function.createDelegate(this,this._onChangeHandler);
this._inputElement=e;
f.appendChild(e);
if(!this.get_visibleInput()){this.set_visibleInput(false);
}var c;
if(this.get_visibleInput()){f=i.rows[0].insertCell(-1);
var h=document.createElement("table");
h.cellSpacing=0;
h.cellPadding=0;
h.insertRow(-1);
var g=h.rows[0].insertCell(-1);
c=this._createAnchorElement("Increase");
this._increaseButton=c;
g.appendChild(c);
h.insertRow(-1);
g=h.rows[1].insertCell(-1);
c=this._createAnchorElement("Decrease");
this._decreaseButton=c;
g.appendChild(c);
f.appendChild(h);
}else{f=i.rows[0].insertCell(-1);
c=this._createAnchorElement_noinput("Increase");
this._increaseButton=c;
f.appendChild(c);
f=i.rows[0].insertCell(-1);
c=this._createAnchorElement_noinput("Decrease");
this._decreaseButton=c;
f.appendChild(c);
}var d=this.get_element();
d.appendChild(i);
d.style.width=this.get_width();
},_createAnchorElement:function(e){var c=document.createElement("a");
var d=typeof(localization)!="undefined"&&localization[e]?localization[e]:e;
c.title=d;
c.href="javascript:void(0);";
c.innerHTML=d;
c.className="reSpinBox"+e;
c.onclick=Function.createDelegate(this,this._onPlusMinusClickHandler);
return c;
},_createAnchorElement_noinput:function(e){var c=document.createElement("a");
var d=typeof(localization)!="undefined"&&localization[e]?localization[e]:e;
c.title=d;
c.href="javascript:void(0);";
c.innerHTML="<span class='reTableWizardSpinBox_"+e+"'>"+d+"</span>";
c.onclick=Function.createDelegate(this,this._onPlusMinusClickHandler);
return c;
},_executeFunction:function(c,d,g){if(g){if(d.Executed){d.Executed=false;
return $telerik.cancelRawEvent(c);
}}d.Executed=true;
var h=(this._selectedItem!="")?this._selectedItem:this._initialValue;
this._selectedItem=d.value;
var f=new Telerik.Web.UI.EditorSpinBoxEventArgs(d.value,h);
this.raiseEvent("valueSelected",f);
},_onPlusMinusClickHandler:function(c){var f=null;
if(!c){f=window.event.srcElement;
}else{f=c.target;
}while(f&&f.tagName.toLowerCase()!="a"){f=f.parentNode;
}if(!f){return;
}var g=this.get_value();
g=g.replace(/^0+(\d)/ig,"$1");
if(""==g){g="0";
}var h=parseInt(g);
var d=h+"";
if(isNaN(h)){return;
}else{d=g.substring(d.length);
}if(f==this._increaseButton){if(this._enabledIncrease){h++;
}else{return;
}}else{if(f==this._decreaseButton){if(this._enabledDecrease){h--;
}else{return;
}}else{f=null;
}}if(f&&h>=0){this.set_value(h+d);
this._executeFunction(c,this._inputElement);
}return false;
},_onChangeHandler:function(c){if(!c){c=window.event;
}this._executeFunction(c,this._inputElement);
},_onKeyPressHandler:function(c){if(!c){c=window.event;
}if(c.keyCode==13){this._executeFunction(c,this._inputElement);
return $telerik.cancelRawEvent(c);
}},_onKeyDownHandler:function(c){if(!c){var c=window.event;
}c.returnValue=this._isKeyValid(c);
},_onKeyUpHandler:function(c){if(!c){var c=window.event;
}if(this._isKeyValid(c,true)){var g=this._selectedItem;
var f=this.get_value();
var d=new Telerik.Web.UI.EditorSpinBoxEventArgs(f,g);
this.raiseEvent("valueSelected",d);
}},_isKeyValid:function(d,g){try{if(!g){g=false;
}if(!d){d=window.event;
}var c=((48<=d.keyCode&&d.keyCode<=57)||(96<=d.keyCode&&d.keyCode<=105)||(13==d.keyCode)||(8==d.keyCode)||(46==d.keyCode)||(9==d.keyCode));
if(!g){c|=((35<=d.keyCode&&d.keyCode<=40));
}return c;
}catch(f){return true;
}},get_selectedItem:function(){return this._selectedItem;
},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
if(this._initialValue==""){this._initialValue=c;
}},get_width:function(){return this._width;
},set_width:function(d){this._width=d;
var c=this.get_element();
c.style.width=this._width;
},get_enabledIncrease:function(){return this._enabledIncrease;
},set_enabledIncrease:function(c){this._enabledIncrease=c;
this._setButtonState(this._increaseButton,c);
},get_enabledDecrease:function(){return this._enabledDecrease;
},set_enabledDecrease:function(c){this._enabledDecrease=c;
this._setButtonState(this._decreaseButton,c);
},_setButtonState:function(c,d){if(!d){Sys.UI.DomElement.addCssClass(c,"disabled-button");
}else{Sys.UI.DomElement.removeCssClass(c,"disabled-button");
}},get_visibleInput:function(){return this._visibleInput;
},set_visibleInput:function(c){this._visibleInput=c;
if(this._inputElement){if(!this._visibleInput){this._inputElement.style.display="none";
}else{this._inputElement.style.display="";
}}}};
Telerik.Web.UI.EditorSpinBox.registerClass("Telerik.Web.UI.EditorSpinBox",Telerik.Web.UI.EditorButton);
Telerik.Web.UI.EditorCheckBox=function(c){Telerik.Web.UI.EditorCheckBox.initializeBase(this,[c]);
this._selectedItem=false;
};
Telerik.Web.UI.EditorCheckBox.prototype={dispose:function(){this._inputElement.onclick=null;
this._inputElement.Parent=null;
this._inputElement=null;
Telerik.Web.UI.EditorCheckBox.callBaseMethod(this,"dispose");
},get_selectedItem:function(){return this._selectedItem;
},set_value:function(c){if(this._inputElement.checked!=c){this._inputElement.checked=c;
}},initialize:function(){var c=document.createElement("input");
c.setAttribute("type","CHECKBOX");
c.Parent=this;
c.onclick=function(d){var f=this.Parent;
f._selectedItem=!f._selectedItem;
this.checked=f._selectedItem;
f._selectedItem=this.checked;
f.raiseEvent("valueSelected");
};
this._inputElement=c;
this.get_element().appendChild(c);
}};
Telerik.Web.UI.EditorCheckBox.registerClass("Telerik.Web.UI.EditorCheckBox",Telerik.Web.UI.EditorButton);
Telerik.Web.UI.EditorTextBox=function(c){Telerik.Web.UI.EditorTextBox.initializeBase(this,[c]);
this._width="100px";
this._selectedItem="";
};
Telerik.Web.UI.EditorTextBox.prototype={dispose:function(){this._inputElement.onchange=null;
this._inputElement.onkeypress=null;
this._inputElement.onclick=null;
this._inputElement.Parent=null;
this._inputElement=null;
Telerik.Web.UI.EditorTextBox.callBaseMethod(this,"dispose");
},get_width:function(){return this._width;
},set_width:function(c){this._width=c;
},initialize:function(){var d=document.createElement("input");
d.style.width=this.get_width();
d.Parent=this;
var c=function(f,g,h){if(h){if(g.Executed){g.Executed=false;
return $telerik.cancelRawEvent(f);
}}g.Executed=true;
g.Parent._selectedItem=g.value;
g.Parent.raiseEvent("valueSelected");
return $telerik.cancelRawEvent(f);
};
d.onchange=function(f){if(!f){f=window.event;
}return c(f,this,true);
};
d.onclick=function(f){this.focus();
};
d.onkeypress=function(f){if(!f){f=window.event;
}if(f.keyCode==13){return c(f,this);
}};
this._inputElement=d;
this.get_element().appendChild(d);
},get_selectedItem:function(){return this._selectedItem;
},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
}};
Telerik.Web.UI.EditorTextBox.registerClass("Telerik.Web.UI.EditorTextBox",Telerik.Web.UI.EditorButton);
b.ImageDialogCaller=function(c){b.ImageDialogCaller.initializeBase(this,[c]);
};
b.ImageDialogCaller.prototype={dispose:function(){this._inputElement=null;
var c=this.get_pushButton();
if(c){c.onclick=null;
}this.set_pushButton(null);
this.set_editor(null);
b.ImageDialogCaller.callBaseMethod(this,"dispose");
},initialize:function(){var c=this.get_element();
this._inputElement=c.getElementsByTagName("INPUT")[0];
var d=c.getElementsByTagName("A")[0];
this.set_pushButton(d);
if(d){d.onclick=Function.createDelegate(this,this._onButtonClickHandler);
}},_onButtonClickHandler:function(c){this.callImageDialog();
},_dialogCallbackFunction:function(f,c){var e=c&&c.get_value?c.get_value():null;
var d=e[e.length-1];
var g="";
if(d&&d.getAttribute){g=d.getAttribute("src",2);
}if(g){this._inputElement.value=g;
this.raiseEvent("valueSelected");
}},callImageDialog:function(){var d=Function.createDelegate(this,this._dialogCallbackFunction);
var g=this.get_editor();
var e=null;
if(g){e=g.get_dialogOpener();
}else{if(b.Dialogs&&b.Dialogs.CommonDialogScript&&b.Dialogs.CommonDialogScript.get_windowReference()){e=b.Dialogs.CommonDialogScript.get_windowReference().get_dialogOpener();
}}var j=null;
if(e){var i=e.get_additionalQueryString();
var k=this._inputElement.value;
if(k){var h=k;
e.set_additionalQueryString(i+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(h));
var f=g?g.get_document():document;
j=f.createElement("img");
j.setAttribute("src",h);
}}var c=new b.EditorCommandEventArgs("ImageManager",null,j);
b.Editor.CommandList._getDialogArguments(c,"IMG",g,"ImageManager");
if(g){g.showDialog("ImageManager",c,d);
}else{if(e){e.open("ImageManager",c,d);
}}if(e){e.set_additionalQueryString(i);
}},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
}};
a.registerControlProperties(b.ImageDialogCaller,{pushButton:null,editor:null,width:""});
b.ImageDialogCaller.registerClass("Telerik.Web.UI.ImageDialogCaller",b.EditorButton);
})();
Type.registerNamespace("Telerik.Web.UI");
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
b.EditorDropDown=function(c){b.EditorDropDown.initializeBase(this,[c]);
this.isIE=$telerik.isIE;
this._popupVisible=false;
this._rendered=false;
this._childrenRendered=false;
this._popupElement=null;
this._itemRootElement=null;
this._onPopupClickDelegate=null;
this._onPopupMouseDownDelegate=null;
this._onPopupMouseOverDelegate=null;
this._items=[];
this._isArrayCollection=false;
this._selectedIndex=-1;
this._activeIndex=-1;
};
b.EditorDropDown.prototype={click:function(c){this.show();
return $telerik.cancelRawEvent(c);
},dispose:function(){b.EditorDropDown.callBaseMethod(this,"dispose");
this.disposeChildren();
this.detachEventHandlers();
},isExpanded:function(){return this._popupVisible;
},show:function(){if(this._popupVisible){return;
}if(this.get_clearSelectedOnShow()){this.set_selectedIndex(-1);
}var c=false;
if(!this._rendered){this.render();
c=true;
}this.raiseEvent("show");
if(!this._childrenRendered){this.renderChildren();
this._childrenRendered=true;
c=true;
}if(c){this._makeAllItemsUnselectable();
}this._show();
if(this.get_enableAriaSupport()){this._popupElement.removeAttribute("aria-hidden");
}},configurePopupPropertiesBeforeShow:function(){this._popupBehavior.set_positioningMode(Telerik.Web.PositioningMode.BottomLeft);
},hide:function(){if(this._popupBehavior){this._popupBehavior.hide(true);
}this._popupVisible=false;
this._getPopupVisibilityController().notifyPopupClosed(this);
this.raiseEvent("hide");
if(this.get_enableAriaSupport()){this._popupElement.setAttribute("aria-hidden","true");
}},onPopupMouseOver:function(d){var c=this.resolveActiveIndex(d);
if(c>-1){this.set_activeIndex(c,d);
}$telerik.cancelRawEvent(d);
},_onPopupClick:function(c){var d=this.resolveActiveIndex(c);
$telerik.cancelRawEvent(c);
if(d>-1){this._selectedIndex=d;
if(this.get_enableAriaSupport()){this.selectUIItem(null,null,true);
}this.hide();
this.raiseEvent("valueSelected");
}},get_activeIndex:function(){return this._activeIndex;
},set_activeIndex:function(d,c){this._activeIndex=d;
this.selectUIItem(c);
},selectPreviousItem:function(){var c=this.get_activeIndex();
if(c-1>=0){this.set_activeIndex(c-1);
}},selectNextItem:function(){var c=this.get_activeIndex();
if(c+1<this._items.length){this.set_activeIndex(c+1);
}},selectUIItem:function(d,l,g){if(!this._popupElement){return;
}var k=this.get_popupElement();
var c=k.getElementsByTagName("TD");
var h=c.length;
var n=this.get_activeIndex();
var m=null;
var o=this.get_enableAriaSupport()&&g;
for(var f=0;
f<h;
f++){var j=c[f];
if(!this._headerClassName||j.className!=this._headerClassName){if(o){j.removeAttribute("aria-selected");
}if(j.item_index==n){j.className="reItemOver";
m=j;
if(o){m.setAttribute("aria-selected","true");
k.setAttribute("aria-activedescendant",m.getAttribute("id"));
k.childNodes[0].setAttribute("aria-activedescendant",m.getAttribute("id"));
}}else{if(l&&j.item_index<=n){j.className="reItemOver";
}else{j.className="";
}}}}if(m&&!d){this._scrollIntoView(m);
}return m;
},_scrollIntoView:function(c){$telerik.scrollIntoView(c);
},attachEventHandlers:function(){if(!this._popupElement){return;
}this.detachEventHandlers();
this._onPopupMouseOverDelegate=Function.createDelegate(this,this.onPopupMouseOver);
$addHandler(this._popupElement,"mouseover",this._onPopupMouseOverDelegate);
this._onPopupClickDelegate=Function.createDelegate(this,this._onPopupClick);
if($telerik.isIE||this.get_contentAreaMode()==b.EditorContentAreaMode.Div){$addHandler(this._popupElement,"mousedown",this._onPopupClickDelegate);
}else{$addHandler(this._popupElement,"click",this._onPopupClickDelegate);
}},detachEventHandlers:function(){if(null!=this._onPopupMouseOverDelegate){$removeHandler(this._popupElement,"mouseover",this._onPopupMouseOverDelegate);
this._onPopupMouseOverDelegate=null;
}if(null!=this._onPopupClickDelegate){if($telerik.isIE){$removeHandler(this._popupElement,"mousedown",this._onPopupClickDelegate);
}else{$removeHandler(this._popupElement,"click",this._onPopupClickDelegate);
}this._onPopupClickDelegate=null;
}},disposeChildren:function(){this._childrenRendered=false;
if(this._itemRootElement&&this._itemRootElement.parentNode){var c=this._itemRootElement;
this.renderItemRoot();
c.parentNode.replaceChild(this._itemRootElement,c);
}},render:function(){this._createUI();
this.renderHeader();
this.renderChildren();
this.renderFooter();
this._rendered=true;
this._childrenRendered=true;
},renderHeader:function(){},renderFooter:function(){},renderItemRoot:function(){this._itemRootElement=this._getTable();
return this._itemRootElement;
},renderNewRow:function(){return(this._itemRootElement.insertRow(-1));
},renderItemContainer:function(){var d=this._itemRootElement.rows[this._itemRootElement.rows.length-1];
var c=d.insertCell(-1);
return c;
},renderChildren:function(){for(var c=0;
c<this._items.length;
c++){if(0==(c%this.get_itemsperrow())){this.renderNewRow();
}var d=this.renderItemContainer();
this.markItemContainer(d,c);
this.renderChild(d,this._items[c],c);
}},renderChild:function(c,d,f){var g=document.createElement("span");
if(d){var j=null;
var h=null;
if(d instanceof Array){j=d[1];
h=d[2];
}else{j=d;
}if(h){var i=document.createElement("span");
i.innerHTML="&nbsp;";
i.className=h;
g.appendChild(i);
}if(j){g.innerHTML+=j;
g.noWrap=true;
}}c.innerHTML=g.innerHTML;
if(this.get_enableAriaSupport()){var e=this._popupBehavior.get_id()+"_"+f;
c.setAttribute("id",e);
c.setAttribute("role","option");
}},resolveActiveIndex:function(c){var d=c.target;
var f=-1;
while(d&&d!=this._itemRootElement){if(null!=d.item_index){f=d.item_index;
break;
}d=d.parentNode;
}return f;
},markItemContainer:function(d,c){d.item_index=c;
},_makeAllItemsUnselectable:function(){if(!this._popupElement){return;
}this._popupElement.setAttribute("unselectable","on");
var c=this._popupElement.getElementsByTagName("*");
var e=c.length;
for(var d=0;
d<e;
d++){c[d].unselectable="on";
}},_show:function(){this.configurePopupPropertiesBeforeShow();
var g=this._popupElement;
var h=this.get_sizetofit();
var f=g.style.overflow;
if(h){g.style.overflowY="hidden";
}g.style.width=this.get_popupwidth();
g.style.height=this.get_popupheight();
this._itemRootElement.style.width="100%";
this._popupBehavior.show();
var e=this._getPopupChildrenHeight();
if(e!="0px"){e=this._getQuirksModeHeight(g,e);
}if(h){g.style.width=this._getPopupChildrenWidth();
g.style.height=e;
}else{var c=parseInt(e);
var d=parseInt(g.style.height);
if(c<d&&c>(d/2)){g.style.height=e;
}}this._popupBehavior.show();
this._getPopupVisibilityController().set_activePopup(this);
g.style.zIndex="100000";
if(h){g.style.overflowY=f;
}this._popupVisible=true;
},_getQuirksModeHeight:function(i,f){try{if($telerik.quirksMode){var c=$telerik.getBorderBox(i);
var g=$telerik.getPaddingBox(i);
var e=parseInt(f)+(c.top*2);
e+=g.top+g.bottom;
f=e+"px";
}}catch(d){}return f;
},_getPopupChildrenWidth:function(){var c=this.get_popupElement().childNodes;
var f=0;
for(var d=0;
d<c.length;
d++){var e=c[d].offsetWidth;
if(e&&e>f){f=e;
}}return f+"px";
},_getPopupChildrenHeight:function(){var c=this.get_popupElement().childNodes;
var d=0;
for(var e=0;
e<c.length;
e++){if(c[e].offsetHeight){d+=c[e].offsetHeight;
}}return d+"px";
},_getPopupVisibilityController:function(){return b.Editor.PopupController;
},getUniqueID:function(){if(!window.RadEditor_uniqueSeed){window.RadEditor_uniqueSeed=new Date()-101;
}if(!window.RadEditor_uniqueIdCounter){window.RadEditor_uniqueIdCounter=1;
}else{window.RadEditor_uniqueIdCounter++;
}var c=window.RadEditor_uniqueSeed-window.RadEditor_uniqueIdCounter;
return"UniqueID"+c;
},_createUI:function(){if(this._popupBehavior){return;
}var c=this.get_element();
if(!this._popupElement){var e=document.createElement("div");
$telerik.addCssClasses(e,[this.get_skin(),this.get_rootpopupclassname(),this.get_popupclassname()]);
this._popupElement=e;
this._popupElement.style.display="none";
this._popupElement.style.position="absolute";
document.body.appendChild(this._popupElement);
}this.renderItemRoot();
this._popupElement.appendChild(this._itemRootElement);
this._popupBehavior=$create(Telerik.Web.PopupBehavior,{id:this.getUniqueID(),parentElement:c},null,null,this._popupElement);
if(this.get_enableAriaSupport()){var d=this.get_popupElement();
d.setAttribute("role","listbox");
d.setAttribute("aria-hidden","true");
d.setAttribute("aria-label",this.get_element().title);
}this.attachEventHandlers();
},_getTable:function(){var c=document.createElement("table");
c.border=0;
c.cellPadding=0;
c.setAttribute("unselectable","on");
c.style.cursor="default";
if(this.get_enableAriaSupport()){c.setAttribute("role","presentation");
}return c;
},get_popupElement:function(){return this._popupElement;
},get_selectedItem:function(){if(this._items&&this._selectedIndex>-1){var c=this._items[this._selectedIndex];
var d=((true==this._isArrayCollection)||(c instanceof Array))?c[0]:c;
return d;
}return null;
},get_selectedIndex:function(){return this._selectedIndex;
},set_selectedIndex:function(c){this._selectedIndex=c;
this.set_activeIndex(c);
},get_items:function(){return this._items;
},set_items:function(c){this.disposeChildren();
this._items=c;
},set_enableAriaSupport:function(d){b.EditorDropDown.callBaseMethod(this,"set_enableAriaSupport",[d]);
var c=this.getAnchorElement();
if(c&&this.get_enableAriaSupport()){c.setAttribute("aria-haspopup","true");
}}};
a.registerControlProperties(b.EditorDropDown,{popupheight:"200px",popupwidth:"200px",rootpopupclassname:"reDropDownBody",popupclassname:"",sizetofit:false,itemsperrow:1,clearSelectedOnShow:true});
a.registerControlEvents(b.EditorDropDown,["show","hide"]);
b.EditorDropDown.registerClass("Telerik.Web.UI.EditorDropDown",b.EditorButton);
Telerik.Web.UI.EditorUpdateableDropDown=function(c){Telerik.Web.UI.EditorUpdateableDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.EditorUpdateableDropDown.prototype={updateValue:function(f){if(null==f){return;
}try{if(!f){f=this.get_text();
}var d=this.getSpanElement();
if(d){this._value=f;
d.innerHTML=(""+f).replace(/\s+/ig,"&nbsp;");
}}catch(c){}},get_value:function(){if(!this._value||this._value==this.get_text()){return"";
}return this._value;
},set_value:function(c){this.updateValue(c);
},dispose:function(){Telerik.Web.UI.EditorUpdateableDropDown.callBaseMethod(this,"dispose");
}};
Telerik.Web.UI.EditorUpdateableDropDown.registerClass("Telerik.Web.UI.EditorUpdateableDropDown",Telerik.Web.UI.EditorDropDown);
Telerik.Web.UI.EditorSelfUpdateableDropDown=function(c){Telerik.Web.UI.EditorSelfUpdateableDropDown.initializeBase(this,[c]);
this._clientStateFieldID=null;
};
Telerik.Web.UI.EditorSelfUpdateableDropDown.prototype={_onPopupClick:function(c){var f=this.resolveActiveIndex(c);
$telerik.cancelRawEvent(c);
if(f>-1){this._selectedIndex=f;
this.hide();
var d=this.get_selectedItem();
if(d){this.updateValue(d);
}this.raiseEvent("valueSelected");
}}};
Telerik.Web.UI.EditorSelfUpdateableDropDown.registerClass("Telerik.Web.UI.EditorSelfUpdateableDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.EditorSplitButton=function(c){Telerik.Web.UI.EditorSplitButton.initializeBase(this,[c]);
this._updateHeader=true;
};
Telerik.Web.UI.EditorSplitButton.prototype={click:function(c){var d=this.isArrowClicked(c.target);
if(d||!this._updateHeader){this.show();
}else{var f=this.get_selectedItem();
if(null==f){this.show();
}else{this.raiseEvent("valueSelected");
}}return $telerik.cancelRawEvent(c);
},initialize:function(){Telerik.Web.UI.EditorSplitButton.callBaseMethod(this,"initialize");
this.set_clearSelectedOnShow(false);
},isArrowClicked:function(d){var c=this._getArrowElement();
if(d==c){return true;
}return false;
},_getArrowElement:function(){var d=this.getAnchorElement().getElementsByTagName("SPAN");
var c=d[d.length-1];
return c;
},get_updateHeader:function(){return this._updateHeader;
},set_updateHeader:function(c){this._updateHeader=c;
}};
Telerik.Web.UI.EditorSplitButton.registerClass("Telerik.Web.UI.EditorSplitButton",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.EditorToolStrip=function(c){Telerik.Web.UI.EditorToolStrip.initializeBase(this,[c]);
this._tools=[];
};
Telerik.Web.UI.EditorToolStrip.prototype={selectUIItem:function(d){for(var f=0;
f<this._items.length;
f++){var g=this._items[f];
if(f==this._activeIndex&&g.get_enabled()){g.setOn(true,"aria-selected");
var c=g.getAnchorElement();
if(c&&this.get_enableAriaSupport()){this.get_popupElement().setAttribute("aria-activedescendant",c.getAttribute("id"));
}}else{g.setOn(false,"aria-selected");
}}},set_selectedIndex:function(e){Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"set_selectedIndex",[e]);
if(this.get_updateHeader()){var i=this.get_selectedItem();
if(!i||!i.getSpanElement){return;
}var h=i.getSpanElement();
if(h){var f=h.cloneNode(true);
var d=this.getSpanElement();
var g=d.parentNode;
g.replaceChild(f,d);
var c=i.getAnchorElement();
if(c){g.setAttribute("title",c.getAttribute("title"));
}}}},hide:function(){Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"hide");
if(this.isIE){var e=this.get_selectedItem();
if(!e||!e.get_element){return;
}var c=e.get_element();
if(c){var d=c.cloneNode(true);
c.replaceNode(d);
e._element=d;
}}},show:function(){var d=this._items;
for(var c=0,e=d.length;
c<e;
c++){var f=d[c];
f.setOn(false,"aria-selected");
}Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"show");
},_onPopupClick:function(c){var f=this._resolveSelectedTool(c);
$telerik.cancelRawEvent(c);
if(f){var d=Array.indexOf(this._items,f);
if($telerik.isSafari){this._selectedIndex=d;
this.set_activeIndex(d);
}else{this.set_selectedIndex(d);
}this.hide();
this.raiseEvent("valueSelected");
}},renderItemRoot:function(){var c=document.createElement("div");
c.className="reTlbVertical";
c.style.cssFloat="left";
c.style.width="100%";
this._itemRootElement=c;
return this._itemRootElement;
},renderChildren:function(){var g=this.get_itemsperrow();
var m=this.get_tools();
var n=document.createElement("ul");
n.setAttribute("onmousedown","return false;");
n.className="reToolbar "+this.get_skin();
this._itemRootElement.appendChild(n);
for(var e=0;
e<m.length;
e++){if(g>1&&e>1&&(e%this.get_itemsperrow()==0)){n=document.createElement("ul");
n.className="reToolbar "+this.get_skin();
this._itemRootElement.appendChild(n);
}var l=m[e];
if(null==l.showText){l.showText=true;
}var h=document.createElement("li");
n.appendChild(h);
var k=Telerik.Web.UI.EditorButton.createTool(l,null,null,null,h);
var d=this.get_enableAriaSupport();
if(d){var c=k.getAnchorElement();
if(c){k.set_enableAriaSupport(d,"option");
c.setAttribute("aria-posinset",e+1);
var f=this._popupBehavior.get_id()+"_"+l.name;
h.setAttribute("role","presentation");
c.setAttribute("id",f);
var j=$telerik.getChildByClassName(c,"reButton_text");
if(j){j.setAttribute("id",f+"_text");
c.setAttribute("aria-describedby",j.id);
}}n.setAttribute("role","presentation");
}this._items[this._items.length]=k;
}},_resolveSelectedTool:function(c){for(var d=0;
d<this._items.length;
d++){var f=this._items[d];
if(f.isTarget(c)){if(f.get_enabled()){return f;
}else{return null;
}}}},get_tools:function(){return this._tools;
},set_tools:function(c){this._tools=Array.clone(c);
}};
Telerik.Web.UI.EditorToolStrip.registerClass("Telerik.Web.UI.EditorToolStrip",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.EditorContextMenu=function(c){Telerik.Web.UI.EditorContextMenu.initializeBase(this,[c]);
this._parentElement=null;
this._eventObject=null;
};
Telerik.Web.UI.EditorContextMenu.prototype={initialize:function(){this.set_updateHeader(false);
this.set_clearSelectedOnShow(true);
},show:function(){this.set_activeIndex(-1);
Telerik.Web.UI.EditorContextMenu.callBaseMethod(this,"show");
},configurePopupPropertiesBeforeShow:function(){var f=this._popupBehavior;
f.set_positioningMode(Telerik.Web.PositioningMode.Absolute);
var d=this.get_parentElement();
if(d){if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(d)&&d.tagName=="DIV"){d=document.body;
}f.set_parentElement(d);
}var c=this._eventObject;
if(c){f.set_x(c.clientX+10);
f.set_y(c.clientY+10);
}},set_eventObject:function(c){this._eventObject=c;
},get_tagName:function(){return this._tagName;
},set_tagName:function(c){this._tagName=c;
},get_parentElement:function(){return this._parentElement;
},set_parentElement:function(c){this._parentElement=c;
}};
Telerik.Web.UI.EditorContextMenu.registerClass("Telerik.Web.UI.EditorContextMenu",Telerik.Web.UI.EditorToolStrip);
})();
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(){var a=$telerik.$,b=Telerik.Web.UI;
Telerik.Web.UI.Editor.AlignmentSelector=function(c){Telerik.Web.UI.Editor.AlignmentSelector.initializeBase(this,[c]);
this._tagName="TD";
this._selectedTuple=null;
this._noAlignmentIndex=0;
this._onValueSelectedDelegate=null;
this._clientStateFieldID=null;
};
Telerik.Web.UI.Editor.AlignmentSelector.prototype={initialize:function(){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"initialize");
this.set_popupwidth("78px");
this.set_popupheight("100px");
this.set_popupclassname("reAlignmentSelector");
this.set_itemsperrow(3);
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
this.setTagName(this._tagName);
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"dispose");
},_imgAlignment:[["",""],["none",""],["",""],["",""],["top",""],["",""],["left",""],["absmiddle",""],["right",""],["",""],["bottom",""],["",""]],_cellAlignment:[["",""],["none",""],["",""],["left","top"],["center","top"],["right","top"],["left","middle"],["center","middle"],["right","middle"],["left","bottom"],["center","bottom"],["right","bottom"]],_tableAlignment:[["",""],["none",""],["",""],["left",""],["center",""],["right",""],["",""],["",""],["",""],["",""],["",""],["",""]],_captionAlignment:[["",""],["none",""],["",""],["left","top"],["center","top"],["right","top"],["",""],["",""],["",""],["left","bottom"],["center","bottom"],["right","bottom"]],_alignmentClassName:["reNoAlignment","reNoAlignment","reNoAlignment","reTopLeft","reTopCenter","reTopRight","reMiddleLeft","reMiddleCenter","reMiddleRight","reBottomLeft","reBottomCenter","reBottomRight"],_getLookupTableByTagName:function(c){switch(c.toUpperCase()){case"IMG":return this._imgAlignment;
case"TABLE":return this._tableAlignment;
case"TD":return this._cellAlignment;
case"TH":return this._cellAlignment;
case"CAPTION":return this._captionAlignment;
default:return null;
}},_configureAlignmentTable:function(l){if(!this._rendered){this.render();
}var k=this._itemRootElement;
var d=0;
for(var e=0;
e<k.rows.length;
e++){var g=false;
for(var h=0;
h<k.rows[e].cells.length;
h++){var c=k.rows[e].cells[h];
var f=this._isAvailable(d++);
c.style.visibility=f?"visible":"hidden";
g|=f;
}if(null!=document.all){k.rows[e].style.display=g?"":"none";
}}},_isAvailable:function(d){var e=false;
if(this._items){var c=this._items[d];
e=((null!=c)&&(""!=c[0]||""!=c[1]));
}return e;
},renderChild:function(c,d,e){var f=document.createElement("div");
if(d){f.innerHTML="&nbsp;";
f.className=this._alignmentClassName[e];
}c.appendChild(f);
},_onDropDownValueSelected:function(){this.set_selectedIndex(this.get_selectedIndex());
},_selectAlignment:function(c,h){c=(""==c||!c)?"none":c.toUpperCase();
h=!h?"":h.toUpperCase();
if(this._items){var f=-1;
for(var e=0;
e<this._items.length;
e++){if(this._isAvailable(e)){var d=this._items[e][0].toUpperCase();
var g=this._items[e][1].toUpperCase();
if(-1==f){f=e;
}if((c==d||c==g)&&(h==d||h==g)){this.set_selectedIndex(e);
return;
}}}this.set_selectedIndex(f);
}},set_selectedIndex:function(d){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"set_selectedIndex",[d]);
var e=this.getSpanElement();
var c=this._alignmentClassName[d];
e.className=c;
},setTagName:function(c){this._tagName=c;
this._items=this._getLookupTableByTagName(this._tagName);
this.set_selectedIndex(this._noAlignmentIndex);
},updateValue:function(c,d){this._selectAlignment(c,d);
},getAlign:function(){var c=this._items[this._selectedIndex];
var d=(c?c[0]:"");
if("none"==d){d="";
}return d;
},getVAlign:function(){var c=this._items[this._selectedIndex];
var d=(c?c[1]:"");
if("none"==d){d="";
}return d;
},show:function(){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"show");
this._itemRootElement.cellSpacing=0;
this._configureAlignmentTable(this._tagName);
},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(c){this._clientStateFieldID=c;
}};
Telerik.Web.UI.Editor.AlignmentSelector.registerClass("Telerik.Web.UI.Editor.AlignmentSelector",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.InsertTableHelper=function(c){Telerik.Web.UI.Editor.InsertTableHelper.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.InsertTableHelper.prototype={initialize:function(){var c=new Array(this.get_itemsperrow()*this.get_itemsperrow());
for(var d=0;
d<c.length;
d++){c[d]=d;
}this._items=c;
},hide:function(){},renderChild:function(c,d,f){var g=document.createElement("div");
g.innerHTML="&nbsp;";
c.appendChild(g);
var e=this._getDimensionByIndex(f);
c.setAttribute("title"," "+e.rows+" x "+e.cols+" ");
},_getDimensionByIndex:function(g){var h=0;
var f=0;
var d=this.get_itemsperrow();
for(var c=0;
c<this._items.length;
c++){if(c%d==0){h++;
f=0;
}f++;
if(g==c){break;
}}var e={rows:h,cols:f};
return e;
},get_selectedItem:function(){var c=this.get_selectedIndex();
return this._getDimensionByIndex(c);
},selectUIItem:function(h,m){var c=this._popupElement.getElementsByTagName("TD");
var k=c.length;
var n=this.get_activeIndex();
var g=this._getDimensionByIndex(n);
var d=g.cols;
for(var j=0;
j<k;
j++){var l=c[j];
var f=l.item_index;
if(f<=n&&l.cellIndex<d){l.className="reItemOver";
}else{l.className="";
}}}};
Telerik.Web.UI.Editor.InsertTableHelper.registerClass("Telerik.Web.UI.Editor.InsertTableHelper",Telerik.Web.UI.EditorDropDown);
Telerik.Web.UI.Editor.InsertTable=function(c){Telerik.Web.UI.Editor.InsertTable.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.InsertTable.prototype={initialize:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"initialize");
this._onTableHelperValueSelectedDelegate=Function.createDelegate(this,this._onTableHelperValueSelected);
this._tableHelper=null;
this._tableHelperItemsPerRow=this.get_itemsperrow();
this.set_itemsperrow(6);
this.set_popupwidth("140px");
this.set_updateHeader(false);
var d=this.get_tools();
this._longTool=d[0];
Array.removeAt(d,0);
for(var c=0;
c<d.length;
c++){d[c].showText=false;
}},show:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"show");
this._tableHelper.set_selectedIndex(-1);
},_onPopupClick:function(c){this._tableHelperClicked=false;
Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"_onPopupClick",[c]);
},_onTableHelperValueSelected:function(){this._tableHelperClicked=true;
this.set_selectedIndex(-1);
var c=this.getSpanElement();
c.className="InsertTable";
this.hide();
this.raiseEvent("valueSelected");
},get_selectedItem:function(){if(this._tableHelperClicked){return this._tableHelper.get_selectedItem();
}else{return Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"get_selectedItem");
}},renderHeader:function(){var c={skin:this.get_skin(),itemsperrow:this._tableHelperItemsPerRow,sizetofit:true};
var d={valueSelected:this._onTableHelperValueSelectedDelegate};
var g=$create(Telerik.Web.UI.Editor.InsertTableHelper,c,d,null,document.createElement("div"));
g.set_rootpopupclassname("");
this._tableHelper=g;
g.render();
var f=g.get_popupElement();
f.style.display="";
f.style.visibility="visible";
f.style.position="";
f.style.cssFloat="left";
var e=this.get_popupElement();
e.insertBefore(f,e.firstChild);
},renderChildren:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"renderChildren");
var d=this._itemRootElement;
if(this._longTool){var f=document.createElement("ul");
d.insertBefore(f,d.firstChild);
this._longTool.showText=true;
var c=document.createElement("li");
f.appendChild(c);
var e=Telerik.Web.UI.EditorButton.createTool(this._longTool,null,null,null,c);
e.get_element().style.width="auto";
this._items[this._items.length]=e;
}}};
Telerik.Web.UI.Editor.InsertTable.registerClass("Telerik.Web.UI.Editor.InsertTable",Telerik.Web.UI.EditorToolStrip);
Telerik.Web.UI.Editor.FormatPainterStrip=function(c){Telerik.Web.UI.Editor.FormatPainterStrip.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.FormatPainterStrip.prototype={initialize:function(){Telerik.Web.UI.Editor.FormatPainterStrip.callBaseMethod(this,"initialize");
this.renderItemRoot();
this.renderChildren();
this.set_selectedIndex(0);
}};
Telerik.Web.UI.Editor.FormatPainterStrip.registerClass("Telerik.Web.UI.Editor.FormatPainterStrip",Telerik.Web.UI.EditorToolStrip);
Telerik.Web.UI.Editor.ColorPicker=function(c){Telerik.Web.UI.Editor.ColorPicker.initializeBase(this,[c]);
this._clientStateFieldID=null;
this._addCustomColorText="Add Custom Color";
};
Telerik.Web.UI.Editor.ColorPicker.prototype={initialize:function(){Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"initialize");
this.set_popupclassname("reColorPicker");
this.set_sizetofit(true);
this.set_itemsperrow(10);
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"dispose");
},_onDropDownValueSelected:function(){var c=this.get_selectedItem();
this.set_color(c);
},get_value:function(){return this.get_color();
},set_value:function(c){this.set_color(c);
},set_color:function(g){if(!g){g="";
}var c=this.getSpanElement();
c.style.borderBottom="0px";
c.style.height="";
if(g){var f=c.offsetHeight;
if(f){c.style.height=(f-3)+"px";
}try{c.style.borderBottom="3px solid "+g;
}catch(d){}}this._color=g;
},get_color:function(){return this._color;
},onPopupMouseOver:function(c){Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"onPopupMouseOver",[c]);
var d=this.get_activeIndex();
var f=this._items[d];
if(null==f){return;
}if(this._infoSpan1){this._infoSpan1.innerHTML=f;
this._infoSpan1.style.backgroundColor=f;
}if(this._infoSpan2){this._infoSpan2.innerHTML=f;
this._infoSpan2.style.color=f;
}},_customColorClicked:function(d){var c=prompt(this.get_addCustomColorText(),"#");
if(c){var h=document.createElement("a");
try{h.style.borderBottom="3px solid "+c;
}catch(d){c="";
}finally{h=null;
}}if(c){this._items[this._items.length]=c;
var f=(this._items.length-1);
if(0==(f%this.get_itemsperrow())){this.renderNewRow();
}var g=this.renderItemContainer();
this.markItemContainer(g,f);
this.renderChild(g,this._items[f],f);
this.set_selectedIndex(f);
this.hide();
this.raiseEvent("valueSelected");
}$telerik.cancelRawEvent(d);
},renderFooter:function(){var c=document.createElement("div");
c.style.textAlign="center";
var d=document.createElement("a");
d.className="reCustomColor";
d.setAttribute("href","#");
d.innerHTML=this.get_addCustomColorText();
$addHandlers(d,{click:this._customColorClicked},this);
c.appendChild(d);
this.get_popupElement().appendChild(c);
var e=document.createElement("div");
e.className="reColorPickerFooter";
var f=document.createElement("span");
f.className="reDarkColor";
var g=document.createElement("span");
g.className="reLightColor";
f.innerHTML=g.innerHTML="&nbsp";
e.appendChild(f);
e.appendChild(g);
this.get_popupElement().appendChild(e);
this._infoSpan1=f;
this._infoSpan2=g;
},renderChild:function(c,d,e){var f=document.createElement("div");
if(null!=d){f.style.backgroundColor=d;
f.setAttribute("title",d);
f.innerHTML="&nbsp;";
}c.appendChild(f);
},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(c){this._clientStateFieldID=c;
},get_addCustomColorText:function(){return this._addCustomColorText;
},set_addCustomColorText:function(c){this._addCustomColorText=c;
}};
Telerik.Web.UI.Editor.ColorPicker.registerClass("Telerik.Web.UI.Editor.ColorPicker",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.UndoRedoDropDown=function(c){Telerik.Web.UI.Editor.UndoRedoDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.UndoRedoDropDown.prototype={renderFooter:function(){},get_selectedItem:function(){var c=Telerik.Web.UI.Editor.UndoRedoDropDown.callBaseMethod(this,"get_selectedItem");
if(!c){c=1;
}return c;
},selectUIItem:function(c,d){return Telerik.Web.UI.Editor.UndoRedoDropDown.callBaseMethod(this,"selectUIItem",[c,true]);
}};
Telerik.Web.UI.Editor.UndoRedoDropDown.registerClass("Telerik.Web.UI.Editor.UndoRedoDropDown",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.ApplyClassDropDown=function(c){Telerik.Web.UI.Editor.ApplyClassDropDown.initializeBase(this,[c]);
this._onValueSelectedDelegate=null;
this._clientStateFieldID=null;
this._clearclasstext="Clear Class";
this._isArrayCollection=true;
};
Telerik.Web.UI.Editor.ApplyClassDropDown.prototype={initialize:function(){Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"initialize");
this.set_popupclassname("reApplyClass");
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
this._cssClassRegex=/[^\{]*\{([^\}]+)\}/gi;
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"dispose");
},_onDropDownValueSelected:function(){this.updateValue(this.get_selectedItem());
},_getClassIcon:function(d){if(!d){d="";
}else{d=d.toLowerCase();
}var c=document.createElement("span");
c.innerHTML="&nbsp;"+d;
c.className="reClass_"+d;
return c;
},_getClassTag:function(e){var f=e&&e.selectorText?e.selectorText:"";
var d=f.lastIndexOf(".");
if(d==0){return"ALL";
}var c=f.lastIndexOf(" ",d);
return f.substring((c+1),d);
},_getClassCss:function(d){var e=this._cssClassRegex;
var c="";
if(null!=d.cssText){c=d.cssText;
c=c.replace(e,"$1");
}else{c=d.style.cssText;
}return c;
},_getDisplayName:function(d){if(!d||!d.selectorText){return"";
}var e=d.selectorText;
var f=e.indexOf(".");
if(-1==f){f=0;
}else{f+=1;
}var c=e.indexOf(":");
if(-1==c){c=e.length;
}return e.substring(f,c);
},_getClassName:function(e){var f=e&&e.selectorText?e.selectorText:"";
var d=f.lastIndexOf(".");
if(d==-1){return"";
}var c=f.indexOf(" ",d);
if(-1==c){c=f.indexOf(":",d);
}if(-1==c){c=f.length;
}return f.substring((d+1),c);
},_getChild:function(e,d,c){var f=document.createElement("div");
if(d.toLowerCase()=="a"){f=document.createElement("a");
f.href="#";
f.onmouseover="window.status = ''; return false;";
f.onclick=new Function("return false;");
f.style.cursor="default";
}if(null!=f.style.cssText){f.style.cssText=e;
}f.setAttribute("style",e);
f.innerHTML=c;
var g=f.style;
g.visibility="visible";
g.marginLeft="0px";
g.overflowX="hidden";
g.clear="none";
g.position="";
g.cssFloat="";
g.styleFloat="";
g.width="";
return f;
},set_items:function(c){Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"set_items",[c]);
if(this._items.length==0||this._items[0][0]!=""){this._items.splice(0,0,["",{cssText:"",selectorText:this.get_clearclasstext()}]);
}},renderChild:function(c,e,g){var i=e[1];
if(i){var j=this._getClassTag(i);
var h=this._getClassCss(i);
var k=e[2]?e[2]:this._getDisplayName(i);
c.setAttribute("title",i.selectorText);
var d=this._getClassIcon(j);
c.appendChild(d);
var f=this._getChild(h,j,k);
c.appendChild(f);
}},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(c){this._clientStateFieldID=c;
},get_clearclasstext:function(){return this._clearclasstext;
},set_clearclasstext:function(c){this._clearclasstext=c;
}};
Telerik.Web.UI.Editor.ApplyClassDropDown.registerClass("Telerik.Web.UI.Editor.ApplyClassDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.FontNameDropDown=function(c){Telerik.Web.UI.Editor.FontNameDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.FontNameDropDown.prototype={updateValue:function(f){try{if(!f){f=this.get_text();
}if(null==f||"AZBY"==f){return;
}var d=this.getSpanElement();
if(d){this._value=(""+f).replace(/\s+/ig,"&nbsp;");
d.innerHTML=this._value;
}}catch(c){}},renderChildren:function(){var e=this._items;
if(e&&e[0]&&!(e[0] instanceof Array)){for(var c=0;
c<e.length;
c++){var d=itemName=e[c];
if(itemName=="Wingdings"||itemName=="Webdings"){itemName="Arial";
}e[c]=[d,String.format("<span style='font:normal 13px {0};'>",itemName)+d+"</span>"];
}}return Telerik.Web.UI.Editor.FontNameDropDown.callBaseMethod(this,"renderChildren");
}};
Telerik.Web.UI.Editor.FontNameDropDown.registerClass("Telerik.Web.UI.Editor.FontNameDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.FontSizeDropDown=function(c){Telerik.Web.UI.Editor.FontSizeDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.FontSizeDropDown.prototype={renderChildren:function(){var e=this._items;
if(e&&e[0]&&!(e[0] instanceof Array)){for(var c=0;
c<e.length;
c++){var d=e[c];
e[c]=[d,String.format("<font size={0}>",d)+d+"</font>"];
}}return Telerik.Web.UI.Editor.FontSizeDropDown.callBaseMethod(this,"renderChildren");
}};
Telerik.Web.UI.Editor.FontSizeDropDown.registerClass("Telerik.Web.UI.Editor.FontSizeDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.InsertCustomLinkDropDown=function(c){Telerik.Web.UI.Editor.InsertCustomLinkDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.Editor.InsertCustomLinkDropDown.prototype={renderItemRoot:function(){var c=document.createElement("ul");
c.className="reCustomLinks";
this._itemRootElement=c;
return this._itemRootElement;
},show:function(){this._linkCounter=0;
return Telerik.Web.UI.Editor.InsertCustomLinkDropDown.callBaseMethod(this,"show");
},renderChildren:function(){this.FlatLinksArray=[];
for(var c=0;
c<this._items.length;
c++){var d=this._items[c];
this._parseSubtree(d,this._itemRootElement);
}},get_selectedItem:function(){var c=this.FlatLinksArray[this.get_selectedIndex()];
return{innerHTML:c.name,href:c.href,target:c.target,title:c.toolTip};
},_parseSubtree:function(k,n){var f=this._linkCounter;
this.FlatLinksArray[f]=k;
var g=document.createElement("li");
n.appendChild(g);
var d=k.childLinks&&k.childLinks.length;
var l=document.createElement("span");
l.innerHTML="&nbsp;";
l.className=d?"reCustomLinksIcon reIcon_plus":"reCustomLinksIcon reIcon_empty";
if(d){function j(){var q=Sys.UI.DomElement.containsCssClass(this,"reIcon_plus");
var r=this.parentNode.getElementsByTagName("UL")[0];
if(r){r.style.display=q?"":"none";
var p=q?"reIcon_plus":"reIcon_minus";
var i=q?"reIcon_minus":"reIcon_plus";
Sys.UI.DomElement.removeCssClass(this,p);
Sys.UI.DomElement.addCssClass(this,i);
}return false;
}$addHandler(l,"click",j);
}g.appendChild(l);
var h=null;
if(k.href){h=document.createElement("a");
h.href="#";
h.innerHTML=k.name;
g.appendChild(h);
this.markItemContainer(h,this._linkCounter);
}else{h=document.createElement("span");
h.innerHTML=k.name;
g.appendChild(h);
}this._linkCounter++;
if(d){var o=document.createElement("ul");
g.appendChild(o);
var c=k.childLinks;
for(var e=0;
e<k.childLinks.length;
e++){var m=c[e];
this._parseSubtree(m,o);
}o.style.display="none";
}}};
Telerik.Web.UI.Editor.InsertCustomLinkDropDown.registerClass("Telerik.Web.UI.Editor.InsertCustomLinkDropDown",Telerik.Web.UI.EditorDropDown);
Telerik.Web.UI.Editor.FormatSetsDropDown=function(c){Telerik.Web.UI.Editor.FormatSetsDropDown.initializeBase(this,[c]);
this._blockElements=b.Editor.formatSetBlockElements;
this._defaultBlockSets=[["p","Normal",[]],["h1","<h1 style='margin: 0px;'>Heading 1</h1>",[]],["h2","<h2 style='margin: 0px;'>Heading 2</h2>",[]],["h3","<h3 style='margin: 0px;'>Heading 3</h3>",[]],["h4","<h4 style='margin: 0px;'>Heading 4</h4>",[]],["h5","<h5 style='margin: 0px;'>Heading 5</h5>",[]],["menu","<menu style='margin: 0px;'>Menu list</menu>",[]],["pre","<pre style='margin: 0px;'>Formatted</pre>",[]],["address","<address style='margin: 0px;'>Address</address>",[]],];
this._headerClassName="reFormatSetsHeader";
this._indexItemDictionary=[];
};
Telerik.Web.UI.Editor.FormatSetsDropDown.prototype={initialize:function(){Telerik.Web.UI.Editor.FormatSetsDropDown.callBaseMethod(this,"initialize");
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
},_onDropDownValueSelected:function(){this.updateValue(this.get_selectedItem());
},set_items:function(c){this._updateLocalSets(c);
Telerik.Web.UI.Editor.FormatSetsDropDown.callBaseMethod(this,"set_items",[c]);
},_updateLocalSets:function(c){this._blockSets=[];
this._elementSets=[];
this._inlineSets=[];
for(var d=0,e=c.length;
d<e;
d++){this._sortFormatSet(c[d]);
}if(this._blockSets.length==0){this._blockSets=this._defaultBlockSets;
}},_sortFormatSet:function(c){if(this.isInlineSet(c)){this._inlineSets.push(c);
}else{if(this.isBlockSet(c)){this._blockSets.push(c);
}else{this._elementSets.push(c);
}}},isInlineSet:function(c){return !c[0];
},isBlockSet:function(c){return a.inArray((c[0]||"").toLowerCase(),this._blockElements)!=-1;
},get_elementSetsByTagName:function(g){var h=[],d=this.get_elementSets(),c;
for(var e=0,f=d.length;
e<f;
e++){c=d[e];
if(c[0].toLowerCase()==g.toLowerCase()){h.push(c);
}}return h;
},renderChildren:function(){this.disposeChildren();
this._indexItemDictionary=[];
this._renderElementChildren();
this._renderInlineChildren();
this._renderBlockChildren();
},_renderElementChildren:function(){var c=[],f=this.get_selectedElement(),g=this._getContextTagNames(f);
for(var d=0,e=g.length;
d<e;
d++){a.merge(c,this.get_elementSetsByTagName(g[d]));
}this._renderSectionChildren(c,this.get_elementSetsText());
},_renderInlineChildren:function(){this._renderSectionChildren(this.get_inlineSets(),this.get_inlineSetsText());
},_renderBlockChildren:function(){this._renderSectionChildren(this.get_blockSets(),this.get_blockSetsText());
},_renderSectionChildren:function(c,d){if(c.length>0){this._renderHeaderItem(d);
this._renderFormatSetItems(c);
}},_getContextTagNames:function(c){var e=[];
while(c&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(c)){var d=c.tagName;
if(d){d=d.toLowerCase();
if(a.inArray(d,e)==-1){e.push(d);
}}c=c.parentNode;
}return e;
},_renderHeaderItem:function(d){var c=this._createItemContainer();
c.className=this._headerClassName;
this.renderChild(c,["",d],c.item_index);
},_createItemContainer:function(){this.renderNewRow();
var d=this.renderItemContainer(),c=this._getLastItemIndex();
this.markItemContainer(d,c);
return d;
},_renderFormatSetItems:function(d){var g=d.length;
for(var e=0;
e<g;
e++){var c=this._createItemContainer(),f=c.item_index;
this.renderChild(c,d[e],f);
}},_getLastItemIndex:function(){return this._itemRootElement.rows.length-1;
},renderChild:function(c,d,e){Telerik.Web.UI.Editor.FormatSetsDropDown.callBaseMethod(this,"renderChild",[c,d,e]);
this._indexItemDictionary[e]=d;
},get_selectedItem:function(){var c=this._indexItemDictionary[this._selectedIndex];
if(c){return c;
}else{return null;
}},updateValue:function(d){var e=(d&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(d.selectedElement))?d.selectedElement:null,c=(d&&d.commandText)?Telerik.Web.UI.Editor.Utils.stripFormatting(d.commandText,"ALL"):"";
this.set_selectedElement(e);
Telerik.Web.UI.Editor.FormatSetsDropDown.callBaseMethod(this,"updateValue",[c]);
},_onDropDownValueSelected:function(){var c=this.get_selectedItem();
if(c){c.commandText=c[1];
}this.updateValue(c);
},hide:function(){Telerik.Web.UI.Editor.FormatSetsDropDown.callBaseMethod(this,"hide");
this._childrenRendered=false;
}};
a.registerControlProperties(b.Editor.FormatSetsDropDown,{clientStateFieldID:null,blockSetsText:"Block Format Sets",inlineSetsText:"Inline Format Sets",elementSetsText:"Element Format Sets",blockSets:[],inlineSets:[],elementSets:[],selectedElement:null,clientTypeName:"Telerik.Web.UI.Editor.FormatSetsDropDown"});
Telerik.Web.UI.Editor.FormatSetsDropDown.registerClass("Telerik.Web.UI.Editor.FormatSetsDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
})();
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor._PopupController=function(){this._activePopup=null;
this._registerGlobalBodyEventHandlers();
};
Telerik.Web.UI.Editor._PopupController.prototype={_registerGlobalBodyEventHandlers:function(){function a(g,f){var j=window.frames;
for(var d=0;
d<j.length;
d++){var h=null;
try{h=j[d].window.document;
}catch(c){}if(!h){continue;
}try{if(false!=g){f.attachToDocument(h);
}else{f.detachFromDocument(h);
}}catch(c){}}}var b=Function.createDelegate(null,function(c){if(c.keyCode==27){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
}});
$telerik.addExternalHandler(document.body,"keydown",b);
a(true,this);
$telerik.addExternalHandler(document.body,"mousedown",this._hideHandler);
Sys.Application.add_unload(function(){a(false,Telerik.Web.UI.Editor.PopupController);
$telerik.removeExternalHandler(document.body,"mousedown",Telerik.Web.UI.Editor.PopupController._hideHandler);
$telerik.removeExternalHandler(document.body,"keydown",b);
});
},attachToDocument:function(a){$telerik.addExternalHandler(a,"mousedown",this._hideHandler);
},detachFromDocument:function(b){try{$telerik.removeExternalHandler(b,"mousedown",this._hideHandler);
}catch(a){}},_hideHandler:function(a){Telerik.Web.UI.Editor.PopupController._hideIfOutsidePopup(a);
},hideActivePopup:function(){if(this._activePopup!=null){this._activePopup.hide();
this._activePopup=null;
}},_hideIfOutsidePopup:function(a){if(this._activePopup!=null){if(!this._activePopup.get_popupElement){return;
}var b=this._activePopup.get_popupElement();
if(!this._isMouseOverElement(a,b)){this.hideActivePopup();
}}},_isMouseOverElement:function(a,b){var d=null;
try{d=$telerik.getBounds(b);
}catch(a){return false;
}if(a&&a.target&&a.target.tagName=="SELECT"&&a.clientX<0){return true;
}var c=$telerik.getDocumentRelativeCursorPosition(a);
return $telerik.containsPoint(d,c.left,c.top);
},notifyPopupClosed:function(a){if(this._activePopup==a){this._activePopup=null;
}},set_activePopup:function(a){if(this._activePopup&&(a!=this._activePopup)){this._activePopup.hide();
}this._activePopup=a;
},get_activePopup:function(){return this._activePopup;
}};
Telerik.Web.UI.Editor._PopupController.registerClass("Telerik.Web.UI.Editor._PopupController",null);
(function(){if(!Telerik.Web.UI.Editor.PopupController){var a=function(){window.setTimeout(function(){Telerik.Web.UI.Editor.PopupController=new Telerik.Web.UI.Editor._PopupController();
},100);
};
a();
}})();
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.DefaultToolAdapter=function(a){Telerik.Web.UI.Editor.DefaultToolAdapter.initializeBase(this,[a]);
this._editor=null;
this._toolJSON=[];
this._tools=[];
this._contextMenusEnabled=true;
this.isIE=$telerik.isIE;
this._editorIEFirstShow=false;
this._contentAreaMode="";
};
Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=null;
Telerik.Web.UI.Editor.DefaultToolAdapter.prototype={initialize:function(){this._onEditorSelectionChangeDelegate=Function.createDelegate(this,this._onEditorSelectionChange);
this._onEditorModeChangeDelegate=Function.createDelegate(this,this._onEditorModeChange);
this._onToolAdapterClickDelegate=Function.createDelegate(this,this._onToolBarClick);
this._onToolAdapterKeyDownDelegate=Function.createDelegate(this,this._onKeyDownHandler);
this._onDropDownValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this._onDropDownBeforeShowDelegate=Function.createDelegate(this,this._onDropDownBeforeShow);
this._onDropDownHideDelegate=Function.createDelegate(this,this._onDropDownHide);
this._onClientDragStartDelegate=Function.createDelegate(this,this._onClientDragStart);
this._initContextMenus();
this._registerEditorHandlers();
var b=Telerik.Web.UI.EditorToolbarMode;
var a=this.get_editor();
switch(a.get_toolbarMode()){case b.Default:a.add_firstShow(Function.createDelegate(this,function(){this._hookToolbarJson2Html();
var c=this.get_editor();
var d=c.get_element().style.height;
c._updateEditorSize(d);
}));
break;
case b.Floating:this._createFloatingButton();
break;
case b.PageTop:case b.ShowOnFocus:this._hookToolbarModeEventHandlers();
break;
}this._registerHolderHandlers();
},_hookToolbarJson2Html:function(){if(this._initializedToolbars){return;
}this._initializedToolbars=true;
var j=this.get_toolJSON(),h=this._getToolBarElements(),k=[],f,l;
for(f=0;
f<j.length;
f++){var g=j[f];
var e=h[f];
this._initializeToolbar(g,e);
var a=g.attributes;
l=a?a.dockingzone:null;
if(l){k[k.length]=[l,e];
}}if($telerik.isIE){var d=this.get_element();
d.style.height="";
}var b=this.get_editor();
var c=b.get_id();
for(f=0;
f<k.length;
f++){var n=k[f][0];
l=n.charAt(0).toUpperCase()+n.substring(1);
var m=$get(c+l);
if(!m){m=$get(n);
}if(m){if(m.innerHTML=="&nbsp;"){m.innerHTML="";
}m.appendChild(k[f][1]);
}}},_initNonDefaultToolbarMode:function(){var b=this.get_editor();
var d=Telerik.Web.UI.EditorToolbarMode;
var a=b.get_toolbarMode();
var e=this._toolbarHolder;
var c=Telerik.Web.UI.WindowBehaviors;
switch(a){case d.ShowOnFocus:e.set_behaviors(c.None);
e.set_visibleTitlebar(false);
break;
case d.PageTop:e.set_behaviors(c.None);
e.set_visibleTitlebar(false);
break;
default:e.set_behaviors(c.Move+c.Close+c.Pin);
break;
}this.get_element().style.visibility="visible";
},_showToolbarHolder:function(b){var a=this.get_editor();
var c=Telerik.Web.UI.EditorToolbarMode;
if(!b){if(this._toolbarHolder){this._toolbarHolder.hide();
}return;
}else{if($telerik.isIE&&!this._editorIEFirstShow){if(a.get_toolbarMode()!=c.Floating){this._editorIEFirstShow=true;
return;
}}}if(a.isFullScreen()){return;
}var e=Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper;
if(e==this&&e._toolbarHolder&&e._toolbarHolder.isVisible()){e.get_toolbarHolder().setActive(true);
return;
}if(e&&e._showToolbarHolder){e._showToolbarHolder(false);
}Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=this;
this.get_window();
this._initNonDefaultToolbarMode();
this._toolbarHolder.show();
if($telerik.isIE){var d=a.get_toolbarMode();
switch(d){case c.ShowOnFocus:case c.PageTop:a.get_TopZone().firstChild.style.display="none";
break;
}}},_positionWindow:function(){var c=Telerik.Web.UI.EditorToolbarMode;
var b=this.get_editor();
var a=b.get_toolbarMode();
if(a==c.ShowOnFocus){this._positionToolbarAboveEditor();
}else{if(a==c.PageTop){this._positionOnPageTop();
}else{if(a==c.Floating){if(!this._wasShown){this._positionToolbarAboveEditor();
this._wasShown=true;
}}}}},get_window:function(){if(!this._toolbarHolder){var b=this.get_editor(),e=b.get_toolbarMode(),d=Telerik.Web.UI.EditorToolbarMode,c=b.get_dialogOpener(),a,f;
if(e==d.Default||e==d.RibbonBar){return null;
}if(!c){return;
}a=c.get_container();
if(!a){return;
}f=a.clone(b.get_id()+"_toolbarMode");
f.set_visibleStatusbar(false);
f.set_keepInScreenBounds(e==d.RibbonBarFloating||e==d.Floating);
f.setSize(this.get_element().offsetWidth+10,1);
f.add_show(Function.createDelegate(this,function(k,g){var i=k.get_contentElement(),j,m,l,h;
if(!i){return;
}j=k.get_popupElement();
j.style.zIndex="10000";
k.setActive(true);
Sys.UI.DomElement.addCssClass(j,"reToolbarWindow");
this._hookToolbarJson2Html();
i.style.overflow="";
i.style.height="";
m=i.offsetWidth;
i.style.width=m+"px";
l=b.get_toolsWidth();
if(!l){h=k.getWindowBounds();
l=h.width;
}k.setSize(l,null);
i.style.width="100%";
this._positionWindow();
}));
this._toolbarHolder=f;
this._moveToolbarsToEditor(false);
}return this._toolbarHolder;
},_moveToolbarsToEditor:function(c){var b=this.get_element();
if(!c){if(!this._fakeToolbarParentCreated){var a=b.ownerDocument.createElement("div");
a.control=b.control;
b.parentNode.appendChild(a);
this._fakeToolbarParentCreated=true;
b.control=null;
var d=a.style;
d.height=d.fontSize=d.lineHeight="1px";
d.border="1px solid red";
d.visibility="hidden";
if(!$telerik.isIE){d.display="none";
}}var f=this.get_toolbarHolder();
f.set_contentElement(b);
b.style.width="100%";
}else{b.style.width="";
var e=this.get_editor().get_TopZone();
e.appendChild(b);
}},_positionToolbarAboveEditor:function(){var e=this._toolbarHolder;
var c=e.get_popupElement();
if(c){c.style.height="";
}var a=this.get_editor();
var b=$telerik.getBounds(a.get_element());
var f=b.x;
var d=$telerik.getBounds(e.get_popupElement()).height;
var g=b.y-d;
e.moveTo(f,g);
},_positionOnPageTop:function(){var c=this._toolbarHolder;
var a=c._getViewportBounds();
var d=a.scrollLeft;
var e=a.scrollTop;
c.moveTo(d,e);
var b=this.get_editor().get_toolsWidth();
if(b&&b.indexOf("%")==-1){c.set_width(b);
}else{c.get_popupElement().style.width="";
}if(!c.isPinned()){c.togglePin();
}},_createFloatingButton:function(){this._onToggleFloatingToolbarDelegate=Function.createDelegate(this,this._onToggleFloatingToolbar);
var b=this.get_editor();
var f=b.get_skin();
var e=b.getLocalizedString("ToggleFloatingToolbar");
var g={name:"ToggleFloatingToolbar",text:(null==e)?"ToggleFloatingToolbar":e,addClickHandler:true,skin:f};
var d={valueSelected:this._onToggleFloatingToolbarDelegate};
var a=Telerik.Web.UI.EditorButton.createTool(g,d);
var c=Telerik.Web.UI.EditorButton.createToolWrapper(a,f);
var h=$get(b.get_id()+"Top");
if(h){h.appendChild(c);
}},_onToggleFloatingToolbar:function(){var a=!this._toolbarHolder||!this._toolbarHolder.isVisible();
this._showToolbarHolder(a);
},_hookToolbarModeEventHandlers:function(){var a=this;
var c=function(){a._showToolbarHolder(true);
};
var b=this.get_editor();
if(b.isIE){this.get_editor().add_editReady(function(){b.attachEventHandler("beforeeditfocus",c);
});
}else{b.add_selectionChange(c);
}b.add_modeChange(function(){a._showToolbarHolder(a.get_editor().get_mode()==Telerik.Web.UI.EditModes.Design);
});
b.add_submit(function(){a._showToolbarHolder(false);
});
b.add_toggleScreenMode(function(){var d=a.get_editor();
var e=d.isFullScreen();
a._moveToolbarsToEditor(e);
if(d.get_toolbarMode()!=Telerik.Web.UI.EditorToolbarMode.Default){d._updateEditorSize(d.get_element().style.height);
}var f=a.get_toolbarHolder();
if(e){f.hide();
}else{f.show();
}});
this._bodyClickDelegate=Function.createDelegate(this,this._onBodyClick);
$telerik.addExternalHandler(document.body,"click",this._bodyClickDelegate);
},_disposeToolbarModeHandlers:function(){if(this._bodyClickDelegate){$telerik.removeExternalHandler(document.body,"click",this._bodyClickDelegate);
this._bodyClickDelegate=null;
}},onContextMenu:function(c){if(!this._contextMenusEnabled){return;
}var d=this.get_editor();
if(d.get_mode()!=Telerik.Web.UI.EditModes.Design){return;
}this.createContextMenus();
var f=c.srcElement?c.srcElement:c.target;
var g=f.tagName;
var a=this._contextMenus[g];
if("TH"==g&&!a){a=this._contextMenus.TD;
}var b="";
if(!a){var i=Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"A");
if(!i){i=Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"TD");
}if(!i){i=Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"TABLE");
}if(i){b=i.tagName;
f=i;
}else{b="*";
}a=this._contextMenus[b];
}if(a&&g=="IMG"&&f&&"true"==f.getAttribute("isflash")){a=null;
}if(!this.isIE&&b=="*"){return;
}if(a){a.set_eventObject(c);
a.show();
if($telerik.isSafari){try{var j=f.tagName;
if(j=="IMG"||j=="TABLE"||j=="TD"||j=="TR"){d.selectElement(f);
}}catch(h){}}}return $telerik.cancelRawEvent(c);
},enableContextMenus:function(a){this._contextMenusEnabled=a;
},_initContextMenus:function(){var a=Function.createDelegate(this,this.onContextMenu);
var b=this.get_editor();
b.add_editReady(function(){b.attachEventHandler("contextmenu",a);
});
},createContextMenus:function(){if(this._contextMenus){return;
}this._contextMenus={};
var c=this.get_editor();
var f=c.get_skin();
var b=c.get_contextMenusJSON();
var d={valueSelected:this._onDropDownValueSelectedDelegate,show:this._onDropDownBeforeShowDelegate,hide:this._onDropDownHideDelegate};
for(var e=0;
e<b.length;
e++){var a=b[e];
a.sizetofit=true;
a.parentElement=c.get_contentAreaElement();
a.skin=f;
var h=$create(Telerik.Web.UI.EditorContextMenu,a,d,null,document.createElement("span"));
var g=a.tagName?a.tagName:"*";
this._contextMenus[g]=h;
}},dispose:function(){var b=this._getToolBarElements();
if(b){for(var a=0;
a<b.length;
a++){$clearHandlers(b[a]);
}}this._tools=[];
this._disposeToolbarModeHandlers();
var c=this._toolbarHolder;
if(c&&c.dispose){c.dispose();
}Telerik.Web.UI.Editor.DefaultToolAdapter.callBaseMethod(this,"dispose");
},setFocus:function(){var a=this._tools[0];
window.setTimeout(function(){if(a){a.setFocus();
}},100);
return false;
},getContextMenuByTagName:function(a){this.createContextMenus();
return this._contextMenus[a];
},getToolByName:function(b){for(var a=0;
a<this._tools.length;
a++){var c=this._tools[a];
if(c&&c.get_name()==b){return c;
}}return null;
},setToolState:function(g,c){if(!g){g=this._tools;
}var a=this.get_editor();
for(var b=0;
b<g.length;
b++){var d=g[b];
if(d.get_name){var f=d.get_name();
if(d.setState){var e=c;
if(null==e){e=a.getToolState(f);
}if(null!=e){d.setState(e);
}}if(d.updateValue){d.updateValue(a.getToolValue(f));
}}}},_convertCommandsArray:function(b){var f=[];
for(var e=0;
e<b.length;
e++){var c=b[e];
var d=(e+1)+". "+c.get_title();
if(c.get_argument){var a=c.get_argument();
if(a){d+=' ["'+a+'"]';
}}f[e]=[e+1,d];
}return f;
},_onDropDownHide:function(c,a){var b=this.get_editor();
b.enableContentArea(true);
},_onClientDragStart:function(b,a){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
},_onDropDownBeforeShow:function(r,b){var d=this.get_editor();
var e;
if($telerik.isIE&&Telerik.Web.UI.EditorSplitButton.isInstanceOfType(r)&&r.isArrowClicked(event?event.srcElement:null)){d.setFocus();
}if(Telerik.Web.UI.EditorToolStrip.isInstanceOfType(r)){this.setToolState(r.get_items());
}if(!d.getSelection().isControl()&&!Telerik.Web.UI.EditorContextMenu.isInstanceOfType(r)){d.enableContentArea(false);
}var t=r.get_name();
if(t=="Undo"){var u=d.get_commandsManager().getCommandsToUndo();
u=this._convertCommandsArray(u);
r.set_items(u);
}else{if(t=="Redo"){var p=d.get_commandsManager().getCommandsToRedo();
p=this._convertCommandsArray(p);
r.set_items(p);
}else{if(t=="ModuleManager"){var k=d.get_modulesManager();
if(!k){return;
}var l=k.get_modules();
var h=[];
for(e=0;
e<l.length;
e++){var g=l[e];
var m=g.get_name();
var s=g.get_title();
if(!s){s=m;
}cssClass=g.get_visible()?"reModule_visible_icon":"reModule_hidden_icon";
h[e]=[m,s,cssClass];
}r.set_updateHeader(false);
r.set_items(h);
}}}var c=r.get_items();
if(d.get_enableComments()||d.get_enableTrackChanges()){var q=d.getSelectedElement();
if(q){var o=Telerik.Web.UI.Editor.TrackChangesSelection.locateElementInRange(d.getSelection().getRange(),"placeholder");
if(o.fullySelected){var a=-1;
for(var f=0;
f<c.length;
f++){if("AddComment"==c[f]._name){a=f;
break;
}}if(a>-1){c[a].set_enabled(false);
}}}}if(c&&c.length>0){return;
}var n=null;
switch(t){case"ApplyClass":n=d.getCssArray();
break;
case"FontName":n=Array.clone(d.get_fontNames());
break;
case"FontSize":n=d.get_fontSizes();
break;
case"InsertSymbol":n=d.get_symbols();
if(($telerik.isIE||$telerik.isSafari)&&n&&n.length){for(e=0;
e<n.length;
e++){if(n[e]=="&"){n[e]="&amp;";
}if(n[e]=="<"){n[e]="&lt;";
}}}break;
case"BackColor":case"ForeColor":n=d.get_colors();
break;
case"RealFontSize":n=d.get_realFontSizes();
break;
case"InsertSnippet":n=d.get_snippets();
break;
case"Zoom":n=["10%","20%","50%","100%","150%","200%","300%","500%"];
break;
case"FormatBlock":n=d.get_paragraphs();
break;
case"FormatSets":n=d.get_formatSets();
break;
case"InsertCustomLink":n=d.get_links();
break;
case"AjaxSpellCheck":case"SpellCheck":n=d.get_languages();
break;
}if(n){r.set_items(n);
}},_initializeToolbar:function(t,q){var r=this._getToolBarItemElements(q);
var s=t.tools;
var d=this.get_editor();
var o=d.get_skin();
var m=0;
if(s){var u=0;
var l=s.length;
for(var g=0;
g<l;
g++){var j=this._getItemElementByIndex(r,g);
if(typeof(j)=="undefined"){break;
}var v=this._getToolElement(j);
u+=j.offsetWidth;
var a=s[g];
var y=a.type;
var x=a.name;
var w=Telerik.Web.UI.EditorToolType;
var b=Telerik.Web.UI.EditorButton;
var p=null;
var z=false;
var e=d.get_enableAriaSupport();
if(e){r[g].setAttribute("role","presentation");
var k=r[l+1];
if(k){k.setAttribute("role","presentation");
}if(y!=w.Separator){j.setAttribute("role","presentation");
}}if(y){switch(y){case w.Button:break;
case w.Separator:if(!m){m+=parseInt($telerik.getCurrentStyle(j,"marginLeft"));
m+=parseInt($telerik.getCurrentStyle(j,"marginRight"));
if(e){j.setAttribute("role","separator");
}}u+=m;
b=null;
break;
case w.DropDown:b=Telerik.Web.UI.EditorDropDown;
if(x=="FontName"){b=Telerik.Web.UI.Editor.FontNameDropDown;
}else{if(x=="FontSize"){b=Telerik.Web.UI.Editor.FontSizeDropDown;
}else{if(x=="FormatBlock"||x=="RealFontSize"||x=="Zoom"){b=Telerik.Web.UI.EditorUpdateableDropDown;
}else{if(x=="FormatSets"){b=Telerik.Web.UI.Editor.FormatSetsDropDown;
}else{if(x=="ApplyClass"){b=Telerik.Web.UI.Editor.ApplyClassDropDown;
}else{if(x=="InsertCustomLink"){b=Telerik.Web.UI.Editor.InsertCustomLinkDropDown;
}}}}}}z=true;
break;
case w.SplitButton:b=Telerik.Web.UI.EditorSplitButton;
if(x=="ForeColor"||x=="BackColor"){b=Telerik.Web.UI.Editor.ColorPicker;
a.addCustomColorText=d.getLocalizedString("AddCustomColor");
}else{if(x=="Undo"||x=="Redo"){b=Telerik.Web.UI.Editor.UndoRedoDropDown;
}}z=true;
break;
case w.ToolStrip:b=Telerik.Web.UI.EditorToolStrip;
if(x=="InsertTable"){b=Telerik.Web.UI.Editor.InsertTable;
}if(x=="FormatPainter"){b=Telerik.Web.UI.Editor.FormatPainterStrip;
}z=true;
break;
case w.Custom:break;
}}if(a.attributes){for(var h in a.attributes){a[h.toLowerCase()]=a.attributes[h];
}}if(b){var f=null;
if(z){f={valueSelected:this._onDropDownValueSelectedDelegate,show:this._onDropDownBeforeShowDelegate,hide:this._onDropDownHideDelegate};
a.skin=o;
}p=$create(b,a,f,null,v);
if(this.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){p.set_contentAreaMode(Telerik.Web.UI.EditorContentAreaMode.Div);
}if(p.set_enableAriaSupport&&y!=w.Separator){p.set_enableAriaSupport(e);
}}if(p){Array.add(this._tools,p);
var n=p.get_shortCut();
if(n){var c=p.get_name();
if(Telerik.Web.UI.EditorDropDown.isInstanceOfType(p)&&c!="Undo"&&c!="Redo"){c="reToolAdapter_"+c;
Telerik.Web.UI.Editor.CommandList[c]=this._toolAdapterDropDownExpander;
}d.setShortCut(c,n);
}this._attachHandlerToToolElementParent(v);
}}this._toolbarSizeFixIE(r,q,u);
this._attachHandlerToToolbarElement(q);
}},_getToolBarItemElements:function(a){return a.getElementsByTagName("li");
},_getItemElementByIndex:function(b,a){return b[a+1];
},_getToolElement:function(a){return a.firstChild;
},_attachHandlerToToolbarElement:function(a){$addHandlers(a,{click:this._onToolAdapterClickDelegate,keydown:this._onToolAdapterKeyDownDelegate},this);
},_attachHandlerToToolElementParent:function(a){},_toolbarSizeFixIE:function(b,a,c){var d=a;
if(this.isIE&&d&&c){d.style.width=(c+(b[0].offsetWidth)*2)+"px";
}},_toolAdapterDropDownExpander:function(a,b){var c=b.getToolByName(a.replace("reToolAdapter_",""));
c.setFocus();
c.show();
c.selectNextItem();
return false;
},_onEditorModeChange:function(e,a){var b=Telerik.Web.UI.EditModes;
var d=e.get_mode();
this._setEnabled(d==b.Design);
if(!$telerik.isFirefox&&!$telerik.isOpera&&d==b.Html){var c=this.getToolByName("FindAndReplace");
if(c){this._setToolEnabled(c,true);
}}},_onEditorSelectionChange:function(b,a){this.setToolState();
},_setEnabled:function(a){var c=this._tools;
for(var b=0;
b<c.length;
b++){this._setToolEnabled(c[b],a);
}},_setToolEnabled:function(b,a){b.set_enabled(a);
},_registerEditorHandlers:function(){var a=this.get_editor();
a.add_selectionChange(this._onEditorSelectionChangeDelegate);
a.add_modeChange(this._onEditorModeChangeDelegate);
},_registerHolderHandlers:function(){var a=this.get_editor();
if(a.get_toolbarMode()==Telerik.Web.UI.EditorToolbarMode.Floating){var b=this.get_toolbarHolder();
if(typeof(b)!="undefined"){b.add_dragStart(this._onClientDragStartDelegate);
}}},_onBodyClick:function(a){var b=this.get_editor();
if(b&&b.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){if(!a){a=window.event;
}var c=(a.srcElement)?a.srcElement:a.originalTarget;
if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(c)||$telerik.isDescendant(this.get_editor().get_contentArea(),c)){this._preventToolbarFromHiding=true;
}}if(this._preventToolbarFromHiding){this._preventToolbarFromHiding=false;
return;
}this._showToolbarHolder(false);
},_onDropDownValueSelected:function(b,a){this._preventToolbarFromHiding=true;
var c=b.get_selectedItem();
if(Telerik.Web.UI.EditorButton.isInstanceOfType(c)){this._raiseEditorEvent(c,null);
}else{this._raiseEditorEvent(b,c);
}},_onKeyDownHandler:function(b){var d=b.keyCode;
if(9==d||37==d||39==d||121==d){if(Telerik.Web.UI.Editor.PopupController){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
}}if(121==d){var c=this.get_editor();
window.setTimeout(function(){if(c){c.setFocus();
}},100);
if(b.rawEvent){$telerik.cancelRawEvent(b.rawEvent);
}return $telerik.cancelRawEvent(b);
}if(9==d){return;
}var a=this._getSelectedTool(b);
if(!Telerik.Web.UI.EditorButton.isInstanceOfType(a)){return;
}if(37==d||39==d){var g=a;
while(true){g=(37==d)?this._getPreviousTool(g):this._getNextTool(g);
if(null==g){break;
}if(g.get_enabled()){break;
}}if(g&&g.get_enabled()){g.setFocus();
}}if(13==d&&a&&!a.get_selectedItem){this._raiseEditorEvent(a,null);
return;
}if(!Telerik.Web.UI.EditorDropDown.isInstanceOfType(a)){return;
}if(38==d||40==d){var f=false;
if(!a.isExpanded()){a.show();
f=true;
}if(f||40==d){a.selectNextItem();
}else{a.selectPreviousItem();
}}else{if(13==d){a.hide();
if(a.get_activeIndex){a.set_selectedIndex(a.get_activeIndex());
}this._onDropDownValueSelected(a);
}else{if(27==d){a.hide();
}}}},_onToolBarClick:function(b){var a=this._getSelectedTool(b);
if(a){if(Telerik.Web.UI.EditorDropDown.isInstanceOfType(a)){a.click(b);
}else{if(false){}else{this._raiseEditorEvent(a);
}}}$telerik.cancelRawEvent(b);
},_raiseEditorEvent:function(d,e){var c=this.get_events().getHandler("ToolClick");
if(c){var a=d.get_name?d.get_name():"";
var b=new Telerik.Web.UI.EditorCommandEventArgs(a,d,e);
c(d,b);
}},_getPreviousTool:function(b){var a=Array.indexOf(this._tools,b);
return this._tools[a-1];
},_getNextTool:function(b){var a=Array.indexOf(this._tools,b);
return this._tools[a+1];
},_getSelectedTool:function(b){var c=Telerik.Web.UI.EditorButton.getToolRootNode(b.target);
if(null==c){return;
}var a=c.control;
if(null==a){return;
}if(a.get_enabled&&a.get_enabled()==false){return;
}if(b&&a){b.preventDefault();
b.stopPropagation();
}return a;
},_getToolBarElements:function(){var a=this.get_element();
if(!a){return null;
}var b=a.getElementsByTagName("ul");
return b;
},get_tools:function(){return this._tools;
},get_toolbarHolder:function(){return this.get_window();
},get_editor:function(){return this._editor;
},set_editor:function(a){if(this._editor!=a){this._editor=a;
}},get_contentAreaMode:function(){return(this._contentAreaMode!="")?this._contentAreaMode:Telerik.Web.UI.EditorContentAreaMode.Iframe;
},set_contentAreaMode:function(a){if(this._contentAreaMode!=a){this._contentAreaMode=a;
}},get_toolJSON:function(){return this._toolJSON;
},set_toolJSON:function(a){this._toolJSON=a;
},add_toolClick:function(a){this.get_events().addHandler("ToolClick",a);
},remove_toolClick:function(a){this.get_events().removeHandler("ToolClick",a);
}};
Telerik.Web.UI.Editor.DefaultToolAdapter.registerClass("Telerik.Web.UI.Editor.DefaultToolAdapter",Sys.UI.Control);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.RibbonBarToolAdapter=function(a){Telerik.Web.UI.Editor.RibbonBarToolAdapter.initializeBase(this,[a]);
this._ribbonBar=null;
this._toolsWrapper=null;
this._ribbonBarButtons=[];
this._ribbonBarSplitButtons=[];
this._ribbonBarItems=[];
this._toolbarEnum=Telerik.Web.UI.EditorToolbarMode;
this._toolBarMode=null;
};
Telerik.Web.UI.Editor.RibbonBarToolAdapter.prototype={initialize:function(){var a=this.get_toolbarMode();
Telerik.Web.UI.Editor.RibbonBarToolAdapter.callBaseMethod(this,"initialize");
this._moveRibbonBarInToolsWrapper();
this._initializeRibbonBarButtons();
this._onRibbonBarButtonClickedDelegate=Function.createDelegate(this,this._onRibbonBarButtonClick);
this._registerribbonBarHandlers();
this._filterToolbarJson();
this._hookToolbarJson2Html();
if(a!=this._toolbarEnum.RibbonBar){this.get_window();
switch(a){case this._toolbarEnum.RibbonBarFloating:this._createFloatingButton();
break;
case this._toolbarEnum.RibbonBarPageTop:case this._toolbarEnum.RibbonBarShowOnFocus:this._hookToolbarModeEventHandlers();
break;
}}this._initializeToolsWrapper();
this._addToggleScreenHandler();
},_moveRibbonBarInToolsWrapper:function(){var b=this.get_ribbonBar(),a=b.get_element().parentNode;
this.get_toolsWrapper().appendChild(b.get_element());
this._clearRibbonBarElementWidth();
b.repaint();
$telerik.$(a).remove();
this._clearRibbonBarElementWidth();
},_clearRibbonBarElementWidth:function(){this.get_ribbonBar().get_element().style.width="";
},_initializeToolsWrapper:function(){var d=this.get_toolsWrapper(),e=d.style,c=this.get_toolbarMode(),b="1px",a=($telerik.isOpera)?"124px":"128px";
e.height=a;
e.visibility="visible";
e.overflow="visible";
e.paddingTop=b;
if($telerik.isFirefox){e.paddingLeft=b;
e.paddingRight=b;
}if(c!=this._toolbarEnum.RibbonBar){Sys.UI.DomElement.addCssClass(d,"RadEditor");
d.parentNode.style.overflow="hidden";
}},_addToggleScreenHandler:function(){this._toggleScreenModeDelegate=Function.createDelegate(this,this._clearRibbonBarElementWidth);
this.get_editor().add_toggleScreenMode(this._toggleScreenModeDelegate);
},_positionWindow:function(){var a=this.get_toolbarMode();
switch(a){case this._toolbarEnum.RibbonBarShowOnFocus:this._positionToolbarAboveEditor();
break;
case this._toolbarEnum.RibbonBarPageTop:this._positionOnPageTop();
break;
case this._toolbarEnum.RibbonBarFloating:if(!this._wasShown){this._positionToolbarAboveEditor();
this._wasShown=true;
}break;
}this._clearRibbonBarElementWidth();
},_positionOnPageTop:function(){var b=this._toolbarHolder;
var a=b._getViewportBounds();
var c=a.scrollLeft;
var d=a.scrollTop;
b.moveTo(c,d);
b.get_popupElement().style.width="100%";
if(!b.isPinned()){b.togglePin();
}},_initNonDefaultToolbarMode:function(){var b=this.get_toolbarMode();
var c=this._toolbarHolder;
var a=Telerik.Web.UI.WindowBehaviors;
switch(b){case this._toolbarEnum.RibbonBarShowOnFocus:c.set_behaviors(a.None);
c.set_visibleTitlebar(false);
break;
case this._toolbarEnum.RibbonBarPageTop:c.set_behaviors(a.None);
c.set_visibleTitlebar(false);
break;
default:c.set_behaviors(a.Move+a.Close+a.Pin);
break;
}this.get_element().style.visibility="visible";
},_showToolbarHolder:function(b){var a=this.get_editor(),c=this.get_toolbarMode();
if(!b){if(this._toolbarHolder){this._toolbarHolder.hide();
}return;
}else{if($telerik.isIE&&!this._editorIEFirstShow){if(c!=this._toolbarEnum.RibbonBarFloating){this._editorIEFirstShow=true;
return;
}}}if(a.isFullScreen()){return;
}var e=Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper;
if(e==this&&e._toolbarHolder&&e._toolbarHolder.isVisible()){e.get_toolbarHolder().setActive(true);
return;
}if(e&&e._showToolbarHolder){e._showToolbarHolder(false);
}Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=this;
var d=this.get_window();
this._initNonDefaultToolbarMode();
this._toolbarHolder.show();
if($telerik.isIE){switch(c){case this._toolbarEnum.RibbonBarShowOnFocus:case this._toolbarEnum.RibbonBarPageTop:a.get_TopZone().firstChild.style.display="none";
break;
}}d.get_contentElement().parentNode.style.overflow="visible";
this.get_ribbonBar().repaint();
},_filterToolbarJson:function(){var f=this.get_toolJSON(),a,d,b,c,g,e;
for(a=0,d=f.length;
a<d;
a++){c=f[a];
g=c.tools;
for(b=g.length-1;
b>-1;
b--){e=g[b];
if(typeof(e.name)=="undefined"||!e.type||(e.type==Telerik.Web.UI.EditorToolType.ToolStrip&&e.name!="InsertTable")){g.splice(b,1);
}}}},_initializeRibbonBarButtons:function(){var o=this.get_ribbonBar();
var q=o.get_tabs();
for(var d=0,n=q.get_count();
d<n;
d++){var p=q.getTab(d);
var c=p.get_groups(d);
for(var h=0,a=c.get_count();
h<a;
h++){var b=c.getGroup(h);
var g=b.get_items();
for(var m=0,e=g.get_count();
m<e;
m++){var f=g.getItem(m);
if(f.get_value){this._ribbonBarButtons.push(f);
this._ribbonBarItems.push(f);
this._addSetOnMethodToButton(f);
this._addIsOnMethodToButton(f);
}else{if(f instanceof Telerik.Web.UI.RibbonBarSplitButton){this._ribbonBarSplitButtons.push(f);
this._ribbonBarItems.push(f);
}}}}}},_addSetOnMethodToButton:function(a){a.setOn=function(b){if(this.set_toggled){this.set_toggled(b);
}};
},_addIsOnMethodToButton:function(a){a.isOn=function(){return(this.get_toggled)?this.get_toggled():false;
};
},_registerribbonBarHandlers:function(){var a=this.get_ribbonBar();
a.add_buttonToggled(this._onRibbonBarButtonClickedDelegate);
a.add_splitButtonClicked(this._onRibbonBarButtonClickedDelegate);
},_onRibbonBarButtonClick:function(e,a){var b=a.get_button();
if(b.set_toggled){b.set_toggled(false);
}var c=b.get_value();
var d=new Telerik.Web.UI.EditorCommandEventArgs(c,null,null);
this.get_editor().fire(c,d);
},get_ribbonBar:function(){if(!this._ribbonBar){this._ribbonBar=this.get_editor().get_ribbonBar();
}return this._ribbonBar;
},get_toolsWrapper:function(){if(!this._toolsWrapper){this._toolsWrapper=this.get_editor().get_TopZone().firstChild;
}return this._toolsWrapper;
},getToolByName:function(e,b){var f=this.get_ribbonBar();
var c=f.findButtonByValue(e);
if(null==c){c=f.findToggleButtonByValue(e);
}if(null==c){return f.findItemByAttribute("rel",e);
}if(null!=c){return c;
}for(var d=0;
d<this._tools.length;
d++){var g=this._tools[d];
if(g&&g.get_name()==e){return g;
}}return null;
},_setEnabled:function(a){this._setRibbonBarItemsEnabled(a);
this._setEditorToolsEnabled(a);
},_setRibbonBarItemsEnabled:function(a){var d=this._ribbonBarItems;
for(var b=0,e=d.length;
b<e;
b++){var c=d[b];
this._setToolEnabled(c,a);
}},_setEditorToolsEnabled:function(a){var c=this._tools;
for(var b=0;
b<c.length;
b++){this._setToolEnabled(c[b],a);
}},_setToolEnabled:function(c,a){c.set_enabled(a);
var b=c.get_element();
if(!a){Sys.UI.DomElement.addCssClass(b,"rrbImagePlaceholderDisabled");
}else{Sys.UI.DomElement.removeCssClass(b,"rrbImagePlaceholderDisabled");
}},_getToolBarElements:function(){var a=this.get_ribbonBar().get_element();
if(!a){return null;
}var b=$telerik.$(a).find("div.rrbButtonGroup").get();
return b;
},_getToolBarItemElements:function(a){return $telerik.$(a).find("div.rrbTemplateItem").get();
},_getItemElementByIndex:function(b,a){return b[a];
},_getToolElement:function(a){return a.getElementsByTagName("A")[0];
},_attachHandlerToToolElementParent:function(a){var b=a.parentNode;
if($telerik.isSafari){b.setAttribute("onmousedown","return false;");
}$addHandlers(b,{click:this._onToolAdapterClickDelegate,keydown:this._onToolAdapterKeyDownDelegate},this);
},_attachHandlerToToolbarElement:function(a){},_toolbarSizeFixIE:function(b,a,c){},_onEditorSelectionChange:function(b,a){this.get_ribbonBar()._hideMenus();
this.setRibbonBarToolState();
this.setToolState();
},setRibbonBarToolState:function(g,c){if(!g){g=this._ribbonBarButtons;
}var a=this.get_editor();
for(var b=0;
b<g.length;
b++){var d=g[b];
var f=d.get_value();
var e=c;
if(null==e){e=a.getToolState(f);
}if(null!=e){this._setRibbonBarButtonState(d,e);
}}},_setRibbonBarButtonState:function(a,b){if(b==Telerik.Web.UI.Editor.CommandStates.Disabled){this._setToolEnabled(a,false);
}else{this._setToolEnabled(a,true);
if(b==Telerik.Web.UI.Editor.CommandStates.Off){a.set_toggled(false);
}else{a.set_toggled(true);
}}},get_toolbarMode:function(){if(!this._toolbarMode){this._toolbarMode=this.get_editor().get_toolbarMode();
}return this._toolbarMode;
},set_toolbarMode:function(a){this._toolbarMode=a;
}};
Telerik.Web.UI.Editor.RibbonBarToolAdapter.registerClass("Telerik.Web.UI.Editor.RibbonBarToolAdapter",Telerik.Web.UI.Editor.DefaultToolAdapter);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(b,a,g,f){function d(j){var i=j.startContainer||(j.commonParentElement?j.commonParentElement():(j.length?j.item(0):j.parentElement()));
return i.nodeType==9?i:i.ownerDocument;
}function h(i){return i.defaultView||i.parentWindow;
}function e(){if(window.getSelection||document.getSelection){return window.getSelection()||document.getSelection();
}else{return null;
}}function c(){var i=e();
return i?document.createRange():document.selection?(document.selection.type=="None"?document.body.createTextRange():document.selection.createRange()):null;
}b.DomRange=function(j,i){this.options=a.extend({preventCalculateEdges:false},i||{});
this.range=j;
this._calculateEdges();
};
b.DomRange.START_TO_START=0;
b.DomRange.START_TO_END=1;
b.DomRange.END_TO_END=2;
b.DomRange.END_TO_START=3;
b.DomRange.toDomRange=function(i){return(b.DomRange.isInstanceOfType(i))?i:new b.DomRange(i);
};
b.DomRange.createRange=function(i){return new b.DomRange(c(i));
};
b.DomRange.prototype={selectNodeContents:function(i){var j=this.range;
if(j.selectNodeContents){j.selectNodeContents(i);
}else{if(this.range.length){this.range.addElement(i);
}else{if(j.moveToElementText){this.setEnd(i,i[i.nodeType===1?"childNodes":"nodeValue"].length);
this.setStart(i,0);
}}}this._calculateEdges(true);
},selectNode:function(i){var j=this.range;
if(j.selectNode){j.selectNode(i);
}else{if(j.length){j.addElement(i);
}else{if(j.moveToElementText){j.moveToElementText(i);
}}}this._calculateEdges(true);
},setStart:function(i,j){if(this.range.setStart){this.range.setStart(i,j);
}else{this.range.setEndPoint("StartToStart",this._setStartRangeAtNodeOffset(i,j));
}this._calculateEdges();
},setEnd:function(i,j){if(this.range.setEnd){this.range.setEnd(i,j);
}else{this.range.setEndPoint("EndToStart",this._setStartRangeAtNodeOffset(i,j,true));
}this._calculateEdges();
},setStartBefore:function(i){var j=this.range;
if(j.setStartBefore){j.setStartBefore(i);
this._calculateEdges();
}else{this.setStart(i.parentNode,g.findNodeIndex(i));
}},setStartAfter:function(i){var j=this.range;
if(j.setStartAfter){j.setStartAfter(i);
this._calculateEdges();
}else{this.setStart(i.parentNode,g.findNodeIndex(i)+1);
}},setEndBefore:function(i){var j=this.range;
if(j.setEndBefore){j.setEndBefore(i);
this._calculateEdges();
}else{this.setEnd(i.parentNode,g.findNodeIndex(i));
}},setEndAfter:function(i){var j=this.range;
if(j.setEndAfter){j.setEndAfter(i);
this._calculateEdges();
}else{this.setEnd(i.parentNode,g.findNodeIndex(i)+1);
}},insertNode:function(m){if(this.range.insertNode){this.range.insertNode(m);
}else{if(this.range.pasteHTML){var i=d(this.range);
var o=this.range.duplicate();
var n=this.range.duplicate();
var j=this.range.duplicate();
this.range.collapse(true);
this.range.pasteHTML("<span id='__insertNodeBefore'>a</span><span id='__insertNodeAfter'>b</span>");
var l=a("span[id=__insertNodeBefore]",i)[0];
var k=a("span[id=__insertNodeAfter]",i)[0];
k.parentNode.insertBefore(m,k);
n.moveToElementText(l);
j.moveToElementText(k);
this.range.setEndPoint("EndToEnd",o.compareEndPoints("EndToEnd",j)==1?o:j);
this.range.setEndPoint("StartToStart",o.compareEndPoints("StartToStart",n)==-1?o:n);
k.parentNode.removeChild(k);
l.parentNode.removeChild(l);
}}},extractContents:function(){if(this.range.extractContents){return this.range.extractContents();
}else{var j=document;
var k=j.createDocumentFragment();
var i=j.createElement("div");
i.innerHTML=this.getHtml();
while(i.childNodes.length){k.appendChild(i.firstChild);
}this.range.pasteHTML("");
return k;
}},cloneRange:function(){if(this.range.cloneRange){return new b.DomRange(this.range.cloneRange(),this.options);
}else{if(this.range.duplicate){return new b.DomRange(this.range.duplicate(),this.options);
}else{if($telerik.isIE&&this.range.length){var i=this.cloneControlRange(this.range);
if(i){return new b.DomRange(i,this.options);
}}}}return null;
},cloneControlRange:function(k){var n=k.length;
if(n){var m=k.item(0);
var j=m.ownerDocument.body;
var k=j.createControlRange();
for(var l=0;
l<n;
l++){k.addElement(this.range.item(l));
}return k;
}return null;
},compareBoundaryPoints:function(i,k){if(this.range.compareBoundaryPoints){var j=this.range.compareBoundaryPoints(i,k.range);
return j;
}else{if(this.range.compareEndPoints){return this.range.compareEndPoints(this._pointPairToCompare(i),k.range);
}else{return 0;
}}},collapse:function(i){this.range.collapse(i);
this._calculateEdges();
},isCollapsed:function(){var i=this.range;
if(i.isCollapsed){return i.isCollapsed();
}else{if(i.collapsed!=f){return i.collapsed;
}else{if(i.length!=f){return i.length==0;
}else{if(i.htmlText!==f){return i.htmlText=="";
}else{return this.toString()=="";
}}}}},surroundContents:function(i){if(this.range.surroundContents){i.appendChild(this.range.extractContents());
this.range.insertNode(i);
}else{i.innerHTML=this.range.htmlText;
this.range.pasteHTML(i.outerHTML);
}},toString:function(){if(this.range.text!=f){return this.range.text;
}else{if(this.range.toString){return this.range.toString();
}else{return"";
}}},inRange:function(i){if(this.range.inRange){return this.range.inRange(i.range);
}else{var k=this.compareBoundaryPoints(b.DomRange.START_TO_START,i);
var j=this.compareBoundaryPoints(b.DomRange.END_TO_END,i);
return k<1&&j>-1;
}},getParentElement:function(){var i=this.range;
if(i.commonAncestorContainer){return i.commonAncestorContainer;
}else{if(i.commonParentElement){return i.commonParentElement();
}else{if(i.parentElement){return i.parentElement();
}else{if(i.length){return i.item(0).parentNode;
}else{return null;
}}}}},getText:function(){return this.toString();
},getHtml:function(){if(this.range.cloneContents){var j=this.range.cloneContents();
var i=j.ownerDocument.createElement("div");
i.appendChild(j);
return i.innerHTML;
}else{if(this.range.length){return this.range.item(0).outerHTML;
}else{return this.range.htmlText||"";
}}},pasteHTML:function(k){if(this.range.pasteHTML){this.range.pasteHTML(k);
}else{if(this.range.extractContents){var i=this.range.extractContents().ownerDocument;
var j=i.createElement("div");
j.innerHTML=k;
while(j.childNodes.length){this.range.insertNode(j.firstChild);
}}}},moveStart:function(o,j){if(this.range.moveStart){return this.range.moveStart(o,j);
}else{var k=d(this.range);
var n=k.defaultView.getSelection();
var m;
if(n.modify){var i=this.cloneRange();
i.collapse(true);
i.select();
if(j>0){while(j-->0){m=n.modify("move","forward",o);
}}else{while(j++<0){m=n.modify("move","backward",o);
}}var l=n.getRangeAt(0);
i=this.cloneRange();
this.setStart(l.startContainer,l.startOffset);
i.select();
return m;
}else{return 0;
}}},moveEnd:function(o,j){if(this.range.moveEnd){return this.range.moveEnd(o,j);
}else{var k=d(this.range);
var n=k.defaultView.getSelection();
var m;
if(n.modify){var i=this.cloneRange();
i.collapse(false);
i.select();
if(j>0){while(j-->0){m=n.modify("move","forward",o);
}}else{while(j++<0){m=n.modify("move","backward",o);
}}var l=n.getRangeAt(0);
i=this.cloneRange();
this.setEnd(l.endContainer,l.endOffset);
i.select();
return m;
}else{return 0;
}}},moveToElementText:function(l){var m=this.range;
var i=d(m);
var o=this._createTempNode(i);
var k=this._createTempNode(i);
var n=m.duplicate();
var j=m.duplicate();
l.insertBefore(o,l.firstChild);
l.appendChild(k);
n.moveToElementText(o);
j.moveToElementText(k);
m.setEndPoint("EndToEnd",j);
m.setEndPoint("StartToEnd",n);
l.removeChild(o);
l.removeChild(k);
},snapToRange:function(i,j){var k=j.range;
if(this.range.setEndPoint){i=b.DomRange.START_TO_START==i?"StartToStart":b.DomRange.START_TO_END==i?"StartToEnd":b.DomRange.END_TO_END==i?"EndToEnd":b.DomRange.END_TO_START==i?"EndToStart":"";
this.range.setEndPoint(i,k);
this._calculateEdges();
}else{switch(i){case b.DomRange.START_TO_START:this.setStart(k.startContainer,k.startOffset);
break;
case b.DomRange.START_TO_END:this.setStart(k.endContainer,k.endOffset);
break;
case b.DomRange.END_TO_END:this.setEnd(k.endContainer,k.endOffset);
break;
case b.DomRange.END_TO_START:this.setEnd(k.startContainer,k.startOffset);
break;
}}},select:function(){if(this.range.select){this.range.select();
}else{var i=d(this.range);
var k=h(i);
if(k.getSelection||i.getSelection){var j=k.getSelection?k.getSelection():i.getSelection();
j.removeAllRanges();
j.addRange(this.range);
}}},_pointPairToCompare:function(i){return b.DomRange.START_TO_START==i?"StartToStart":b.DomRange.START_TO_END==i?"EndToStart":b.DomRange.END_TO_END==i?"EndToEnd":b.DomRange.END_TO_START==i?"StartToEnd":"";
},_setStartRangeAtNodeOffset:function(m,n,l){var k=d(this.range);
var p=k.body.createTextRange();
if(g.isTextNode(m)){var o=this._createTempNode(k);
m.parentNode.insertBefore(o,m);
this._selectTempNode(p,o);
p.moveStart("character",n);
}else{var j=m.childNodes;
if(n<j.length){var i=j[n];
if(g.isTextNode(i)){var q=this._createTempNode(k);
if(l){if(i.nextSibling){m.insertBefore(q,i.nextSibling);
}else{m.appendChild(q);
}}else{m.insertBefore(q,i);
}p.moveToElementText(q);
m.removeChild(q);
}else{p.moveToElementText(j[n]);
}}else{if(n==j.length){p.moveToElementText(m);
p.collapse(!l);
}}}return p;
},normalizeEdges:function(){if(this.endContainer.nodeType==3&&this.endContainer.nodeValue.length==this.endOffset){var i=this.endContainer;
this.endContainer=this.endContainer.parentNode;
this.endOffset=i.nextSibling?g.findNodeIndex(i.nextSibling):this.endContainer.childNodes.length;
if(this.range.setEnd){this.range.setEnd(this.endContainer,this.endOffset);
}}if(this.startContainer.nodeType==3&&this.startOffset==0&&g.findNodeIndex(this.startContainer)==0){this.startContainer=this.startContainer.parentNode;
if(this.range.setStart){this.range.setStart(this.startContainer,0);
}}this.commonAncestorContainer=this.range.commonAncestorContainer||g.findCommonAncestor(this.startContainer,this.endContainer);
},_calculateEdges:function(i){if(this.options.preventCalculateEdges){return;
}this._calculateEdge(true,i);
this._calculateEdge(false,i);
this.commonAncestorContainer=this.range.commonAncestorContainer||g.findCommonAncestor(this.startContainer,this.endContainer);
this.collapsed=this.isCollapsed();
},_calculateEdge:function(o,s){var u=this.range;
var k=d(u);
var i=o?"startContainer":"endContainer";
var q=o?"startOffset":"endOffset";
var l=u[i];
var m=u[q]||0;
if(!l){if(u.length){var p=u.item(0);
l=p.parentNode;
m=g.findNodeIndex(p)+(o?0:1);
}else{var j=u.duplicate();
j.collapse(o);
var r=j.parentElement();
var v=this._createTempNode(k);
var n=o?"StartToStart":"StartToEnd";
do{r.insertBefore(v,v.previousSibling);
j.moveToElementText(v);
}while(v.previousSibling&&j.compareEndPoints(n,u)>0);
l=v.nextSibling;
if(!l){var t=v.previousSibling;
if(!s&&t&&g.isTextNode(t)){this.endContainer=t;
this.endOffset=t.nodeValue.length;
}else{this.endContainer=this.startContainer=r;
this.startOffset=0;
this.endOffset=r[r.nodeType===1?"childNodes":"nodeValue"].length-1;
}r.removeChild(v);
return;
}r.removeChild(v);
j.setEndPoint(o?"EndToStart":"EndToEnd",u);
if(g.isTextNode(l)){m=j.text.length;
}else{if(i=="startContainer"&&g.isAncestorOrSelf(l,u.parentElement())){m=0;
}else{m=g.findNodeIndex(l);
l=l.parentNode;
}}}}this[i]=l;
this[q]=m;
},_createTempNode:function(i){var j=i.createElement("span");
j.innerHTML="&#x200b;";
return j;
},_selectTempNode:function(i,j){i.moveToElementText(j);
j.parentNode.removeChild(j);
}};
})(Telerik.Web.UI.Editor,$telerik.$,Telerik.Web.UI.Editor.Utils);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
with(Telerik.Web.UI.Editor){Telerik.Web.UI.Editor.UpdateCommandsArray={InsertOrderedList:new BrowserCommand(null,null,"InsertOrderedList",null),InsertUnorderedList:new BrowserCommand(null,null,"InsertUnorderedList",null),Unlink:new BrowserCommand(null,null,"Unlink",null),Bold:new BrowserCommand(null,null,"Bold",null),Italic:new BrowserCommand(null,null,"Italic",null),Underline:new BrowserCommand(null,null,"Underline",null),FontName:new BrowserCommand(null,null,"FontName",null),FontSize:new BrowserCommand(null,null,"FontSize",null),Paste:new BrowserCommand(null,null,"Paste",null),Cut:new BrowserCommand(null,null,"Cut",null),Copy:new BrowserCommand(null,null,"Copy",null),JustifyLeft:new AlignCommand(null,null,"JustifyLeft",null),JustifyRight:new AlignCommand(null,null,"JustifyRight",null),JustifyCenter:new AlignCommand(null,null,"JustifyCenter",null),JustifyNone:new AlignCommand(null,null,"JustifyNone",null),JustifyFull:new AlignCommand(null,null,"JustifyFull",null),Indent:new BrowserCommand(null,null,"Indent",null),Outdent:new BrowserCommand(null,null,"Outdent",null),Subscript:new BrowserCommand(null,null,"Subscript",null),Superscript:new BrowserCommand(null,null,"Superscript",null),StrikeThrough:new BrowserCommand(null,null,"StrikeThrough",null),AbsolutePosition:new BrowserCommand(null,null,"AbsolutePosition",null),FormatBlock:new FormatBlockCommand(null,null,null,null),FormatSets:new FormatSetsCommand(null,null,null,null),InsertRowAbove:new TableInsertRow(null,null,"above",null),InsertRowBelow:new TableInsertRow(null,null,"below",null),InsertColumnLeft:new TableInsertColumn(null,null,"left",null),InsertColumnRight:new TableInsertColumn(null,null,"right",null),DeleteRow:new TableDeleteRow(null,null,null),DeleteColumn:new TableDeleteColumn(null,null,null),DeleteCell:new TableDeleteCell(null,null,null),MergeColumns:new TableMergeColumns(null,null,null),MergeRows:new TableMergeRows(null,null,null),SplitCell:new TableSplitCell(null,null,"vertical",null),SplitCellHorizontal:new TableSplitCell(null,null,"horizontal",null),ApplyClass:new ClassNameCommand(null,null,null)};
}Telerik.Web.UI.Editor.CommandList=new (function(){this.getCallbackFunction=function(a,b){return(a&&a._callbackFunction&&typeof(a._callbackFunction)=="function")?a._callbackFunction:b;
};
this.AjaxSpellCheck=function(b,d,a){function c(){if(!d.get_ajaxSpellCheck()){var k={editor:d};
var i=document.createElement("div");
var j=$create(Telerik.Web.UI.Editor.AjaxSpellCheck,k,null,null,i);
var l=j.get_element();
var m=$get(d.get_id()+"Top");
if(m){m.appendChild(l);
}d.set_ajaxSpellCheck(j);
}var h=d.get_ajaxSpellCheck();
if(a&&a.value){h.set_language(a.value);
}h.spellCheck();
}if(typeof(Telerik.Web.UI.Editor.AjaxSpellCheck)=="undefined"){function e(h){var i=h.get_responseData();
$telerik.evalScriptCode(i);
c();
}var f=d.get_ajaxSpellCheckScriptReference();
var g=new Sys.Net.WebRequest();
g.set_url(f);
g.set_httpVerb("GET");
g.add_completed(e);
g.invoke();
}else{c();
}return false;
};
this.ModuleManager=function(b,c,a){var f=a.value;
var e=c.get_modulesManager();
if(!e){return false;
}var d=e.getModuleByName(f);
if(d){d.toggleVisibility();
c._updateEditorSize(null,true);
}return false;
};
this.ToggleScreenMode=function(b,c,a){c.toggleScreenMode();
return false;
};
this.InsertRowAbove=this.InsertRowBelow=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableInsertRow(c.getLocalizedString(b),null,b=="InsertRowAbove"?"above":"below",c));
};
this.InsertColumnLeft=this.InsertColumnRight=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableInsertColumn(c.getLocalizedString(b),null,b=="InsertColumnLeft"?"left":"right",c));
};
this.DeleteRow=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableDeleteRow(c.getLocalizedString(b),null,c));
};
this.DeleteColumn=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableDeleteColumn(c.getLocalizedString(b),null,c));
};
this.DeleteCell=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableDeleteCell(c.getLocalizedString(b),null,c));
};
this.MergeColumns=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableMergeColumns(c.getLocalizedString(b),null,c));
};
this.MergeRows=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableMergeRows(c.getLocalizedString(b),null,c));
};
this.SplitCell=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableSplitCell(c.getLocalizedString(b),null,"vertical",c));
};
this.SplitCellHorizontal=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.TableSplitCell(c.getLocalizedString(b),null,"horizontal",c));
};
this.DeleteTable=function(b,c,a){var d=a.value;
if(!d){d=c.getSelectedElement();
}if(d&&"TABLE"!=d.tagName){d=Telerik.Web.UI.Editor.Utils.getElementParentByTag(d,"TABLE");
}if(d){if(!c.get_enableTrackChanges()||c.get_enableTrackChangesOverride()){c.selectElement(d);
c.executeBrowserCommand("Delete");
}else{var e=c.getSelection();
Telerik.Web.UI.Editor.TrackChangesUtils.wrapElementInTrackChangeDelete(e.getParentElement(),c._reviewer);
}}};
this.InsertFormForm=this.InsertFormButton=this.InsertFormCheckbox=this.InsertFormHidden=this.InsertFormImageButton=this.InsertFormPassword=this.InsertFormRadio=this.InsertFormReset=this.InsertFormSubmit=this.InsertFormTextarea=this.InsertFormText=function(b,c,a){var e=b.substring(10);
var d=new Telerik.Web.UI.EditorCommandEventArgs(b,a.get_tool(),e);
c.fire("InsertFormElement",d);
};
this.StripAll=this.StripCss=this.StripFont=this.StripSpan=this.StripWord=function(b,c,a){var e=b.substring(5);
var d=new Telerik.Web.UI.EditorCommandEventArgs(b,a.get_tool(),e.toUpperCase());
c.fire("FormatStripper",d);
};
this.FormatStripper=function(j,l,a){var i=a.value;
var n=l._filtersManager.getFilterByName("ConvertFontToSpanFilter");
if(l.get_mode()==Telerik.Web.UI.EditModes.Design&&i=="SPAN"&&n&&n.get_enabled()){i="FONT";
}var o="";
try{o=l.getSelectionHtml();
}catch(k){}var s=l.getSelection().getBrowserSelection();
var q=s.type?s.type.toLowerCase()=="none":s.isCollapsed;
var m=l.get_contentArea().innerHTML;
if(q||o==""||m==o){var g=Telerik.Web.UI.Editor.Utils.stripFormatting(m,i);
var r=new Telerik.Web.UI.Editor.GenericCommand(l.getLocalizedString(j)+" "+i,l.get_contentWindow(),l);
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(l.get_contentArea(),g);
l.executeCommand(r);
}else{if(o!=null){var f=Telerik.Web.UI.Editor.Utils.stripFormatting(o,i);
var c=true;
if($telerik.isSafari&&i=="ALL"){var t=l.getSelection().getParentElement();
var d=function(p){var e=false;
switch(p){case"I":case"B":case"U":case"SPAN":case"FONT":case"EM":case"STRONG":e=true;
break;
}return e;
};
if(t.innerHTML.trim()==o.trim()&&d(t.tagName)){var b=true;
while(b){var u=t.parentNode;
if(u.childNodes.length==1&&d(u.tagName)){t=u;
}else{b=false;
}}var v=t.parentNode;
var h=l.get_document().createTextNode(f);
v.insertBefore(h,t);
v.removeChild(t);
l.selectElement(h);
c=false;
}}if(c){l.pasteHtml(f,j);
}}}};
this.InsertTable=function(b,c,a){var f=a.value;
if(f){var d=Telerik.Web.UI.Editor.Utils.createTable(f.rows,f.cols);
var e=Telerik.Web.UI.Editor.Utils.getOuterHtml(d);
c.pasteHtml(e,b);
Telerik.Web.UI.Editor.Utils.removeFormattingNodes(c);
}};
this.InsertShiftTab=function(a,b,d){var c=b.getSelectedElement();
if(typeof(c.tagName)=="undefined"){c=c.parentNode;
}var e=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(e){Telerik.Web.UI.Editor.Utils.MoveToPreviousCell(e,b);
}else{b.bubbleKeyEventToBrowser();
}return false;
};
this.InsertTabMozilla=function(a,b,d){var c=b.getSelectedElement();
if(typeof(c.tagName)=="undefined"){c=c.parentNode;
}var e=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(e){Telerik.Web.UI.Editor.Utils.MoveToNextCell(e,b);
}else{b.bubbleKeyEventToBrowser();
}return false;
};
this.InsertTab=function(a,b,d){var c=b.getSelectedElement();
var e=c.tagName;
if(e=="UL"||e=="OL"||e=="LI"||(c.parentNode&&c.parentNode.tagName=="LI")){b.fire("Indent");
}else{var f=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(f){Telerik.Web.UI.Editor.Utils.MoveToNextCell(f,b);
}else{b.pasteHtml(" &nbsp;&nbsp;&nbsp;&nbsp;",a);
}}return false;
};
this.SetToolFocus=function(b,c,d){var a=c.get_toolAdapter();
if(a){a.setFocus();
}return false;
};
this.Undo=this.Redo=function(b,c,a){var d=a?a.value:1;
if(!d){d=1;
}if(b=="Redo"){c.redo(d);
}else{c.undo(d);
}};
this.PastePlainTextWithTable=function(e,g,a){if(!g.get_lockFormatting()){return;
}var m=false;
var j=g.createRestorePoint();
var b=function(n){if(n){if(j){j.select();
j=null;
}var o=n;
o=Telerik.Web.UI.Editor.Utils.replaceNewLineWithBr(o);
if(o){g.pasteHtml(o,e);
}}};
if(g.isIE){var f=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml();
var d=window.clipboardData.getData("Text");
m=h(f);
if(!m){if(d){d=d.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
}b(d);
}else{d=f;
d=i(d);
d=c(d);
d=l(d);
d=k(d);
d=d.replace(new RegExp("(<[^>]+) class=[^ |^>]*([^>]*>)","ig"),"$1 $2");
d=d.replace(/(<[^>]+) style="[^"]*"([^>]*>)/ig,"$1 $2");
d=d.replace(new RegExp("<(SCRIPT)([^>]*)/>","ig"),"");
d=d.replace(new RegExp("<(SCRIPT)([^>]*)>[\\s\\S]*?</(SCRIPT)([^>]*)>","ig"),"");
d=d.replace(/<\s*p.*?>/i,"");
d=d.replace(/<\s*\/\s*p\s*.*?>/i,"");
d=d.replace(/<\s*p.*?>/ig,"<BR>");
d=d.replace(/<\s*\/\s*p\s*.*?>/ig,"");
d=d.replace(/\u00b7/ig,"&bull;");
d=d.replace(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/ig,"");
d=d.replace(/border\s*=\s*(\d)/ig,"");
d=d.replace(/cellSpacing\s*=\s*(\d)/ig,"");
d=d.replace(/cellPadding\s*=\s*(\d)/ig,"");
b(d);
}}function i(n){var o=n;
o=o.replace(/\s*href\s*=\s*('[^']*'|"[^"]*")/ig,"");
var p=new RegExp("<(script|style)[^>]*?>(?:.|\n)*?</(style|script)>","ig");
o=o.replace(p,"");
return o;
}function h(n){var p=document.createElement("DIV");
p.innerHTML=n;
var o=p.getElementsByTagName("TABLE");
if(o.length>0){return true;
}return false;
}function c(p){var r=p;
var s=document.createElement("DIV");
s.innerHTML=p;
var o=s.getElementsByTagName("TD");
if(o.length>0){for(var q=0;
q<o.length;
q++){var n=o[q];
n.innerHTML=n.innerHTML.replace(/<\/?p[^>]*>/ig,"");
}r=s.innerHTML;
}s=null;
return r;
}function l(o){var q=o;
var r=/<SPAN[^>]*?>([\s\S]*?)<\/SPAN[^>]*?>/ig;
while(q.match(r)){q=q.replace(r,"$1");
}var n=/<FONT[^>]*?>([\s\S]*?)<\/FONT[^>]*?>/ig;
while(q.match(n)){q=q.replace(n,"$1");
}q=q.replace(/<o:p>&nbsp;<\/o:p>/gi,"");
q=q.replace(/<\/?o:[^>]*>/gi,"");
q=q.replace(/ class=\"(mso[^\"]*)\"/gi,"");
q=q.replace(/ class=(mso\w+)/gi,"");
q=q.replace(/<!--[\s\S]+?-->/gi,"");
q=q.replace(/<\\?\?xml[^>]*>/gi,"");
q=q.replace(/^(?:\s|&nbsp;)+/i,"");
q=q.replace(/(?:\s|&nbsp;)+$/i,"");
var p=document.createElement("div");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(p,q);
Telerik.Web.UI.Editor.Utils.clearWordAttributesInElement(p,"WORD_ALL");
q=p.innerHTML;
q=q.replace(/\t/g," ");
q=q.replace(/<\/?\w+:[^>]*>/gi,"");
q=q.replace(/<\\?\??xml[^>]>/gi,"");
q=q.replace(/&nbsp;/gi,"");
q=q.replace(/[ ]+/g," ");
q=q.replace(/<st1:.*?>/gi,"");
q=q.replace(/<font>([^<>]+)<\/font>/gi,"$1");
q=q.replace(/<span>([^<>]+)<\/span>/gi,"$1");
q=q.replace(/[\s]+EditorSaved=[\'\"]true[\'\"]/gi,"");
q=Telerik.Web.UI.Editor.Utils.cleanStylesOnStripWordFormatting(q);
q=q.replace(/v:shape="[^"]+"/ig,"");
q=q.replace(/<span[^>]*>\s*<\/span[^>]*>/ig," ");
q=q.replace(/<font[^>]*>\s*<\/font[^>]*>/ig," ");
q=q.replace(/\s+/ig," ");
return q;
}function k(n){var o=n;
o=o.replace(/<\/?font[^>]*>/ig,"");
o=o.replace(/<\/?span[^>]*>/ig,"");
o=o.replace(/<\/?div[^>]*>/ig,"");
o=o.replace(/<\/?a[^>]*>/ig,"");
o=o.replace(/<\s*\/?\s*h([1-6])\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*i\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*b\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*u\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*s\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*em\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*strong\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*strike\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*sup\s*.*?>/ig,"");
o=o.replace(/<\s*\/?\s*sub\s*.*?>/ig,"");
return o;
}};
this.CopyFromEditor=function(c){var e=c.createRestorePoint();
var f=false;
var b=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml();
var a=c.get_clipboardData();
if(a&&a.contentFromEditor&&a.contentHTML==b){f=true;
}else{var d={contentFromEditor:false,contentHTML:b};
c.set_clipboardData(d);
}e.select();
return f;
};
this.PastePlainText=function(d,e,c){var b=function(f){if(f){var g=f.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
g=Telerik.Web.UI.Editor.Utils.replaceNewLineWithBr(g);
if(g){e.pasteHtml(g,d);
}}};
if(e.isIE){b(window.clipboardData.getData("Text"));
}else{var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){b(f.get_content());
});
e.showDialog("CleanPasteTextContent",{},a);
return false;
}};
this.PasteFromWord=this.PasteFromWordNoFontsNoSizes=this.PasteAsHtml=function(d,f,c){var b=function(j,k){var i="";
var l=f.get_stripFormattingOptions();
if(d=="PasteFromWord"){if(l==Telerik.Web.UI.StripFormattingOptions.None||(l&Telerik.Web.UI.StripFormattingOptions.ConvertWordLists)){j=Telerik.Web.UI.Editor.Utils.convertWordLists(j);
}i=Telerik.Web.UI.Editor.Utils.stripFormatting(j,"WORD");
}else{if(d=="PasteFromWordNoFontsNoSizes"){if(l==Telerik.Web.UI.StripFormattingOptions.None||(l&Telerik.Web.UI.StripFormattingOptions.ConvertWordLists)){j=Telerik.Web.UI.Editor.Utils.convertWordLists(j);
}i=Telerik.Web.UI.Editor.Utils.stripFormatting(j,"WORD_ALL");
}else{i=Telerik.Web.UI.Editor.Utils.convertText2Html(j);
}}if(k){k.select();
}if(i){f.pasteHtml(i,d);
}};
if(f.isIE){var h=f.createRestorePoint();
h.useOldRange=true;
var e="";
if(f.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){var g=f.get_document().selection.createRange();
e=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml(f);
g.select();
}else{e=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml(f);
}b(e,h);
}else{var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(j,i){b(i.get_content());
});
f.showDialog("CleanPasteHtmlContent",{dialogTitle:f.getLocalizedString(d)},a);
}};
this.PasteMarkdown=function(c,d,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(h,e){var g=e.get_content();
var f=new Telerik.Web.UI.Editor.Markdown.Converter();
d.pasteHtml(f.makeHtml(g));
});
d.showDialog("PasteMarkdown",{dialogTitle:d.getLocalizedString(c),commandName:"PasteMarkdown"},a);
};
this.PasteHtml=function(c,d,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(g,e){var f=e.get_content();
f=d.applyFiltersForEmbedContent(f);
d.pasteHtml(f);
});
d.showDialog("PasteHtml",{dialogTitle:d.getLocalizedString(c),commandName:"PasteHtml"},a);
};
this.Copy=function(b,d,a){if(null!=a){var f=false;
try{f=d.get_document().queryCommandEnabled(b);
}catch(c){f=false;
}if(f){try{f=d.get_document().execCommand(b,false,null);
}catch(c){f=false;
}}if(!f){alert(d.getLocalizedString("UseCtrlC"));
}}};
this.Cut=this.Paste=function(d,g,c){var n=g.get_enableTrackChanges()||g.get_enableComments();
if(n){var m=null;
if(d=="Cut"){m=g.getToolByName("Cut");
}if(d=="Paste"){m=g.getToolByName("Paste");
}if(m&&!m.get_enabled()){return;
}if(d=="Paste"){g._cachedRange=Telerik.Web.UI.Editor.TrackChangesUtils.getDomRange(g);
if(g.get_lockFormatting()&&!Telerik.Web.UI.Editor.CommandList.CopyFromEditor(g)){var b=g;
var a=c;
window.setTimeout(function(){Telerik.Web.UI.Editor.CommandList.PastePlainTextWithTable("PastePlainTextWithTable",b,a);
},0);
if($telerik.isIE){return;
}}}}if(null!=c||($telerik.isIE&&n&&d=="Cut")){var j=$telerik.isIE7;
var i=j?true:false;
try{if(!j){i=g.get_document().queryCommandEnabled(d);
}}catch(f){i=false;
}if(d=="Paste"&&i&&j){g.get_contentArea().fireEvent("onbeforepaste");
}if(i){var k=new Telerik.Web.UI.Editor.GenericCommand(g.getLocalizedString(d),g.get_contentWindow(),g);
var l=false;
try{l=g.get_document().execCommand(d,false,null);
}catch(f){l=false;
}if(l!=false){g.executeCommand(k);
}else{i=false;
}}if(!i){var h=(d=="Cut"?"UseCtrlX":"UseCtrlV");
alert(g.getLocalizedString(h));
}}else{g._pendingCutPasteCommand=new Telerik.Web.UI.Editor.GenericCommand(g.getLocalizedString(d),g.get_contentWindow(),g);
}};
this.InsertParagraph=function(a,b,c){if($telerik.isFirefox||$telerik.isSafari||$telerik.isOpera11){b.executeCommand(new Telerik.Web.UI.Editor.EnterNewLineCommand(a,b.get_contentWindow(),false,b,Telerik.Web.UI.EditorNewLineModes.P));
}else{b.executeBrowserCommand(a,true,"");
}return true;
};
this.InsertParagraphSafari=function(a,d,f){d.executeBrowserCommand("InsertParagraph",true,"");
if($telerik.isSafari){var e=d.getSelectedElement();
var b=e;
while(b){if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(b)){b=null;
}else{if(b.tagName=="DIV"){break;
}else{b=b.parentNode;
}}}if(b){var h=b.previousSibling;
if(h){var j=h.tagName;
if(h.nodeType=3||j=="P"||j=="UL"||j=="OL"||(j.charAt(0)=="H"&&!isNaN(parseInt(j.charAt(1))))){var c=d.get_document();
var g=c.createElement("P");
g.innerHTML="<br>";
b.parentNode.insertBefore(g,b);
if(h.nodeType=3){b.innerHTML=b.innerHTML.replace(/^<br>(&nbsp;)*/,"");
Telerik.Web.UI.Editor.Utils.removeNode(b);
}else{b.parentNode.removeChild(b);
}var i=c.createRange();
i.selectNodeContents(g);
d.getSelection().selectRange(i);
}}}}return true;
};
this.FormatBlock=function(b,c,a){c.executeCommand(new Telerik.Web.UI.Editor.FormatBlockCommand(c.getLocalizedString(b),c.get_contentWindow(),a.value,c));
};
this.FormatSets=function(c,d,a){var b=new Telerik.Web.UI.Editor.FormatSetsCommand(d.getLocalizedString(c),d.get_contentWindow(),a.value,d);
b.set_selectedElement(d.getSelectedElement());
d.executeCommand(b);
};
this.FormatPainterApply=function(c,d,a){var b=new Telerik.Web.UI.Editor.FormatPainterCommand(d.getLocalizedString(c),d.get_contentWindow(),null,d);
d.executeCommand(b);
b.set_formatPainterToolSelectedIndex(1);
};
this.FormatPainterCopy=function(c,d,a){var b=new Telerik.Web.UI.Editor.FormatPainterCommand("",d.get_contentWindow(),null,d),e=b.get_formatting(d.getSelectedElement());
b.set_currentFormatting(e);
b.set_formatPainterToolSelectedIndex(1);
};
this.FormatPainterClear=function(c,d,a){var b=new Telerik.Web.UI.Editor.FormatPainterCommand("",d.get_contentWindow(),null,d);
b.set_currentFormatting(null);
b.set_formatPainterToolSelectedIndex(0);
};
this.InsertOrderedList=this.InsertUnorderedList=function(b,c,a){c.setFocus();
c.executeCommand(new Telerik.Web.UI.Editor.InsertListCommand(c.getLocalizedString(b),c.get_contentWindow(),c.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Br,b,null,c));
};
this.Bold=this.Italic=this.Underline=this.Indent=this.Outdent=this.SelectAll=this.Unlink=this.StrikeThrough=this.Subscript=this.Superscript=this.AbsolutePosition=function(b,c,e){c.setActive();
var a="SelectAll"!=b;
if(b=="Unlink"&&!c.isIE){var d=c.getSelectedElement();
if(d&&d.tagName=="A"){c.selectElement(d,false);
}}c.executeBrowserCommand(b,a,null,null);
return true;
};
this.JustifyLeft=this.JustifyRight=this.JustifyCenter=this.JustifyNone=this.JustifyFull=function(a,b,c){b.setActive();
var d=b.getLocalizedString(a);
b.executeCommand(new Telerik.Web.UI.Editor.AlignCommand(d,b.get_contentWindow(),a,null,b),true);
return true;
};
this.ForeColor=this.BackColor=this.FontName=this.FontSize=function(b,c,a){var d=new Telerik.Web.UI.Editor.ieFontCommandFix(c);
d.applyFix();
c.executeBrowserCommand(b,true,a.value);
d.cleanUp();
};
this.Zoom=function(b,c,a){var f=a.value;
var d=a.get_tool?a.get_tool():null;
if(f&&d&&d.updateValue){d.updateValue(f);
}c.get_contentArea().style.zoom=f;
if(($telerik.isFirefox||$telerik.isOpera)&&f.indexOf("%")!=-1){f=parseInt(f,10)/100;
}if($telerik.isFirefox){c.get_contentArea().style.MozTransform=f==1?"":"translate("+(c.get_contentArea().offsetWidth*((f-1)/2))+"px, "+(c.get_contentArea().offsetHeight*((f-1)/2))+"px) scale("+f+")";
}if($telerik.isOpera){var e=f==1?"":"translate("+(c.get_contentArea().offsetWidth*((f-1)/2.04))+"px, "+(c.get_contentArea().offsetHeight*((f-1)))+"px) scale("+f+")";
c.get_contentArea().style.OTransform=e;
}return false;
};
this.Print=function(b,c,a){if(c.isIE){c.get_document().execCommand(b,false,null);
}else{if(c.get_contentWindow().print){c.get_contentWindow().print();
}}return false;
};
this.InsertSnippet=function(b,c,a){c.pasteHtml(a.value,b);
};
this.InsertFormElement=function(b,c,a){var h=a.value;
h=h.toLowerCase();
var d=null;
switch(h){case"form":if(c.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){alert("Error! Form elements are only supported when the content area is set to Iframe!");
a.set_cancel(true);
return false;
}else{d=c.createElement("form","150px","150px");
d.innerHTML="&nbsp;";
}break;
case"textarea":d=c.createElement("textarea");
break;
case"select":d=c.createElement("select","100px","22px");
break;
case"checkbox":case"radio":d=c.createElement("input");
d.setAttribute("type",h);
break;
case"button":case"reset":case"submit":d=c.createElement("input","50px","22px");
d.setAttribute("type",h);
break;
case"hidden":case"password":case"text":d=c.createElement("input","100px","22px");
d.setAttribute("type",h);
break;
}if(d){var f=Telerik.Web.UI.Editor.Utils.getUniqueID();
d.setAttribute("id",f);
var e=Telerik.Web.UI.Editor.Utils.getOuterHtml(d);
c.pasteHtml(e,b);
var g=c.get_document().getElementById(f);
if(g){g.removeAttribute("id");
if(g.setActive){g.setActive();
}return false;
}}};
this.InsertGroupbox=this.InsertDate=this.InsertTime=this.InsertSymbol=this.InsertHorizontalRule=function(b,e,a){var h="";
switch(b){case"InsertSymbol":h=a.value;
break;
case"InsertHorizontalRule":h="<hr>";
break;
case"InsertDate":var c=new Date();
h="&nbsp;"+c.toLocaleDateString();
break;
case"InsertTime":var d=new Date();
h="&nbsp;"+d.toLocaleTimeString();
break;
default:var g=e.getLocalizedString("RadEditorGroupboxTitle","Title");
var f=e.getLocalizedString("RadEditorGroupboxContent","Content...");
h="<fieldset style='WIDTH: 200px; HEIGHT: 76px'> <legend>"+g+"</legend>"+f+" </fieldset> ";
}e.pasteHtml(h,b);
};
this.ImageManager=function(d,e,c){var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(n,j){var m=j.get_value();
var k="";
for(var l=0;
l<m.length;
l++){k+=Telerik.Web.UI.Editor.Utils.getOuterHtml(m[l]);
}e.pasteHtml(k,d);
});
var g=e.get_dialogOpener().get_additionalQueryString();
var h=e.getSelectedElement();
if(h&&h.tagName=="IMG"){var f=h.getAttribute("src",2);
e.get_dialogOpener().set_additionalQueryString(g+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(f));
}else{h=null;
}var a=new Telerik.Web.UI.EditorCommandEventArgs(d,null,h);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"IMG",e,d);
e.showDialog("ImageManager",a,b);
e.get_dialogOpener().set_additionalQueryString(g);
return false;
};
this.SilverlightManager=this.FlashManager=this.MediaManager=function(d,e,c){var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(k,i){var j=i.get_value();
if(!j){j=i.Result;
}j=e.applyFiltersForEmbedContent(j);
e.pasteHtml(j,d);
});
var a={};
var g=e.get_dialogOpener().get_additionalQueryString();
var h=e.getSelectedElement();
if(h){if($telerik.isIE&&h.object){var f="MediaManager"==d?h.object.FileName:h.object.Movie;
if(f){e.get_dialogOpener().set_additionalQueryString(g+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(f));
a.selectedItemUrl=f;
a.selectedObject=h;
}}}e.showDialog(d,a,b);
e.get_dialogOpener().set_additionalQueryString(g);
return false;
};
this.TemplateManager=function(c,d,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(g,e){var f=e.get_value();
if(!f){f=e.Result;
}d.pasteHtml(f,c);
});
d.showDialog("TemplateManager",{},a);
return false;
};
this.AboutDialog=function(a,b,c){b.showDialog("AboutDialog");
return false;
};
this.Help=function(a,b,c){b.showDialog("Help");
return false;
};
this.PageProperties=function(d,e,c){var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){});
var a={};
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"BODY",e,d);
e.showDialog("PageProperties",a,b);
return false;
};
this.ImageMapDialog=function(d,e,c){var a=Telerik.Web.UI.Editor.CommandList._getImageMapDialogArgument(e);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){Telerik.Web.UI.Editor.CommandList._setImageMapProperties(e,f,d);
return false;
});
e.showDialog("ImageMapDialog",a,b);
return false;
};
this._setImageMapProperties=function(d,a,b){if(!a){return;
}var l=d.getSelectedElement();
var e;
if(l&&l.tagName=="IMG"){e=l;
if(a.ImageSrc!=e.src){e.src=a.ImageSrc;
}}else{if(!a.ImageSrc){return;
}d.pasteHtml('<img src="'+a.ImageSrc+'" id = "__tmp__">',b);
e=d.get_document().getElementById("__tmp__");
e.removeAttribute("id");
if(document.all){var k=d.get_document().body.createTextRange();
k.collapse();
k.moveToElementText(e);
k.select();
}}var n=document.createElement("span");
n.innerHTML=a.MapHtml;
var m=n.getElementsByTagName("map");
if(m.length==0){return;
}var h=m[0].innerHTML;
n=null;
if(!h){var c=e.getAttribute("useMap",2);
if(c){var i=Telerik.Web.UI.Editor.CommandList._getImageMapByName(d,c);
if(i){i.parentNode.removeChild(i);
}}e.removeAttribute("useMap");
return;
}var g=null;
var o=e.getAttribute("useMap",2);
if(o){g=Telerik.Web.UI.Editor.CommandList._getImageMapByName(d,o);
}if(g==null){var f=new Date()-100;
var j="rade_img_map_"+f;
g=d.get_document().createElement("map");
g.id=j;
this._setNameAttribute(g,j);
g=d.get_contentArea().appendChild(g);
e.setAttribute("useMap","#"+j);
e.setAttribute("border","0");
}g.innerHTML=h;
};
this._setNameAttribute=function(a,b){a.removeAttribute("name");
a.removeAttribute("NAME");
a.name=null;
a.name=b;
a.NAME=b;
};
this._getImageMapDialogArgument=function(b){var a={};
a.editor=b;
var c=b.getSelectedElement();
if(c&&c.tagName=="IMG"){a.ImageSrc=c.getAttribute("src",2);
a.ImageWidth=(c.style.width)?c.style.width:c.width;
a.ImageHeight=(c.style.height)?c.style.height:c.height;
if($telerik.isIE){var f=b.get_document().body.createTextRange();
f.collapse();
f.moveToElementText(c);
f.select();
}if(c.useMap){var e=c.getAttribute("useMap",2);
var d=Telerik.Web.UI.Editor.CommandList._getImageMapByName(b,e);
if(d!=null){a.ImageMapHTML='<map name = "'+e.substr(1)+'">'+d.innerHTML+"</map>";
}else{a.ImageMapHTML="";
}c.style.width=a.ImageWidth;
c.style.height=a.ImageHeight;
}}return a;
};
this._getImageMapByName=function(a,e){e=e.substr(1);
var b=a.get_document();
var d=b.getElementById(e);
if(d!=null){return d;
}var f=b.getElementsByTagName("map");
for(var c=0;
c<f.length;
c++){if(f[c].getAttribute("name")==e){return f[c];
}}return null;
};
this.get_ImportStyleSheetHTML=function(a,b,e){var d="";
if(e){var c=b.get_document().getElementById(e.id);
if(!c){d=Telerik.Web.UI.Editor.Utils.getOuterHtml(e);
}}return d;
};
this._removeStyleSheet=function(b,f){if(f){var c=b.get_document();
var a=true;
var j=c.getElementsByTagName("Table");
var k=j.length;
var g=f.id;
if(g){for(var d=0;
d<k;
d++){var h=j[d];
if(h.className==g){a=false;
break;
}}if(a){var e=c.getElementById(g);
if(e){e.parentNode.removeChild(e);
}}}}};
this.TableWizard=function(d,e,c){var a=Telerik.Web.UI.Editor.CommandList._getTableArgument(e,null,true,false);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"TABLE",e,d);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(h,f){var g="";
if(f.styleSheetToImport){g=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(d,e,f.styleSheetToImport);
}e.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(f.tableToModify)+g,d);
Telerik.Web.UI.Editor.Utils.removeFormattingNodes(e);
if(f.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(e,f.styleSheetToRemove);
}});
e.showDialog("TableWizard",a,b);
return false;
};
this.InsertFormSelect=function(d,e,c){var f=e.getSelectedElement();
var g;
if(f&&f.nodeName=="SELECT"){g=f;
}var a=Telerik.Web.UI.Editor.CommandList._getSelectArgument(g);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"SELECT",e,d);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(k,h){if(!$telerik.isIE&&g){var i=Telerik.Web.UI.Editor.DomRange.toDomRange(e.getSelection().getRange());
i.selectNode(g);
i.select();
e.pasteHtml(h.selectToInsert.outerHTML);
return;
}var j=h.selectToInsert;
e.pasteHtml(j.outerHTML);
});
e.showDialog("InsertSelectDialog",a,b);
return false;
};
this.InsertTableLight=this.SetTableProperties=function(d,e,c){var a=Telerik.Web.UI.Editor.CommandList._getTableArgument(e,1,false,true);
if(d=="SetTableProperties"&&!a){alert(e.getLocalizedString("tablewarning"));
return false;
}var f=Telerik.Web.UI.Editor.CommandList._getParentTable(e);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(i,g){if(e.get_enableTrackChanges()){e.set_fromTableProperties(true);
}e.selectElement(f);
var h="";
if(g.styleSheetToImport){h=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(d,e,g.styleSheetToImport);
}e.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(g.tableToModify)+h,d);
if(g.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(e,g.styleSheetToRemove);
}});
if(e.get_document().selection&&e.get_document().selection.empty&&d!="InsertTableLight"){e.get_document().selection.empty();
}if(d=="SetTableProperties"){Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"TABLE",e,d);
e.showDialog("TableWizard",a,b);
}else{if(!a){a=new Telerik.Web.UI.EditorCommandEventArgs("InsertTableLight",null,null);
}a._name=a._commandName="InsertTableLight";
a.editor=e;
e.showDialog("InsertTableLight",a,b);
}return false;
};
this.SetCellProperties=function(d,e,c){var a=Telerik.Web.UI.Editor.CommandList._getTableArgument(e,2,false,true);
var f=$telerik.isFirefox&&e.get_contentWindow().getSelection().rangeCount>1;
if(!a||f){alert(e.getLocalizedString("cellwarning"));
return false;
}Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"TABLE",e,d);
var g=Telerik.Web.UI.Editor.CommandList._getParentTable(e);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(j,h){e.selectElement(g);
var i="";
if(h.styleSheetToImport){i=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(d,e,h.styleSheetToImport);
}e.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(h.tableToModify)+i,d);
if(h.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(e,h.styleSheetToRemove);
}});
e.showDialog("TableWizard",a,b);
return false;
};
this.FindAndReplace=function(d,e,c){var a={};
a.editor=e;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){});
e.showDialog("FindAndReplace",a,b);
return false;
};
this.StyleBuilder=function(d,e,c){var j=null;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(o,k){var m=Telerik.Web.UI.Editor.Utils.getOuterHtml(k.get_value());
m=m.replace(/(url\s*\(\s*)&quot;(.*)&quot;\s*\)/ig,"$1$2)");
if(j){var n="";
var p=new RegExp("style=(\"|')(.+?)\\1","gi");
m.replace(p,function(s,q,r){n=r;
});
if(n){var l=new Telerik.Web.UI.Editor.AttributeCommand(d+"set Style Attribute",e.get_contentWindow(),j,"style",n,e);
e.executeCommand(l);
}}else{e.pasteHtml(m,d);
}});
var h=e.getSelection();
var g=h.getParentElement();
if(!$telerik.isIE||!h.isControl()){var i=h.getText();
if(i||(g&&g.tagName=="BODY")){var f=e.createElement("span");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(f,i);
g=f;
}else{j=g;
e.selectElement(g,false);
}}if(!g){g=Telerik.Web.UI.Editor.Utils.getContentAreaFirstChild(e);
e.selectElement(g,false);
}var a=new Telerik.Web.UI.EditorCommandEventArgs("StyleBuilder",null,(g?g.cloneNode(true):null));
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"*",e,d);
a.fontNames=e.get_fontNames();
e.showDialog("StyleBuilder",a,b);
return false;
};
this.XhtmlValidator=function(d,e,c){var a=e;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){});
e.showDialog("XhtmlValidator",a,b);
return false;
};
this.TrackChangesDialog=function(d,e,c){var a=e;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){});
e.showDialog("TrackChangesDialog",a,b);
};
this.InsertCustomLink=function(b,c,a){var d=a.value;
var e=$telerik.$(String.format("<a href='{1}' title='{3}' target='{2}'>{0}</a>",d.innerHTML,d.href,d.target,d.title))[0];
if($telerik.isIE&&c.get_html()=="<P>&nbsp;</P>"){c.set_html("");
}var f=Telerik.Web.UI.Editor.CommandList._getParentLink(c);
if(f){e=f.cloneNode(true);
if(d.href){e.setAttribute("href",d.href);
}if(d.target){e.setAttribute("target",d.target);
}if(d.title){e.setAttribute("title",d.title);
}if(!e.innerHTML){e.innerHTML=d.innerHTML;
}}c.pasteHyperLink(e,b);
};
this._getDialogArguments=function(a,d,c,b){if(!c){a.Colors=[];
a.CssClasses=[];
a.CellCssClasses=[];
a.tableLayoutCssFile="";
a.editor=null;
return;
}a.Colors=c.get_colors();
if("TD"==d||"TH"==d||"TABLE"==d){a.CssClasses=c.getCssArray("TABLE");
a.CellCssClasses=c.getCssArray("TD");
a.tableLayoutCssFile=c.get_tableLayoutCssFile();
}else{if("A"==d||"BODY"==d||"IMG"==d){a.CssClasses=c.getCssArray(d);
}else{if("SELECT"==d){a.CssClasses=c.getCssArray(d);
}}}a.editor=c;
};
this.DocumentManager=this.SetLinkProperties=this.LinkManager=function(d,f,c){var e=d=="DocumentManager"?"DocumentManager":"LinkManager";
var a=Telerik.Web.UI.Editor.CommandList._getLinkArgument(f);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"A",f,d);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(j,g){var i=g.get_value()||g.Result||g.realLink;
var h=new Telerik.Web.UI.Editor.InsertLinkCommand(d,f.get_contentWindow(),i,f);
f.executeCommand(h);
});
f.showDialog(e,a,b);
return false;
};
this.InsertLink=function(d,f,c){var e="InsertLink";
var a=Telerik.Web.UI.Editor.CommandList._getLinkArgument(f);
a._name=a._commandName="InsertLink";
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"A",f,d);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(j,g){var i=g.get_value();
var h=new Telerik.Web.UI.Editor.InsertLinkCommand(d,f.get_contentWindow(),i,f);
f.executeCommand(h);
});
f.showDialog(e,a,b);
return false;
};
this.InsertImage=this.SetImageProperties=function(d,f,c){var e=f.getSelectedElement();
if(e&&e.nodeName!="IMG"){e=null;
}var a=new Telerik.Web.UI.EditorCommandEventArgs(d,null,e);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"IMG",f,d);
a.Element=e;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(j,g){var i=g.get_value?g.get_value():g.Result;
if(!i){return;
}if(e&&e.parentNode){var h=new Telerik.Web.UI.Editor.GenericCommand(f.getLocalizedString(d),f.get_contentWindow(),f);
e.parentNode.replaceChild(i,e);
f.executeCommand(h);
}else{f.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(i),d);
}});
if(d=="SetImageProperties"){f.showDialog("ImageProperties",a,b);
}else{f.showDialog("InsertImage",a,b);
}return false;
};
this.InsertExternalVideo=function(c,d,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(f,e){d.pasteHtml(e.get_value(),c);
});
d.showDialog("InsertExternalVideo",null,a);
};
this.FormatCodeBlock=function(d,e,c){var a=new Telerik.Web.UI.EditorCommandEventArgs("FormatCodeBlock",null,e.getSelectionHtml());
a.dirtyCode=e.getSelectionHtml();
if(e.get_document().selection&&e.get_document().selection){var f=e.get_document().selection.type.toLowerCase();
if(f=="control"||f=="none"){a.set_value("");
}}var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(h,g){e.pasteHtml(g.get_value?g.get_value():g.get_code(),d);
});
e.showDialog("FormatCodeBlock",a,b);
return false;
};
this._getDocumentAnchors=function(c){var b=c.getElementsByTagName("A");
var a=new Array();
for(var d=0;
d<b.length;
d++){if(b[d].name){a[a.length]=b[d];
}}return a;
};
this._getParentLink=function(b){var f=b.getSelectedElement();
var d=Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"A");
if(d){b.selectElement(d);
}else{var c="";
var g=(f&&f.tagName)?f.tagName:"";
if(g=="IMG"){c=Telerik.Web.UI.Editor.Utils.getOuterHtml(f);
}if(!c){c=b.getSelectionHtml();
}if($telerik.isIE){var h=f.tagName;
if(h=="FONT"||h=="SPAN"){c=c.replace(/^<(FONT|SPAN)[^>]*>/gi,"");
c=c.replace(/<\/(FONT|SPAN)>$/gi,"");
}}d=b.get_document().createElement("a");
try{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(d,c);
}catch(a){d.innerHTML=String.format("<span>{0}</span>",Telerik.Web.UI.Editor.Utils.stripFormatting(c,"ALL"));
}}return d;
};
this._getLinkArgument=function(b,f){var e=Telerik.Web.UI.Editor.CommandList._getParentLink(b);
var d=e.innerHTML;
var c=!d?false:d.match(/</);
if($telerik.isIE&&c){var g=d.trim().toLowerCase();
if(g.match(/<p[^>]*>(&nbsp;|\s*)<\/p>/)){e.innerHTML=" ";
c=false;
}}var a=new Telerik.Web.UI.EditorCommandEventArgs("LinkManager",null,e.cloneNode(true));
a.selectedTabIndex=f?f:0;
a.showText=!c;
a.documentAnchors=Telerik.Web.UI.Editor.CommandList._getDocumentAnchors(b.get_document());
a.realLink=a.get_value();
return a;
};
this._getParentTable=function(a){a.setFocus();
var c=a.getSelectedElement();
var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TABLE");
return b;
};
this._getParentCell=function(a){a.setFocus();
var c=a.getSelectedElement();
var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(!b){b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TH");
}return b;
};
this._getTableArgument=function(a,g,b,f){var e;
var d=null;
if(b){e=Telerik.Web.UI.Editor.Utils.createTable(2,2,a.get_document());
}else{e=Telerik.Web.UI.Editor.CommandList._getParentTable(a);
}if(!b&&!e){return null;
}if(f){d=Telerik.Web.UI.Editor.CommandList._getParentCell(a);
}var h=e.cloneNode(true);
var c=e;
return{selectedTabIndex:g?g:0,cellToModify:d,tableToModify:h,originalTable:c,tableDocument:h.ownerDocument||a.get_document()};
};
this._getSelectArgument=function(a){return{selectToModify:a};
};
this.EnterParagraphMozilla=function(b,c,a){var d=new Telerik.Web.UI.Editor.EnterNewLineCommand("Enter",c.get_contentWindow(),false,c);
return d.enterBlockElementMozilla();
};
this.EnterMozilla=function(b,c,a){if(c.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}var d=c.getSelectedElement();
if(d!=null&&d.tagName!="P"){c.bubbleKeyEventToBrowser();
return true;
}else{c.pasteHtml("<br />");
}};
this.EnterNewLine=function(b,c,a){command=new Telerik.Web.UI.Editor.EnterNewLineCommand("Enter",c.get_contentWindow(),false,c);
if($telerik.isSafari&&c&&c.get_newLineMode()!=Telerik.Web.UI.EditorNewLineModes.Br){command.set_canUnexecute(false);
}c.executeCommand(command);
};
this.Enter=function(b,c,a){if(c.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}var i=c.getSelectedElement();
if("LI"==i.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(i,"LI")!=null){c.bubbleKeyEventToBrowser();
return false;
}if(c.get_enableTrackChanges()){if(i.getAttribute("Name")!=null){if(i.getAttribute("Name").indexOf("_wp")==0){c.bubbleKeyEventToBrowser();
return false;
}}}try{var f=c.getLocalizedString("Enter");
var e=new Telerik.Web.UI.Editor.GenericCommand(f,c.get_contentWindow(),c);
var g=c.get_document().selection.createRange();
if(g.pasteHTML){var j=i.tagName;
if(j.charAt(0)=="H"&&parseInt(j.charAt(1))>0){var h=g.duplicate();
h.moveToElementText(i);
c.bubbleKeyEventToBrowser();
return false;
}else{if(j.toLowerCase()=="textarea"){c.bubbleKeyEventToBrowser();
return false;
}}g.pasteHTML("<br>");
g.select();
g.moveEnd("character",1);
g.moveStart("character",1);
g.collapse(false);
}else{if(g(0)){g.execCommand("Delete");
}}c.executeCommand(e);
}catch(d){alert(d.message);
}return false;
};
this.ShiftEnter=function(b,c,a){var g=c.getSelectedElement();
if("LI"==g.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(g,"LI")!=null){var e=c.getLocalizedString("Enter");
var d=new Telerik.Web.UI.Editor.GenericCommand(e,c.get_contentWindow(),c);
var f=c.get_document().selection.createRange();
f.pasteHTML("<br>");
f.select();
f.moveEnd("character",1);
f.moveStart("character",1);
f.collapse(false);
c.executeCommand(d);
return false;
}c.bubbleKeyEventToBrowser();
return false;
};
this.ShiftEnterSafari=function(b,c,a){var e=c.getSelectedElement();
if("LI"==e.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"LI")!=null){var d=new Telerik.Web.UI.Editor.GenericCommand("Enter",c.get_contentWindow(),c);
c.pasteHtml("<br />","",null,null,false);
c.executeCommand(d);
}else{c.executeCommand(new Telerik.Web.UI.Editor.EnterNewLineCommand(c.getLocalizedString(b),c.get_contentWindow(),false,c,Telerik.Web.UI.EditorNewLineModes.Br));
}return false;
};
this.EnterSafari=function(b,c,a){var d=c.getSelectedElement();
if("LI"==d.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(d,"LI")!=null){c.bubbleKeyEventToBrowser();
return false;
}c.executeBrowserCommand("InsertLineBreak",true,"");
return false;
};
this.ToggleTableBorder=function(b,c,a){c.toggleEnhancedEdit();
return false;
};
this.ConvertToUpper=this.ConvertToLower=function(c,d,a){var q;
var f;
if($telerik.isIE){if(d.get_document().selection.type.toLowerCase()=="control"){return;
}var l=d.get_document().selection.createRange();
q=l.duplicate();
f=l.duplicate();
q.collapse();
f.collapse(false);
}var n=Telerik.Web.UI.Editor.CommandList._markEditorSelection(d);
var e=n.markedElements;
var j=n.newElements;
var g=new Telerik.Web.UI.Editor.GenericCommand(d.getLocalizedString(c),d.get_contentWindow(),d);
var h;
for(h=0;
h<e.length;
h++){b(e[h]);
}for(h=0;
h<j.length;
h++){if($telerik.isIE){j[h].removeNode(false);
}else{var m=document.createRange();
m.selectNodeContents(j[h]);
j[h].parentNode.replaceChild(m.extractContents(),j[h]);
}}if($telerik.isIE){var k=d.get_document().selection.createRange();
k.setEndPoint("StartToStart",q);
k.setEndPoint("EndToEnd",f);
k.select();
}else{var p=d.get_contentWindow().getSelection();
var o=p.getRangeAt(0);
o.collapse(true);
}d.executeCommand(g);
function b(s){var r=s.childNodes;
for(var t=0;
t<r.length;
t++){if(r[t].nodeType==3){r[t].nodeValue=("ConvertToLower"==c)?r[t].nodeValue.toLowerCase():r[t].nodeValue.toUpperCase();
}else{if(r[t].nodeType==1&&r[t].tagName.toUpperCase()!="FONT"){b(r[t]);
}}}}};
this.ApplyClass=function(c,e,a){var r=true;
var l=a.get_value();
var d=e.get_contentWindow();
var f=e.get_document();
var j=new Telerik.Web.UI.Editor.GenericCommand(e.getLocalizedString(c)+' ["'+l+'"]',e.get_contentWindow(),e);
var o=e.getSelectedElement();
var p=(o)?o.tagName:"";
var q=e.getSelection().getHtml();
var b=(!l&&!q)||q.match(/<(font|span)[^>]*><\/(font|span)>/ig)||p=="UL"||p=="IMG";
var m=(b)?o:Telerik.Web.UI.Editor.Utils.getFullySelectedElement(d);
if(m&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(m)){Telerik.Web.UI.Editor.Utils.setElementClassName(m,l);
r=false;
}else{if(!l){f.execCommand("RemoveFormat",false,null);
r=false;
}}if(r){var n=Telerik.Web.UI.Editor.CommandList._markEditorSelection(e);
var h=n.markedElements;
if(h.length>0){for(var k=0;
k<h.length;
k++){var g=h[k];
if(g.className&&g.className!="Apple-style-span"){continue;
}else{g.className=l;
}}if(!$telerik.isIE){Telerik.Web.UI.Editor.Utils.addElementsToSelection(e.get_contentWindow(),h);
}}else{Telerik.Web.UI.Editor.CommandList._completeEditorSelection(e,"class='"+l+"'");
}}if(a.addToUndoRedo!=false){e.executeCommand(j);
}};
this.RealFontSize=function(b,c,a){var n=a.get_value();
var g=new Telerik.Web.UI.Editor.GenericCommand(c.getLocalizedString(b)+' ["'+n+'"]',c.get_contentWindow(),c);
var l=Telerik.Web.UI.Editor.CommandList._markEditorSelection(c);
var f=l.markedElements;
if(f.length>0){var e=[];
for(var h=0;
h<f.length;
h++){var d=f[h];
var j=false;
if($telerik.isSafari){var k=d.parentNode;
var m=k.tagName;
if((m=="FONT"||m=="SPAN")&&k.childNodes.length==1){k.style.fontSize=n;
k.removeAttribute("size");
Telerik.Web.UI.Editor.Utils.removeNode(d);
j=true;
e.push(k);
c.selectElement(k);
}}if(!j){d.style.fontSize=n;
d.removeAttribute("size");
e.push(d);
}}if(!$telerik.isIE){Telerik.Web.UI.Editor.Utils.addElementsToSelection(c.get_contentWindow(),e);
}}else{Telerik.Web.UI.Editor.CommandList._completeEditorSelection(c,"style='font-size:"+n+"'");
}c.executeCommand(g);
Telerik.Web.UI.Editor.Utils.removeInvalidElementsInLists(c.get_document());
};
this._completeEditorSelection=function(b,e){if(!e){e="";
}var a=b.get_contentWindow();
var c=b.get_document();
var h=b.getSelection().getParentElement().tagName;
if($telerik.isIE&&!b.getSelectionHtml()&&(h=="FONT"||h=="SPAN")){c.execCommand("RemoveFormat",null,false);
}var d=b.getSelection();
d.pasteHtml("<font "+e+" id='radERealFont'>&#x200b;</font>");
var f=b.get_document().getElementById("radERealFont");
f.removeAttribute("id");
if($telerik.isIE){b.selectElement(f);
b.getSelection().collapse();
f.innerHTML="";
}else{if(a.getSelection){var g=a.getSelection();
var i=b.getSelection().getRange();
g.removeAllRanges();
if(!$telerik.isSafari){f.innerHTML="";
}i.selectNodeContents(f);
if(!$telerik.isSafari){i.collapse(false);
}g.addRange(i);
}}};
this._markEditorSelection=function(f){if(f.get_html()==""){return{markedElements:[],newElements:[],oldElements:[]};
}var e="AZBY";
var d="_cm";
var s=[];
var t=[];
var u=[];
var v=[];
var p=$telerik.isSafari2||$telerik.isSafari3;
var n=p?"span":"font";
var g=f.get_contentArea();
if(p){var x=new Telerik.Web.UI.Editor.OptimizeSpans();
x.getHtmlContent(g);
}var h=f.getSelection();
if(h.isControl()){var c=h.getParentElement();
var m=f.get_document().createElement(n);
m.appendChild(c.cloneNode(true));
c.parentNode.replaceChild(m,c);
return{markedElements:[m],newElements:[m]};
}r();
if(!$telerik.isIE){g.ownerDocument.execCommand("UseCSS",false,true);
g.ownerDocument.execCommand("styleWithCSS",false,false);
}g.ownerDocument.execCommand("FontName",false,e);
var k=g.getElementsByTagName(n);
for(var o=0;
o<k.length;
o++){var l=k[o];
if(l.getAttribute("face")==e||l.style.fontFamily==e){l.removeAttribute("face");
if(l.style.fontFamily==e){l.style.fontFamily="";
if(l.className=="Apple-style-span"){l.className="";
}}t.push(l);
var b=l.getElementsByTagName(n);
for(var q=0;
q<b.length;
q++){var a=b[q];
if(a.getAttribute("face")!=e){t.push(a);
}}if(!l.getAttribute(d)){u.push(l);
}else{v.push(l);
}}l.removeAttribute(d);
}w();
if(!$telerik.isIE){g.ownerDocument.execCommand("UseCSS",false,false);
g.ownerDocument.execCommand("styleWithCSS",false,true);
}function r(){var j=f.get_contentArea().getElementsByTagName(n);
for(var z=0;
z<j.length;
z++){var y=j[z];
if(j[z].face){y.setAttribute("_face",y.face);
s.push(y);
}else{if(p){y.setAttribute("_face",y.style.fontFamily);
s.push(y);
}}y.setAttribute(d,1);
}}function w(){for(var j=0;
j<s.length;
j++){if(p){s[j].style.fontFamily=s[j].getAttribute("_face");
}else{s[j].face=s[j].getAttribute("_face");
}s[j].removeAttribute("_face");
}s=[];
}return{markedElements:t,newElements:u,oldElements:v};
};
this.CSDialog=function(d,e,c){var a=e;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(g,f){});
e.showDialog("CSDialog",a,b);
return false;
};
})();
if(typeof(RadEditorCommandList)=="undefined"){var RadEditorCommandList=Telerik.Web.UI.Editor.CommandList;
}Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.CommandsManager=function(a){this._commands=[];
this._currentCommandIndex=-1;
};
Telerik.Web.UI.Editor.CommandsManager.prototype={get_commands:function(){return this._commands;
},execute:function(c,a){if(c&&c.execute){var b=c.execute();
if(false==a){return false;
}if(b&&c._canUnexecute){this._clearCommandsToRedo();
Array.add(this._commands,c);
this._currentCommandIndex=this._commands.length-1;
return true;
}}return false;
},undo:function(c){if(c>this._commands.length){c=this._commands.length;
}var a=0;
var b=null;
while(0<c--&&0<=this._currentCommandIndex&&this._currentCommandIndex<this._commands.length){b=this._commands[this._currentCommandIndex--];
if(b){b.unexecute();
a++;
}}},redo:function(d){if(d>this._commands.length){d=this._commands.length;
}var a=0;
var b=null;
var c=this._currentCommandIndex+1;
while(0<d--&&0<=c&&c<this._commands.length){b=this._commands[c];
if(b){b.execute();
this._currentCommandIndex=c;
a++;
}c++;
}},removeCommandAt:function(a){this._commands.splice(a,1);
if(this._currentCommandIndex>=a){this._currentCommandIndex--;
}},isUndoAvailable:function(){return(-1<this._currentCommandIndex);
},isRedoAvailable:function(){return(this._currentCommandIndex<this._commands.length-1);
},getCommandsToUndo:function(){if(this.isUndoAvailable()){return(this._commands.slice(0,this._currentCommandIndex+1)).reverse();
}else{return[];
}},getCommandsToRedo:function(){if(this.isRedoAvailable()){return this._commands.slice(this._currentCommandIndex+1);
}else{return[];
}},canRepeatLastCommand:function(){return((this._currentCommandIndex==this._commands.length-1)&&null!=this._commands[this._currentCommandIndex]&&("function"==typeof(this._commands[this._currentCommandIndex].clone)));
},repeatLastCommand:function(){if(this.canRepeatLastCommand()){var a=this._commands[this._currentCommandIndex].clone();
this.execute(a);
}},_clearCommandsToRedo:function(){if(this.isRedoAvailable()){this._commands.splice(this._currentCommandIndex+1,this._commands.length-this._currentCommandIndex);
}}};
Telerik.Web.UI.Editor.CommandsManager.registerClass("Telerik.Web.UI.Editor.CommandsManager",null);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
a.registerEnum(b.Editor,"CommandStates",{Disabled:-1,Off:0,On:1});
a.registerEnum(b,"EditingOptions",{Typing:1,Tools:2,ContextMenus:4,Tab:8,Modules:16,EditModes:32,All:63});
a.registerEnum(b,"StripFormattingOptions",{None:0,NoneSupressCleanMessage:1,MSWord:2,MSWordNoFonts:4,MSWordRemoveAll:8,Css:16,Font:32,Span:64,AllExceptNewLines:128,ConvertWordLists:256,All:512,MSWordNoMargins:1024});
a.registerEnum(b,"EditorStripHtmlOptions",{None:0,Comments:1});
a.registerEnum(b,"EditorToolbarMode",{Default:1,Floating:2,PageTop:4,ShowOnFocus:8,RibbonBar:16,RibbonBarFloating:32,RibbonBarPageTop:64,RibbonBarShowOnFocus:128});
a.registerEnum(b,"EditorFilters",{None:0,RemoveScripts:1,MakeUrlsAbsolute:2,FixUlBoldItalic:4,FixEnclosingP:8,IECleanAnchors:16,MozEmStrong:32,ConvertFontToSpan:64,ConvertToXhtml:128,IndentHTMLContent:256,EncodeScripts:512,OptimizeSpans:1024,ConvertCharactersToEntities:2048,PdfExportFilter:4096,ConvertInlineStylesToAttributes:8192,DefaultFilters:53245});
a.registerEnum(b,"EditorNewLineModes",{Br:1,P:2,Div:4});
a.registerEnum(b,"EditorToolType",{Button:1,DropDown:2,SplitButton:4,Separator:8,ToolStrip:16,Custom:32});
a.registerEnum(b,"EditModes",{Design:1,Html:2,Preview:4,All:7});
a.registerEnum(b,"EditorContentAreaMode",{Iframe:1,Div:2});
b.Editor.formatSetBlockElements=["p","h1","h2","h3","h4","h5","h6","menu","pre","address"];
})();
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
$telerik.toEditorFilter=function(a){return a;
};
$telerik.findEditorFilter=$find;
Telerik.Web.UI.Editor.Filter=function(){Telerik.Web.UI.Editor.Filter.initializeBase(this);
this.IsDom=false;
this.Enabled=false;
this.Name="RadEditor filter";
this.Description="RadEditor filter description";
};
Telerik.Web.UI.Editor.Filter.prototype={getHtmlContent:function(a){return a;
},getDesignContent:function(a){return a;
},get_isDom:function(){return this.IsDom;
},set_isDom:function(a){this.IsDom=a;
},get_enabled:function(){return this.Enabled;
},set_enabled:function(a){this.Enabled=a;
},get_name:function(){return this.Name;
},set_name:function(a){this.Name=a;
},get_description:function(){return this.Description;
},set_description:function(a){this.Description=a;
}};
Telerik.Web.UI.Editor.Filter.registerClass("Telerik.Web.UI.Editor.Filter",Sys.Component);
Telerik.Web.UI.Editor.StripScriptsFilter=function(){Telerik.Web.UI.Editor.StripScriptsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="StripScriptsFilter";
this.Description="This filter strips all script tags from the content.";
};
Telerik.Web.UI.Editor.StripScriptsFilter.prototype={getHtmlContent:function(a){return this._performStripping(a);
},getDesignContent:function(a){return this._performStripping(a);
},_performStripping:function(b){var a=b.replace(new RegExp("<(SCRIPT)([^>]*)/>","ig"),"");
a=a.replace(RegExp("<(SCRIPT)([^>]*)>[\\s\\S]*?</(SCRIPT)([^>]*)>","ig"),"");
return a;
}};
Telerik.Web.UI.Editor.StripScriptsFilter.registerClass("Telerik.Web.UI.Editor.StripScriptsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.EncodeScriptsFilter=function(){Telerik.Web.UI.Editor.EncodeScriptsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="EncodeScriptsFilter";
this.Description="This filter encodes all script tags from the content.";
};
Telerik.Web.UI.Editor.EncodeScriptsFilter.prototype={getHtmlContent:function(a){var c=new RegExp("<!--RADEDITORSAVEDTAG_([\\s\\S]*?)-->","ig");
var e=new RegExp("RADEDITORSAVEDTAGENDING","ig");
var d=new RegExp("RADEDITORSAVEDTAGBEGINNING","ig");
var b=a.replace(c,"<$1>");
b=b.replace(e,"-->");
b=b.replace(d,"<!--");
return b;
},getDesignContent:function(b){var a=function(h,f,g,l,n){var m=n.substring(0,l).lastIndexOf("<!--");
var e=n.substring(0,l).lastIndexOf("-->");
if(m>e){m=n.substring(l,n.length).indexOf("<!--");
e=n.substring(l,n.length).indexOf("-->");
if((m==-1&&e>-1)||(e<m)){return h;
}}var p=new RegExp("-->","ig");
var o=new RegExp("<!--","ig");
var i=g.replace(p,"RADEDITORSAVEDTAGENDING");
i=i.replace(o,"RADEDITORSAVEDTAGBEGINNING");
var k="<!--RADEDITORSAVEDTAG_"+f+i+"-->";
return k;
};
var d=new RegExp("<(script|noscript)([\\s\\S]*?<\\/\\1)>","ig");
var c=b.replace(d,a);
return c;
}};
Telerik.Web.UI.Editor.EncodeScriptsFilter.registerClass("Telerik.Web.UI.Editor.EncodeScriptsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.RemoveExtraBrakes=function(){Telerik.Web.UI.Editor.RemoveExtraBrakes.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="RemoveExtraBrakes";
this.Description="This filter strips all extra brakes inside some tags like p, h1, etc.";
};
Telerik.Web.UI.Editor.RemoveExtraBrakes.prototype={getHtmlContent:function(a){return this._performStripping(a);
},_performStripping:function(a){var b=a;
if($telerik.isFirefox||$telerik.isOpera){b=b.replace(/<BR\s?\/?>\s*<SCRIPT/ig,"<script");
}b=b.replace(/<BR\s?\/?>\s*<\/(H1|H2|H3|H4|H5|H6|LI|P)/ig,function(e,d,f,c){if(!c.substr(0,f).match(/<BR\s?\/?>\s*$/gi)){e="</"+d;
}return e;
});
b=b.replace(/<(H1|H2|H3|H4|H5|H6|LI|P)([^>]*)?><BR\s?\/?>/ig,"<$1 $2>");
if($telerik.isSafari){b=b.replace(/<p><\/p>/ig,"<p><br /></p>");
}return b;
}};
Telerik.Web.UI.Editor.RemoveExtraBrakes.registerClass("Telerik.Web.UI.Editor.RemoveExtraBrakes",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixNestedLists=function(){Telerik.Web.UI.Editor.FixNestedLists.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixNestedLists";
this.Description="This filter produces valid XHTML from nested lists";
};
Telerik.Web.UI.Editor.FixNestedLists.prototype={_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},fixLists:function(b,e){var a=this._getElements(b,e);
for(var c=a.length-1;
c>=0;
c--){var d=a[c];
var g=d.previousSibling;
if(g&&g.nodeType==3){g=g.previousSibling;
}if(g&&"li"==d.previousSibling.nodeName.toLowerCase()){g.appendChild(d.cloneNode(true));
var f=d.parentNode;
f.removeChild(d);
f=null;
}}},getHtmlContent:function(a){this.fixLists(a,"OL");
this.fixLists(a,"UL");
return a;
}};
Telerik.Web.UI.Editor.FixNestedLists.registerClass("Telerik.Web.UI.Editor.FixNestedLists",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixUlBoldItalic=function(){Telerik.Web.UI.Editor.FixUlBoldItalic.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixUlBoldItalic";
this.Description="This filter changes u, b, i tags to spans with CSS";
};
Telerik.Web.UI.Editor.FixUlBoldItalic.prototype={_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},_replaceElementWithSpan:function(b,m,h){var a=this._getElements(b,m);
var c=[];
for(var e=a.length-1;
e>=0;
e--){Array.add(c,a[e]);
}for(var d=0,f=c.length;
d<f;
d++){var g=b.ownerDocument.createElement("span");
g.style.cssText=h;
var k=c[d];
var l=k.innerHTML;
if($telerik.isIE&&l==" "){g.innerText=l;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(g,l);
}k.parentNode.replaceChild(g,k);
}},_replaceSpanWithElement:function(b,n,q){var p=this._getElements(b,"span");
var c=[];
for(var e=p.length-1;
e>=0;
e--){Array.add(c,p[e]);
}for(var d=0,h=c.length;
d<h;
d++){var a=[];
var o=c[d];
for(var f=0;
f<o.childNodes.length;
f++){Array.add(a,o.childNodes[f].cloneNode(true));
}if(o.style.cssText.toLowerCase()==q||o.style.cssText.toLowerCase()==(q+";")){var m=b.ownerDocument.createElement(n);
for(var g=0;
g<a.length;
g++){m.appendChild(a[g]);
}o.parentNode.replaceChild(m,o);
}}},getHtmlContent:function(a){this._replaceElementWithSpan(a,"u","text-decoration:underline;");
this._replaceElementWithSpan(a,"strike","text-decoration: line-through;");
return a;
},getDesignContent:function(a){this._replaceSpanWithElement(a,"u","text-decoration: underline");
this._replaceSpanWithElement(a,"strike","text-decoration: line-through");
return a;
}};
Telerik.Web.UI.Editor.FixUlBoldItalic.registerClass("Telerik.Web.UI.Editor.FixUlBoldItalic",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.OptimizeSpans=function(){Telerik.Web.UI.Editor.OptimizeSpans.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="OptimizeSpans";
this.Description="This filter changes removes unneeded span elements";
};
Telerik.Web.UI.Editor.OptimizeSpans.prototype={_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},_singleChild:function(d){if(d==null||d.parentNode==null){return false;
}var e=d.parentNode;
var a=0;
for(var b=0,c=e.childNodes.length;
b<c&&a<2;
b++){var f=e.childNodes[b];
if(f.nodeType==3&&String(f.nodeValue).trim()==""){continue;
}a++;
}return(a==1);
},_optimizeElement:function(g){var h=g.parentNode;
var f;
var a=["align","dir","lang","title","class","id"];
var b=true;
for(f=0,len=a.length;
f<len;
f++){b|=this._checkAttribute(g,h,a[f]);
}if(!b){return;
}for(f=0,len=a.length;
f<len;
f++){var c=a[f];
var d=g.getAttribute(c,2);
if(d){h.setAttribute(c,d);
}}var e=$telerik.isIE?g.style.cssText:g.getAttribute("style",2);
if(e){var k=$telerik.isIE?h.style.cssText:h.getAttribute("style",2);
k=k?k+";":"";
if($telerik.isIE){h.style.cssText=k+e;
}else{h.setAttribute("style",k+e);
}}Telerik.Web.UI.Editor.Utils.removeNode(g);
},_checkAttribute:function(d,e,c){var a=d.getAttribute(c,2);
var b=e.getAttribute(c,2);
return(a==null||b==null||a==b);
},getHtmlContent:function(b){var g=this._getElements(b,"span");
if(g){var c,d=g.length;
var a=[];
for(c=0;
c<d;
c++){var e=g[c];
var h=e.tagName.toLowerCase();
if(e.parentNode.tagName.toLowerCase()==h){if(this._singleChild(e)){a[a.length]=e;
}else{var f=Telerik.Web.UI.Editor.Utils.getOuterHtml(e).toLowerCase();
if(f.indexOf("<"+h+">")==0){a[a.length]=e;
}}}}d=a.length;
for(c=0;
c<d;
c++){this._optimizeElement(a[c]);
}}return b;
}};
Telerik.Web.UI.Editor.OptimizeSpans.registerClass("Telerik.Web.UI.Editor.OptimizeSpans",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepCommentsFilter=function(){Telerik.Web.UI.Editor.IEKeepCommentsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEKeepCommentsFilter";
this.Description="This filter keeps the conditional comments in IE.";
};
Telerik.Web.UI.Editor.IEKeepCommentsFilter.prototype={getHtmlContent:function(b){var a=new RegExp("<!--RADEDITORSAVEDCOMMENT","ig");
var c=b.replace(a,"<!--");
return c;
},getDesignContent:function(b){var a=new RegExp("<!--(\\[[^\\]]+\\][\\s\\S]*?)-->","ig");
var c=b.replace(a,"<!--RADEDITORSAVEDCOMMENT$1-->");
return c;
}};
Telerik.Web.UI.Editor.IEKeepCommentsFilter.registerClass("Telerik.Web.UI.Editor.IEKeepCommentsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter=function(){Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEKeepObjectParamsFilter";
this.Description="This filter keeps the params of object tags when going to html mode and back.";
this._paramRegex=new RegExp("<param([\\s\\S]+?)/?>","ig");
};
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.prototype={getHtmlContent:function(a){var d=new RegExp("<rade_param","ig");
var c=this._paramRegex.test(a);
var e=d.test(a);
var b=a;
if(c&&e){b=b.replace(this._paramRegex,"");
}if(e){b=b.replace(d,"<param");
b=b.replace(/>\s*<\/rade_param>/gi,"/>");
b=b.replace(this._paramRegex,"<param$1/>");
}return b;
},getDesignContent:function(a){var b=a.replace(this._paramRegex,"<rade_param$1></rade_param><param$1/>");
return b;
}};
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.registerClass("Telerik.Web.UI.Editor.IEKeepObjectParamsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter=function(){Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="IEKeepObjectDesignFilter";
this.Description="This filter keeps the browser from automatically changing object tags when going to html mode and back.";
};
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.prototype={getHtmlContent:function(a){var d=a.getElementsByTagName("object");
for(var b=0,c=d.length;
b<c;
b++){var e=d[b];
var f=e.getAttribute("data",2);
var g=e.getAttribute("type",2);
if(f&&g&&g.toLowerCase().indexOf("silverlight")!=-1&&f.toLowerCase().indexOf("base64")!=-1){e.setAttribute("data","data:"+g+",");
}}return a;
}};
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.registerClass("Telerik.Web.UI.Editor.IEKeepObjectDesignFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixEnclosingP=function(){Telerik.Web.UI.Editor.FixEnclosingP.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixEnclosingP";
this.Description="This filter removes a parent paragraph tag if the whole content is inside it.";
};
Telerik.Web.UI.Editor.FixEnclosingP.prototype={getHtmlContent:function(b){var a=null;
if(b.tagName.toLowerCase()=="html"){a=b.getElementsByTagName("BODY")[0];
}else{a=b;
}if($telerik.isIE){if(a&&(a.firstChild)&&("P"==a.firstChild.tagName)&&(a.childNodes.length==1)&&(a.innerHTML.substring(0,3).toLowerCase()=="<p>")){Telerik.Web.UI.Editor.Utils.removeNode(a.firstChild);
}}return b;
}};
Telerik.Web.UI.Editor.FixEnclosingP.registerClass("Telerik.Web.UI.Editor.FixEnclosingP",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEFixEmptyParagraphs=function(){Telerik.Web.UI.Editor.IEFixEmptyParagraphs.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEFixEmptyParagraphs";
this.Description="This filter inserts a non-braking space in empty paragraph tags so they are rendered correctly in IE.";
};
Telerik.Web.UI.Editor.IEFixEmptyParagraphs.prototype={getHtmlContent:function(a){var c=new RegExp("(<p[^>]*>)(<\\/p>)","ig");
var b=a.replace(c,"$1&nbsp;$2");
return b;
}};
Telerik.Web.UI.Editor.IEFixEmptyParagraphs.registerClass("Telerik.Web.UI.Editor.IEFixEmptyParagraphs",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IECleanAnchorsFilter=function(){Telerik.Web.UI.Editor.IECleanAnchorsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IECleanAnchorsFilter";
this.Description="This filter removse the current page href from all anchor (#) links .";
};
Telerik.Web.UI.Editor.IECleanAnchorsFilter.prototype={getHtmlContent:function(b){var a=Telerik.Web.UI.Editor.Utils.escapeRegExSpecialChars(document.location.href);
var d=new RegExp("(<A[^<>]*?(href)\\s*=\\s*['\"])("+a+")(\\#[^'\"]*?['\"][^>]*?>)","ig");
var c=b.replace(d,"$1$4");
return c;
}};
Telerik.Web.UI.Editor.IECleanAnchorsFilter.registerClass("Telerik.Web.UI.Editor.IECleanAnchorsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozEmStrongFilter=function(){Telerik.Web.UI.Editor.MozEmStrongFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="MozEmStrongFilter";
this.Description="This filter changes b,strong and i,em in Mozilla browsers.";
};
Telerik.Web.UI.Editor.MozEmStrongFilter.prototype={getHtmlContent:function(a){var b=a.replace(new RegExp("<b(\\s([^>])*?)?>","ig"),"<strong$1>");
b=b.replace(new RegExp("</b(\\s([^>])*?)?>","ig"),"</strong$1>");
b=b.replace(new RegExp("<i(\\s([^>])*?)?>","ig"),"<em$1>");
b=b.replace(new RegExp("</i(\\s([^>])*?)?>","ig"),"</em$1>");
return b;
},getDesignContent:function(a){var b=a.replace(new RegExp("<strong(\\s([^>])*?)?>","ig"),"<b$1>");
b=b.replace(new RegExp("</strong(\\s([^>])*?)?>","ig"),"</b$1>");
b=b.replace(new RegExp("<em(\\s([^>])*?)?>","ig"),"<i$1>");
b=b.replace(new RegExp("</em(\\s([^>])*?)?>","ig"),"</i$1>");
return b;
}};
Telerik.Web.UI.Editor.MozEmStrongFilter.registerClass("Telerik.Web.UI.Editor.MozEmStrongFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepStylesString=function(){Telerik.Web.UI.Editor.MozillaKeepStylesString.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="MozillaKeepStylesString";
this.Description="This filter remembers the positions of link tags in the html content (part 1).";
this.markerCounter=0;
};
Telerik.Web.UI.Editor.MozillaKeepStylesString.prototype={getDesignContent:function(b){var e=this;
var a=function(k,g,h,m,n){var f=n.indexOf("</head>",m);
if(f!=-1&&n.indexOf("<body",f)!=-1){return k;
}else{e.markerCounter++;
var i="RadEditorStyleKeeper"+e.markerCounter;
var l="<div id='"+i+"' style='display:none;'>&nbsp;</div><"+g+" reoriginalpositionmarker='"+i+"'"+h;
return l;
}};
var c=new RegExp("<(link|style)([^>]*>)","gi");
var d=b.replace(c,a);
return d;
},getHtmlContent:function(a){var b=new RegExp("<(link|style) reoriginalpositionmarker='RadEditorStyleKeeper[^']+'([^>]*>)","gi");
var d=a.replace(b,"<$1$2");
var c=new RegExp("<div id='RadEditorStyleKeeper[^']+' style='display:none;'>&nbsp;</div>","gi");
d=d.replace(c,"");
return d;
}};
Telerik.Web.UI.Editor.MozillaKeepStylesString.registerClass("Telerik.Web.UI.Editor.MozillaKeepStylesString",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepStylesDom=function(){Telerik.Web.UI.Editor.MozillaKeepStylesDom.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="MozillaKeepStylesDom";
this.Description="This filter remembers the positions of link tags in the html content(part 2).";
this._divs=[];
};
Telerik.Web.UI.Editor.MozillaKeepStylesDom.prototype={getHtmlContent:function(a){var g=a.getElementsByTagName("HEAD")[0];
var e=true;
if(!g){g=a.ownerDocument.getElementsByTagName("HEAD")[0];
e=false;
}if(!g){return a;
}this._restoreElements(g,a,"STYLE");
this._restoreElements(g,a,"LINK");
var d=a.getElementsByTagName("DIV");
if(d){for(var f=d.length-1;
f>=0;
f--){var b=d[f];
if(b.id.indexOf("RadEditorStyleKeeper")==0){var c=b.parentNode;
c.removeChild(b);
}}}d=null;
if(e){this._removeElements(g,"STYLE");
this._removeElements(g,"LINK");
}this._removeMarkerAttributes(a,"STYLE");
this._removeMarkerAttributes(a,"LINK");
return a;
},_restoreElements:function(d,a,e){var b;
b=d.getElementsByTagName(e);
this._divs=a.getElementsByTagName("DIV");
var c=0;
while(b.length>0&&c<b.length){this._restoreStyle(b[c++]);
}},_restoreStyle:function(c){var d=c.getAttribute("reoriginalpositionmarker");
if(d){j=0;
var a=null;
while(j<this._divs.length&&!a){if(this._divs[j].id==d){a=this._divs[j];
}j++;
}if(a){var e=c.cloneNode(true);
e.removeAttribute("reoriginalpositionmarker");
var b=a.parentNode;
b.replaceChild(e,a);
return true;
}}return false;
},_removeElements:function(b,f){var e=b.getElementsByTagName(f);
if(e){for(var a=e.length-1;
a>=0;
a--){var c=e[a];
if(null!=c.getAttribute("reoriginalpositionmarker")){var d=c.parentNode;
d.removeChild(c);
}}e=null;
}},_removeMarkerAttributes:function(a,d){var c=a.getElementsByTagName(d);
if(c){for(var b=c.length-1;
b>=0;
b--){c[b].removeAttribute("reoriginalpositionmarker");
}}c=null;
}};
Telerik.Web.UI.Editor.MozillaKeepStylesDom.registerClass("Telerik.Web.UI.Editor.MozillaKeepStylesDom",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaRemoveLastBrFilter=function(a){Telerik.Web.UI.Editor.MozillaRemoveLastBrFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="MozillaRemoveLastBr";
this.Description="Remove the last Br element, which Firefox automatically adds.";
};
Telerik.Web.UI.Editor.MozillaRemoveLastBrFilter.prototype={getHtmlContent:function(a){this._removeLastBr(a);
return a;
},_removeLastBr:function(b){if(!b||$telerik.isIE){return;
}var a=(b.tagName=="HTML")?b.getElementsByTagName("BODY")[0]:b;
var c=(a.lastChild)?a.lastChild:null;
if(c&&c.tagName&&"BR"==c.tagName){Telerik.Web.UI.Editor.Utils.removeNode(c);
}},getDesignContent:function(b){if(!b||$telerik.isIE){return;
}var a=(b.tagName=="HTML")?b.getElementsByTagName("BODY")[0]:b;
$telerik.$(a).append("<br />");
return b;
}};
Telerik.Web.UI.Editor.MozillaRemoveLastBrFilter.registerClass("Telerik.Web.UI.Editor.MozillaRemoveLastBrFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepFlash=function(a){Telerik.Web.UI.Editor.MozillaKeepFlash.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="MozillaKeepFlash";
this.Description="This filter replaces the flash/media objects with static images in design mode.";
this._flashImageSrc=a?a:"FlashManager.gif";
};
Telerik.Web.UI.Editor.MozillaKeepFlash.prototype={_saveFlashObject:function(a){var c=a.ownerDocument.createElement("img");
c.setAttribute("isflash","true");
c.setAttribute("src",this._flashImageSrc);
c.setAttribute("alt","");
var f=a.getAttribute("width",2);
if(f){c.setAttribute("width",f);
}var b=a.getAttribute("height",2);
if(b){c.setAttribute("height",b);
}var d=$telerik.getOuterHtml(a);
d=d.replace(/\n/gi,"<flashcr />").replace(/\r/gi,"<flashlf />");
c.setAttribute("originalCode",Telerik.Web.UI.Editor.Utils.encodePostbackContent(d));
var e=a.parentNode;
e.insertBefore(c,a);
e.removeChild(a);
a=null;
},_restoreFlashObject:function(a){var e=Telerik.Web.UI.Editor.Utils.decodePostbackContent(a.getAttribute("originalCode"));
e=e.replace(/\<flashcr\s*\/\>/gi,"\n").replace(/\<flashlf\s*\/\>/gi,"\r");
var d=a.ownerDocument.createElement("div");
d.innerHTML=e;
var c=d.firstChild;
var g=a.getAttribute("width",2);
if(g){c.setAttribute("width",g);
}var b=a.getAttribute("height",2);
if(b){c.setAttribute("height",b);
}var f=a.parentNode;
f.insertBefore(c,a);
f.removeChild(a);
a=null;
},getDesignContent:function(b){var d,c;
var a=b.getElementsByTagName("object");
for(d=0;
d<a.length;
d++){c=a[d];
this._saveFlashObject(c);
d--;
}a=b.getElementsByTagName("embed");
for(d=0;
d<a.length;
d++){c=a[d];
this._saveFlashObject(c);
d--;
}return b;
},getHtmlContent:function(b){var a=b.getElementsByTagName("img");
for(var d=0;
d<a.length;
d++){var c=a[d];
var e=c.getAttribute("isflash",2);
if(e!=null){this._restoreFlashObject(c);
d--;
}}return b;
}};
Telerik.Web.UI.Editor.MozillaKeepFlash.registerClass("Telerik.Web.UI.Editor.MozillaKeepFlash",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.StripJunkFilter=function(){Telerik.Web.UI.Editor.StripJunkFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="StripJunkFilter";
this.Description="This filter strips extra content, added by the Safari/Firefox browsers.";
};
Telerik.Web.UI.Editor.StripJunkFilter.prototype={getHtmlContent:function(a){var b=a;
if($telerik.isSafari){b=b.replace(new RegExp(' class="khtml-block-placeholder"',"ig"),"");
b=b.replace(new RegExp(' class="Apple-style-span"',"ig"),"");
b=b.replace(new RegExp(' class="webkit-block-placeholder"',"ig"),"");
}if($telerik.isFirefox){b=b.replace(new RegExp('\\s?<br type="_moz" \\/>',"ig")," ");
b=b.replace(new RegExp(' _moz_[a-z_]*="[^"]*"',"ig"),"");
b=b.replace(new RegExp(' type="_moz"',"ig"),"");
}return b;
}};
Telerik.Web.UI.Editor.StripJunkFilter.registerClass("Telerik.Web.UI.Editor.StripJunkFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertFontToSpanFilter=function(){Telerik.Web.UI.Editor.ConvertFontToSpanFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="ConvertFontToSpanFilter";
this.Description="This filter changes deprecated font tags to compliant span tags.";
this._fontSizesPx=["10px","13px","16px","18px","24px","32px","48px"];
this._fontSizesRevPx=[];
for(var a=0;
a<this._fontSizesPx.length;
a++){this._fontSizesRevPx[parseInt(this._fontSizesPx[a])]=a;
}};
Telerik.Web.UI.Editor.ConvertFontToSpanFilter.prototype={getHtmlContent:function(a){var b=a.ownerDocument;
var k=b.createElement("span");
var i,e,g;
var f=a.getElementsByTagName("FONT");
while(f.length>0){e=f[0];
g=e.parentNode;
i=k.cloneNode(false);
$telerik.mergeElementAttributes(e,i,false);
if(e.style.cssText&&e.style.cssText!=""){i.style.cssText=e.style.cssText;
}if(e.className){i.className=e.className;
}if(e.face){i.style.fontFamily=e.face;
if(i.getAttribute("face")!=null){i.removeAttribute("face");
}}var h=0;
if(e.style.fontSize){i.style.fontSize=e.style.fontSize;
}else{if(!isNaN(h=parseInt(e.size))&&e.size!="+0"){try{if(h<0){h=h+4;
}i.style.fontSize=this._fontSizesPx[h-1];
}catch(c){i.style.fontSize=this._fontSizesPx[3];
}if(i.getAttribute("size")!=null){i.removeAttribute("size");
}}}var d=e.getAttribute("color");
if(d){i.style.color=d;
if(i.getAttribute("color")!=null){i.removeAttribute("color");
}}if($telerik.isIE&&e.innerHTML==" "){i.innerText=e.innerHTML;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(i,e.innerHTML);
}g.replaceChild(i,e);
f=a.getElementsByTagName("FONT");
}return a;
},getDesignContent:function(b){if($telerik.isSafari2||$telerik.isSafari3){return b;
}var c=b.ownerDocument;
var e=c.createElement("font");
var g,d,f;
var h=b.getElementsByTagName("SPAN");
while(h.length>0){g=h[0];
f=g.parentNode;
d=e.cloneNode(false);
$telerik.mergeElementAttributes(g,d,false);
if(g.style.cssText&&g.style.cssText!=""){d.style.cssText=g.style.cssText;
}if(g.className){d.className=g.className;
}if(g.style.fontFamily){d.face=g.style.fontFamily;
this._removeElementStyleAttribute(d,"fontFamily");
}if(g.style.fontSize){var a=null;
if(-1!=g.style.fontSize.indexOf("px")){a=this._fontSizesRevPx[parseInt(g.style.fontSize)];
}if(typeof(a)!="undefined"&&null!=a){d.size=a+1;
this._removeElementStyleAttribute(d,"fontSize");
}}if(g.style.color){d.color=Telerik.Web.UI.Editor.Utils._rgbToHex(g.style.color);
this._removeElementStyleAttribute(d,"color");
}if($telerik.isIE&&g.innerHTML==" "){d.innerText=g.innerHTML;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(d,g.innerHTML);
}f.replaceChild(d,g);
h=b.getElementsByTagName("SPAN");
}return b;
},_removeElementStyleAttribute:function(a,b){if(a.style&&a.style[b]){if(a.style.removeAttribute){a.style.removeAttribute(b);
}else{if(a.style.removeProperty){b=b.replace(/([A-Z])/g,"-$1").toLowerCase();
a.style.removeProperty(b);
}}if(a.style[b]){a.style[b]=null;
}if(a.style.cssText){}else{a.removeAttribute("style");
}}}};
Telerik.Web.UI.Editor.ConvertFontToSpanFilter.registerClass("Telerik.Web.UI.Editor.ConvertFontToSpanFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter=function(){Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="ConvertInlineStylesToAttributesFilter";
this.Description="This filter converts XHTML compliant inline style attributes to Email compliant element attributes.";
};
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.prototype={getHtmlContent:function(a){var b=$telerik.$.proxy;
$telerik.$("body",a).each(b(function(d,c){this.convertCSSProperty(c,"bgColor","backgroundColor");
this.convertCSSProperty(c,"background","backgroundImage");
},this));
$telerik.$("table,td",a).each(b(function(d,c){this.convertCSSProperty(c,"bgColor","backgroundColor");
this.convertCSSProperty(c,"background","backgroundImage");
this.convertCSSProperty(c,"width","width");
this.convertCSSProperty(c,"height","height");
},this));
$telerik.$("p,H1,H2,H3,H4,H5,H6,div",a).each(b(function(d,c){this.convertCSSProperty(c,"align","textAlign");
},this));
$telerik.$("img",a).each(b(function(d,c){Telerik.Web.UI.Editor.Utils.convertImgCssAlignProperty(c);
if($telerik.isIE){c.style.styleFloat="";
}else{c.style.cssFloat="";
}c.style.verticalAlign="";
this.convertCSSProperty(c,"width","width");
this.convertCSSProperty(c,"height","height");
},this));
return a;
},getDesignContent:function(b){var a=new Telerik.Web.UI.Editor.CleanAttributesFilter();
b=a.getHtmlContent(b);
b=a.getDesignContent(b);
return b;
},convertCSSProperty:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertCSSProperty(b,c,a);
}};
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.registerClass("Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.CleanAttributesFilter=function(){Telerik.Web.UI.Editor.CleanAttributesFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="CleanAttributesFilter";
this.Description="This filter fixes deprecated attributes to make the content XHTML compliant.";
};
Telerik.Web.UI.Editor.CleanAttributesFilter.prototype={_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},getHtmlContent:function(a){var b=$telerik.$.proxy;
$telerik.$("body,table",a).each(b(function(d,c){this.convertAttribute(c,"bgColor","backgroundColor");
this.convertAttribute(c,"background","backgroundImage");
},this));
$telerik.$("p,H1,H2,H3,H4,H5,H6,div,ul,li",a).each(b(function(d,c){this.convertAttribute(c,"align","textAlign");
},this));
$telerik.$("td",a).each(b(function(d,c){this.convertAttribute(c,"bgColor","backgroundColor");
this.convertAttribute(c,"background","backgroundImage");
this.convertAttribute(c,"borderColor","borderColor");
this.convertAttribute(c,"width","width");
this.convertAttribute(c,"height","height");
this.convertAttribute(c,"noWrap","whiteSpace");
},this));
$telerik.$("img",a).each(b(function(e,d){Telerik.Web.UI.Editor.Utils.convertImgAlignAttribute(d);
var c=["marginLeft","marginRight"];
this.convertAttribute(d,"hspace",c);
c=["marginTop","marginBottom"];
this.convertAttribute(d,"vspace",c);
this.convertBorderAttribute(d);
},this));
$telerik.$("ul,ol",a).each(b(function(d,c){this.convertTypeAttribute(c);
},this));
return a;
},getDesignContent:function(a){$telerik.$("p,H1,H2,H3,H4,H5,H6,div",a).each($telerik.$.proxy(function(c,b){this.convertCSSToAttribute(b,"align","textAlign");
},this));
return a;
},convertAttribute:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertAttribute(b,c,a);
b.removeAttribute(c);
},convertCSSToAttribute:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertCSSProperty(b,c,a);
},convertBorderAttribute:function(a){Telerik.Web.UI.Editor.Utils.convertBorderAttribute(a);
a.removeAttribute("border");
},convertTypeAttribute:function(a){Telerik.Web.UI.Editor.Utils.convertTypeAttribute(a);
a.removeAttribute("type");
}};
Telerik.Web.UI.Editor.CleanAttributesFilter.registerClass("Telerik.Web.UI.Editor.CleanAttributesFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertToXhtmlFilter=function(){Telerik.Web.UI.Editor.ConvertToXhtmlFilter.initializeBase(this);
this._uniqueIds={};
this.Name="ConvertToXhtmlFilter";
this.Description="This filter converts the HTML from the editor content area to valid XHTML";
this.Enabled=true;
this.IsDom=true;
};
Telerik.Web.UI.Editor.ConvertToXhtmlFilter.prototype={getHtmlContent:function(a){if(!a){return"";
}this._setContentToEmptyParagraphs(a);
this._checkTablesForSurroundingParagraphs(a);
this._removeMSWordParagraphs(a);
this._markExistingParagraphs(a);
var c=new Telerik.Web.StringBuilder();
this._appendNodeXhtml(a,c);
var b=c.toString();
b=this._removeAdditionalParagraphs(b);
return b;
},_setContentToEmptyParagraphs:function(a){$telerik.$("p",a).each(function(c,b){if(b.innerHTML==""){$telerik.$(b).html("&nbsp;");
}});
},_checkTablesForSurroundingParagraphs:function(a){if(!a){return;
}var e=a.getElementsByTagName("TABLE");
this._document=a.ownerDocument||a.document;
for(var b=0,d=e.length;
b<d;
b++){var c=Telerik.Web.UI.Editor.Utils.getElementParentByTag(e[b],"P");
if(c!=null){this._repairInvalidParagraphWithTable(c,e[b]);
}}},_removeMSWordParagraphs:function(a){var c=$telerik.$("P",a);
for(var b=0;
b<c.length;
b++){if(/^\r?\n?\s*(<O:P|<\?xml:)/i.test(Telerik.Web.UI.Editor.Utils.getOuterHtml(c[b]).trim())){Telerik.Web.UI.Editor.Utils.removeNode(c[b]);
}}},_repairInvalidParagraphWithTable:function(c,e){var d=c.parentNode;
var f=e.nextSibling;
if(f&&(f.nextSibling||f.nodeType!=3||!this.isWhitespace(f.nodeValue))){var b=this._moveTableNextSiblingsToNewParagraph(e);
try{d.insertBefore(b,c.nextSibling);
}catch(a){}}try{d.insertBefore(e,c.nextSibling);
}catch(a){}},_moveTableNextSiblingsToNewParagraph:function(b){var a=this._document.createElement("P");
while(b.nextSibling){a.appendChild(b.nextSibling);
}return a;
},isWhitespace:function(a){return/^\s*$/.test(a);
},_markExistingParagraphs:function(a){if(!a||!$telerik.isIE){return;
}$telerik.$("P",a).attr("_rdEditor_exists","1").each(function(b){Telerik.Web.UI.Editor.Utils.removeNonXhtmlCompliantParents(this);
});
},_removeAdditionalParagraphs:function(a){a=a.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,function(b){return(!b.match(/_rdEditor_exists/ig))?"":b;
});
a=a.replace(/(<p[^>]*) _rdEditor_exists=['"]1['"]([^>]*>)/ig,"$1$2");
return a;
},_convertAttribute:function(a){return String(a).replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"'");
},_getAttributeValue:function(b,c,d){var a=b.nodeName;
var f=b.nodeValue;
if(a!="style"){if(($telerik.isIE8&&a=="complete"&&f=="complete")||($telerik.isIE8&&a=="shape"&&c.nodeName.toLowerCase()=="a"&&c[a]!=c.getAttribute(a))||($telerik.isIE8&&a.toLowerCase()=="althtml"&&c.nodeName.toLowerCase()=="object")){return;
}if($telerik.isIE&&(a=="type"||a=="value"||a=="selected")){if(!f){return;
}}else{if(!b.specified){if($telerik.isIE&&f==""&&typeof(c[a])=="string"&&c[a]!=""){f=c[a];
}else{return;
}}}if(!f){return;
}if(!isNaN(f)){f=c.getAttribute(a);
}if($telerik.isIE&&(a=="href"||a=="src")){f=c.getAttribute(a,2);
}d.append(" "+(b.expando?a:a.toLowerCase())+'="'+this._convertAttribute(f)+'"');
}else{var e=c.style.cssText;
if(e){e=this._convertRgbToHex(e);
e=this._stripBorderRepetition(e);
e=this._cssPropertiesToLowerCase(e);
e=this._convertAttribute(e);
e=e.replace(/(url\s*\(\s*)&quot;(.*)&quot;\s*\)/ig,"$1$2)");
d.append(' style="'+e+'"');
}}},_cssPropertiesToLowerCase:function(a){return a.replace(/([^:;]*):/ig,function(c,b){return b.toLowerCase()+":";
});
},_convertRgbToHex:function(a){if($telerik.isFirefox||$telerik.isSafari||$telerik.isIE9Mode){a=a.replace(/rgb *\( *\d+ *, *\d+ *, *\d+ *\)/gi,function(c,d,b){return Telerik.Web.UI.Editor.Utils._rgbToHex(c);
});
}return a;
},_replaceBorderRepetition:function(d,c,b){var a=d.match(c);
if(a&&a.length==4){var e=a[0].substring(a[0].indexOf(":"));
if(e==a[1].substring(a[1].indexOf(":"))&&e==a[2].substring(a[2].indexOf(":"))&&e==a[3].substring(a[3].indexOf(":"))){d=d.replace(c,"").replace(/^\s+|\s+$/g,"");
d+=b+e;
}}return d;
},_combineBorderStyles:function(e){var d=new RegExp(/border-(width|style|color):([^;]*);/gi);
var c=e.match(d);
if(c&&c.length==3){var a="border:";
var f=[];
f[0]=c[0].substring(c[0].indexOf(":")+1).trim();
f[1]=c[1].substring(c[1].indexOf(":")+1).trim();
f[2]=c[2].substring(c[2].indexOf(":")+1).trim();
if(f[0].match(/\s/)||f[1].match(/\s/)||f[2].match(/\s/)){return e;
}var b=function(g){for(var h=0;
h<3;
h++){if(c[h].indexOf(g)==0){a+=f[h]+" ";
break;
}}};
b("border-width");
b("border-style");
b("border-color");
a=a.replace(/;/g,"").replace(/currentcolor/gi,"").replace(/initial/gi,"").replace("s[s]+"," ").replace(/^\s+|\s+$/g,"");
a+=";";
e=e.replace(d,"");
e=a+e;
}return e;
},_stripBorderRepetition:function(b){if(!b){return;
}if(!b.match(/; *$/)){b+=";";
}var a=new RegExp(/border(?:-(top|bottom|left|right))-width:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-width");
a=new RegExp(/border(?:-(top|bottom|left|right))-style:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-style");
a=new RegExp(/border(?:-(top|bottom|left|right))-color:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-color");
a=new RegExp(/border-(top|bottom|left|right):([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border");
b=this._combineBorderStyles(b);
return b.replace(/^\s+|\s+$/g,"");
},_canHaveChildren:function(a){switch(a.tagName.toUpperCase()){case"AREA":case"BASE":case"BASEFONT":case"COL":case"FRAME":case"HR":case"IMG":case"BR":case"INPUT":case"ISINDEX":case"LINK":case"META":case"PARAM":return false;
}return true;
},_appendElementNode:function(n,r){if(n.tagName.charAt(0)=="/"){if($telerik.isIE6&&n.nodeName=="/ABBR"){r.append("</abbr>");
}return;
}if(n.nodeName=="!"){r.append(n.text);
return;
}var m=n.nodeName;
if(n.scopeName){if(n.scopeName=="HTML"){m=m.toLowerCase();
}else{m=n.scopeName+":"+m;
}}else{m=m.toLowerCase();
}if($telerik.isFirefox&&m=="br"&&n.parentNode.nodeName.toLowerCase()=="pre"){if(n.getAttribute("_moz_dirty")==""){r.append("\r\n");
return;
}}var g=n.tagName=="P"&&null!=Telerik.Web.UI.Editor.Utils.getElementParentByTag(n.parentNode,"P");
if(g){r.append("</p>");
}if(m){r.append("<"+m);
}if("img"==m){if($telerik.isIE6||$telerik.isIE7){var q=document.createElement("img");
q.mergeAttributes(n);
if(q.width){r.append(' width="'+n.getAttribute("width",2)+'"');
}if(q.height){r.append(' height="'+n.getAttribute("height",2)+'"');
}}if(!n.getAttribute("alt",2)){r.append(' alt=""');
}}if($telerik.isIE&&("area"==m||"a"==m)){if(n.shape&&m=="area"&&!document.documentMode){r.append(' shape="'+n.shape.toLowerCase()+'"');
}if(n.coords&&m=="area"&&!document.documentMode){r.append(' coords="'+n.getAttribute("coords")+'"');
}var b=n.getAttribute("href",2);
if(b){b=b.replace("about:blank","");
b=b.replace("about:","");
b=b.replace(/&amp;/gi,"&").replace(/&/gi,"&amp;");
b=b.replace(/[\s\u00a0]/gi,"%20");
r.append(' href="'+b+'"');
n.removeAttribute("href",0);
}}if($telerik.isIE8&&"option"==m&&n.selected){r.append(' selected="selected"');
}try{var o=n.attributes;
var k=o.length;
for(var e=0;
e<k;
e++){if(!/^sizzle-[0-9]{10,}$/i.test(o[e].nodeName)){this._getAttributeValue(o[e],n,r);
}}}catch(d){if($telerik.isIE&&d.message.indexOf("Not enough storage is available to complete this operation")!=-1){var a=n.outerHTML.replace(/^\s+/gi,"");
a=a.replace(/^([^\s]+)([^>]+?)>[\s\S]+$/gi,"$2");
r.append(a);
}}var p;
switch(m){case"script":r.append(">"+n.text+"</"+m+">");
break;
case"textarea":r.append(">"+n.value+"</"+m+">");
break;
case"iframe":var f=n.innerHTML;
if($telerik.isIE){f=f.replace(/\soriginalAttribute="[^"]+"/gi,"");
f=f.replace(/\soriginalPath="[^"]+"/gi,"");
}if($telerik.isFirefox){f=f.replace(/\&amp;/g,"&").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&quot;/g,'"');
}r.append(">"+f+"</iframe>");
break;
case"object":r.append(">");
p="";
if(n.altHtml){p=n.altHtml;
}else{p=n.innerHTML;
}if($telerik.isIE){p=p.replace(/\soriginalAttribute="[^"]+"/gi,"");
p=p.replace(/\soriginalPath="[^"]+"/gi,"");
}r.append(p);
r.append("</object>");
break;
case"title":case"style":case"comment":case"noscript":p=n.innerHTML;
if($telerik.isIE&&p.length==0){p=n.ownerDocument.title;
}r.append(">"+p+"</"+m+">");
break;
default:if(!($telerik.isIE9Mode&&!this._canHaveChildren(n))&&(n.hasChildNodes()||(true==n.canHaveChildren||(n.canHaveChildren==null&&this._canHaveChildren(n))))){if(m){r.append(">");
}var c=n.childNodes;
k=c.length;
for(var h=0;
h<k;
h++){if(c[h].nodeName!="O:P"){this._appendNodeXhtml(c[h],r);
}}if(m){r.append("</"+m+">");
}if(g){r.append("<p>");
}}else{if($telerik.isIE6&&m=="abbr"){r.append(">");
}else{if(m){r.append(" />");
}}}break;
}},_appendTextNode:function(a,c){var d=String(a.nodeValue);
var b=a.parentNode.nodeName.toLowerCase();
if(!$telerik.isIE&&(b=="style"||b=="script")){c.append(d);
}else{d=d.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
d=d.replace(/[\u00a0]/g,"&nbsp;");
c.append(d);
}},_appendCDataNode:function(a,b){b.append("<![CDATA[\n"+a.nodeValue+"\n]]>");
},_appendCommentNode:function(c,d){var a="";
try{a=c.nodeValue;
}catch(b){}if(!a&&c.text){a=c.text;
}else{a="<!--"+a+"-->";
}d.append(a);
},_appendNodeXhtml:function(a,b){if(a.uniqueID){if(this._uniqueIds[a.uniqueID]){return;
}else{this._uniqueIds[a.uniqueID]=true;
}}switch(a.nodeType){case 1:this._appendElementNode(a,b);
break;
case 3:this._appendTextNode(a,b);
break;
case 4:this._appendCDataNode(a,b);
break;
case 8:this._appendCommentNode(a,b);
break;
}}};
Telerik.Web.UI.Editor.ConvertToXhtmlFilter.registerClass("Telerik.Web.UI.Editor.ConvertToXhtmlFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IndentHTMLContentFilter=function(){Telerik.Web.UI.Editor.IndentHTMLContentFilter.initializeBase(this);
this.Name="IndentHTMLContentFilter";
this.Description="This filter indents the HTML content so it is more readable when you view the code";
this.Enabled=true;
this.IsDom=false;
this._indentPattern="    ";
this._protectedData=null;
var a="P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DL|DT|DD|TITLE|META|LINK|BASE|SCRIPT|LINK|TD|TH|AREA|OPTION";
var b="HTML|HEAD|BODY|STYLE|FORM|TABLE|TBODY|THEAD|TR";
var c=b+"|DL|UL|OL";
this._ignoreTags=new RegExp("(<PRE[^>]*>|<!--|<SCRIPT[^>]*>)([\\s\\S]*?)(<\\/PRE>|-->|<\\/SCRIPT>)","gi");
this._tagsNLBefore=new RegExp("<("+a+")[^>]*>","gi");
this._tagsNLAfter=new RegExp("<\\/("+a+")[^>]*>","gi");
this._tagsNLNoCloseAfter=new RegExp("<(BR|HR)[^>]*\\/?>","gi");
this._tagsNLBeforeAndAfter=new RegExp("<\\/?("+b+")[^>]*>","gi");
this._tagsIncIndent=new RegExp("^<("+c+")[\\s\\/>]","i");
this._tagsDecIndent=new RegExp("^<\\/("+c+")[\\s\\>]","i");
this._shrinkNL=new RegExp("\\s*\\n+\\s*","gi");
};
Telerik.Web.UI.Editor.IndentHTMLContentFilter.prototype={getHtmlContent:function(c){var g=c.trim();
if(g.match(/^\s*<body/i)){g=g.substring(g.indexOf(">")+1,g.length-7);
}this._protectedData=[];
var m=this;
var a=function(r,o,p,q,s,i){Array.add(m._protectedData,p);
return o+"RADEDITORFORMATTED_"+m._protectedData.length+q;
};
g=g.replace(this._ignoreTags,a);
var n="$&";
if($telerik.isSafari2){n="$0";
}g=g.replace(this._tagsNLBefore,"\n"+n);
g=g.replace(this._tagsNLAfter,n+"\n");
g=g.replace(this._tagsNLNoCloseAfter,n+"\n");
g=g.replace(this._tagsNLBeforeAndAfter,"\n"+n+"\n");
var b=g.split(this._shrinkNL);
var l=new Telerik.Web.StringBuilder();
var e="";
var d;
for(d=0;
d<b.length;
d++){var f=b[d];
if(f.length==0){continue;
}if(this._tagsDecIndent.test(f)){if(e.length>this._indentPattern.length){e=e.substring(this._indentPattern.length);
}else{e="";
}}l.append(e);
l.append(f);
l.append("\n");
if(this._tagsIncIndent.test(f)){e+=this._indentPattern;
}}g=l.toString();
for(d=0;
d<this._protectedData.length;
d++){var k=new RegExp("RADEDITORFORMATTED_"+(d+1));
var h=this._protectedData[d].replace(/\$/gi,"$$$$");
g=g.replace(k,h);
}return g;
}};
Telerik.Web.UI.Editor.IndentHTMLContentFilter.registerClass("Telerik.Web.UI.Editor.IndentHTMLContentFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MakeUrlsAbsolute=function(){Telerik.Web.UI.Editor.MakeUrlsAbsolute.initializeBase(this);
this.Name="MakeUrlsAbsolute";
this.Description="This filter makes all src and href attributes in the editor content have absolute URLs";
this.Enabled=true;
this.IsDom=true;
};
Telerik.Web.UI.Editor.MakeUrlsAbsolute.prototype={getHtmlContent:function(c){this._updateElements(c,"A","href");
this._updateElements(c,"AREA","href");
this._updateElements(c,"IMG","src");
this._updateElements(c,"EMBED","src");
var a=new Telerik.Web.UI.Editor.IECleanAnchorsFilter();
if(c.tagName=="HTML"){var d=(typeof(c.ownerDocument)!="undefined")?c.ownerDocument:c.document;
d.body.innerHTML=a.getHtmlContent(d.body.innerHTML);
}else{var b=a.getHtmlContent(c.innerHTML);
if($telerik.isIE&&b.match(/^\s*<(script|style|!--RADEDITORSAVEDTAG_script)/i)){c.innerHTML="&nbsp;"+a.getHtmlContent(c.innerHTML);
c.removeChild(c.firstChild);
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(c,b);
}}return c;
},_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},_updateElements:function(c,g,a){var h=c.ownerDocument.createElement("div");
var d=this._getElements(c,g);
if(d){for(var e=0;
e<d.length;
e++){var b=d[e].getAttribute(a,2);
if("href"==a&&b){h.innerHTML='<a href="'+b.replace(/\"/gi,"%22").replace(/[\s\u00a0]/gi,"%20")+'">test</a>';
if($telerik.isIE){var f=d[e].innerHTML;
}d[e].setAttribute("href",h.childNodes[0].href);
if($telerik.isIE){if((f.indexOf("www.")==0&&d[e].innerHTML.match("[a-z]+://"))||(f.indexOf("mailto:")==-1&&d[e].innerHTML.match("mailto:"))){d[e].innerHTML=f;
}}}else{if("src"==a&&b){h.innerHTML='<img src="'+b.replace(/\"/gi,"%22").replace(/[\s\u00a0]/gi,"%20")+'" />';
d[e].setAttribute("src",h.childNodes[0].src);
}}}}h.innerHTML="";
h=null;
}};
Telerik.Web.UI.Editor.MakeUrlsAbsolute.registerClass("Telerik.Web.UI.Editor.MakeUrlsAbsolute",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.StripPathsFilter=function(a){Telerik.Web.UI.Editor.StripPathsFilter.initializeBase(this);
this.Name="StripPathsFilter";
this.Description="This filter strips a specific part from URLs (href, src attributes)";
this.Enabled=true;
this.IsDom=true;
this._pathsToStrip=a;
};
Telerik.Web.UI.Editor.StripPathsFilter.prototype={getHtmlContent:function(a){this._updateElements(a,"A","href");
this._updateElements(a,"AREA","href");
this._updateElements(a,"IMG","src");
this._updateElements(a,"EMBED","src");
return a;
},_getElements:function(b,c){var a=b.getElementsByTagName(c);
if(!a){a=b.ownerDocument.getElementsByTagName(c);
}return a;
},_updateElements:function(d,m,b){var f=this._getElements(d,m);
if(f){for(var h=0;
h<f.length;
h++){var e=f[h];
var c=$telerik.isIE?e.getAttribute(b,2):e[b];
if(c){var a=c.length;
for(var g=0,k=this._pathsToStrip.length;
g<k;
g++){var l=this._pathsToStrip[g];
if(l&&c.toLowerCase().indexOf(l.toLowerCase())==0){c=c.substring(l.length);
}}if(a>c.length){e.setAttribute(b,c);
}}}}}};
Telerik.Web.UI.Editor.StripPathsFilter.registerClass("Telerik.Web.UI.Editor.StripPathsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertCharactersToEntities=function(){Telerik.Web.UI.Editor.ConvertCharactersToEntities.initializeBase(this);
this.set_isDom(false);
this.set_enabled(true);
this.set_name("ConvertCharactersToEntities");
this.set_description("This filter converts reserved characters to their html entity names.");
this.entities={euro:"\u20ac",cent:"\u00a2",pound:"\u00a3",yen:"\u00a5",sect:"\u00a7",copy:"\u00a9",reg:"\u00ae",plusmn:"\u00b1",ne:"\u2260",asymp:"\u2248",le:"\u2264",ge:"\u2265",divide:"\u00f7",times:"\u00d7",iexcl:"\u00a1",curren:"\u00a4",brvbar:"\u00a6",uml:"\u00a8",ordf:"\u00aa",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a","int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",equiv:"\u2261",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",laquo:"\u00ab",not:"\u00ac",macr:"\u00af",deg:"\u00b0",sup2:"\u00b2",sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203e",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211c",alefsym:"\u2135",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203a",nbsp:"\u00a0",lt:"\u003c",gt:"\u003e"};
};
Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandReplacerInEntities="_reEditor_TELERIK_Entities";
Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandCharacterReplacer="_reEditor_TELERIK_Character";
Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandEntityReplacer="_reEditor_TELERIK_Entity";
Telerik.Web.UI.Editor.ConvertCharactersToEntities.prototype={getHtmlContent:function(a){if(a==""){return a;
}var e=this.parseHtml(a);
var g="";
var f=this.createRegEx();
var b=this.entities;
for(var c=0;
c<e.length;
c++){var d=e[c].content;
if(e[c].isTagOrComment){g+=d;
continue;
}d=d.replace(new RegExp("&amp;","gm"),Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandEntityReplacer);
d=this.reverseEntitiesToCharacters(d);
d=d.replace(new RegExp("&","gm"),Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandCharacterReplacer);
d=d.replace(f,function(k,l,i){for(var h in b){if(b[h]==k){return Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandReplacerInEntities+h+";";
}}return k;
});
g+=d;
}g=this.restoreMarkedSymbols(g);
return g;
},parseHtml:function(b){var m=/<\/?\w+(:\w+)*(\s+\w+(\-\w+)*(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+)?)*)*\s*\/?>/gmi;
var a=this.getComments(b);
var c=this.breakContent(a,b);
if(c.length==0){c.push({isComment:false,content:b});
}var l=[];
for(var g=0;
g<c.length;
g++){var d=c[g].content;
if(d==""){continue;
}if(c[g].isComment){l.push(this.newElement(d,true));
continue;
}var k=[];
var h;
while(h=m.exec(d)){k.push(h);
}var n=0;
for(var f=0;
f<k.length;
f++){if(n<k[f].index){var o=d.substring(n,k[f].index);
l.push(this.newElement(o,false));
}l.push(this.newElement(k[f][0],true));
n=k[f].index+k[f][0].length;
}if(d.length>n){var e=d.substring(n,d.length);
l.push(this.newElement(e,false));
}}return l;
},breakContent:function(a,b){var f="-->";
var c=[];
for(var g=0;
g<a.length;
g++){var e=b.substring(a[g].startIndex,a[g].endIndex+f.length);
if(g==0){if(a[g].startIndex==0){c.push({isComment:true,content:e});
}else{var d=b.substring(0,a[g].startIndex);
c.push({isComment:false,content:d});
c.push({isComment:true,content:e});
}}else{var k=a[g-1].endIndex+f.length;
var l=b.substring(k,a[g].startIndex);
c.push({isComment:false,content:l});
c.push({isComment:true,content:e});
}if(g==a.length-1){var h=b.substring(a[g].endIndex+f.length,b.length);
c.push({isComment:false,content:h});
}}return c;
},getComments:function(d){var i=/(<!--)|(-->)/gm;
var k="<!--";
var e="-->";
var h;
var b=[];
var c=[];
while(h=i.exec(d)){var a=h[0];
var f=h.index;
var g=c.length>0?c[c.length-1]:undefined;
if(a==k){if(!g||g.commentStart==false){c.push({commentStart:true,index:f});
}}else{if(a==e){if(c.length==0){continue;
}if(g.commentStart){b.push({startIndex:g.index,endIndex:f});
c.splice(c.length-1,1);
}}}}return b;
},restoreMarkedSymbols:function(b){var a=b.replace(new RegExp(Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandCharacterReplacer,"gm"),"&amp;");
a=a.replace(new RegExp(Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandReplacerInEntities,"gm"),"&");
a=a.replace(new RegExp(Telerik.Web.UI.Editor.ConvertCharactersToEntities.ampersandEntityReplacer,"gm"),"&amp;");
return a;
},createRegEx:function(){var c="[";
var a=this.entities;
for(var b in a){c+=a[b];
}c+="]";
return new RegExp(c,"g");
},newElement:function(a,b){return{content:a,isTagOrComment:b};
},reverseEntitiesToCharacters:function(c){var a=this.entities;
for(var b in a){c=c.replace(new RegExp("&"+b+";","gm"),a[b]);
}return c;
}};
Telerik.Web.UI.Editor.ConvertCharactersToEntities.registerClass("Telerik.Web.UI.Editor.ConvertCharactersToEntities",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.PdfExportFilter=function(){Telerik.Web.UI.Editor.PdfExportFilter.initializeBase(this);
this.set_isDom(true);
this.set_enabled(true);
this.set_name("PdfExportFilter");
this.set_description("This filter fixes some pdf export issues.");
};
Telerik.Web.UI.Editor.PdfExportFilter.prototype={getHtmlContent:function(a){this.set_document(a.ownerDocument);
this.filterContent(a);
this.set_document(null);
return a;
},filterContent:function(a){var e=a.getElementsByTagName("TABLE");
for(var b=0,c=e.length;
b<c;
b++){var d=e[b];
this._forceWidthToTable(d);
this._forceColGroupToTable(d);
}},set_document:function(a){this._document=a;
},_forceWidthToTable:function(a){var b=a.getAttribute("width");
a.style.width=b||a.style.width||0;
a.removeAttribute("width");
},_forceColGroupToTable:function(e){var b=e.getElementsByTagName("colgroup");
if(b.length==0){var d=this._document.createElement("colgroup");
var a=this._getTableColCount(e);
for(var c=0;
c<a;
c++){d.appendChild(this._document.createElement("col"));
}e.insertBefore(d,e.firstChild);
}},_getTableColCount:function(f){var b=0;
if(f){if(f.rows.length>0){var a=f.rows[0].cells;
for(var d=0,e=a.length;
d<e;
d++){var c=a[d].getAttribute("colSpan")||1;
b+=parseInt(c);
}}}return b;
}};
Telerik.Web.UI.Editor.PdfExportFilter.registerClass("Telerik.Web.UI.Editor.PdfExportFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixParagraphsWithSingleBrFilter=function(){Telerik.Web.UI.Editor.FixParagraphsWithSingleBrFilter.initializeBase(this);
this.set_isDom(true);
this.set_enabled(true);
this.set_name("FixParagraphsWithSingleBrFilter");
this.set_description("This filter converts single BR elements to &nbsp; enetity in paragraphs");
this._parentElementsSelector="p";
this._brRegExp=/^\s*<br[^>]*>\s*$/ig;
this._nbspRegExp=/^\s*&nbsp;\s*$/ig;
};
Telerik.Web.UI.Editor.FixParagraphsWithSingleBrFilter.prototype={getHtmlContent:function(a){return this._applyRegExpToContent(a,this._brRegExp,"&nbsp;");
},getDesignContent:function(a){return this._applyRegExpToContent(a,this._nbspRegExp,"<br />");
},_applyRegExpToContent:function(a,b,c){$telerik.$(this._parentElementsSelector,a).each(function(e,d){if(d.innerHTML.match(b)){$telerik.$(d).html(c);
}});
return a;
}};
Telerik.Web.UI.Editor.FixParagraphsWithSingleBrFilter.registerClass("Telerik.Web.UI.Editor.FixParagraphsWithSingleBrFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.StripCommentsFilter=function(){Telerik.Web.UI.Editor.StripCommentsFilter.initializeBase(this);
this.set_isDom(true);
this.set_enabled(true);
this.set_name("StripCommentsFilter");
this.set_description("This filter strips comments is strip option is set in the get_html method.");
};
Telerik.Web.UI.Editor.StripCommentsFilter.prototype={getHtmlContent:function(a){$telerik.$('span[class^="reComment"], font[class^="reComment"]',a).each(function(){Telerik.Web.UI.Editor.Utils.removeNode(this);
});
return a;
}};
Telerik.Web.UI.Editor.StripCommentsFilter.registerClass("Telerik.Web.UI.Editor.StripCommentsFilter",Telerik.Web.UI.Editor.Filter);
$telerik.toEditorFiltersManager=function(a){return a;
};
$telerik.findEditorFiltersManager=$find;
Telerik.Web.UI.Editor.FiltersManager=function(){Telerik.Web.UI.Editor.FiltersManager.initializeBase(this);
this._filters=[];
this._enableXhtmlFilter=true;
this._convertToXhtmlFilter=new Telerik.Web.UI.Editor.ConvertToXhtmlFilter();
};
Telerik.Web.UI.Editor.FiltersManager.prototype={clear:function(){Array.clear(this._filters);
},get_enableXhtmlFilter:function(){return this._enableXhtmlFilter;
},set_enableXhtmlFilter:function(a){this._enableXhtmlFilter=a;
},add:function(a){Array.add(this._filters,a);
},addAt:function(a,b){Array.insert(this._filters,b,a);
},remove:function(a){Array.remove(this._filters,a);
},removeFilterByName:function(c){for(var b=0;
b<this._filters.length;
b++){var a=this._filters[b];
if(a&&c==a.get_name()){this.removeAt(b);
}}},removeAt:function(a){Array.removeAt(this._filters,a);
},getFilterAt:function(a){return this._filters[a];
},getFilterByName:function(c){for(var b=0;
b<this._filters.length;
b++){var a=this._filters[b];
if(a&&c==a.get_name()){return a;
}}},getDesignContent:function(b){var a=b;
for(var e=0;
e<this._filters.length;
e++){var d=this._filters[e];
if((!d.get_isDom())&&(false!=d.get_enabled())&&d.getDesignContent){try{a=d.getDesignContent(a);
}catch(c){alert("Error while executing filter "+d.get_name()+" - "+c.toString());
}}}return a;
},getDesignContentDom:function(a){for(var d=0;
d<this._filters.length;
d++){var c=this._filters[d];
if((c.get_isDom())&&(false!=c.get_enabled())&&c.getDesignContent){try{a=c.getDesignContent(a);
}catch(b){alert("Error while executing filter "+c.get_name()+" - "+b.toString());
}}}return a;
},getHtmlContent:function(b){var e,d;
for(e=0;
e<this._filters.length;
e++){d=this._filters[e];
if((d.get_isDom())&&(false!=d.get_enabled())&&d.getHtmlContent){try{b=d.getHtmlContent(b);
}catch(c){alert("Error while executing filter "+d.get_name()+" - "+c.toString());
}}}var a;
if(this.get_enableXhtmlFilter()){try{a=this._convertToXhtmlFilter.getHtmlContent(b);
}catch(c){alert("Error while executing filter XHTML - "+c.toString());
}}else{a=$telerik.getOuterHtml(b);
}a=a.replace(/<body\s*\/>/i,"<body></body>").trim();
for(e=0;
e<this._filters.length;
e++){d=this._filters[e];
if((!d.get_isDom())&&(false!=d.get_enabled())&&d.getHtmlContent){try{a=d.getHtmlContent(a);
}catch(c){alert("Error while executing filter "+d.get_name()+" - "+c.toString());
}}}return a;
}};
Telerik.Web.UI.Editor.FiltersManager.registerClass("Telerik.Web.UI.Editor.FiltersManager",Sys.Component);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.RestorePoint=function(b,a){this.Window=b;
this.Document=b.document;
this.container=(a)?a:this.Document.body;
this.update();
this.Update=this.update;
this.Restore=this.restore;
this.Select=this.select;
};
if($telerik.isIE){Telerik.Web.UI.Editor.RestorePoint.prototype={update:function(){try{this.HtmlText=this.container.innerHTML;
var b=this.Document.selection.createRange();
if(b.length){this.SourceIndex=b.item(0).sourceIndex;
}else{this.oldRange=b;
this.parentElement=b.parentElement();
this.StartBookmark=b.getBookmark();
}}catch(a){}},restore:function(a){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(this.container,this.HtmlText);
this.select(a);
},select:function(a){var d;
if(null!=this.SourceIndex){try{d=this.Document.body.createControlRange();
d.addElement(this.Document.all(this.SourceIndex));
d.select();
}catch(b){}}else{if(null!=this.StartBookmark){var c=(this.parentElement&&this.parentElement.tagName=="TD");
if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(this.container)||c){d=this.Document.body.createTextRange();
if(this.useOldRange&&c){d=this.oldRange;
}else{d.moveToBookmark(this.StartBookmark);
}try{if(this.shouldSelectAfterMoveToBookmark(d)){d.select();
}if(true==a&&d.collapse){d.collapse();
}}catch(b){}}}}},shouldSelectAfterMoveToBookmark:function(a){return Sys.Browser.version>=9||$telerik.$.contains(this.container,a.parentElement())||this.container==a.parentElement();
}};
}else{Telerik.Web.UI.Editor.RestorePoint.prototype={restore:function(){try{this.container.innerHTML=this.HtmlText;
this.select();
}catch(a){}},select:function(){try{this.Window.focus();
this._moveToBookmark(this.Window.getSelection(),this.Bookmark);
}catch(a){}},update:function(){try{this.HtmlText=this.container.innerHTML;
this.Bookmark=this._bookmarkSelection(this.Window.getSelection());
}catch(a){}},_bookmarkSelection:function(a){if(a){return{anchorNodeBookmark:new Telerik.Web.UI.Editor.SelectionBookmark(this.Window,a.anchorNode),anchorOffset:a.anchorOffset,focusNodeBookmark:new Telerik.Web.UI.Editor.SelectionBookmark(this.Window,a.focusNode),focusOffset:a.focusOffset,isCollapsed:a.isCollapsed};
}else{return{};
}},_moveToBookmark:function(d,c){var a=c.anchorNodeBookmark.select();
var b=c.focusNodeBookmark.select();
d.collapse(a,c.anchorOffset);
if(!c.isCollapsed){d.extend(b,c.focusOffset);
}}};
}Telerik.Web.UI.Editor.RestorePoint.registerClass("Telerik.Web.UI.Editor.RestorePoint",null);
Telerik.Web.UI.Editor.SelectionBookmark=function(b,a){this.Window=b;
this.NodePath=this._findNodePath(this.Window.document.documentElement,a);
};
Telerik.Web.UI.Editor.SelectionBookmark.prototype={select:function(){var b=this._findNode(this.Window.document.documentElement,this.NodePath);
try{Telerik.Web.UI.Editor.Utils.selectElement(this.Window,b);
}catch(a){}return b;
},_findNodePath:function(d,c){var b,e;
for(var a=0;
a<d.childNodes.length;
a++){b=d.childNodes[a];
e=this._findNodePath(b,c);
if(""!=e){return""+a+","+e;
}if(b==c){return""+a;
}}return"";
},_findNode:function(d,c){var a=c.split(",");
for(var b=0;
b<a.length;
b++){d=d.childNodes[a[b]];
}return d;
}};
Telerik.Web.UI.Editor.SelectionBookmark.registerClass("Telerik.Web.UI.Editor.SelectionBookmark",null);
Type.registerNamespace("Telerik.Web.UI.Editor");
$telerik.toEditorSelection=function(a){return a;
};
$telerik.findEditorSelection=$find;
Telerik.Web.UI.Editor.Selection=function(a){this._window=a;
this.isSafari=$telerik.isSafari;
this.isOpera=$telerik.isOpera;
this.GetRange=this.getRange;
this.GetParentElement=this.getParentElement;
this.IsControl=this.isControl;
this.GetText=this.getText;
this.GetHtmlText=this.getHtml;
this.PasteHtml=this.pasteHtml;
this.Collapse=this.collapse;
};
Telerik.Web.UI.Editor.Selection.prototype={selectElement:function(a){return Telerik.Web.UI.Editor.Utils.selectElement(this._window,a);
},pasteHtml:function(b,a){a=(a==true);
if($telerik.isIE){return this._executeIE(b,a);
}else{return this._executeMozilla(b,a);
}},_executeIE:function(j,b){var n=function(i,l){i=i.replace(/[\r\n]+/gm,"").trim().toLowerCase();
l=l.replace(/[\r\n]+/gm,"").trim().toLowerCase();
return i==l;
};
j=Telerik.Web.UI.Editor.Utils.removeNewLinesBetweenTags(j);
var e=window.document;
var f=this._window.document;
var d=(e===f)?Telerik.Web.UI.EditorContentAreaMode.Div:Telerik.Web.UI.EditorContentAreaMode.Iframe;
if(d!=Telerik.Web.UI.EditorContentAreaMode.Div){if(f.body.childNodes.length!=1){f.body.setActive();
}}var t=f.selection;
var u=t.createRange();
var g;
if(t.type=="Control"){g=u.item(0);
if(g&&g.tagName!="BODY"){t.empty();
u=t.createRange();
u.moveToElementText(g);
var r=g.parentNode;
if($telerik.isIE9Mode){var c=r.childNodes;
for(var m=0,o=c.length;
m<o;
m++){var p=c[m];
if(p.nodeType==3){p.nodeValue=p.nodeValue.replace(/^(\n|\t)+/g,"");
}}}r.removeChild(g);
}}if(t.type.toLowerCase()!="none"){var a=n(f.body.innerHTML,this.getHtml());
f.execCommand("Delete");
if(a){f.body.innerHTML="";
}var k=u.htmlText;
if(/^(&nbsp;)+$/.test(k)||$telerik.$(k).text()=="\xA0"){u.collapse(true);
}}if(u.length){g=u.item(0);
if(g&&g.tagName=="BODY"){var h=h.getElementsByTagName("FORM")[0];
if(h){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(h,h.innerHTML+j);
}}u=t.createRange();
}var s=u.duplicate();
s.collapse(true);
u.collapse(false);
j=Telerik.Web.UI.Editor.Utils.getStoredOriginalPathsAndAttributes(j);
if($telerik.isIE9Mode){j=j.replace(/(\n|\t|\r)+/g," ").replace(/ +/g," ");
}u.pasteHTML(j);
var q=u.parentElement();
if(q.tagName!="BODY"){q=q.parentNode;
}Telerik.Web.UI.Editor.Utils.restoreOriginalPathsAndAttributes(q);
if(b){s.setEndPoint("EndToEnd",u);
s.select();
}return true;
},_executeMozilla:function(c,a){var e=this._window.document,f,b;
var j=e.createElement("span");
j.innerHTML=c;
if(this.isSafari||this.isOpera){var i="radetempnode";
j.setAttribute("id",i);
if(this.isSafari){a=true;
}this._insertNodeAtSelection(this._window,j,a);
f=e.createRange();
var g=this._window.getSelection();
var h=e.getElementById(i);
f.selectNodeContents(h);
b=f.extractContents();
f.selectNode(h);
f.extractContents();
if($telerik.isSafari){var d=b.lastChild;
if(b.childNodes.length>1&&d.nodeName=="BR"){b.removeChild(d);
}}f.insertNode(b);
f.collapse(false);
g.removeAllRanges();
g.addRange(f);
}else{f=e.createRange();
f.selectNodeContents(j);
b=f.extractContents();
if(b.childNodes.length==1){b=b.childNodes[0];
}this._insertNodeAtSelection(this._window,b,a);
}return true;
},_insertNodeAtSelection:function(x,k,d){var r=x.getSelection();
if(r.rangeCount==0){x.document.body.appendChild(k);
return;
}var q=null;
if(r.getRangeAt){q=r.getRangeAt(0);
}else{q=x.document.createRange();
q.setStart(r.anchorNode,r.anchorOffset);
q.setEnd(r.focusNode,r.focusOffset);
}if(r.removeAllRanges){r.removeAllRanges();
}q.deleteContents();
var f=$telerik.isSafari2?r.baseNode:q.startContainer;
var s=$telerik.isSafari2?r.baseOffset:q.startOffset;
var p=f.previousSibling;
if($telerik.isSafari&&null==f){f=x.document.body;
}q=x.document.createRange();
if((k.nodeType==3)&&(f.nodeType==3)){f.insertData(s,k.nodeValue);
q.setEnd(f,s+k.length);
if(d){q.setStart(f,s);
}else{q.setStart(f,s+k.length);
}}else{var a;
var n=null;
if(f.nodeType==3){var v=f;
f=v.parentNode;
var o=v.nodeValue;
var u=o.substr(0,s);
var t=o.substr(s);
var b=x.document.createTextNode(u);
a=x.document.createTextNode(t);
var c=false;
if($telerik.isFirefox&&k.nodeType!=1){var e=k.childNodes;
var m=e.length;
for(var j=0;
j<m;
j++){if(e[j].nodeType!=3){c=true;
break;
}}}f.insertBefore(a,v);
f.insertBefore(k,a);
try{f.insertBefore(b,k);
}catch(h){}f.removeChild(v);
if($telerik.isFirefox&&c){var w=document.createTextNode(u);
if(p){f.insertBefore(w,p.nextSibling);
}else{f.insertBefore(w,f.childNodes[0]);
}}}else{if(f.childNodes.length>0){a=f.childNodes[s];
f.insertBefore(k,a);
}else{f.appendChild(k);
}}if(f.tagName=="BODY"&&!a){var g=f.childNodes;
n=g[g.length-1];
}try{if(d){q.setStart(k,0);
q.setEnd(a,0);
}else{if(n){q.setStartAfter(n);
q.setStartAfter(n);
}else{q.setStartBefore(a);
q.setEndBefore(a);
}}}catch(h){}}try{r.addRange(q);
}catch(h){}},selectRange:function(d){if(!d){return;
}var c=this._window;
if(d.select){d.select();
}else{if(c.getSelection){var e=c.getSelection();
if(e.removeAllRanges){e.removeAllRanges();
e.addRange(d);
}else{var a=d.baseNode;
if(null==a){a=c.document.body;
}var b=d.extentNode;
if(null==b){b=c.document.body;
}e.setBaseAndExtent(a,d.startOffset,b,d.endOffset);
}}}},getBrowserSelection:function(){if(!this._window){return null;
}if(this._window.document.selection&&!window.opera){return this._window.document.selection;
}else{if(this._window.getSelection){return this._window.getSelection();
}}return null;
},getRange:function(){if(!this._window){return null;
}if(this._window.document.selection&&!window.opera){return this._window.document.selection.createRange();
}else{if(this._window.getSelection){var b=this._window.getSelection();
if(!b||b.rangeCount<1){return null;
}var a=null;
if(b.getRangeAt){a=b.getRangeAt(0);
}else{a=this._window.document.createRange();
a.setStart(b.anchorNode,b.anchorOffset);
a.setEnd(b.focusNode,b.focusOffset);
}return a;
}}},getParentElement:function(){var d=this.getRange();
if(!d){return null;
}if(d.commonAncestorContainer){var h=this._window.getSelection();
var e=d.startContainer?d.startContainer:h.baseNode;
var b=d.endContainer?d.endContainer:h.extentNode;
var f=d.startOffset!=null?d.startOffset:h.baseOffset;
var c=d.endOffset!=null?d.endOffset:h.extentOffset;
var a=h.anchorNode.childNodes[h.anchorOffset];
if(a&&(a.nodeName=="IMG"||(e==b&&(c-f)==1))){return a;
}else{if($telerik.isSafari){var g=(h.anchorNode&&h.anchorNode.parentNode)?h.anchorNode.parentNode.tagName:"";
if(g=="TH"||g=="TD"){return h.anchorNode.parentNode;
}else{if(g=="TR"){return h.anchorNode;
}}}if(!d.commonAncestorContainer.tagName){if(this._window.document==d.commonAncestorContainer&&h.baseNode){return h.baseNode.parentNode;
}return d.commonAncestorContainer.parentNode;
}else{return d.commonAncestorContainer;
}}}else{if(d.length){return d.item(0);
}else{if(d.parentElement){return d.parentElement();
}else{return null;
}}}},isControl:function(){if(this._window.document.selection){return(this._window.document.selection.type=="Control");
}else{var b=this._window.getSelection();
if(b.toString()!=""){return false;
}var a=b.focusNode;
if(!a||a.nodeType==1){return false;
}return(a.tagName=="IMG");
}},getText:function(){if(this._window.document.selection){var a=this._window.document.selection.createRange();
if(a.length){return"";
}else{if(null!=a.text){return a.text;
}}}else{if(this._window.getSelection){return this._window.getSelection().toString();
}else{return"";
}}},getHtml:function(){var d=null;
if(this._window.document.selection&&!window.opera){d=this._window.document.selection.createRange();
if(d.length){return d.item(0).outerHTML;
}else{if(d.htmlText){return d.htmlText;
}else{return"";
}}}else{if(this._window.getSelection){var e=this._window.getSelection();
if(null==e){return"";
}if(e.getRangeAt&&typeof(e.rangeCount)!="undefined"&&e.rangeCount==0){return"";
}if(e.getRangeAt){d=e.getRangeAt(0);
var c=this._window.document.createElement("div");
var a=d.cloneContents();
if(a){c.appendChild(a);
var b=c.innerHTML;
b=Telerik.Web.UI.Editor.Utils.removeNewLinesBetweenTags(b);
return b;
}else{return"";
}}else{return e;
}}else{return"";
}}},moveToElementText:function(a){if(!a){return false;
}if(this.isSafari){var c=this._window.document.createRange();
c.selectNodeContents(a);
this.selectRange(c);
this.collapse(true);
}else{if($telerik.isIE){c=this.getRange();
var b=$telerik.getLocation(a);
c.moveToPoint(b.x,b.y);
c.select();
}else{c=this.getRange();
c.selectNodeContents(a);
this.selectRange(c);
this.collapse(true);
}}},collapse:function(c){c=(c==true);
if(this._window.document.selection){var a=this._window.document.selection.createRange();
if(a.collapse){a.collapse(c);
a.select();
}}else{if(this._window.getSelection){var b=this._window.getSelection();
if(!b.isCollapsed){if(c){b.collapseToStart();
}else{b.collapseToEnd();
}}}}}};
Telerik.Web.UI.Editor.Selection.registerClass("Telerik.Web.UI.Editor.Selection",null);
Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI.EditorShortCutManager=function(){this._shortcuts=[];
};
Telerik.Web.UI.EditorShortCutManager.prototype={addShortCut:function(b,c){var a=new Telerik.Web.UI.EditorShortCut(b,c);
a.HashValue=this._getShortCutHashValue(a);
this._shortcuts[a.HashValue]=a;
},removeShortCut:function(b){var a=this.findShortCutByName(b);
if(a){this._shortcuts[a.HashValue]=null;
}},setShortCut:function(a,b){this.removeShortCut(a);
this.addShortCut(a,b);
},isShortCutHit:function(a){return this._hitTest(a.keyCode,a.ctrlKey,(null!=a.ctrlLeft?a.ctrlLeft:a.ctrlKey),a.shiftKey,(null!=a.shiftLeft?a.shiftLeft:a.shiftKey),a.altKey,(null!=a.altLeft?a.altLeft:a.altKey));
},_hitTest:function(d,b,f,h,g,a,e){var c=this._getHashValue(d,b,f,h,g,a,e);
return this._shortcuts[c];
},_getHashValue:function(d,b,f,h,g,a,e){var i=d&65535;
var c=0;
c|=(b?(1<<0):0);
c|=(h?(1<<2):0);
c|=(a?(1<<4):0);
i|=(c<<16);
return i;
},_getShortCutHashValue:function(a){return this._getHashValue(a.KeyCode,a.CtrlKey,a.LeftCtrlKey,a.ShiftKey,a.LeftShiftKey,a.AltKey,a.LeftAltKey);
},findShortCutByName:function(c){var a;
for(var b in this._shortcuts){a=this._shortcuts[b];
if(null!=a&&a._name==c){return a;
}}return null;
}};
Telerik.Web.UI.EditorShortCut=function(a,b){this._name=a;
this._shortcutString="";
this.setShortCut(b);
};
Telerik.Web.UI.EditorShortCut.prototype={CtrlKey:false,LeftCtrlKey:false,ShiftKey:false,LeftShiftKey:false,AltKey:false,LeftAltKey:false,KeyCode:0,get_name:function(){return this._name;
},set_name:function(a){this._name=a;
},get_shortCutString:function(){return this._shortcutString;
},setShortCut:function(a){this._parseShortcutString(a);
this._shortcutString=a;
},_parseShortcutString:function(b){if("string"==typeof(b)){this.CtrlKey=false;
this.LeftCtrlKey=false;
this.ShiftKey=false;
this.LeftShiftKey=false;
this.AltKey=false;
this.LeftAltKey=false;
this.KeyCode=0;
b=b.replace(/\s*/gi,"");
b=b.replace(/\+\+/gi,"+PLUS");
var d=b.split("+");
var c="";
for(var a=0;
a<d.length;
a++){c=d[a].toUpperCase();
switch(c){case"LCTRL":this.LeftCtrlKey=true;
case"CTRL":this.CtrlKey=true;
break;
case"LSHIFT":this.LeftShiftKey=true;
case"SHIFT":this.ShiftKey=true;
break;
case"LALT":this.LeftAltKey=true;
case"ALT":this.AltKey=true;
break;
case"F1":this.KeyCode=112;
break;
case"F2":this.KeyCode=113;
break;
case"F3":this.KeyCode=114;
break;
case"F4":this.KeyCode=115;
break;
case"F5":this.KeyCode=116;
break;
case"F6":this.KeyCode=117;
break;
case"F7":this.KeyCode=118;
break;
case"F8":this.KeyCode=119;
break;
case"F9":this.KeyCode=120;
break;
case"F10":this.KeyCode=121;
break;
case"F11":this.KeyCode=122;
break;
case"F12":this.KeyCode=123;
break;
case"ENTER":this.KeyCode=13;
break;
case"HOME":this.KeyCode=36;
break;
case"END":this.KeyCode=35;
break;
case"LEFT":this.KeyCode=37;
break;
case"RIGHT":this.KeyCode=39;
break;
case"UP":this.KeyCode=38;
break;
case"DOWN":this.KeyCode=40;
break;
case"PAGEUP":this.KeyCode=33;
break;
case"PAGEDOWN":this.KeyCode=34;
break;
case"SPACE":this.KeyCode=32;
break;
case"TAB":this.KeyCode=9;
break;
case"BACK":this.KeyCode=8;
break;
case"CONTEXT":this.KeyCode=93;
break;
case"ESCAPE":case"ESC":this.KeyCode=27;
break;
case"DELETE":case"DEL":this.KeyCode=46;
break;
case"INSERT":case"INS":this.KeyCode=45;
break;
case"PLUS":this.KeyCode="+".charCodeAt(0);
break;
default:this.KeyCode=c.charCodeAt(0);
break;
}}}else{throw {description:"Invalid shortcut string"};
}}};
Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI._localization=function(){this._controls={};
};
Telerik.Web.UI._localization.prototype={merge:function(a,b,e){if(typeof(this._controls[a])=="undefined"){this._controls[a]={};
}if(typeof(this._controls[a][b])=="undefined"){this._controls[a][b]={};
}var c=this._controls[a][b];
for(var d in e){if(typeof(e[d])=="string"){c[d]=e[d];
}}return c;
}};
Telerik.Web.UI._localization.registerClass("Telerik.Web.UI._localization");
Telerik.Web.UI.Localization=new Telerik.Web.UI._localization();
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.Markdown={};
if(typeof exports==="object"&&typeof require==="function"){Telerik.Web.UI.Editor.Markdown=exports;
}(function(){function b(e){return e;
}function c(e){return false;
}function a(){}a.prototype={chain:function(f,e){var g=this[f];
if(!g){throw new Error("unknown hook "+f);
}if(g===b){this[f]=e;
}else{this[f]=function(h){return e(g(h));
};
}},set:function(f,e){if(!this[f]){throw new Error("unknown hook "+f);
}this[f]=e;
},addNoop:function(e){this[e]=b;
},addFalse:function(e){this[e]=c;
}};
Telerik.Web.UI.Editor.Markdown.HookCollection=a;
function d(){}d.prototype={set:function(e,f){this["s_"+e]=f;
},get:function(e){return this["s_"+e];
}};
Telerik.Web.UI.Editor.Markdown.Converter=function(){var M=this.hooks=new a();
M.addNoop("plainLinkText");
M.addNoop("preConversion");
M.addNoop("postConversion");
var J;
var I;
var G;
var H;
this.makeHtml=function(P){if(J){throw new Error("Recursive call to converter.makeHtml");
}J=new d();
I=new d();
G=[];
H=0;
P=M.preConversion(P);
P=P.replace(/~/g,"~T");
P=P.replace(/\$/g,"~D");
P=P.replace(/\r\n/g,"\n");
P=P.replace(/\r/g,"\n");
P="\n\n"+P+"\n\n";
P=e(P);
P=P.replace(/^[ \t]+$/mg,"");
P=t(P);
P=A(P);
P=y(P);
P=B(P);
P=P.replace(/~D/g,"$$");
P=P.replace(/~T/g,"~");
P=M.postConversion(P);
G=I=J=null;
return P;
};
function A(P){P=P.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(V,Q,R,S,T,U){Q=Q.toLowerCase();
J.set(Q,o(R));
if(T){return S;
}else{if(U){I.set(Q,U.replace(/"/g,"&quot;"));
}}return"";
});
return P;
}function t(R){var P="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";
var Q="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";
R=R.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,L);
R=R.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,L);
R=R.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,L);
R=R.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,L);
R=R.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,L);
return R;
}function L(R,Q){var P=Q;
P=P.replace(/^\n+/,"");
P=P.replace(/\n+$/g,"");
P="\n\n~K"+(G.push(P)-1)+"K\n\n";
return P;
}function y(R,P){R=k(R);
var Q="<hr />\n";
R=R.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,Q);
R=R.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,Q);
R=R.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,Q);
R=n(R);
R=i(R);
R=h(R);
R=t(R);
R=s(R,P);
return R;
}function z(P){P=j(P);
P=r(P);
P=p(P);
P=l(P);
P=f(P);
P=g(P);
P=P.replace(/~P/g,"://");
P=o(P);
P=m(P);
P=P.replace(/  +\n/g," <br>\n");
return P;
}function r(Q){var P=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;
Q=Q.replace(P,function(S){var R=S.replace(/(.)<\/?code>(?=.)/g,"$1`");
R=E(R,S.charAt(1)=="!"?"\\`*_/":"\\`*_");
return R;
});
return Q;
}function f(P){P=P.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,N);
P=P.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,N);
P=P.replace(/(\[([^\[\]]+)\])()()()()()/g,N);
return P;
}function N(ac,R,S,T,U,V,W,X){if(X==undefined){X="";
}var ab=R;
var Q=S.replace(/:\/\//g,"~P");
var P=T.toLowerCase();
var aa=U;
var Z=X;
if(aa==""){if(P==""){P=Q.toLowerCase().replace(/ ?\n/g," ");
}aa="#"+P;
if(J.get(P)!=undefined){aa=J.get(P);
if(I.get(P)!=undefined){Z=I.get(P);
}}else{if(ab.search(/\(\s*\)$/m)>-1){aa="";
}else{return ab;
}}}aa=D(aa);
aa=E(aa,"*_");
var Y='<a href="'+aa+'"';
if(Z!=""){Z=C(Z);
Z=E(Z,"*_");
Y+=' title="'+Z+'"';
}Y+=">"+Q+"</a>";
return Y;
}function l(P){P=P.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,O);
P=P.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,O);
return P;
}function C(P){return P.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");
}function O(ac,R,S,T,U,V,W,X){var ab=R;
var P=S;
var Q=T.toLowerCase();
var aa=U;
var Z=X;
if(!Z){Z="";
}if(aa==""){if(Q==""){Q=P.toLowerCase().replace(/ ?\n/g," ");
}aa="#"+Q;
if(J.get(Q)!=undefined){aa=J.get(Q);
if(I.get(Q)!=undefined){Z=I.get(Q);
}}else{return ab;
}}P=E(C(P),"*_[]()");
aa=E(aa,"*_");
var Y='<img src="'+aa+'" alt="'+P+'"';
Z=C(Z);
Z=E(Z,"*_");
Y+=' title="'+Z+'"';
Y+=" />";
return Y;
}function k(P){P=P.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(R,Q){return"<h1>"+z(Q)+"</h1>\n\n";
});
P=P.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(R,Q){return"<h2>"+z(Q)+"</h2>\n\n";
});
P=P.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(T,R,S){var Q=R.length;
return"<h"+Q+">"+z(S)+"</h"+Q+">\n\n";
});
return P;
}function n(P){P+="~0";
var Q=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
if(H){P=P.replace(Q,function(W,T,U){var R=T;
var S=(U.search(/[*+-]/g)>-1)?"ul":"ol";
var V=x(R,S);
V=V.replace(/\s+$/,"");
V="<"+S+">"+V+"</"+S+">\n";
return V;
});
}else{Q=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;
P=P.replace(Q,function(Y,T,U,V){var X=T;
var R=U;
var S=(V.search(/[*+-]/g)>-1)?"ul":"ol";
var W=x(R,S);
W=X+"<"+S+">\n"+W+"</"+S+">\n";
return W;
});
}P=P.replace(/~0/,"");
return P;
}var u={ol:"\\d+[.]",ul:"[*+-]"};
function x(Q,R){H++;
Q=Q.replace(/\n{2,}$/,"\n");
Q+="~0";
var S=u[R];
var T=new RegExp("(^[ \\t]*)("+S+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+S+")[ \\t]+))","gm");
var P=false;
Q=Q.replace(T,function(ab,Y,Z,aa){var W=aa;
var X=Y;
var V=/\n\n$/.test(W);
var U=V||W.search(/\n{2,}/)>-1;
if(U||P){W=y(v(W),true);
}else{W=n(v(W));
W=W.replace(/\n$/,"");
W=z(W);
}P=V;
return"<li>"+W+"</li>\n";
});
Q=Q.replace(/~0/g,"");
H--;
return Q;
}function i(P){P+="~0";
P=P.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(U,R,S){var Q=R;
var T=S;
Q=q(v(Q));
Q=e(Q);
Q=Q.replace(/^\n+/g,"");
Q=Q.replace(/\n+$/g,"");
Q="<pre><code>"+Q+"\n</code></pre>";
return"\n\n"+Q+"\n\n"+T;
});
P=P.replace(/~0/,"");
return P;
}function K(P){P=P.replace(/(^\n+|\n+$)/g,"");
return"\n\n~K"+(G.push(P)-1)+"K\n\n";
}function j(P){P=P.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(V,R,S,T,U){var Q=T;
Q=Q.replace(/^([ \t]*)/g,"");
Q=Q.replace(/[ \t]*$/g,"");
Q=q(Q);
Q=Q.replace(/:\/\//g,"~P");
return R+"<code>"+Q+"</code>";
});
return P;
}function q(P){P=P.replace(/&/g,"&amp;");
P=P.replace(/</g,"&lt;");
P=P.replace(/>/g,"&gt;");
P=E(P,"*_{}[]\\",false);
return P;
}function m(P){P=P.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");
P=P.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");
return P;
}function h(P){P=P.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(S,R){var Q=R;
Q=Q.replace(/^[ \t]*>[ \t]?/gm,"~0");
Q=Q.replace(/~0/g,"");
Q=Q.replace(/^[ \t]+$/gm,"");
Q=y(Q);
Q=Q.replace(/(^|\n)/g,"$1  ");
Q=Q.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(V,T){var U=T;
U=U.replace(/^  /mg,"~0");
U=U.replace(/~0/g,"");
return U;
});
return K("<blockquote>\n"+Q+"\n</blockquote>");
});
return P;
}function s(X,P){X=X.replace(/^\n+/g,"");
X=X.replace(/\n+$/g,"");
var S=X.split(/\n{2,}/g);
var T=[];
var V=/~K(\d+)K/;
var Q=S.length;
for(var U=0;
U<Q;
U++){var W=S[U];
if(V.test(W)){T.push(W);
}else{if(/\S/.test(W)){W=z(W);
W=W.replace(/^([ \t]*)/g,"<p>");
W+="</p>";
T.push(W);
}}}if(!P){Q=T.length;
for(var U=0;
U<Q;
U++){var R=true;
while(R){R=false;
T[U]=T[U].replace(/~K(\d+)K/g,function(Z,Y){R=true;
return G[Y];
});
}}}return T.join("\n\n");
}function o(P){P=P.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");
P=P.replace(/<(?![a-z\/?\$!])/gi,"&lt;");
return P;
}function p(P){P=P.replace(/\\(\\)/g,F);
P=P.replace(/\\([`*_{}\[\]()>#+-.!])/g,F);
return P;
}function g(Q){Q=Q.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");
var P=function(S,R){return'<a href="'+R+'">'+M.plainLinkText(R)+"</a>";
};
Q=Q.replace(/<((https?|ftp):[^'">\s]+)>/gi,P);
return Q;
}function B(P){P=P.replace(/~E(\d+)E/g,function(S,R){var Q=parseInt(R);
return String.fromCharCode(Q);
});
return P;
}function v(P){P=P.replace(/^(\t|[ ]{1,4})/gm,"~0");
P=P.replace(/~0/g,"");
return P;
}function e(R){if(!/\t/.test(R)){return R;
}var Q=["    ","   ","  "," "],P=0,S;
return R.replace(/[\n\t]/g,function(T,U){if(T==="\n"){P=U+1;
return T;
}S=(U-P)%4;
P=U+1;
return Q[S];
});
}var w=/(?:["'*()[\]:]|~D)/g;
function D(Q){if(!Q){return"";
}var P=Q.length;
return Q.replace(w,function(R,S){if(R=="~D"){return"%24";
}if(R==":"){if(S==P-1||/[0-9\/]/.test(Q.charAt(S+1))){return":";
}}return"%"+R.charCodeAt(0).toString(16);
});
}function E(T,Q,P){var S="(["+Q.replace(/([\[\]\\])/g,"\\$1")+"])";
if(P){S="\\\\"+S;
}var R=new RegExp(S,"g");
T=T.replace(R,F);
return T;
}function F(R,Q){var P=Q.charCodeAt(0);
return"~E"+P+"E";
}};
})();
Type.registerNamespace("Telerik.Web.UI");
$telerik.toEditor=function(a){return a;
};
$telerik.findEditor=$find;
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
b.RadEditor=function(c){b.RadEditor.initializeBase(this,[c]);
this._bottomResizer=null;
this._tableElement=null;
this._contentAreaElement=null;
this._contentHiddenTextarea=null;
this._doctypeString=null;
this._originalHeight=null;
this._accessKeyTextbox=null;
this._contentAreaWrapper=null;
this._mode=b.EditModes.Design;
this._divContentAreaInitialized=false;
this._accEditor=null;
this._shortCutManager=new b.EditorShortCutManager();
this._filtersManager=new b.Editor.FiltersManager();
this._commandsManager=new b.Editor.CommandsManager();
if(null!=b.Editor.ModulesManager){this._modulesManager=new b.Editor.ModulesManager(this);
}this._resizeExtender=null;
this._localization={};
this._contentAreaEventHandlers={};
this._onToolClickDelegate=null;
this._onWindowResizeDelegate=null;
this._saveContentDelegate=null;
this.isIE=$telerik.isIE;
this.isFirefox=$telerik.isFirefox;
this.isOpera=$telerik.isOpera;
this.isIE7=$telerik.isIE7;
this._spellCheckService=null;
this._originalScrollTop=null;
this._cursorPosition=null;
this._isCursorMoving=null;
};
b.RadEditor.createNew=function(d){var c=new b.RadEditor(document.createElement("div"));
if(!d){c.get_contentAreaElement();
}else{c._contentAreaElement=d;
}c._contentHiddenTextarea=document.createElement("input");
c._setContentAreaHtml("",true);
c.set_editable(true);
c._ieHookToClientArea();
c._addDefaultShortCuts();
c.removeShortCut("ToggleScreenMode");
c.removeShortCut("LinkManager");
c.removeShortCut("ImageManager");
c.removeShortCut("SetToolFocus");
return c;
};
b.RadEditor.prototype={get_ajaxSpellCheck:function(){return this._ajaxSpellCheck;
},set_ajaxSpellCheck:function(c){this._ajaxSpellCheck=c;
this.raiseEvent("spellCheckLoaded");
},get_spellCheckService:function(){if(!this._spellCheckService){this._spellCheckService=$create(b.SpellCheckService,this.get_spellCheckJSON(),null,null);
this._spellCheckService.add_complete(Function.createDelegate(this,this._responseReceived));
}return this._spellCheckService;
},startSpellCheck:function(){this.get_spellCheckService().spellCheck(this.get_html());
},addCustomWord:function(c){this.get_spellCheckService().addCustomWord(c);
},_responseReceived:function(d,c){},raiseEvent:function(d,c){if(d!="selectionChange"||this.get_mode()==b.EditModes.Design){b.RadEditor.callBaseMethod(this,"raiseEvent",[d,c]);
}},_initializeToolProvider:function(){var d=this;
var m=d.get_toolProviderID();
if(m&&$find(m)){var j=$find(m);
var h=j.get_dialogOpener();
d.set_dialogOpener(h);
var c=j.get_contextMenusJSON();
if(c&&c.concat){d.set_contextMenusJSON(c.concat([]));
}var g=j.get_modulesJSON();
if(g&&g.concat){d.set_modulesJSON(g.concat([]));
}var l=this.get_toolContainer();
l.innerHTML="";
this.set_toolJSON([]);
var e=j.get_toolHTML();
l.innerHTML=e;
var f=j.get_toolJSON().concat([]);
this.set_toolJSON(f);
if(j.get_spellCheckJSON){d.set_spellCheckJSON(j.get_spellCheckJSON());
}if(j.get_ajaxSpellCheckScriptReference){var k=j.get_ajaxSpellCheckScriptReference();
if(k){d.set_ajaxSpellCheckScriptReference(k);
}}this.set_links(j.get_links());
this.set_colors(j.get_colors());
this.set_fontNames(j.get_fontNames());
this.set_fontSizes(j.get_fontSizes());
this.set_symbols(j.get_symbols());
this.set_realFontSizes(j.get_realFontSizes());
this.set_snippets(j.get_snippets());
this.set_cssClasses(j.get_cssClasses());
this.set_cssFiles(j.get_cssFiles());
this.set_languages(j.get_languages());
this.set_paragraphs(j.get_paragraphs());
this.set_formatSets(j.get_formatSets());
}},get_toolHTML:function(){var c=this.get_toolContainer().cloneNode(true);
return c.innerHTML;
},get_toolContainer:function(){return this.get_TopZone().firstChild;
},get_mainTable:function(){return $get(this.get_id()+"Wrapper");
},_ieHookToClientArea:function(){var c=this;
window.setTimeout(function(){if($telerik.isIE){var d=c.get_contentArea();
if(!d){return;
}try{var h=b.Editor.Utils.storeBrowserPosition();
var g=document.body.createTextRange();
if(h&&h.y>0){g.moveToElementText(c.get_contentAreaElement());
}else{g.moveStart("textedit",g.text.length);
}g.collapse(true);
g.select();
if(h&&h.y>0){b.Editor.Utils.restoreBrowserPosition();
}}catch(f){}}},0);
},initialize:function(){b.RadEditor.callBaseMethod(this,"initialize");
this.raiseEvent("init",Sys.EventArgs.Empty);
this._initializeToolProvider();
var g=this.get_mainTable();
this._originalHeight=g.style.height;
this._initializeLocalization();
this._addFilters();
this._addDefaultShortCuts();
this._createUI();
var c=this.isVisible();
if(c){this._fixMoreSizeIssues();
}g=$get(this.get_id()+"_BottomTable");
if(g){g.style.display="";
}this._createTools();
this._makeResizeable(this.get_enableResize());
var e=$get(this.get_id()+"ContentHiddenTextarea");
if(e){this._contentHiddenTextarea=e;
}if(this.get_enableAriaSupport()){this._applyAriaSupport();
}this._setContentAreaHtml(this.get_contentHiddenTextareaValue(),true);
if(!this.get_enableUndoRedo()){this.get_contentWindow()._radEditorEnableUndoRedo=false;
}this._registerClientValidation();
this._registerPostBackHandlers();
if(!this._isEditModeEnabled(b.EditModes.Design)){if(this._isEditModeEnabled(b.EditModes.Html)){this.set_mode(b.EditModes.Html);
}else{this.set_mode(b.EditModes.Preview);
}}this._ieHookToClientArea();
this._fixIEVisibilityProblems(true);
this._fixMozillaDOMProblems(true);
this._fixIOS5SafariVisibilityProblems();
if(this._modulesManager){if(!this.isIE){var d=$get(this.get_id()+"Module");
d.style.display="none";
var f=this;
window.setTimeout(function(){f._modulesManager.initialize();
d.style.display="";
if(f.isOpera||f.get_contentAreaMode()==b.EditorContentAreaMode.Div){f._updateEditorSize(f._originalHeight);
}},0);
}else{this._modulesManager.initialize();
this._updateEditorSize(this._originalHeight);
}}if(this.get_autoResizeHeight()&&c){this._makeAutoResizeHeight();
}this.set_initialContent();
this._applyAccessKey();
if(this.get_isInAccessibleMode()){this._accEditor=new b.AccessibleRadEditorBase(this);
}if(this.get_enableTrackChanges()||this.get_enableComments()){this._trackChangesLoad();
}this.raiseEvent("load",Sys.EventArgs.Empty);
if(!$telerik.isIE&&!$telerik.isFirefox){if(!this.isVisible()){this.raiseEvent("firstShow");
}}this._addHandlersForSelectTags();
this._addHandlersForRadioButtons();
this._addHandlersForCheckboxes();
this._addHandlersForTextElements("input[type=text]");
this._addHandlersForTextElements("textarea");
},dispose:function(){if(this._emptyMessageContainer){$clearHandlers(this._emptyMessageContainer);
this._emptyMessageContainer=null;
}if(this.get_isInAccessibleMode()){this._accEditor=null;
}if(typeof(Sys.WebForms)!="undefined"&&typeof(Sys.WebForms.PageRequestManager)!="undefined"&&this._saveContentDelegate){var e=Sys.WebForms.PageRequestManager.getInstance();
if(e){e.remove_initializeRequest(this._saveContentDelegate);
}e=null;
}if(this._contentHiddenTextarea&&this._contentHiddenTextarea.form&&this._saveContentDelegate){$telerik.removeExternalHandler(this._contentHiddenTextarea.form,"submit",this._saveContentDelegate);
}var c=this.get_contentAreaElement();
if(c){$clearHandlers(c);
try{c.parentNode.removeChild(c);
}catch(d){}c=null;
}try{this._detachEvents();
}catch(d){}this._fixMozillaDOMProblems(false);
this._fixIEVisibilityProblems(false);
this._makeResizeable(false);
this._onToolClickDelegate=null;
this._registerWindowResizeHandler(false);
if(this._isFullScreen){this._enableBodyScroll();
}this.set_dialogOpener(null);
this._saveContentDelegate=null;
this._registerModeChangeHandler(false);
if(this._insertLink){this._insertLink.dispose();
this._insertLink=null;
}if(this._insertImage){this._insertImage.dispose();
this._insertImage=null;
}if(this._accessKeyTextbox){$clearHandlers(this._accessKeyTextbox);
this._accessKeyTextbox.removeAttribute("accessKey");
this._accessKeyTextbox=null;
}b.RadEditor.callBaseMethod(this,"dispose");
},_applyAccessKey:function(){var c=this.get_element().getAttribute("accessKey");
if(c){this.get_element().removeAttribute("accessKey");
var d=document.createElement("input");
d.setAttribute("name",this.get_id()+"EditorAccessKey");
d.setAttribute("type","text");
d.setAttribute("id",this.get_id()+"EditorAccessKey");
d.setAttribute("accessKey",c);
this._accessKeyTextbox=d;
$addHandlers(this._accessKeyTextbox,{focus:this.setFocus},this);
var e=document.createElement("div");
e.style.width="0px";
e.style.height="0px";
e.style.overflow="hidden";
e.appendChild(this._accessKeyTextbox);
this.get_element().appendChild(e);
}},_makeAutoResizeHeight:function(){if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){this.get_element().style.height="auto";
this.get_contentArea().style.height="auto";
}else{if(this._initialContentHeight&&this._initialContentHeight>0){return;
}window.setTimeout(Function.createDelegate(this,function(){this.get_contentArea().style.overflow="hidden";
this._initialContentHeight=this.get_contentAreaElement().offsetHeight;
var c=this;
this.attachEventHandler("keydown",function(d){if(!c._isKeyUpButton(d)){c._resizeContentArea(d);
}});
this.attachEventHandler("keyup",function(d){if(c._isKeyUpButton(d)||(d.keyCode==13&&!c.isIE)){c._resizeContentArea(d);
}});
this.add_selectionChange(Function.createDelegate(this,this._resizeContentArea));
this._resizeContentArea();
}),0);
}},_isKeyUpButton:function(c){var d=c.keyCode;
if(d==8||d==46){return true;
}return false;
},_getCurrentFontSize:function(){var d=this.getSelectedElement();
var c=parseInt($telerik.getCurrentStyle(d,"fontSize"));
return c;
},_resizeContentArea:function(d){var c=this.isIE?this.get_contentArea():this.get_document().documentElement;
if($telerik.isMobileSafari&&this._contentAreaWrapper){this._contentAreaWrapper.style.height="100%";
}var h=this.get_contentAreaElement();
var l=h.parentNode;
var k=this._initialContentHeight;
var j=h.offsetHeight;
var n=c.scrollHeight+(d&&d.keyCode==13&&this.isIE?this._getCurrentFontSize():0);
if(n==j){return;
}if((k==j)&&(n<=k)){return;
}var g=(n>k)?n:k;
h.style.height=g+"px";
if(n>j){l.style.height=parseInt(n)+"px";
}else{var f=this.get_element();
var m=f.offsetHeight-(l.offsetHeight-h.offsetHeight);
if(h.style.height!="100%"){l.style.height="";
this._updateEditorSize(m);
}return;
}this._updateEditorSize(null,true);
},_makeResizeable:function(c){if(this._resizeExtender){this._resizeExtender.dispose();
this._resizeExtender=null;
}if(!c){return;
}if(!this._tableElement){return;
}if(!this._bottomResizer){this._bottomResizer=$get(this.get_id()+"BottomResizer");
}if(this._bottomResizer){if(this.isIE){this._bottomResizer.style.styleFloat="right";
}if(this.isOpera&&document.compatMode=="CSS1Compat"){this._bottomResizer.parentNode.removeChild(this._bottomResizer);
this._bottomResizer=null;
}}else{return;
}var d={se:this._bottomResizer};
this._resizeExtender=new b.ResizeExtender(this,this.get_element(),d,this._tableElement);
},_getInvisibleParent:function(){return $telerik.getInvisibleParent(this.get_element());
},isVisible:function(){return(this._getInvisibleParent()==null);
},_fixIEVisibilityProblems:function(d){if(!this.isIE){return;
}if(d){var c=this._getInvisibleParent();
if(c){this._onIEParentVisibilityChangeDelegate=Function.createDelegate(this,this._onIEParentVisibilityChange);
this._invisibleParent=c;
$telerik.addHandler(this._invisibleParent,"propertychange",this._onIEParentVisibilityChangeDelegate);
}}else{if(this._invisibleParent&&this._onIEParentVisibilityChangeDelegate){$telerik.removeHandler(this._invisibleParent,"propertychange",this._onIEParentVisibilityChangeDelegate);
this._onIEParentVisibilityChangeDelegate=null;
this._invisibleParent=null;
}}},_fixMozillaDOMProblems:function(d){if(this.isIE){return;
}if(d){var c=this._getInvisibleParent();
if(c){this._invisibleParent=c;
this._onMozillaParentVisibilityChangeDelegate=Function.createDelegate(this,this._onMozillaParentVisibilityChange);
c.addEventListener("DOMAttrModified",this._onMozillaParentVisibilityChangeDelegate,false);
}this._onMozillaParentNodeChangedDelegate=Function.createDelegate(this,this._onMozillaParentNodeChanged);
document.addEventListener("DOMNodeInserted",this._onMozillaParentNodeChangedDelegate,false);
}else{if(this._invisibleParent&&this._onMozillaParentVisibilityChangeDelegate){this._invisibleParent.removeEventListener("DOMAttrModified",this._onMozillaParentVisibilityChangeDelegate,false);
this._onMozillaParentVisibilityChangeDelegate=null;
this._invisibleParent=null;
}if(this._onMozillaParentNodeChangedDelegate){document.removeEventListener("DOMNodeInserted",this._onMozillaParentNodeChangedDelegate,false);
this._onMozillaParentNodeChangedDelegate=null;
}}},_fixIOS5SafariVisibilityProblems:function(){if($telerik.isMobileSafari){var c=this.get_contentAreaElement();
if(c&&c.parentNode){c.parentNode.style.height="";
}}},_onIEParentVisibilityChange:function(d){d=d.rawEvent;
if(!d){return;
}if(d.propertyName=="style.display"||d.propertyName=="className"){var c=$telerik.getCurrentStyle(this._invisibleParent,"display");
if(c!="none"){this.raiseEvent("firstShow");
if(this.get_autoResizeHeight()){this._makeAutoResizeHeight();
}this._updateEditorSize(this.get_element().style.height);
this._fixIEVisibilityProblems(false);
}}},_onMozillaParentVisibilityChange:function(c){if(c.attrName=="style"||c.attrName=="class"){var d=c.target;
if((c.currentTarget==c.target)&&"none"!=$telerik.getCurrentStyle(d,"display")){window.setTimeout(Function.createDelegate(this,function(){if(!this._editorFirstVisible){this._editorFirstVisible=true;
this.raiseEvent("firstShow");
}if(this.get_autoResizeHeight()){this._makeAutoResizeHeight();
}this.set_editable(true);
}),0);
}}},_onMozillaParentNodeChanged:function(c){if(!c.target||!this.get_element()){return;
}var d=$telerik.isDescendantOrSelf(c.target,this.get_element());
if(d){if($telerik.isFirefox){this.onParentNodeChanged();
}else{window.setTimeout(Function.createDelegate(this,this.onParentNodeChanged),0);
}}},_addHandlersForTextElements:function(h){if($telerik.isOpera&&$telerik.OperaVersion<12){return;
}var e=this;
var c=e.get_contentArea();
var d=e.get_document();
var f=h=="textarea"?"radEditorTextareaFix":"radEditorTextInputsFix";
var g=function(j){var k=j.value;
if(j.nodeName=="TEXTAREA"){j.defaultValue=k;
}else{if(j.nodeName=="INPUT"){$telerik.$(j).attr("value",k);
}}};
if($telerik.isIE){if(e.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(c).off("mousedown."+f);
return;
}$telerik.$(c).off("mousedown."+f);
$telerik.$(c).on("mousedown."+f,h,function(j){var k=e.getSelectedElement();
if(!$telerik.$(k).is(j.target)){e.selectElement(j.target);
$telerik.$(j.target).focus();
if(!($telerik.isIE6||$telerik.isIE7||$telerik.isIE8)){$telerik.$(j.target).off("blur."+f);
$telerik.$(j.target).on("blur."+f,function(l){g(l.target);
});
}}});
}else{if($telerik.isSafari){if(e.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(c).off("mousedown."+f);
return;
}$telerik.$(c).off("mousedown."+f);
$telerik.$(c).on("mousedown."+f,h,function(j){e.selectElement(j.target);
$telerik.$(j.target).off("blur."+f);
$telerik.$(j.target).on("blur."+f,function(k){g(k.target);
});
});
}}if($telerik.isFirefox||$telerik.isOpera){$telerik.$(d).off("mousemove."+f);
$telerik.$(d).on("mousemove."+f,h,function(k){if(e.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(k.target).off("mousedown."+f);
$telerik.$(c).off("mousedown."+f);
$telerik.$(k.target).off("mouseout."+f);
$telerik.$(d).off("mousemove."+f);
return;
}var j=e.get_contentAreaMode();
e._switchEditorEditableMode(d,c,j,false);
$telerik.$(k.target).off("mousedown."+f);
$telerik.$(k.target).on("mousedown."+f,function(l){e.selectElement(l.target);
$telerik.$(l.target).focus();
$telerik.$(l.target).off("blur."+f);
$telerik.$(l.target).on("blur."+f,function(m){g(m.target);
e._switchEditorEditableMode(d,c,j,true);
e.selectElement(m.target);
$telerik.$(l.target).off("blur."+f);
$telerik.$(k.target).off("mousedown."+f);
});
});
});
}},_addHandlersForCheckboxes:function(){var f=this;
var c=f.get_contentArea();
var d=f.get_contentAreaMode();
var e=f.get_document();
var g=function(h){if(h.checked){$telerik.$(h).removeAttr("checked");
if($telerik.isOpera||$telerik.isSafari){h.checked=true;
}}else{$telerik.$(h).attr("checked",true);
if($telerik.isOpera||$telerik.isSafari){h.checked=false;
}}};
if($telerik.isOpera){if(f.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
return;
}$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
$telerik.$(c).on("mousedown.radEditorCheckboxesFix","input[type=checkbox]",function(h){g(h.target);
});
}else{if($telerik.isIE){if(f.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
return;
}$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
$telerik.$(c).on("mousedown.radEditorCheckboxesFix","input[type=checkbox]",function(h){g(h.target);
});
}else{if($telerik.isSafari){if(f.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
$telerik.$(event.target).off("mouseover.radEditorCheckboxesFix");
$telerik.$(c).off("mouseout.radEditorCheckboxesFix");
return;
}$telerik.$(c).off("mouseover.radEditorCheckboxesFix");
$telerik.$(c).on("mouseover.radEditorCheckboxesFix","input[type=checkbox]",function(h){h.target.style.cursor="default";
});
$telerik.$(c).off("mouseout.radEditorCheckboxesFix");
$telerik.$(c).on("mouseout.radEditorCheckboxesFix","input[type=checkbox]",function(h){h.target.style.cursor="";
});
$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
$telerik.$(c).on("mousedown.radEditorCheckboxesFix","input[type=checkbox]",function(h){g(h.target);
f.selectElement(h.target);
});
}else{if($telerik.isFirefox){$telerik.$(c).off("mousemove.radEditorCheckboxesFix");
$telerik.$(c).on("mousemove.radEditorCheckboxesFix","input[type=checkbox]",function(h){if(f.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(h.target).off("mousedown.radEditorCheckboxesFix");
$telerik.$(c).off("mousedown.radEditorCheckboxesFix");
$telerik.$(h.target).off("mouseout.radEditorCheckboxesFix");
$telerik.$(c).off("mousemove.radEditorCheckboxesFix");
return;
}var j=f.getSelection().getRange();
f._switchEditorEditableMode(e,c,d,false);
$telerik.$(h.target).off("mousedown.radEditorCheckboxesFix");
$telerik.$(h.target).on("mousedown.radEditorCheckboxesFix",function(k){g(k.target);
f._switchEditorEditableMode(e,c,d,true);
f.selectElement(k.target);
});
$telerik.$(h.target).off("mouseout.radEditorCheckboxesFix");
$telerik.$(h.target).on("mouseout.radEditorCheckboxesFix",function(k){var l=f.getSelectedElement();
f._switchEditorEditableMode(e,c,d,true);
if(l&&l.tagName!="INPUT"&&l.type!="checkbox"){f.getSelection().selectRange(j);
}else{f.selectElement(l);
}});
});
}}}}},_addHandlersForRadioButtons:function(){var g=this;
var d=g.get_contentArea();
var e=g.get_contentAreaMode();
var f=g.get_document();
var c=function(h){var l=h.getAttribute("name");
var k=h.parentNode.children;
for(var m=0;
m<k.length;
m++){var j=k[m];
if(j.nodeType==1&&j.nodeName=="INPUT"&&j.getAttribute("type")=="radio"&&j.getAttribute("name")==l&&j.getAttribute("checked")){j.removeAttribute("checked");
}}$telerik.$(h).attr("checked",true);
};
if($telerik.isIE||$telerik.isOpera){if(g.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(d).off("mousedown.radEditorRadioButtonsFix");
return;
}$telerik.$(d).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(d).on("mousedown.radEditorRadioButtonsFix","input[type=radio]",function(h){c(h.target);
});
}else{if($telerik.isSafari){if(g.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(d).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(event.target).off("mouseover.radEditorRadioButtonsFix");
$telerik.$(d).off("mouseout.radEditorRadioButtonsFix");
return;
}$telerik.$(d).off("mouseover.radEditorRadioButtonsFix");
$telerik.$(d).on("mouseover.radEditorRadioButtonsFix","input[type=radio]",function(h){h.target.style.cursor="default";
});
$telerik.$(d).off("mouseout.radEditorRadioButtonsFix");
$telerik.$(d).on("mouseout.radEditorRadioButtonsFix","input[type=radio]",function(h){h.target.style.cursor="";
});
$telerik.$(d).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(d).on("mousedown.radEditorRadioButtonsFix","input[type=radio]",function(h){g.selectElement(h.target);
c(h.target);
});
}else{if($telerik.isFirefox){$telerik.$(d).off("mousemove.radEditorRadioButtonsFix");
$telerik.$(d).on("mousemove.radEditorRadioButtonsFix","input[type=radio]",function(h){if(g.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(h.target).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(d).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(h.target).off("mouseout.radEditorRadioButtonsFix");
$telerik.$(d).off("mousemove.radEditorRadioButtonsFix");
return;
}var j=g.getSelection().getRange();
g._switchEditorEditableMode(f,d,e,false);
$telerik.$(h.target).off("mousedown.radEditorRadioButtonsFix");
$telerik.$(h.target).on("mousedown.radEditorRadioButtonsFix",function(k){c(k.target);
g._switchEditorEditableMode(f,d,e,true);
g.selectElement(k.target);
});
$telerik.$(h.target).off("mouseout.radEditorRadioButtonsFix");
$telerik.$(h.target).on("mouseout.radEditorRadioButtonsFix",function(k){var l=g.getSelectedElement();
g._switchEditorEditableMode(f,d,e,true);
if(l&&l.tagName!="INPUT"&&l.type!="radio"){g.getSelection().selectRange(j);
}else{g.selectElement(l);
}});
});
}}}},_addHandlersForSelectTags:function(){var e=this;
var c=e.get_contentArea();
if($telerik.isIE||$telerik.isOpera){}else{if($telerik.isChrome||$telerik.isSafari){if(e.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(event.target).off("mousedown.radEditorSelectFix");
return;
}$telerik.$(c).off("mousedown.radEditorSelectFix");
$telerik.$(c).on("mousedown.radEditorSelectFix","SELECT",function(f){e.selectElement(f.target);
});
}else{if($telerik.isFirefox){var d=e.get_document();
$telerik.$(d).off("mousemove.radEditorSelectFix");
$telerik.$(d).on("mousemove.radEditorSelectFix","SELECT",function(g){if(e.get_mode()!=Telerik.Web.UI.EditModes.Design){$telerik.$(g.target).off("mousedown.radEditorSelectFix");
$telerik.$(c).off("mousedown.radEditorSelectFix");
$telerik.$(g.target).off("mouseout.radEditorSelectFix");
return;
}var f=e.get_contentAreaMode();
e._switchEditorEditableMode(d,c,f,false);
var h=e.getSelection().getRange();
$telerik.$(g.target).off("mousedown.radEditorSelectFix");
$telerik.$(g.target).on("mousedown.radEditorSelectFix",function(j){if(j.which==2){return;
}e.selectElement(g.target);
if(j.which==1){e._switchEditorEditableMode(d,c,f,true);
}});
$telerik.$(c).off("mousedown.radEditorSelectFix");
$telerik.$(c).on("mousedown.radEditorSelectFix",function(j){if(j.target.tagName!="SELECT"){e._switchEditorEditableMode(d,c,f,true);
}});
$telerik.$(g.target).off("mouseout.radEditorSelectFix");
$telerik.$(g.target).on("mouseout.radEditorSelectFix",function(j){var k=e.getSelectedElement();
e._switchEditorEditableMode(d,c,f,true);
if(k&&k.tagName!="SELECT"){e.getSelection().selectRange(h);
}else{e.selectElement(k);
}});
});
}}}},_switchEditorEditableMode:function(f,c,d,e){var g=d==1;
if(g){f.designMode=e?"on":"off";
}else{c.contentEditable=e;
}},onParentNodeChanged:function(){var c=this.get_html();
this.get_contentAreaElement();
if(this._textIframe){this._textIframe.parentNode.removeChild(this._textIframe);
this._textIframe=null;
}var d=this.get_mode();
this.set_mode(d);
this._setContentAreaHtml(c,true);
this.set_html(c);
this._addHandlersForSelectTags();
this._addHandlersForRadioButtons();
this._addHandlersForCheckboxes();
this._addHandlersForTextElements("input[type=text]");
this._addHandlersForTextElements("textarea");
},onResizeStart:function(){this._resizeSelection=this.getSelection().getRange();
this._fixMoreSizeIssues();
},onResizeEnd:function(){this._updateEditorSize(this.get_element().style.height);
if(!this.isIE){return;
}this.setActive();
if(this._resizeSelection){var c=null;
if(this._resizeSelection.commonParentElement){c=this._resizeSelection.commonParentElement();
}else{if(this._resizeSelection.parentElement){c=this._resizeSelection.parentElement();
}}if(c&&(this.get_document()==c.ownerDocument)){this.getSelection().selectRange(this._resizeSelection);
}this._resizeSelection=null;
}},_initializeLocalization:function(){this._localization=b.Localization.merge("RadEditor",this.get_language().toLowerCase(),this._localization);
},getSelectedElement:function(){return this.getSelection().getParentElement();
},getSelection:function(){return new b.Editor.Selection(this.get_contentWindow());
},getSelectionHtml:function(){return this.getSelection().getHtml();
},getEditorSelectionRange:function(){var c=this.getSelection().getRange();
var d=this.getSelectedElement();
if(c!=null&&d!=null&&d.ownerDocument!=this.get_document()){c=null;
}return c;
},selectElement:function(c,d){if(b.Editor.Utils.selectElement(this.get_contentWindow(),c)&&false!=d){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},undo:function(c){this._commandsManager.undo(c);
},redo:function(c){this._commandsManager.redo(c);
},executeCommand:function(d,e,c){if(!d.get_window()){d.set_window(this.get_contentWindow());
}if(false!=e&&!this.isOpera){this.setFocus();
}this._commandsManager.execute(d,c);
},executeBrowserCommand:function(d,c,j,e){if((this.get_enableTrackChanges()||this.get_enableComments())&&d.indexOf("Justify")==0){var f=this.getSelection();
var g=f.getParentElement();
if(g){if(g.getAttribute("Name")!=null){if(g.getAttribute("Name").indexOf("_wp")==0){return;
}}}}var h=this.getLocalizedString(d);
this.executeCommand(new b.Editor.BrowserCommand(h,this.get_contentWindow(),d,j,this));
this.setActive();
this.setFocus();
if(true==e){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},createElement:function(j,g,f,d,e,h){var c=this.get_document().createElement(j);
if(g){c.style.width=g;
}if(f){c.style.height=f;
}if(null!=d){c.id=d;
}if(null!=e){c.name=e;
}if(null!=h){c.value=h;
}return c;
},createRestorePoint:function(){return new b.Editor.RestorePoint(this.get_contentWindow(),this.get_contentArea());
},getToolState:function(d){if(d=="Undo"){return this.get_commandsManager().isUndoAvailable()?b.Editor.CommandStates.Off:b.Editor.CommandStates.Disabled;
}else{if(d=="Redo"){return this.get_commandsManager().isRedoAvailable()?b.Editor.CommandStates.Off:b.Editor.CommandStates.Disabled;
}}if(d=="FormatPainterApply"||d=="FormatPainterClear"){return(this.get_currentFormatting())?b.Editor.CommandStates.Off:b.Editor.CommandStates.Disabled;
}else{var c=b.Editor.UpdateCommandsArray[d];
if(c&&c.getState){return c.getState(this.get_contentWindow());
}}},getToolValue:function(h){var g=b.Editor.UpdateCommandsArray[h];
if(g&&g.getValue){if(g.set_editor){g.set_editor(this);
}return g.getValue(this.get_contentWindow());
}else{if(h=="RealFontSize"){var f=this.getSelectedElement();
if(f){var d=null;
try{d=$telerik.getCurrentStyle(f,"fontSize","");
}catch(c){}if(d){var e=parseFloat(d);
if(e>parseInt(d)){if(d.indexOf("px")>-1){d=parseInt(d)+"px";
}}}return d;
}}}},_addFilters:function(){var d=this.get_filtersManager();
var c=this.get_contentFilters();
var e=b.EditorFilters;
d.clear();
var f=c&e.ConvertToXhtml;
d.set_enableXhtmlFilter(f);
if(c&e.ConvertInlineStylesToAttributes){d.add(new b.Editor.ConvertInlineStylesToAttributesFilter());
}else{if(f){d.add(new b.Editor.CleanAttributesFilter());
if($telerik.isFirefox||$telerik.isSafari){d.add(new b.Editor.MozillaRemoveLastBrFilter());
}}}if(c&e.RemoveScripts){d.add(new b.Editor.StripScriptsFilter());
}if(c&e.EncodeScripts){d.add(new b.Editor.EncodeScriptsFilter());
}if(c&e.FixUlBoldItalic){d.add(new b.Editor.FixUlBoldItalic());
}d.add(new b.Editor.FixNestedLists());
if(c&e.ConvertFontToSpan){d.add(new b.Editor.ConvertFontToSpanFilter());
}if(c&e.OptimizeSpans){d.add(new b.Editor.OptimizeSpans());
}if(c&e.FixEnclosingP){d.add(new b.Editor.FixEnclosingP());
}if(c&e.ConvertCharactersToEntities){d.add(new b.Editor.ConvertCharactersToEntities());
}if($telerik.isIE){d.add(new b.Editor.IEKeepObjectDesignFilter());
d.add(new b.Editor.IEKeepObjectParamsFilter());
d.add(new b.Editor.IEKeepCommentsFilter());
d.add(new b.Editor.IEFixEmptyParagraphs());
if(c&e.IECleanAnchors){d.add(new b.Editor.IECleanAnchorsFilter());
}}if(!$telerik.isIE&&!$telerik.isOpera){if(!$telerik.isSafari){d.add(new b.Editor.MozillaKeepFlash(this.get_mozillaFlashOverlayImage()));
}else{d.add(new b.Editor.FixParagraphsWithSingleBrFilter());
}d.add(new b.Editor.MozillaKeepStylesString());
d.add(new b.Editor.MozillaKeepStylesDom());
if(c&e.MozEmStrong){d.add(new b.Editor.MozEmStrongFilter());
}}d.add(new b.Editor.StripJunkFilter());
if(c&e.MakeUrlsAbsolute){d.add(new b.Editor.MakeUrlsAbsolute());
}d.add(new b.Editor.RemoveExtraBrakes());
if(c&e.IndentHTMLContent){d.add(new b.Editor.IndentHTMLContentFilter());
}if(c&e.PdfExportFilter){d.add(new b.Editor.PdfExportFilter());
}},applyFiltersForEmbedContent:function(e){var f=e+"";
var c=this.get_filtersManager().getFilterByName("IEKeepObjectParamsFilter");
var d=this.get_filtersManager().getFilterByName("MozillaKeepFlash");
if(c){f=c.getDesignContent(f);
}if(d){var g=this.get_document().createElement("div");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(g,f);
g=d.getDesignContent(g);
f=g.innerHTML;
}return f;
},addShortCut:function(c,d){if(this._shortCutManager){this._shortCutManager.addShortCut(c,d);
}},removeShortCut:function(c){if(this._shortCutManager){this._shortCutManager.removeShortCut(c);
}},setShortCut:function(c,d){if(this._shortCutManager){this._shortCutManager.setShortCut(c,d);
}},_addDefaultShortCuts:function(){var d=[["SelectAll","CTRL+A"],["Copy","CTRL+C"],["Paste","CTRL+V"],["Cut","CTRL+X"],["Bold","CTRL+B"],["Italic","CTRL+I"],["Underline","CTRL+U"],["Copy","CTRL+INS"],["Paste","SHIFT+INS"],["ToggleScreenMode","F11"],["LinkManager","CTRL+K"],["ImageManager","CTRL+G"],["SetToolFocus","F10"]];
if(this.get_enableUndoRedo()){d.push(["Undo","CTRL+Z"]);
d.push(["Redo","CTRL+Y"]);
}for(var c=0;
c<d.length;
c++){this.addShortCut(d[c][0],d[c][1]);
}if(this.isIE){this.addShortCut("InsertTab","TAB");
}else{this.addShortCut("InsertTabMozilla","TAB");
}this.addShortCut("InsertShiftTab","SHIFT+TAB");
this.addShortCut("EnterNewLine","ENTER");
if(this.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Br){if(this.isIE){this.addShortCut("ShiftEnter","SHIFT+ENTER");
this.addShortCut("InsertParagraph","CTRL+ENTER");
}else{if(this.isFirefox){this.addShortCut("EnterParagraphMozilla","CTRL+ENTER");
}else{if($telerik.isSafari){this.addShortCut("InsertParagraphSafari","CTRL+ENTER");
}}}}if($telerik.isSafari){this.addShortCut("ShiftEnterSafari","SHIFT+ENTER");
}},bubbleKeyEventToBrowser:function(){this._shortcutHit=false;
},attachEventHandler:function(d,f){if(d.startsWith("on")){d=d.replace("on","");
}var c=this.get_contentAreaMode()==b.EditorContentAreaMode.Div?this.get_contentArea():this.get_document();
$telerik.addExternalHandler(c,d,f);
var g=this._contentAreaEventHandlers;
if(!g[d]){g[d]=[];
}var e=g[d];
e[e.length]=f;
},detachEventHandler:function(d,e){if(d.startsWith("on")){d=d.replace("on","");
}var c=this.get_contentAreaMode()==b.EditorContentAreaMode.Div?this.get_contentArea():this.get_document();
$telerik.removeExternalHandler(c,d,e);
},_detachEvents:function(){var h=this._contentAreaEventHandlers;
for(var f in h){var c=h[f];
if(c.length!=null){for(var j=0;
j<c.length;
j++){var g=c[j];
if(typeof(g)=="function"){try{this.detachEventHandler(f,g);
}catch(d){}}}c=[];
}}this._contentAreaEventHandlers={};
this._attachBodyHandlers(false);
},get_TopZone:function(){return $get(this.get_id()+"Top");
},_createTools:function(){if(!this.get_toolAdapter()){var d=this.get_toolContainer();
var c=eval(this.get_toolAdapterType());
if(this._onToolClickDelegate==null){this._onToolClickDelegate=Function.createDelegate(this,this._onToolClick);
}this.set_toolAdapter($create(c,{editor:this,toolJSON:this.get_toolJSON(),contentAreaMode:this.get_contentAreaMode()},{toolClick:this._onToolClickDelegate},null,d));
if(this.isIE){if(this.get_toolbarMode()==b.EditorToolbarMode.Default){d.style.overflow="";
}this._updateEditorSize();
}}},_onToolClick:function(d,c){if((this.get_enableTrackChanges()||this.get_enableComments())&&d._name=="Cut"&&c._commandName=="Cut"){if(!this._canEditSelection()){alert(this.get_localization()["caneditselection"]);
return false;
}}this.fire(d.get_name(),c);
},getContextMenuByTagName:function(c){var d=this.get_toolAdapter();
if(d&&d.getContextMenuByTagName){return d.getContextMenuByTagName(c);
}},getToolByName:function(d){var c=this.get_toolAdapter();
if(c){return c.getToolByName(d);
}return null;
},getLocalizedString:function(d,c){if(!d){return c;
}var e=this.get_localization()[d];
if(null==e){e=this.get_localization()[d.toLowerCase()];
}return e;
},setFocus:function(){try{if($telerik.isIE&&this.getSelection().isControl()){return;
}var c=this.get_mode()!=b.EditModes.Html?this.get_contentWindow():this._getTextArea();
if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){c=this.get_contentArea();
}if(c&&c.focus){c.focus();
}}catch(d){}},setActive:function(){if(this._emptyMessageContainer){this._hideEmptyMessage();
}if($telerik.isIE&&this.getSelection().isControl()){return;
}var c=this.get_mode()==b.EditModes.Html?this._getTextArea():this.get_contentArea();
if(c&&c.setActive){c.setActive();
}},set_visible:function(d){var c=this.get_element();
if(c){c.style.display=d?"":"none";
}this.set_editable(d);
},enableEditing:function(g,d,l){var c=this.get_toolAdapter();
var e=b.EditingOptions;
var f=function(){};
if(!d){d=b.EditingOptions.All;
}this._editingOptions=d;
this._optionalIgnoredTools=l;
if(d&e.ContextMenus){if(c){c.enableContextMenus(g);
}}if(d&e.EditModes){if(!g){this._originalEditModeRef=this.set_mode;
this.set_mode=f;
}else{if(this._originalEditModeRef){this.set_mode=this._originalEditModeRef;
this._originalEditModeRef=null;
}}}if(d&e.Tools){if(c){if(!g){c.setToolState(null,b.Editor.CommandStates.Disabled);
if(l){var h=[];
for(var j in l){var m=c.getToolByName(j);
if(m){h[h.length]=m;
}}c.setToolState(h);
}this._originalSetToolStateRef=c.setToolState;
c.setToolState=f;
}else{if(this._originalSetToolStateRef){c.setToolState=this._originalSetToolStateRef;
this._originalSetToolStateRef=null;
}}}}if(d&e.Modules){var k=this._modulesManager;
if(k){k.setModulesVisible(g);
}}if(d&e.Typing){if(!g){this._disableTypingDelegate=$telerik.cancelRawEvent;
this.attachEventHandler("keypress",this._disableTypingDelegate);
}else{if(this._disableTypingDelegate){this.detachEventHandler("keypress",this._disableTypingDelegate);
this._disableTypingDelegate=null;
}}}if(d&d.Tab){if(!g){this.removeShortCut("InsertTab");
}else{this.setShortCut("InsertTab","TAB");
}}if(g){if(c){c.setToolState(null,b.Editor.CommandStates.Off);
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},set_editable:function(c){var d=this;
if($telerik.isIE||$telerik.isOpera||this.get_contentAreaMode()==b.EditorContentAreaMode.Div){window.setTimeout(function(){try{d.get_contentArea().setAttribute("contentEditable",""+c);
if($telerik.isIE){d.get_document().execCommand("2D-Position",false,true);
}}catch(e){}},0);
}else{window.setTimeout(function(){try{d.get_document()["designMode"]=c?"on":"off";
if(c){d.get_document().execCommand("UseCSS",false,true);
d.get_document().execCommand("styleWithCSS",false,false);
}}catch(f){}},0);
}},get_editable:function(){if($telerik.isIE||$telerik.isOpera||this.get_contentAreaMode()==b.EditorContentAreaMode.Div){return this.get_contentArea().getAttribute("contentEditable",2);
}else{return(this.get_document()["designMode"]=="on");
}},enableContentArea:function(c){if(this.isIE){this.get_contentArea().setAttribute("contentEditable",""+c);
}},showExternalDialog:function(q,c,r,k,f,e,p,l,d,m,n,h){var g=this.getEditorSelectionRange();
var j=this;
var o=function(t,s){window.setTimeout(function(){if(g!=null){try{j.getSelection().selectRange(g);
}catch(u){}}if(f&&s!=null){var v=f(t,s);
if(false==v){return;
}j.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}j.setFocus();
},50);
};
this.get_dialogOpener().openUrl(q,c,r,k,o,e,p,l,d,m,n,h);
},showDialog:function(f,c,d){var e=this.getEditorSelectionRange();
var h=this;
var k=function(n,m){window.setTimeout(function(){if(e!=null&&f!="FindAndReplace"){try{h.getSelection().selectRange(e);
}catch(o){}}if(d&&m!=null){var p=d(n,m);
if(false==p){return;
}h.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}h.setFocus();
},50);
};
var g=this.get_dialogOpener();
if(f=="InsertLink"||f=="InsertImage"||f=="InsertTableLight"){var j=this.get_skin();
if(j=="Glow"||j=="Silk"){c.height=230;
c.width=370;
c.stripPopupHeight=true;
}if(this.get_isSkinTouch()){c.height=274;
c.width=386;
}g.openLight(f,c,k);
}else{g.open(f,c,k);
}if(this.isIE){var l=this.get_dialogOpener()._getDialogContainer(f);
if(!l||l._DRAG_ATTACHED){return;
}l._DRAG_ATTACHED=true;
l.add_dragEnd(function(){if(e!=null){try{h.getSelection().selectRange(e);
}catch(m){}}});
}},_getModeButtonsWrapper:function(){return this._getChildElement("ModesWrapper");
},_registerModeChangeHandler:function(c){var d=this._getModeButtonsWrapper();
if(!d){return;
}if(c){this._onModeButtonClickDelegate=Function.createDelegate(this,this._onModeButtonClick);
$addHandler(d,"click",this._onModeButtonClickDelegate);
}else{if(this._onModeButtonClickDelegate){$removeHandler(d,"click",this._onModeButtonClickDelegate);
this._onModeButtonClickDelegate=null;
}}},_onModeButtonClick:function(f){var h=this.get_mode();
var j=b.Editor.Utils.getElementParentByTag(f.target,"LI");
if(j){var g=b.EditModes;
var d=Sys.UI.DomElement;
var c=j.getElementsByTagName("A")[0];
if(d.containsCssClass(c,"reMode_html")){h=g.Html;
}else{if(d.containsCssClass(c,"reMode_design")){h=g.Design;
}else{h=g.Preview;
}}}if(h!=this.get_mode()){this.set_mode(h);
}return $telerik.cancelRawEvent(f);
},_changeModeUI:function(k){var f=Sys.UI.DomElement;
var g=b.EditModes;
var h=this.get_enableAriaSupport();
var e="reMode_";
switch(k){case g.Html:e+="html";
break;
case g.Design:e+="design";
break;
case g.Preview:e+="preview";
break;
}var l=this._getModeButtonsWrapper();
var d=l.getElementsByTagName("A");
for(var j=0;
j<d.length;
j++){var c=d[j];
f.removeCssClass(c,"reMode_selected");
if(h&&typeof(f.removeAttribute)!="undefined"){f.removeAttribute("aria-pressed");
}if(f.containsCssClass(c,e)){f.addCssClass(c,"reMode_selected");
if(h&&typeof(f.setAttribute)!="undefined"){f.setAttribute("aria-pressed","true");
}}}},_isEditModeEnabled:function(c){return c&this.get_editModes()?true:false;
},get_mode:function(){return this._mode;
},set_mode:function(h){if(!this.validateMaxHtmlLength()){this.displayMaxHtmlLengthErrorMessage();
return false;
}if(!this.validateMaxTextLength()){this.displayMaxTextLengthErrorMessage();
return false;
}this._setEditableDelegate=Function.createDelegate(this,function(){if(this._setEditableDelegate){this.remove_editReady(this._setEditableDelegate);
var j=(this._mode==c.Design);
this.set_editable(j);
this.toggleEnhancedEdit(j);
this._setEditableDelegate=null;
}});
this.add_editReady(this._setEditableDelegate);
var e=this._mode;
var c=b.EditModes;
if(h!=c.Design&&this._emptyMessageContainer){this._hideEmptyMessage();
}if(h==c.Preview&&e!=c.Html){Telerik.Web.UI.Editor.Utils.setTargetsForPreview(this);
}else{if(e==c.Preview){Telerik.Web.UI.Editor.Utils.restoreTargetsAfterPreview(this);
}}if(e==c.Html||h==c.Html){var d=this.get_html(true);
this._mode=h;
this._showTextArea(this._mode==c.Html);
this.set_html(d);
if(h==c.Preview){Telerik.Web.UI.Editor.Utils.setTargetsForPreview(this);
}}else{this._mode=h;
this._showTextArea(this._mode==c.Html);
}this._changeModeUI(h);
if(this._mode!=c.Preview){this.setFocus();
if(this.isFirefox&&(!this.get_document()||!this.get_contentArea())){}else{this.set_editable(true);
}if(this._mode==c.Design){this.toggleEnhancedEdit(true);
}}else{this.set_editable(false);
this.toggleEnhancedEdit(false);
}if(h==c.Design&&$telerik.isFirefox){this.get_contentAreaElement().blur();
}else{this.setFocus();
}var g=this.get_mainTable();
var f=g.offsetHeight+"px";
this.raiseEvent("modeChange",Sys.EventArgs.Empty);
this._updateEditorSize(f);
},_getTextIframe:function(){if(this._textIframe&&(!this._textIframe.contentWindow||(this._textIframe.contentWindow.document.body&&!this._textIframe.contentWindow.document.body.firstChild))){if(this._textIframe.parentNode){this._textIframe.parentNode.removeChild(this._textIframe);
}this._textIframe=null;
}if(!this._textIframe){var d=this._createIframe();
if(d){this._textIframe=d;
var e=this._textIframe.style;
e.position="absolute";
e.height="2px";
e.width="2px";
this.get_contentAreaElement().parentNode.appendChild(this._textIframe);
var c=this._textIframe.contentWindow.document;
if(!$telerik.isIE6||window.location.protocol!="https:"){c.designMode="off";
}var f=c.open("text/html","replace");
var g="<html style='height:100%;'><head><title>RadEditor HTML Mode</title></head><body style='overflow:hidden;margin:0px;padding:0px;height:100%'><textarea style='font:normal 11px Tahoma;color: #000080;border:0px;height:100%;width:100%;resize:none;'></textarea></body></html>";
if(typeof(f)=="undefined"){f=c;
}f.write(g);
f.close();
}}return this._textIframe;
},_getTextArea:function(){var c=this._getTextIframe();
if(c&&typeof(c.contentWindow)!="unknown"){return c.contentWindow.document.body.firstChild;
}else{return null;
}},get_textArea:function(){return this._getTextArea();
},_showTextArea:function(c){var e=this._getTextIframe();
var d=this.get_contentAreaElement();
if(c){if(($telerik.isSafari||$telerik.isIE9)&&this.get_contentAreaMode()!=b.EditorContentAreaMode.Div){this.hideViewElement(d);
}else{d.style.display="none";
}e.style.height="";
e.style.display="";
e.style.position="";
if(this.get_autoResizeHeight()){window.setTimeout(function(){e.style.height=(e.parentNode.offsetHeight-6)+"px";
},0);
}if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){e.style.position="";
window.setTimeout(function(){var f=e.parentNode.offsetHeight-3;
e.style.height=f+"px";
},0);
}else{e.style.height="100%";
}e.style.width="100%";
}else{if(($telerik.isSafari||$telerik.isIE9)&&this.get_contentAreaMode()!=b.EditorContentAreaMode.Div){this.showViewElement(d);
}else{d.style.display="";
}e.style.display="none";
}},hideViewElement:function(c){c.style.width="0px";
c.style.height="0px";
},showViewElement:function(c){c.style.width="100%";
c.style.height="100%";
},_setContentAsText:function(d){var c=this._getTextArea();
if(c){c.value=d;
}},_getContentAsText:function(){var c=this._getTextArea();
if(c&&c.value){var d=c.value;
return d;
}return"";
},set_html:function(d,h,g,f){var e=b.EditModes;
if(this.get_mode()!=e.Html){var c=new b.Editor.GenericCommand(h?h:"Set HTML",this.get_contentWindow(),this);
this._setContentAreaHtml(d);
this.executeCommand(c,g);
if(false!=f){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}if(this.get_emptyMessage()&&(!d||d.trim().length==0)&&this.get_mode()==e.Design){this._setEmptyMessage();
b.Editor.CommandList.SetToolFocus("SetToolFocus",this,null);
}}else{this._setContentAsText(d);
}},get_html:function(g,n){var e=null;
var d="";
var k=this.get_mode();
var l=b.EditModes;
if(k==l.Html){return this._getContentAsText();
}else{if(this.get_fullPage()){if(this.get_document()){e=this.get_document().getElementsByTagName("HTML")[0];
e=b.Editor.Utils.cloneNodeWithChildren(e);
var c=this._getAllSheets(e);
for(var f=0;
f<c.length;
f++){var h=c[f];
var j=h.getAttribute("id");
if(j&&j.indexOf("RADEDITORSTYLESHEET")==0){h.parentNode.removeChild(h);
}}if($telerik.isIE||$telerik.isOpera){e.getElementsByTagName("BODY")[0].removeAttribute("contentEditable");
}}}else{if(this.get_contentArea()){if(true==g){e=b.Editor.Utils.cloneNodeWithChildren(this.get_contentArea());
}else{e=this.get_contentArea();
}}}}if(e){if(n&&(b.EditorStripHtmlOptions&&n)==b.EditorStripHtmlOptions.Comments){var m=new b.Editor.StripCommentsFilter();
e=m.getHtmlContent(e);
}if(true==g){d=this.get_filtersManager().getHtmlContent(e);
d=this._stripBodyTagFromContent(d);
}else{d=this.get_fullPage()?$telerik.getOuterHtml(e):e.innerHTML;
}}if(this.get_fullPage()&&this._doctypeString){d=this._doctypeString+"\n"+d;
}return d;
},set_initialContent:function(c){if(c!=null){this._initialContent=c;
}else{this._initialContent=this.get_html(true);
}},get_initialContent:function(){return this._initialContent;
},get_text:function(){var c=b.EditModes;
var e="";
if(this.get_mode()!=c.Html){var d=this.get_contentArea();
if(d){if(d.innerText){e=d.innerText;
}else{if(d.textContent!=null){e=d.textContent;
e=e.replace(/<!--(.|\s)*?-->/gi,"");
}else{e=d.innerHTML.replace(/<\/?[^>]*>/ig,"");
e=e.replace(/&nbsp;/gi,"");
}}}}else{e=this._getTextArea().value.replace(/<\/?[^>]*>/ig,"");
}return e;
},_getUniqueStyleSheetId:function(c){return"RADEDITORSTYLESHEET"+c;
},_getAllSheets:function(e){if(!e){alert(this.get_localization()["getallsheetscalledwithnodocumenterror"]);
}var d=e.getElementsByTagName("link");
var g=e.getElementsByTagName("style");
var c=[];
var h;
for(h=0;
d[h];
h++){var f=d[h].rel?d[h].rel:d[h].getAttribute("rel");
if(typeof(f)=="string"&&f.toLowerCase().indexOf("style")+1){Array.add(c,d[h]);
}}for(h=0;
g[h];
h++){Array.add(c,g[h]);
}return c;
},_getClassName:function(e){var f=e&&e.selectorText?e.selectorText:"";
var d=f.lastIndexOf(".");
if(d==-1){return"";
}var c=f.indexOf(" ",d);
if(-1==c){c=f.indexOf(":",d);
}if(-1==c){c=f.length;
}return f.substring((d+1),c);
},_createCssFilterObject:function(){if(this._cssClassesHash){return;
}var c=this.get_cssClasses();
if(c&&c.length>0){var f={};
var e=c.length;
for(var d=0;
d<e;
d++){var g=c[d][0];
var h=c[d][1];
f[g.replace(/(.*?)\./ig,function(j){return j.toUpperCase();
})]=h;
}this._cssClassesHash=f;
}},_getFilteredCssClasses:function(f){this._createCssFilterObject();
if(f&&this._cssClassesHash){var c=[];
var e=f.length;
for(var d=0;
d<e;
d++){var g=f[d];
if(outAlias=this._checkCssFilter(g[1].selectorText)){g[2]=outAlias;
c[c.length]=g;
}}return c;
}else{return f;
}},_checkCssFilter:function(c){if(!c||!this._cssClassesHash){return null;
}return this._cssClassesHash[c.replace(/(.*?)\./ig,function(d){return d.toUpperCase();
})];
},getCssArray:function(j){var g=this.get_document();
var f=[];
for(var d=0;
d<g.styleSheets.length;
d++){var h=g.styleSheets[d];
try{this._getStyleSheetRules(f,h,j);
}catch(c){}}f=this._getFilteredCssClasses(f);
return f;
},_getStyleSheetRules:function(e,o,p){var d=o.href;
if(d&&d.indexOf("WebResource.axd?")>-1){return;
}if(d&&d.indexOf(this.get_contentAreaCssFile())>-1){return;
}var c=(o.rules)?o.rules:o.cssRules;
if($telerik.isIE&&o.imports){for(var g=0;
g<o.imports.length;
g++){this._getStyleSheetRules(e,o.imports[g],p);
}}for(var f=0;
f<c.length;
f++){var m=c[f];
if(m&&m.cssText){var q=m.cssText.toLowerCase();
if(q.indexOf("@import")>=0&&m.parentStyleSheet&&m.styleSheet&&m.parentStyleSheet!=m.styleSheet){this._getStyleSheetRules(e,m.styleSheet,p);
continue;
}}var n=m&&m.selectorText?m.selectorText:"";
var h=n.lastIndexOf(".");
if(h<0){continue;
}h=n.lastIndexOf(":");
if(h>0){continue;
}var l=this._getClassName(m);
if(l!="reContentArea"){e[e.length]=[l,m];
}}},copyStyleSheets:function(r,u){if(null==r&&null==u){return;
}var d=0;
var v=null;
if(u.styleSheets.length==0){if(u.createStyleSheet){u.createStyleSheet();
}else{css=u.createElement("style");
css.media="all";
css.type="text/css";
var n=u.getElementsByTagName("head")[0];
n.appendChild(css);
v=css;
}}if(u.styleSheets[0]){v=u.styleSheets[0];
}for(var g=0;
g<r.styleSheets.length;
g++){try{var s=r.styleSheets[g];
var e=s.href;
var l=false;
if($telerik.isFirefox){if(s.ownerNode&&s.ownerNode.tagName.toLowerCase()=="style"){l=true;
}}if(e&&!l){continue;
}if(s.media){var k=s.media;
if(k.mediaText!=null){k=k.mediaText;
}if(k&&k!="all"&&k!="screen"){continue;
}}var c=(s.rules)?s.rules:s.cssRules;
for(var h=0;
h<c.length;
h++){var p=c[h];
if(v.addRule){var q=p.selectorText;
var m=p.style.cssText;
if(m&&q){v.addRule(q,m,d);
}}else{if(v.insertRule){v.insertRule(p.cssText,d);
}else{var t=p.selectorText+"{"+p.style.cssText+"}";
var o=u.createTextNode(t);
v.appendChild(o);
}}d++;
}}catch(f){}}},_contentAreaCommonInitialization:function(){var c=b.Editor.PopupController;
if(c){c.detachFromDocument(this.get_document());
c.attachToDocument(this.get_document());
}this._initEvents();
if(this.isVisible()){this.raiseEvent("firstShow");
}if(this.get_mode()!=b.EditModes.Preview){this.set_editable(true);
}else{this.set_editable(false);
}this.toggleEnhancedEdit(true);
if(this.get_document()&&this.get_contentArea()){this.raiseEvent("editReady",Sys.EventArgs.Empty);
}this._divContentAreaInitialized=true;
},_contentFrameLoadFunction:function(){this._execLoadFunctionSecondTime=false;
try{this.set_document(this.get_contentAreaElement().contentWindow.document);
this.set_contentWindow(this.get_contentAreaElement().contentWindow);
this.set_contentArea(this.get_document().body);
this.get_filtersManager().getDesignContentDom(this.get_contentArea());
var k=0;
b.Editor.Utils.addStyleSheet(this.get_contentAreaCssFile(),this.get_document(),this._getUniqueStyleSheetId(k++));
var m=this.get_tableLayoutCssFile();
if(m){b.Editor.Utils.addStyleSheet(m,this.get_document(),this._getUniqueStyleSheetId(k++));
}var c=this.get_cssFiles(),g,l;
if(c.length>0){for(g=0;
g<c.length;
g++){l=this._getUniqueStyleSheetId(k++);
b.Editor.Utils.addStyleSheet(c[g],this.get_document(),l);
}}else{if(!this.get_fullPage()){this.copyStyleSheets(document,this.get_document());
var j=this._getAllSheets(document);
for(g=0;
g<j.length;
g++){l=this._getUniqueStyleSheetId(k++);
var h=j[g];
if(h.tagName=="LINK"){var d=h.href;
if(!d||d.indexOf("WebResource.axd?")>-1){continue;
}if(h.rel&&h.rel.toLowerCase()!="stylesheet"){continue;
}if(h.media&&h.media!="all"&&h.media!="screen"){continue;
}b.Editor.Utils.addStyleSheet(h.getAttribute("href"),this.get_document(),l);
}}}}this._contentAreaCommonInitialization();
}catch(f){}},_extractDoctype:function(c){var d=new RegExp("(<!DOCTYPE[^>]+>)","g");
var e=c.match(d);
return e?e[0]:"";
},_setEmptyMessage:function(c){if(this.get_mode()!=b.EditModes.Design){return;
}if(c!=null){var e=this.get_contentArea().innerHTML.trim();
if(e&&e!="<br>"&&e!="<p>&nbsp;</p>"&&e!="<br />"){return;
}}var g=this.get_emptyMessage();
if(g){if(!this._emptyMessageContainer){var f=this._emptyMessageContainer=document.createElement("div");
var d=this.get_contentAreaElement();
d.parentNode.insertBefore(f,d);
f.style.zIndex=d.style.zIndex+1;
f.style.position="absolute";
$telerik.addCssClasses(f,["reEmptyMessage"]);
if($telerik.isIE&&!$telerik.isIE9Mode){f.style.filter="alpha(opacity=40)";
}else{f.style.opacity="0.4";
}b.Editor.Utils.setElementInnerHtml(f,g);
this.add_selectionChange(Function.createDelegate(this,this._hideEmptyMessage));
$addHandlers(f,{click:this._hideEmptyMessage},this);
$addHandlers(d,{blur:this._setEmptyMessage},this);
}else{this._emptyMessageContainer.style.display="";
}}},_hideEmptyMessage:function(c){if(this._emptyMessageContainer){this._emptyMessageContainer.style.display="none";
if(c&&c.type=="click"){this.setFocus();
}}},_setContentAreaHtml:function(j,h){if(!j||j.trim().length==0){this._setEmptyMessage();
}var k=this.get_filtersManager().getDesignContent(j);
var l=null;
if(-1!=k.toLowerCase().indexOf("<html")){this.set_fullPage(true);
l=k;
this._doctypeString=this._extractDoctype(l);
}else{this.set_fullPage(false);
}if(this.get_fullPage()&&this.get_contentAreaMode()==b.EditorContentAreaMode.Div){alert(this.get_localization()["SetToIframeForFullHTMLError"]);
k=Telerik.Web.UI.Editor.Utils.stripHtmlHeadBodyTags(k);
this.set_fullPage(false);
}k=this._markExistingEmptyParagraphs(k);
if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){this.set_contentArea(this.get_contentAreaElement());
var c=this.get_contentArea();
this.set_document(c.ownerDocument);
this.set_contentWindow(window);
if(k.match(/<form[\s>]/i)){alert(this.get_localization()["FormElementsAreSupportedByIframeError"]);
k="";
}b.Editor.Utils.setElementInnerHtml(c,k);
this.get_filtersManager().getDesignContentDom(c);
if(!this._divContentAreaInitialized){this._contentAreaCommonInitialization();
}}else{if(null!=l||true==h){if(!l){if($telerik.isSafari){l="<!DOCTYPE html><html><head><style></style></head><body>"+k+"</body></html>";
}else{var n="";
if($telerik.isOpera){n=" style='height:100%'";
}l="<head><style></style></head><body"+n+">"+k+"</body>";
}}if($telerik.isFirefox){var m=Function.createDelegate(this,function(){if(this._execLoadFunctionSecondTime){this._contentFrameLoadFunction();
}});
$addHandler(this.get_contentAreaElement(),"load",m);
}try{var d=this.get_contentAreaElement().contentWindow.document;
d.open();
d.write(l);
d.close();
this._execLoadFunctionSecondTime=false;
if(d.body){this._contentFrameLoadFunction();
}else{this._execLoadFunctionSecondTime=true;
}}catch(g){}}else{b.Editor.Utils.setElementInnerHtml(this.get_contentArea(),k);
this.get_filtersManager().getDesignContentDom(this.get_contentArea());
}}var f=this._checkForBrokenParagraphs();
if(f){this._fixBrokenParagraphs(k);
}},_markExistingEmptyParagraphs:function(c){var d=c+"";
if($telerik.isIE){d=d.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _rdEditor_exists="1">&nbsp;</p>');
}return d;
},_checkForBrokenParagraphs:function(){var f=false;
if($telerik.isIE){var e=this.get_contentArea().getElementsByTagName("p");
for(var c=e.length-1;
c>=0;
c--){var d=e[c];
if(!d.hasChildNodes()){if(!d.getAttribute("_rdEditor_exists")){f=true;
}}d.removeAttribute("_rdEditor_exists");
}}return f;
},_fixBrokenParagraphs:function(c){if($telerik.isIE){if(this.get_contentAreaMode()!=b.EditorContentAreaMode.Div){c=Telerik.Web.UI.Editor.Utils.stripHtmlHeadBodyTags(c);
}var d=this.get_contentArea();
c=c.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _rdEditor_temp="1">');
c=c.replace(/<\/p>/gi,"</div>");
b.Editor.Utils.setElementInnerHtml(d,c);
var g=d.getElementsByTagName("DIV");
for(i=g.length-1;
i>=0;
i--){var f=g[i];
if(f.getAttribute("_rdEditor_temp")){var h=this.get_document().createElement("P");
$telerik.getOuterHtml(f.cloneNode(false)).replace(/([a-z0-9\-_]+)=/gi,function(l,j){var m;
if(j!=="_rdEditor_temp"){m=f.getAttribute(j);
if(!m&&j==="class"){m=f.className;
}h.setAttribute(j,m);
}});
for(var e=0;
e<f.childNodes.length;
e++){h.appendChild(f.childNodes[e].cloneNode(true));
}if(f.swapNode){f.swapNode(h);
}else{var k=f.parentNode;
k.insertBefore(h,f);
k.removeChild(f);
}}}this.get_filtersManager().getDesignContentDom(d);
}},_createUI:function(){if(this._created){return;
}this._registerModeChangeHandler(true);
this._tableElement=this.get_mainTable();
var c=$get(this.get_id()+"Center");
var d=this.get_contentAreaElement();
if($telerik.isMobileSafari&&this.get_contentAreaMode()==b.EditorContentAreaMode.Iframe){var e=document.createElement("div");
e.style.width="100%";
e.style.height=c.offsetHeight+"px";
e.style.overflow="hidden";
e.appendChild(d);
c.appendChild(e);
this._contentAreaWrapper=e;
}else{c.appendChild(d);
}this._created=true;
},repaint:function(){b.RadEditor.callBaseMethod(this,"repaint");
this._fixMoreSizeIssues();
if(this.get_toolAdapter() instanceof b.Editor.RibbonBarToolAdapter){this.get_ribbonBar().repaint();
}},_updateEditorSize:function(e,g){var f=this._tableElement;
var d=e?e:f.style.height;
if(true==g||d=="auto"){d=f.offsetHeight+"px";
}if(parseInt(d)==0){return;
}d=parseInt(d)+"px";
f.style.height=d;
if(this.isIE){this._fixIeHeight(f,d);
}this._fixMoreSizeIssues();
var c=this.get_element();
if(c.style.height!="auto"){c.style.height=d;
}},_fixIeHeight:function(f,d){if("CSS1Compat"==document.compatMode){var c=(f.offsetHeight-parseInt(d));
if(c>0){var e=(parseInt(f.style.height)-c);
if(e>0){f.style.height=e+"px";
}}}},_fixMoreSizeIssues:function(){var m=(this.get_contentAreaMode()==b.EditorContentAreaMode.Div);
var c=this.get_autoResizeHeight();
var h=this.get_element();
if(h.style.position=="absolute"){h.style.position="";
}if(c&&!m){return;
}else{if(c&&this._isFullScreen!=true&&$telerik.isIE){window.setTimeout(Function.createDelegate(this,function(){var s=this.get_mainTable();
h.style.height="auto";
if(""==h.style.minHeight){h.style.minHeight=s.offsetHeight+"px";
}if(""==h.style.minWidth){h.style.minWidth=s.offsetWidth+"px";
}if(h.style.width.indexOf("%")<0){h.style.width=(s.offsetWidth-6)+"px";
}var q=$get(this.get_id()+"Center");
var r=this.get_contentAreaElement();
r.style.height="auto";
if(""==r.style.minHeight){r.style.minHeight=q.offsetHeight+"px";
}if(""==r.style.minWidth){r.style.minWidth=(q.offsetWidth-12)+"px";
}}),0);
}else{var n=this.get_mainTable();
if(n.offsetWidth==0){return;
}var d=$get(this.get_id()+"Center");
var l=this.get_mode()!=b.EditModes.Html?this.get_contentAreaElement():this._getTextIframe();
if(d.style.height!="100%"){d.style.height="100%";
}if(this._isFullScreen){h.style.minHeight="";
h.style.minWidth="";
if($telerik.isOpera){l.style.height="0px";
var p=d.offsetHeight-2;
l.style.height=p+"px";
d.style.height=p+"px";
}if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){l.style.height=($telerik.isIE)?"100%":l.parentNode.offsetHeight+"px";
}}else{if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){l.style.position="absolute";
var g=d.offsetHeight-2;
l.style.position="relative";
if(g&&g>0){l.style.height=g+"px";
}if(l.offsetHeight>0){if($telerik.isIE&&!$telerik.isIE9Mode){n.style.height=(parseInt(n.style.height)-6)+"px";
}else{var o=this.get_mode();
if(o==Telerik.Web.UI.EditModes.Html){var j=($telerik.isIE||$telerik.isOpera)?3:4;
n.style.height=(parseInt(n.style.height)-j)+"px";
}else{n.style.height=this.get_element().style.height;
}}l.style.height=(l.offsetHeight-12)+"px";
}}else{if(!$telerik.isIE){l.style.position="absolute";
var k=d.offsetHeight;
l.style.position="";
if(k<160&&d.offsetHeight>k+2){d.style.height=(k-6)+"px";
}}if($telerik.isOpera){l.style.height="100%";
if(d.style.height=="100%"){d.style.height=(2*d.offsetHeight-d.parentNode.parentNode.offsetHeight-13)+"px";
}}}if(""==h.style.minHeight){h.style.minHeight=n.style.height;
}if(""==h.style.minWidth){h.style.minWidth=n.offsetWidth+"px";
}if(h.style.width.indexOf("%")<0){h.style.width=n.offsetWidth+"px";
}if(m&&c){h.style.height="auto";
var e=$get(this.get_id()+"Center");
var f=this.get_contentAreaElement();
f.style.height="auto";
if(""==f.style.minHeight){f.style.minHeight=e.offsetHeight+"px";
}if(""==f.style.minWidth){f.style.minWidth=(e.offsetWidth-12)+"px";
}}}}}},setSize:function(h,g){var c=$telerik.isMobileSafari&&this.get_contentAreaMode()==b.EditorContentAreaMode.Iframe&&this._contentAreaWrapper;
if(c){this._contentAreaWrapper.style.height="1px";
}var j=parseInt(h);
var d=parseInt(g);
var f=this.get_mainTable();
if(f&&f.style){f.style.height="";
var e=f.parentNode;
e.style.width=j+"px";
e.style.height=d+"px";
if($telerik.isIE){f.style.height=d+"px";
this._fixIeHeight(f,d);
}else{f.style.height="100%";
}}if(c){this._contentAreaWrapper.style.height=$get(this.get_id()+"Center").offsetHeight+"px";
}},pasteHtml:function(h,g,f,e,d){if(!this.get_editable()){return;
}if(h.match(/^<script/ig)){h="<span id='_rdEditor_temp'>&nbsp;</span>"+h;
}var c=new b.EditorCommandEventArgs(g,null,h);
if(false==this._executeCommandEvent("pasteHtml",g,c)){return;
}if(h!=c.get_value()){h=c.get_value();
}var j=this.getLocalizedString(g);
var k=this.get_mode();
if(b.EditModes.Design==k){this.setFocus();
this.executeCommand(new b.Editor.PasteHtmlCommand(j,this.get_contentWindow(),h,f,this),null,d);
if(e!=false){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}}else{if(b.EditModes.Html==k){var p=this._getTextArea();
if(this.isIE){p.setActive();
var o=document.selection.createRange();
o.text=h;
}else{if(p.setSelectionRange){var n=p.selectionStart;
var m=p.selectionEnd;
var l=h;
p.value=p.value.substring(0,n)+l+p.value.substring(m);
p.setSelectionRange(n+l.length,n+l.length);
this.setFocus();
}}}}a("#_rdEditor_temp",this.get_document()).remove();
},fire:function(f,c){if(f!="Copy"){this._saveTypedContent(true,"editor.fire Copy executing");
}if(false==this._executeCommandEvent("commandExecuting",f,c)){return;
}if(this._optionalIgnoredTools&&!this._optionalIgnoredTools[f]){return;
}this.setActive();
this._pendingTextTypeCmd=null;
var g=b.Editor.CommandList[f];
var m=false;
if(g){m=(false!=g(f,this,c));
}else{alert("The command "+f+" is not implemented yet.");
}if(m){if(!$telerik.isOpera){this.setFocus();
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}if((this.get_enableTrackChanges()||this.get_enableComments())&&(f=="Copy"||f=="Cut")){var j=Telerik.Web.UI.Editor.TrackChangesSelection.locateElementInRange(this.getSelection().getRange(),"placeholder");
var l=(j.inRange&&j.rangeType=="Selectable")?"PlaceHolder":"";
var k=this.createRestorePoint();
var d={contentFromEditor:true,contentHTML:Telerik.Web.UI.Editor.Utils.getClipboardAsHtml(),fromSelectionType:l};
this.set_clipboardData(d);
k.select();
}this._executeCommandEvent("commandExecuted",f,c);
try{if(f=="Undo"&&!$telerik.isIE&&this.get_contentArea().innerHTML.toLowerCase().trim()=="<br>"){this.get_contentArea().innerHTML="<br>";
}}catch(h){}},_executeCommandEvent:function(e,d,c){if(!c){c=new b.EditorCommandEventArgs(d);
}this.raiseEvent(e,c);
return !(c.get_cancel&&c.get_cancel());
},_onWindowResize:function(){var c=this._getViewportBounds();
this.setSize(c.width,c.height,false);
},_registerWindowResizeHandler:function(c){if(c){this._onWindowResizeDelegate=Function.createDelegate(this,this._onWindowResize);
$addHandler(window,"resize",this._onWindowResizeDelegate);
}else{if(this._onWindowResizeDelegate){$removeHandler(window,"resize",this._onWindowResizeDelegate);
this._onWindowResizeDelegate=null;
}}},_getViewportBounds:function(){var c=$telerik.getClientBounds();
var d=document.documentElement.scrollLeft||document.body.scrollLeft;
var e=document.documentElement.scrollTop||document.body.scrollTop;
c.scrollLeft=d;
c.scrollTop=e;
return c;
},_handleParentsWithOverflow:function(j){var c,h;
if(false==j){if(!this._parentsWithOverflow){return;
}c=this._parentsWithOverflow;
var e=c.length;
for(var d=0;
d<e;
d++){var f=c[d];
if(f[0]){h=f[0].style;
h.overflow=f[1];
h.height=f[2];
h.tableLayout=f[3];
h.position=f[4];
}}this._parentsWithOverflow=null;
}else{this._parentsWithOverflow=[];
c=this._parentsWithOverflow;
var g=this.get_element().parentNode;
while(g&&g.tagName!="BODY"){h=g.style;
c[c.length]=[g,h.overflow,h.height,h.tableLayout,h.position];
h.position="static";
h.tableLayout="auto";
h.overflow="visible";
h.height="auto";
g=g.parentNode;
}}},isFullScreen:function(){return this._isFullScreen;
},_disableBodyScroll:function(){this._preFullScreenBodyStyle=[document.body.scroll,document.body.style.margin,""];
document.body.scroll="no";
document.body.style.margin="0px";
if(document.documentElement){this._preFullScreenBodyStyle[2]=document.documentElement.style.overflow;
document.documentElement.style.overflow="hidden";
}this._handleParentsWithOverflow(true);
},_enableBodyScroll:function(){if(!this._preFullScreenBodyStyle){return;
}document.body.scroll=this._preFullScreenBodyStyle[0];
try{document.body.style.margin=this._preFullScreenBodyStyle[1];
}catch(c){}document.documentElement.style.overflow=this._preFullScreenBodyStyle[2];
this._handleParentsWithOverflow(false);
this._preFullScreenBodyStyle=null;
},toggleScreenMode:function(){var d=this;
var f=d.get_element();
if(!d._isFullScreen){this._disableBodyScroll();
var g=f.style.height;
if(g=="auto"||isNaN(parseInt(g))){g=f.offsetHeight+"px";
}var h=f.style.width;
if(h=="auto"||isNaN(parseInt(h))){h=f.offsetWidth+"px";
}d._preFullScreenBounds={width:h,height:g};
d._onWindowResize();
if($telerik.isOpera){f.style.position="fixed";
f.style.left="0px";
f.style.top="0px";
}else{d._preFullScreenBrowserRect=d._getViewportBounds();
var e=$telerik.getLocation(f);
b.Editor.Utils.restoreBrowserPosition(e.x,e.y);
}d._isFullScreen=true;
d._registerWindowResizeHandler(true);
}else{d._registerWindowResizeHandler(false);
this._enableBodyScroll();
d._isFullScreen=false;
var c=d._preFullScreenBounds;
d.setSize(c.width,c.height,false);
f.style.width=c.width;
f.style.height=c.height;
if($telerik.isOpera){f.style.position="";
f.style.left="";
f.style.top="";
}else{var j=d._preFullScreenBrowserRect;
b.Editor.Utils.restoreBrowserPosition(j.scrollLeft,j.scrollTop);
}}d._updateEditorSize(f.style.height);
d.set_editable(true);
d.setFocus();
var k=d.getToolByName("ToggleScreenMode");
if(k){k.setOn(d._isFullScreen);
}this.raiseEvent("toggleScreenMode",Sys.EventArgs.Empty);
},validateMaxTextLength:function(g){var d=this.get_maxTextLength();
if(d>0){if(!g){g="";
}var c=this.get_text()+g;
var f=/[!\.?;,:&_\-\\{\}\[\]\(\)~#'"]/g;
c=c.replace(f,"");
var h=/(^\s+)|(\s+$)/g;
c=c.replace(h,"");
var e=/(\r\n)+/g;
c=c.replace(e,"");
return d>=c.length;
}return true;
},validateMaxHtmlLength:function(c){var d=this.get_maxHtmlLength();
if(d>0){if(!c){c="";
}return d>=this.get_html(true).length+c.length;
}return true;
},displayMaxHtmlLengthErrorMessage:function(){alert(this.get_localization()["exceededhtmllength"]+" "+this.get_maxHtmlLength()+". "+this.get_localization()["reducetheconentlength"]+".");
},displayMaxTextLengthErrorMessage:function(){alert(this.get_localization()["exceededtextlength"]+" "+this.get_maxTextLength()+". "+this.get_localization()["reducetheconentlength"]+".");
},get_contentHiddenTextareaValue:function(){if(this._contentHiddenTextarea){return b.Editor.Utils.decodePostbackContent(this._contentHiddenTextarea.value);
}else{return"";
}},set_contentHiddenTextareaValue:function(c){this._contentHiddenTextarea.value=b.Editor.Utils.encodePostbackContent(c);
},get_localization:function(){return this._localization;
},_createIframe:function(){var c=document.createElement("iframe");
c.frameBorder="0";
c.src="javascript:'<html></html>';";
var d=c.style;
d.width="100%";
d.height="100%";
d.margin="0px";
d.padding="0px";
return c;
},get_contentAreaElement:function(){if((this.get_contentAreaMode()==b.EditorContentAreaMode.Iframe)&&(this._contentAreaElement&&(!this._contentAreaElement.contentWindow||!this._contentAreaElement.contentWindow.document))){if(this._contentAreaElement.parentNode){this._contentAreaElement.parentNode.removeChild(this._contentAreaElement);
}this._contentAreaElement=null;
}if(!this._contentAreaElement){var c;
if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){c=document.createElement("div");
c.setAttribute("id",this.get_id()+"_contentDiv");
c.className="reContentArea";
}else{c=this._createIframe();
if(!$telerik.isIE){c.innerHTML="Your browser does not support inline frames or is currently configured not to display inline frames.";
}c.setAttribute("id",this.get_id()+"_contentIframe");
}c.setAttribute("title","Rich text editor with ID "+this.get_id());
this._contentAreaElement=c;
if(this.get_enableAriaSupport()){this._contentAreaElement.setAttribute("role","textbox");
}}return this._contentAreaElement;
},get_shortCutManager:function(){return this._shortCutManager;
},get_filtersManager:function(){return this._filtersManager;
},get_commandsManager:function(){return this._commandsManager;
},get_modulesManager:function(){return this._modulesManager;
},get_useClassicDialogs:function(){return this.get_dialogOpener().get_useClassicDialogs();
},set_useClassicDialogs:function(c){this.get_dialogOpener().set_useClassicDialogs(c);
},get_qualifiedSkin:function(){var c=this.get_skin();
return"RadEditor."+c;
},_applyAriaSupport:function(){this.get_element().setAttribute("role","presentation");
var j=this.get_toolContainer();
this._applyAriaForLayoutTables();
var f;
if(j){j.setAttribute("role","toolbar");
var k=j.getElementsByTagName("ul");
for(f=0;
f<k.length;
f++){k[f].setAttribute("role","presentation");
}}var g=this._getModeButtonsWrapper();
g.setAttribute("role","presentation");
var c=g.getElementsByTagName("*");
for(f=0;
f<c.length;
f++){var d=c[f];
var h=d.tagName.toLowerCase()=="a"?"button":"presentation";
d.setAttribute("role",h);
}var e=this._contentHiddenTextarea;
if(e){e.setAttribute("aria-hidden","true");
}},_applyAriaForLayoutTables:function(){var f=this.get_mainTable();
if(f){f.setAttribute("role","presentation");
}var c=$get(this.get_id()+"_BottomTable");
if(c){c.setAttribute("role","presentation");
}var k=f.getElementsByTagName("tr");
for(var d=0;
d<k.length;
d++){var h=k[d];
h.setAttribute("role","presentation");
var g=h.getElementsByTagName("td");
for(var e=0;
e<g.length;
e++){g[e].setAttribute("role","presentation");
}}},_updateHiddenTextarea:function(){var k=this.get_html(true);
if(this.get_mode()==b.EditModes.Html&&this.get_contentFilters()!=b.EditorFilters.None){if(!this._textSubmitFrame){var g=this._createIframe();
if(g){this._textSubmitFrame=g;
var h=this._textSubmitFrame.style;
h.position="absolute";
h.height="0px";
h.width="0px";
this.get_contentAreaElement().parentNode.appendChild(this._textSubmitFrame);
}}if(this._textSubmitFrame){var e=this._textSubmitFrame.contentWindow.document;
var f=this.get_filtersManager().getDesignContent(k);
var j=-1!=f.toLowerCase().indexOf("<html");
var c=j?this._extractDoctype(f):"";
if(!$telerik.isIE6||window.location.protocol!="https:"){e.designMode="off";
}var l=e.open("text/html","replace");
var m=j?f:"<html><head><title>New Document</title></head><body>"+f+"</body></html>";
if(typeof(l)=="undefined"){l=e;
}l.write(m);
l.close();
if(l.body){this.get_filtersManager().getDesignContentDom(l.body);
var d=j?l.getElementsByTagName("HTML")[0]:l.body;
k=c+this.get_filtersManager().getHtmlContent(d);
k=this._stripBodyTagFromContent(k);
}}}if(this.get_mode()==b.EditModes.Preview){Telerik.Web.UI.Editor.Utils.restoreTargetsAfterPreview(this);
}this.set_contentHiddenTextareaValue(k);
return k;
},_stripBodyTagFromContent:function(d){d=d.trim();
var e=(this.get_contentAreaMode()==b.EditorContentAreaMode.Div)?"<div":"<body";
var c=d.match(new RegExp(e+"[^>]*>","i"));
if(c&&c.index==0){d=d.substring(d.indexOf(">")+1,d.length-2-e.length);
d=d.trim();
}return d;
},_registerClientValidation:function(){if(typeof(Page_ClientValidate)=="function"){var c=Page_ClientValidate;
Page_ClientValidate=Function.createDelegate(this,function(f){var d=this.get_element();
if(d){var e=this._updateHiddenTextarea();
d.value=e;
d.setAttribute("value",e);
}d=null;
return c(f);
});
}},saveContent:function(d,c){if(this._saveContentDelegate){var f=null;
if(!this.validateMaxHtmlLength()){f=1;
}else{if(!this.validateMaxTextLength()){f=2;
}}if(f){if(c){if(c.set_cancel){c.set_cancel(true);
}}else{if(f==1){this.displayMaxHtmlLengthErrorMessage();
}else{if(f==2){this.displayMaxTextLengthErrorMessage();
}}}$telerik.cancelRawEvent(d);
return false;
}else{this.raiseEvent("submit",Sys.EventArgs.Empty);
this._updateHiddenTextarea();
}}},_registerPostBackHandlers:function(){this._saveContentDelegate=Function.createDelegate(this,this.saveContent);
var d=this._contentHiddenTextarea.form;
if(d){$telerik.addExternalHandler(d,"submit",this._saveContentDelegate);
}if(typeof(__doPostBack)!="undefined"){var j=this._saveContentDelegate;
var g=__doPostBack;
__doPostBack=function(m,l){j();
g(m,l);
};
}if(typeof(Sys.WebForms)!="undefined"&&typeof(Sys.WebForms.PageRequestManager)!="undefined"){var f=Sys.WebForms.PageRequestManager.getInstance();
if(f){if(null!=f._originalDoPostBack){var k=this._saveContentDelegate;
var h=f._originalDoPostBack;
f._originalDoPostBack=function(m,l){k();
h(m,l);
};
}if(null!=f._onSubmitStatements&&!$telerik.isIE){var e=this;
var c={};
Array.add(f._onSubmitStatements,function(){var l=e.saveContent(null,c);
return(l!=undefined)?l:true;
});
}else{f.add_initializeRequest(this._saveContentDelegate);
}}f=null;
}d=null;
},toggleEnhancedEdit:function(d){if(this.get_contentAreaMode()==b.EditorContentAreaMode.Div){var c=this.get_contentArea();
if(typeof(d)=="undefined"||null==d){d=(c.className.indexOf("reContentAreaToggle")>-1)?false:true;
}if(d){Sys.UI.DomElement.addCssClass(c,"reContentAreaToggle");
}else{Sys.UI.DomElement.removeCssClass(c,"reContentAreaToggle");
}this.updateToggleTableBorderToolState(d);
return d;
}else{if($telerik.isSafari&&typeof(d)!="undefined"&&false==this.disableContentAreaStylesheet(d)){this.get_contentWindow().setTimeout(Function.createDelegate(this,function(){this.disableContentAreaStylesheet(d);
}),200);
}else{return this.disableContentAreaStylesheet(d);
}}},disableContentAreaStylesheet:function(e){var d=this.get_document();
if(!d||!d.getElementById){return false;
}var c=d.getElementById(this._getUniqueStyleSheetId(0));
if(c){if(e==null){e=c.disabled;
}c.disabled=!e;
this.updateToggleTableBorderToolState(e);
return e;
}else{return false;
}},updateToggleTableBorderToolState:function(d){var c=this.getToolByName("ToggleTableBorder");
if(c&&c.setOn){c.setOn(d);
}},pasteHyperLink:function(h,d){var c=this.getSelection().getParentElement();
var g=c.parentNode;
if(c!=null&&c.tagName=="A"&&($telerik.isFirefox||($telerik.isIE&&c.style.cssText!=""&&!((g.tagName=="FONT"||g.tagName=="SPAN")&&g.children.length==1)))){c.parentNode.removeChild(c);
}else{if($telerik.isSafari&&g&&g.nodeName=="A"){g.parentNode.removeChild(g);
}else{this.fire("Unlink");
}}var e=b.Editor.Utils.getOuterHtml(h);
if($telerik.isIE){e=this._replaceHeadingInsideLink(e);
if(h.getElementsByTagName("P").length==1){e=this.replaceParagraphAndAnchor(e);
var f=c;
while(f){if(f.tagName=="P"){f.parentNode.removeChild(f);
break;
}f=f.parentNode;
}}}e=e.replace(/<br[^>]*><\/a>$/ig,"</a><br />");
this.pasteHtml(e,d);
},replaceParagraphAndAnchor:function(c){var d=c+"";
d=d.replace(/(<A[^>]*>)\s*(<P[^>]*>)/ig,"$2$1");
d=d.replace(/(<\/P[^>]*>)\s*(<\/A[^>]*>)/ig,"$2$1");
return d;
},_replaceHeadingInsideLink:function(c){var d=c+"";
d=d.replace(/(<A[^>]*>)\s*(<h\d{1}[^>]*>)/ig,"$2$1");
d=d.replace(/(<\/h\d{1}[^>]*>)\s*(<\/A[^>]*>)/ig,"$2$1");
return d;
},_saveTypedContent:function(d,c){if(this._pendingTextTypeCmd){this._pendingTextTypeCmd.update();
}if(true!=d){this._pendingTextTypeCmd=null;
}},_attachBodyHandlers:function(d){var c=null;
if(this.get_document()&&this.get_contentArea()){c=this.get_contentArea();
}if(!c){return;
}if(d){this._onResizeStartDelegate=Function.createDelegate(this,this._onResizeStart);
this._onResizeEndDelegate=Function.createDelegate(this,this._onResizeEnd);
this._onDropDelegate=Function.createDelegate(this,this._onDrop);
$telerik.addExternalHandler(c,"resizestart",this._onResizeStartDelegate);
$telerik.addExternalHandler(c,"resizeend",this._onResizeEndDelegate);
$telerik.addExternalHandler(c,"drop",this._onDropDelegate);
if($telerik.isIE||$telerik.isFirefox){this._onDragEndDelegate=Function.createDelegate(this,this._onDragEnd);
this._onDragStartDelegate=Function.createDelegate(this,this._onDragStart);
$telerik.addExternalHandler(c,"dragend",this._onDragEndDelegate);
$telerik.addExternalHandler(c,"dragstart",this._onDragStartDelegate);
}this._onPasteDelegate=Function.createDelegate(this,this._onPaste);
this._onBeforePasteDelegate=Function.createDelegate(this,this._onBeforePaste);
if($telerik.isIE7){$telerik.addExternalHandler(c,"beforepaste",this._onBeforePasteDelegate);
}if(($telerik.isIE&&!$telerik.isIE7)||$telerik.isOpera||$telerik.isSafari){$telerik.addExternalHandler(c,"paste",this._onPasteDelegate);
}if($telerik.isFirefox){$telerik.addExternalHandler(c,"paste",this._onBeforePasteDelegate);
}}else{if(this._onResizeStartDelegate){$telerik.removeExternalHandler(c,"resizestart",this._onResizeStartDelegate);
}if(this._onResizeEndDelegate){$telerik.removeExternalHandler(c,"resizeend",this._onResizeEndDelegate);
}if(this._onDropDelegate){$telerik.removeExternalHandler(c,"drop",this._onDropDelegate);
}if(this._onDragEndDelegate){$telerik.removeExternalHandler(c,"dragend",this._onDragEndDelegate);
}if(this._onDragStartDelegate){$telerik.removeExternalHandler(c,"dragstart",this._onDragStartDelegate);
}if(this._onBeforePasteDelegate&&$telerik.isIE7){$telerik.removeExternalHandler(c,"beforepaste",this._onBeforePasteDelegate);
}if(this._onPasteDelegate&&(($telerik.isIE&&!$telerik.isIE7)||$telerik.isOpera||$telerik.isSafari)){$telerik.removeExternalHandler(c,"paste",this._onPasteDelegate);
}if(this._onBeforePasteDelegate&&($telerik.isFirefox)){$telerik.removeExternalHandler(c,"paste",this._onBeforePasteDelegate);
}this._onResizeStartDelegate=null;
this._onResizeEndDelegate=null;
this._onDropDelegate=null;
this._onDragEndDelegate=null;
this._onDragStartDelegate=null;
this._onPasteDelegate=null;
this._onBeforePasteDelegate=null;
}},_initEvents:function(){var c=this;
if(!this.isIE){this.attachEventHandler("keypress",function(f){if(c._onKeyPressed(f)){f.preventDefault();
return false;
}});
if($telerik.isSafari){this.attachEventHandler("click",Function.createDelegate(this,function(f){if(f.srcElement.tagName=="IMG"){this.selectElement(f.srcElement);
}}));
}if(this.isFirefox&&this.get_contentAreaMode()!=b.EditorContentAreaMode.Div){this.attachEventHandler("click",function(f){if(!c.get_editable()){return;
}window.setTimeout(function(){c.set_editable(true);
c.setFocus();
},100);
});
}}this.attachEventHandler("keydown",function(f){if(c.isOpera){return c._onKeyDown(f);
}else{c._onKeyDown(f);
}if($telerik.isSafari){var h=c._shortCutManager.isShortCutHit(f);
if(null!=h){var g=h.get_name();
switch(g){case"Bold":case"Italic":case"Underline":$telerik.cancelRawEvent(f);
break;
}}}});
this.attachEventHandler("onmousedown",function(){c._saveTypedContent(false,"Saving typed content onmousedown");
});
this.attachEventHandler("keyup",Function.createDelegate(this,this._onKeyUp));
var d=Function.createDelegate(this,function(f){if(this.get_enableTrackChanges()||this.get_enableComments()){this._setCursorPosition();
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
});
this.attachEventHandler("mouseup",d);
$telerik.addExternalHandler(document.body,"dragend",Function.createDelegate(this,this._onDocumentDragEnd));
this._attachBodyHandlers(true);
},_setCursorPosition:function(){var c=0;
var e=this;
if(document.selection){try{var f=e.get_contentWindow().document.selection.createRange();
f.moveStart("character",-e.get_text().length);
c=f.text.length;
}catch(d){}}this._cursorPosition=c;
this._setCursorMoving(true);
},_setCursorMoving:function(c){this._isCursorMoving=c;
},_getCursorMoving:function(){return this._isCursorMoving;
},_onKeyDown:function(d){var j=d.keyCode;
var c=this.get_contentAreaMode();
if(c==b.EditorContentAreaMode.Iframe&&$telerik.isMobileSafari){this.setFocus();
}switch(j){case 46:if($telerik.isOpera&&$telerik.OperaVersion<11){this.get_document().execCommand("Delete");
this.get_contentArea().contentEditable=true;
if(c!=b.EditorContentAreaMode.Div){this.get_document().designMode="on";
}this.get_contentArea().focus();
return $telerik.cancelRawEvent(d);
}case 8:this._shortcutHit=false;
if(this.getSelectionHtml()){this._saveTypedContent(false,"Saving typed content before allowing delete to proceed..");
var k=this.getLocalizedString("Typing");
if(this.get_enableTrackChanges()){k=Telerik.Web.UI.Editor.TrackChangesCommandStrings.Delete;
}this._pendingTextTypeCmd=new b.Editor.TextTypeCommand(k,this.get_contentWindow(),this);
this._hasDeleteExecuted=true;
}if(this.isIE){var f=this;
var p=function(){var e=f.getSelectedElement();
if(e&&e.tagName=="EMBED"){e.setAttribute("hidden","true");
e.setAttribute("id","FileToDelete");
window.setTimeout(function(){var x=f.get_document().getElementById("FileToDelete");
if(x.parentNode&&x.parentNode.removeChild){x.parentNode.removeChild(x);
}},100);
$telerik.cancelRawEvent(d);
return true;
}};
var n=p();
if(n){return false;
}try{var o=f.get_document().selection.createRange();
var m=null;
if(o&&o.duplicate){m=o.duplicate();
}if(8==d.keyCode){o.moveStart("character",-1);
}else{o.moveEnd("character",1);
}if(this.get_enableTrackChanges()){this.addToStack(Telerik.Web.UI.Editor.TrackChangesCommandStrings.Delete);
}if(o.parentElement().tagName=="EMBED"){o.select();
p();
if(m&&m.select){m.select();
}}}catch(g){}var q=new b.Editor.Selection(this.get_contentWindow());
if(q&&q.isControl()){var h=false,r=null;
if(this.get_enableTrackChanges()||this.get_enableComments()){r=q.getParentElement();
if(r){if(r.getAttribute("Name")!=null){if(r.getAttribute("Name").indexOf("_wp")==0||r.getAttribute("Name").indexOf("forCaption")==0){h=true;
}}}}var s=q.getRange();
s.execCommand("Delete");
if(h){var w=new b.Editor.Selection(this._contentWindow);
r=w.getParentElement();
if(r){if(r.isContentEditable){r.removeNode();
}}}$telerik.cancelRawEvent(d);
}}if(this.get_enableTrackChanges()||this.get_enableComments()){if(j==8||j==46){var v=this.getToolByName("AddComment");
if(v){v.set_enabled(false);
}}}return;
}var u=d.target?d.target:d.srcElement;
if(u&&"INPUT"!=u.tagName){var t=this._shortCutManager.isShortCutHit(d);
if(null!=t&&t.get_name()=="Copy"){this._shortcutHit=false;
return;
}this._shortcutHit=(null!=t);
if(this._shortcutHit){this.fire(t.get_name());
}else{if(b.Editor.Utils.isCursorMovingKey(d.keyCode)){if(!this._hasCursorMoved){this._saveTypedContent(false,"Saving typed content before letting the cursor move");
}this._hasCursorMoved=true;
return;
}if(32==d.keyCode||13==d.keyCode||!b.Editor.Utils.isSystemKey(d.keyCode)){if(this._hasCursorMoved){this._pendingTextTypeCmd=new b.Editor.TextTypeCommand(this.getLocalizedString("Typing"),this.get_contentWindow(),this);
this.executeCommand(this._pendingTextTypeCmd);
this._hasCursorMoved=false;
return;
}if(!this._pendingTextTypeCmd){this._pendingTextTypeCmd=new b.Editor.TextTypeCommand(this.getLocalizedString("Typing"),this.get_contentWindow(),this);
this.executeCommand(this._pendingTextTypeCmd);
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}}}if(this._shortcutHit){if($telerik.isIE||$telerik.isSafari){var l=t.get_name();
if(this.get_enableTrackChanges()||this.get_enableComments()){if(l=="Enter"){$telerik.cancelRawEvent(d);
return;
}if(l=="Paste"||l=="Cut"){if(!this.get_lockFormatting()||Telerik.Web.UI.Editor.CommandList.CopyFromEditor(this)){if(this._origCutRange!=null){this._origCutRange.select();
this._origCutRange=null;
}return true;
}}}else{if(l=="Cut"||l=="Paste"){return;
}}$telerik.cancelRawEvent(d);
}}}},_onKeyUp:function(d){if(this.get_enableTrackChanges()||this.get_enableComments()){if(this.get_copyCommandHit()){var f=Telerik.Web.UI.Editor.TrackChangesSelection.locateElementInRange(this.getSelection().getRange(),"placeholder");
var h=(f.inRange&&f.rangeType=="Selectable")?"PlaceHolder":"";
var g=this.createRestorePoint();
var c={contentFromEditor:true,contentHTML:Telerik.Web.UI.Editor.Utils.getClipboardAsHtml(),fromSelectionType:h};
this.set_clipboardData(c);
g.select();
}}if(this._hasDeleteExecuted){if(this._pendingTextTypeCmd){this.executeCommand(this._pendingTextTypeCmd);
}this._pendingTextTypeCmd=null;
this._hasDeleteExecuted=false;
return;
}if(this._pendingTextTypeCmd){return;
}if(this._pendingCutPasteCommand){this.executeCommand(this._pendingCutPasteCommand);
this._pendingCutPasteCommand=null;
}if(this._shortcutHit){return false;
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
},_onKeyPressed:function(f){if($telerik.isSafari&&this.get_newLineMode()!=Telerik.Web.UI.EditorNewLineModes.Br){var c=this.get_contentArea();
var g=c.childNodes.length,j,d;
if(g==0||(g==1&&c.firstChild.nodeName=="BR")){d=this.get_document();
j=d.createElement("P");
j.innerHTML="<br />";
c.innerHTML="";
c.appendChild(j);
this.selectElement(j);
this.getSelection().collapse();
}else{var o=this.get_contentWindow().getSelection();
var m=o&&o.rangeCount?o.getRangeAt(0):null;
var q=m?m.commonAncestorContainer:null;
if(q){if(q.nodeType==1&&q.nodeName=="DIV"){q=q.firstChild;
}var l=q.parentNode;
var k=null;
var n=[m.startContainer,m.startOffset,m.endContainer,m.endOffset];
if(f.keyCode==13&&l.nodeName=="DIV"&&l.childNodes.length==1&&((q.nodeType==3)||(q.nodeType==1&&q.nodeName=="BR"))){k=l.ownerDocument.createElement("p");
if(l.parentNode.lastchild==l){l.parentNode.appendChild(k);
}else{l.parentNode.insertBefore(k,l.nextSibling);
}k.appendChild(l);
Telerik.Web.UI.Editor.Utils.removeNode(l);
l=null;
}if(l&&l.nodeName=="BODY"&&q.nodeType==3){k=l.ownerDocument.createElement("p");
if(l.lastchild==q){l.appendChild(k);
}else{l.insertBefore(k,q.nextSibling);
}k.appendChild(q);
var h=k.nextSibling;
if(h&&h.nodeType==1&&h.nodeName=="BR"){k.parentNode.removeChild(h);
}h=null;
}else{if(l&&l.nodeName=="HTML"&&l.lastChild.innerHTML==""){d=l.ownerDocument;
j=d.createElement("P");
j.innerHTML="<br />";
d.body.appendChild(j);
this.selectElement(j);
this.getSelection().collapse();
}}if(k){o.removeAllRanges();
m=k.ownerDocument.createRange();
m.setStart(n[0],n[1]);
m.setEnd(n[2],n[3]);
o.addRange(m);
}}}}if(!this._pendingTextTypeCmd){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}if(this._shortcutHit&&!this._pendingCutPasteCommand){return true;
}},_onPaste:function(f){if($telerik.isSafari&&!b.Editor.Utils.containsHtmlAtClipboard(f)){this._onBeforePaste(f);
return;
}if(this.get_stripFormattingOptions()==b.StripFormattingOptions.NoneSupressCleanMessage){return;
}var g;
if($telerik.isIE){g=this.getSelection().getRange();
}var d=b.Editor.Utils.getClipboardAsHtml(this,f);
var h=(this.get_contentFilters()&b.EditorFilters.RemoveScripts)>0;
var c=b.Editor.Utils.cleanPastedContent(d,this.get_stripFormattingOptions(),this.get_localization()["askwordcleaning"],h);
if(c){var e=this;
window.setTimeout(function(){if($telerik.isIE){e.getSelection().selectRange(g);
}e.pasteHtml(c,"Paste");
},5);
return $telerik.cancelRawEvent(f);
}return true;
},_onBeforePaste:function(g){if(this.get_enableTrackChanges()||this.get_enableComments()){var d=this.get_document();
if(d){if(d.body!=null){this._originalScrollTop=d.body.scrollTop;
}}}if(!g){return;
}if(this.get_stripFormattingOptions()==b.StripFormattingOptions.NoneSupressCleanMessage){return;
}var f=new b.Editor.GenericCommand("Paste",this.get_contentWindow(),this);
var j=this.getSelection().getRange();
var k=this.createRestorePoint();
var h=$telerik.isSafari?this.get_document():document;
var m=b.Editor.Utils.getPasteContainer(h);
m.innerHTML="";
if(this.get_contentAreaMode()!=b.EditorContentAreaMode.Div){var e,l;
if(m.setActive){m.setActive();
}else{if($telerik.isFirefox){e=this.getSelection();
l=e.getRange();
if(l.selectNodeContents){l.selectNodeContents(m);
}e.selectRange(l);
}else{if($telerik.isSafari){m.innerHTML="&nbsp;";
e=this.getSelection();
l=this.get_document().createRange();
l.setStart(m.firstChild,0);
l.setEnd(m.firstChild,1);
e.selectRange(l);
}}}}var c=Function.createDelegate(this,this._onAfterPaste);
window.setTimeout(function(){c(f,j,k,m);
},0);
},_onAfterPaste:function(f,h,k,l){if(this.get_enableTrackChanges()||this.get_enableComments()){var c=this.get_clipboardData().contentHTML;
if(l.innerHTML==""&&c){l.innerHTML=c;
}}var e=l.innerHTML;
if($telerik.isSafari){var g=e.length;
e=e.replace(/<div[^>]+id=\"radePasteHelper\"[^>]*><br><\/div>/gi,"<br/>");
e=e.replace(/<div[^>]+id=\"radePasteHelper\"[^>]*>(.*?)<\/div>/gi,"$1<br/>");
if(g>e.length&&e.endsWith("<br/>")){e=e.substring(0,e.length-5);
}}var j=(this.get_contentFilters()&b.EditorFilters.RemoveScripts)>0;
var d=b.Editor.Utils.cleanPastedContent(e,this.get_stripFormattingOptions(),this.get_localization()["askwordcleaning"],j);
if($telerik.isSafari){Telerik.Web.UI.Editor.Utils.clearPasteContainer();
}this._pendingCutPasteCommand=null;
if($telerik.isIE){if(this.get_enableTrackChanges()||this.get_enableComments()){editor.get_document().body.scrollTop=this._originalScrollTop;
this._originalScrollTop=null;
}this.getSelection().selectRange(h);
}else{if(k){k.select();
}}if(d){this.pasteHtml(d,"Paste");
if($telerik.isSafari){this.getSelection().collapse(false);
}this.executeCommand(f);
}},_onResizeStart:function(c){var f=this.getSelectedElement();
if(f==c.srcElement){var d=this.get_localization()["ResizeCommand"]||"Resize";
this._pendingResizeCmd=new b.Editor.GenericCommand(d,this.get_contentWindow(),this);
}},onResizing:function(c){if($telerik.isMobileSafari&&this._contentAreaWrapper){this._contentAreaWrapper.style.height=c.height+"px";
}},_onResizeEnd:function(c){if(this._pendingResizeCmd){this.executeCommand(this._pendingResizeCmd);
}},_onDragStart:function(c){b.Editor.Utils.storeOriginalPathsAndAttributes(this.get_contentArea());
if($telerik.isFirefox){return;
}var h=this.get_localization()["MoveCommand"]||"Move";
this._pendingMoveCommand=new b.Editor.GenericCommand(h,this.get_contentArea(),this);
this._startRange=null;
if(!c.ctrlKey&&!c.ctrlLeft){this._startRange=this.get_contentWindow().document.selection.createRange();
if(this._startRange.length){var g=this.get_contentWindow().document.body.createTextRange();
var d=this._startRange.item(0);
if("IMG"==d.tagName&&"A"==d.parentNode.tagName&&d.parentNode.childNodes.length==1){d=d.parentNode;
}b.Editor.Utils.storeOriginalPathsAndAttributes(d);
try{g.moveToElementText(d);
this._startRange=g;
}catch(f){}}}},_onDragEnd:function(c){b.Editor.Utils.restoreOriginalPathsAndAttributes(this.get_contentArea());
if($telerik.isFirefox){return;
}if(this._pendingMoveCommand){if(this._startRange){var f=this.get_contentWindow().document.selection.createRange();
if(f.length){var g=this.get_contentWindow().document.body.createTextRange();
try{g.moveToElementText(f.item(0));
}catch(d){}f=g;
}try{if(f.compareEndPoints&&0!=f.compareEndPoints("StartToStart",this._startRange)&&0!=f.compareEndPoints("EndToEnd",this._startRange)){this._startRange.execCommand("Delete",false,null);
}}catch(c){}}this.executeCommand(this._pendingMoveCommand);
this._pendingMoveCommand=null;
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},_onDrop:function(c){setTimeout($telerik.$.proxy(function(){b.Editor.Utils.restoreOriginalPathsAndAttributes(this.get_contentArea());
},this),0);
this._saveTypedContent(false,"on drop operation executing");
var d=this.get_localization()["Drop"]||"Drop external content";
this._pendingDockCommand=new b.Editor.GenericCommand(d,this.get_contentWindow(),this);
},_onDocumentDragEnd:function(c){if(!this._pendingDockCommand){return;
}this.executeCommand(this._pendingDockCommand);
this._pendingDockCommand=null;
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
},_trackChangesLoad:function(){var d=this.getToolByName("EnableTrackChangesOverride");
if(d){d.setOn(this.get_enableTrackChanges()?0:1);
}this.set_canRejectTrackChange(this.set_canAcceptTrackChange());
Telerik.Web.UI.Editor.TrackChanges.initialize(this);
var c=this;
this.attachEventHandler("onkeydown",function(f){Telerik.Web.UI.Editor.TrackChanges.checkInsertionPoint(c.getSelectedElement(),c);
});
}};
a.registerControlProperties(b.RadEditor,{ajaxSpellCheckScriptReference:"",spellAllowAddCustom:true,spellCheckJSON:{},enableUndoRedo:true,toolAdapter:null,fullPage:null,dialogOpener:null,ribbonBar:null,links:[],colors:["","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffffff","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#f2f2f2","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#d8d8d8","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#92cddc","#fac08f","#bfbfbf","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#31859b","#e36c09","#a5a5a5","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#205867","#974806","#c00000","#ff0000","#ffc000","#ffff00","#92d050","#00b050","#00b0f0","#0070c0","#002060","#7030a0"],fontNames:["Arial","Courier New","Garamond","Georgia","MS Sans Serif","Segoe UI","Tahoma","Times New Roman","Verdana"],fontSizes:[1,2,3,4,5,6,7],symbols:["&#8364;","&#162;","&#163;","&#165;","&#164;","&#169;","&#174;","&#8482;","&#177;","&ne;","&#8776;","&#8804;","&#8805;","&#247;","&#215;","&#8734;","&#189;","&#188;","&#190;","&#178;","&#179;","&#8240;","&#182;","&#167;","&#945;","&#946;","&#916;","&#181;","&#937;","&#8721;","&#216;","&ang;","&#186;","&#171;","&raquo;","&#183;","&#8226;","&#8224;","&#8225;","&#402;"],realFontSizes:["8px","9px","10px","11px","12px","13px","14px","16px","18px","20px","22px","24px","26px","28px","32px","36px","48px","72px"],snippets:[],cssClasses:[],cssFiles:[],languages:[],paragraphs:[["<p>","Normal"],["<h1>","<h1>Heading 1</h1>"],["<h2>","<h2>Heading 2</h2>"],["<h3>","<h3>Heading 3</h3>"],["<h4>","<h4>Heading 4</h4>"],["<h5>","<h5>Heading 5</h5>"],["<h6>","<h6>Heading 6</h6>"],["<dir>","<dir>Directory List</dir>"],["<menu>","<menu>Menu List</menu>"],["<pre>","<pre>Formatted</pre>"],["<address>","<address>Address</address>"]],formatSets:[],toolsWidth:null,maxTextLength:null,maxHtmlLength:null,toolProviderID:null,autoResizeHeight:false,toolbarMode:b.EditorToolbarMode.Default,editModes:b.EditModes.All,stripFormattingOptions:b.StripFormattingOptions.None,contentFilters:b.EditorFilters.DefaultFilters,newLineMode:b.EditorNewLineModes.Br,contentAreaCssFile:"",tableLayoutCssFile:"",mozillaFlashOverlayImage:"FlashManager.gif",toolAdapterType:"",enableResize:true,toolJSON:[],modulesJSON:[],contextMenusJSON:[],skin:"Default",language:"en-us",contentWindow:null,document:null,contentArea:null,contentAreaMode:b.EditorContentAreaMode.Iframe,isInAccessibleMode:false,enableAriaSupport:false,enableComments:false,enableTrackChanges:false,emptyMessage:"",isSkinTouch:false,currentFormatting:null});
a.registerControlEvents(b.RadEditor,["firstShow","pasteHtml","editReady","submit","commandExecuted","commandExecuting","selectionChange","domChange","init","load","modeChange","toggleScreenMode","spellCheckLoaded"]);
b.RadEditor.registerClass("Telerik.Web.UI.RadEditor",b.RadWebControl);
})();
Type.registerNamespace("Telerik.Web.UI");
(function(){var a=$telerik.$;
var b=Telerik.Web.UI;
b.AccessibleRadEditorBase=function(d){d.set_useClassicDialogs(true);
d.removeShortCut("InsertTab");
d.addShortCut("<h2>","ALT+2");
d.addShortCut("<h3>","ALT+3");
d.addShortCut("<h4>","ALT+4");
d.addShortCut("<h5>","ALT+5");
d.addShortCut("<p>","CTRL+SHIFT+C");
d.addShortCut("TableWizard","CTRL+SHIFT+T");
this.makeAccessibleTools(d);
var c=d.get_toolAdapter();
c.setFocus=function(){var f=$telerik.getElementByClassName(d.get_element(),"reToolbarWrapper","DIV");
if(f){var e=f.getElementsByTagName("INPUT")[0];
window.setTimeout(function(){if(e&&e.focus){e.focus();
}},100);
return false;
}};
d.add_commandExecuting(Function.createDelegate(this,this.editorCommandExecuting));
};
b.AccessibleRadEditorBase.prototype={editorCommandExecuting:function(f,c){if(!c||!c.get_commandName){return;
}var e=c.get_commandName();
if(e=="LinkManager"){if($telerik.isIE){f.get_document().execCommand("CreateLink",true,null);
}else{var n=prompt("Enter a URL:","http://");
if(n){f.get_document().execCommand("CreateLink",false,n);
}}f.setFocus();
c.set_cancel(true);
}else{if(e=="MoveFocusToTextEditor"){if($telerik.isIE){f.get_document().body.focus();
}else{f.setFocus();
}c.set_cancel(true);
}else{if(e=="Underline"||e=="Italic"){c.set_cancel(true);
}else{if(e=="<h2>"||e=="<h3>"||e=="<h4>"||e=="<h5>"||e=="<p>"){f.fire("FormatBlock",{value:e});
c.set_cancel(true);
}else{if(e=="InsertTable"){var l=prompt("Enter row and column count separated by space, followed by optional heading row index and heading column index","");
if(null!=l){var o=l.split(" ");
var m=o[0]?parseInt(o[0].trim()):0;
var d=o[1]?parseInt(o[1].trim()):0;
if(m&&d&&!isNaN(m)&&!isNaN(d)){var g=Telerik.Web.UI.Editor.Utils.createTable(m,d);
this.updateHeadingRows(g,o[2]?parseInt(o[2].trim())-1:-1);
this.updateHeadingColumns(g,o[3]?parseInt(o[3].trim())-1:-1);
var h=Telerik.Web.UI.Editor.Utils.getOuterHtml(g);
f.pasteHtml(h,e);
}}c.set_cancel(true);
}}}}}},makeAccessibleTools:function(d){var m=d.get_toolAdapter().get_tools();
for(var f=0;
f<m.length;
f++){var l=m[f];
var n=Object.getType(l);
var h=null;
if(n==Telerik.Web.UI.EditorSplitButton||n.inheritsFrom(Telerik.Web.UI.EditorSplitButton)){h=this.replaceSplitButton(l,d);
}else{if(n==Telerik.Web.UI.EditorDropDown||n.inheritsFrom(Telerik.Web.UI.EditorDropDown)){h=this.replaceDropdown(l,d);
}else{h=this.replaceButton(l,d);
}}if(h){var e=l.get_element();
e.parentNode.insertBefore(h,e);
e.style.display="none";
if(h.tagName.toUpperCase()=="SELECT"){var c=l.get_name();
h.id=d.get_id()+"_"+c;
var g=document.createElement("label");
g.htmlFor=h.id;
g.style.top="-10000px";
g.style.left="-10000px";
g.style.position="absolute";
g.innerHTML=l.get_text();
e.parentNode.insertBefore(g,h);
}}}if($telerik.isIE){this.fixIEFocusProblem(m[0].get_element().previousSibling,true);
this.fixIEFocusProblem(m[m.length-1].get_element().previousSibling,false);
}},fixIEFocusProblem:function(c,f){var e=c.parentNode.parentNode.getElementsByTagName("INPUT");
var g=f?e[1]:e[e.length-2];
var d=true;
c.onfocus=function(h){if(d){if(g){g.focus();
}d=false;
window.setTimeout(function(){c.focus();
window.setTimeout(function(){d=true;
},10);
},10);
}};
},replaceButton:function(g,e){var f=document.createElement("input");
f.type="button";
f.title=g.get_text();
var d=g.get_name();
var c=d;
if(d=="MoveFocusToTextEditor"){c="Custom";
}f.className="reAccessibleTool "+c;
f.onclick=function(){e.fire(d);
};
return f;
},replaceSplitButton:function(e,c){var d=e.get_name();
if(d=="Undo"||d=="Redo"||d=="InsertTable"){return this.replaceButton(e,c);
}else{alert("No implementation for converting split button "+d+" into an accessible tool");
}},replaceDropdown:function(o,c){var l=document.createElement("select");
l.style.width=o.get_element().getElementsByTagName("SPAN")[0].style.width;
var f=[];
if(o.get_name()=="FormatBlock"){f=c.get_paragraphs();
}l.options[0]=new Option("-------------------------------","");
for(var d=0;
d<f.length;
d++){var e=f[d];
var p=e[0];
var n=e[1];
var m=c.get_shortCutManager().findShortCutByName(p);
if(m){n+=" ("+m.get_shortCutString()+")";
}l.options[l.options.length]=new Option(n,p);
}var h=false;
l.onclick=function(){if(h==true){g();
}else{if(l.click){l.click();
}h=true;
}};
l.onkeydown=function(q){if(!q){q=window.event;
}if(q.keyCode==13){g();
}else{return true;
}};
function g(){h=false;
var q=l[l.selectedIndex].value;
if(q){c.fire("FormatBlock",{value:q});
}l.selectedIndex=0;
}return l;
},updateHeadingRows:function(g,c){if(isNaN(c)||c<0){return;
}var h=g.getElementsByTagName("THEAD")[0];
if(!h){h=g.createTHead();
}for(i=0;
i<=c;
i++){var f=g.rows[0];
var e=h.insertRow(-1);
for(j=0;
j<f.cells.length;
j++){var d=g.ownerDocument.createElement(i==c?"TH":"TD");
e.insertBefore(d,null);
}g.deleteRow(g.rows.length-1);
}},updateHeadingColumns:function(f,d){if(isNaN(d)||d<0){return;
}for(k=0;
k<f.tBodies.length;
k++){var g=f.tBodies[k];
for(i=0;
i<g.rows.length;
i++){var e=g.rows[i];
for(j=0;
j<e.cells.length;
j++){var c=j==d?"TH":"TD";
this.changeCellType(e.cells[j],c);
}}}},changeCellType:function(c,e){if(c.tagName.toUpperCase()!=e.toUpperCase()){var d=c.ownerDocument.createElement(e.toUpperCase());
c.parentNode.replaceChild(d,c);
}}};
b.AccessibleRadEditor=function(c){b.AccessibleRadEditor.initializeBase(this,[c]);
};
b.AccessibleRadEditor.prototype={initialize:function(){b.AccessibleRadEditor.callBaseMethod(this,"initialize");
},dispose:function(){b.AccessibleRadEditor.callBaseMethod(this,"dispose");
}};
b.AccessibleRadEditor.registerClass("Telerik.Web.UI.AccessibleRadEditor",b.RadEditor);
})();
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(a,b,d,c){b.RangeIterator=function(f,e){this.options=a.extend({normalizeEdges:false},e||{});
this.range=b.DomRange.toDomRange(f);
if(this.range.isCollapsed()){return;
}this._normalizeRangeEdges();
var g=f.commonAncestorContainer;
this._next=f.startContainer==g&&!d.isTextNode(f.startContainer)?f.startContainer.childNodes[f.startOffset]:d.findAncestorUntil(g,f.startContainer);
this._end=f.endContainer==g&&!d.isTextNode(f.endContainer)?f.endContainer.childNodes[f.endOffset]:d.findAncestorUntil(g,f.endContainer).nextSibling;
};
b.RangeIterator.prototype={iterate:function(e){var f;
while(f=this.nextNode()){if(this._hasSubTree(f)){this._buildSubTraverser(f).iterate(e);
}else{e(f);
}}},nextNode:function(){var e=this._next;
this._next=e&&e.nextSibling!=this._end?e.nextSibling:null;
return e;
},_hasSubTree:function(e){return !d.isTextNode(e)&&(d.isAncestorOf(e,this.range.startContainer)||d.isAncestorOf(e,this.range.endContainer));
},_buildSubTraverser:function(e){var f=this.range.cloneRange();
f.selectNodeContents(e);
if(d.isAncestorOf(e,this.range.startContainer)){f.snapToRange(b.DomRange.START_TO_START,this.range);
}if(d.isAncestorOf(e,this.range.endContainer)){f.snapToRange(b.DomRange.END_TO_END,this.range);
}this._normalizeRangeEdges();
return new b.RangeIterator(f);
},_normalizeRangeEdges:function(){if(this.options.normalizeEdges){this.range.normalizeEdges();
}}};
b.RangeIterator.registerClass("Telerik.Web.UI.Editor.RangeIterator");
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils);
Type.registerNamespace("Telerik.Web.UI.Editor");
Type.registerNamespace("Telerik.Web.UI.Editor.FragmentsCondition");
(function(a,b,e,d){var c=/^[\s\x160]*$/;
b.RangeTraverser=function(f){this.iterator=new b.RangeIterator(f);
this.range=this.iterator.range;
this.traversedNodes=[];
};
b.RangeTraverser.prototype={traverse:function(){var g=this.traversedNodes;
var f=function(h){if(h.nodeType==3||h.tagName.toLowerCase()=="img"){g.push(h);
}else{h=h.firstChild;
while(h){f(h);
h=h.nextSibling;
}}};
this.iterator.iterate(f);
}};
b.RangeTraverser.registerClass("Telerik.Web.UI.Editor.RangeTraverser");
b.RangeFragmentsTraverser=function(f){this.iterator=new b.RangeIterator(f,{normalizeEdges:true});
this.range=this.iterator.range;
this.traversedFragments=[];
this.nodesToTraverse=[];
};
b.RangeFragmentsTraverser.prototype={traverseFragments:function(g){var j=this.nodesToTraverse;
this.iterator.iterate(function(k){j.push(k);
});
if(j.length==0){return;
}this.splitRangeEdges();
this.clearEmptyTextNodes(this.nodesToTraverse);
if(j.length==1&&j[0].childNodes.length){var f=j[0].childNodes;
this.nodesToTraverse=[];
for(var h=0;
h<f.length;
h++){this.nodesToTraverse.push(f[h]);
}}while(this.nodesToTraverse.length){this.collectNode(this.nodesToTraverse.shift(),g);
}},collectNode:function(j,f){while(j&&this.isInRange(j)){if(!this.isSuitable(j,f)){this.removeTraversedNode(j);
if(j.firstChild){this.collectNode(j.firstChild,f);
}j=j.nextSibling;
continue;
}var g=new b.FragmentContainer();
var h=j;
while(h&&this.isSuitable(h,f)){if(f(h)){this.removeTraversedNode(h);
}j=h;
h=j.nextSibling;
g.addNode(j);
}this.storeFragment(g);
j=j?j.nextSibling:null;
}},storeFragment:function(f){if(f.nodes.length){this.traversedFragments.push(f);
}},isSuitable:function(g,f){return f(g)&&this.isInRange(g);
},isInRange:function(g){var h=this.range.cloneRange();
if(h.range.length){for(var f=0;
f<h.range.length;
f++){if(h.range.item(f)==g){return true;
}}return false;
}h.selectNodeContents(g);
return this.range.compareBoundaryPoints(Telerik.Web.UI.Editor.DomRange.END_TO_END,h)>-1;
},removeTraversedNode:function(f){var h=this.nodesToTraverse;
var g=a.inArray(f,h);
if(g!=-1){h.splice(g,1);
}},trimNodesToTraverse:function(){var g=this.nodesToTraverse;
for(var f=0;
f<g.length;
f++){if(e.isTextNode(g[f])){e.trimExtraWhitespace(g[f]);
}}},splitRangeEdges:function(){var j=this.nodesToTraverse;
var k=j[0];
var m=$telerik.$(k.parentNode);
var f=j[j.length-1];
var g=$telerik.$(f.parentNode);
j[j.length-1]=this.splitRangeEdge(f,false);
var h=this.splitRangeEdge(k,true);
this.cleanUpAfterSplit(m,g);
this.removeRedundantStart(j,h);
},splitRangeEdge:function(g,k){if(!this.isContainedInRange(g)){var m=a(g.parentNode);
var h=this.range.cloneRange();
h.selectNodeContents(g);
h.snapToRange(k?b.DomRange.START_TO_START:b.DomRange.END_TO_END,this.range);
var n=null;
if(k&&$telerik.isIE9&&e.isTextNode(g)){n=g.nodeValue.replace(h.toString(),"");
}h.collapse(k);
var f=g.nodeType==9?g:g.ownerDocument;
var o=f.createElement("span");
o.className="__telerik_marker __telerik_marker_"+(k?"start":"end");
h.insertNode(o);
var j=m.find(".__telerik_marker_"+(k?"start":"end"))[0];
var p=j[k?"nextSibling":"previousSibling"];
if(n&&c.test(n)){j.previousSibling.nodeValue=n;
}return p;
}return g;
},removeRedundantStart:function(g,h){try{while(!!g.length&&!this.isContainedInRange(g[0])){g.shift();
}}catch(f){}finally{if(g.length&&g[0]==h){g[0]=h;
}else{g.unshift(h);
}}},cleanUpAfterSplit:function(j,g){var h=j.find(".__telerik_marker_start")[0];
var f=g.find(".__telerik_marker_end")[0];
if(h){this.range.setStartAfter(h);
}if(f){this.range.setEndBefore(f);
}if(h||f){this.range.select();
}if(h){h.parentNode.removeChild(h);
}if(f){f.parentNode.removeChild(f);
}},isContainedInRange:function(f){var h=this.range;
var g=h.cloneRange();
g.selectNodeContents(f);
return h.compareBoundaryPoints(Telerik.Web.UI.Editor.DomRange.START_TO_START,g)<1&&h.compareBoundaryPoints(Telerik.Web.UI.Editor.DomRange.END_TO_END,g)>-1;
},clearEmptyTextNodes:function(h){for(var g=0;
g<h.length;
){var j=h[g];
if(e.isTextNode(j)&&j.nodeValue==""){var f=h.splice(g,1)[0];
if(f.parentNode){f.parentNode.removeChild(f);
}}else{g++;
}}}};
b.RangeFragmentsTraverser.registerClass("Telerik.Web.UI.Editor.RangeFragmentsTraverser");
b.FragmentsCondition.isInlineNode=function(f){return f.nodeType==3||!e.isBlockElement(f);
};
b.FragmentsCondition.isInlineNodeForIE8=function(f){return f.nodeType==3||!e.isBlockElementOrNewLine(f);
};
b.FragmentsCondition.inlineNotLink=function(f){return b.FragmentsCondition.isInlineNode(f)&&!e.isTag(f,"a");
};
b.FragmentsCondition.inlineNotLinkForIE8=function(f){return b.FragmentsCondition.isInlineNodeForIE8(f)&&!e.isTag(f,"a");
};
b.FragmentContainer=function(){this.nodes=[];
};
b.FragmentContainer.prototype={addNode:function(f){this.nodes.push(f);
},contains:function(f){return a.inArray(f,this.nodes)!=-1;
},getParent:function(){return this.nodes.length?this.nodes[0].parentNode:null;
},appendTo:function(f){var g=this.nodes;
for(i=0,l=g.length;
i<l;
i++){f.appendChild(g[i]);
}},insertBeforeFirst:function(f){if(!this.nodes.length){return;
}var g=this.getParent();
g.insertBefore(f,this.nodes[0]);
},remove:function(){var j=this.getParent();
if(!j){return;
}var h=this.nodes;
for(var f=0,g=h.length;
f<g;
f++){j.removeChild(h[f]);
}}};
b.FragmentContainer.registerClass("Telerik.Web.UI.Editor.FragmentContainer");
})($telerik.$,Telerik.Web.UI.Editor,Telerik.Web.UI.Editor.Utils);
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(b,a){b.WordListConverter=function(){};
b.WordListConverter.prototype={removeOriginalElements:function(c){for(var d=0;
d<c.length;
d++){c[d].parentNode.removeChild(c[d]);
}},setItemsAttributes:function(d){var c=$telerik.isIE?d.all:d.getElementsByTagName("*");
for(var f=0;
f<c.length;
f++){var e=c[f];
if(e.nodeType==1){if(this.isListItem(e)){var g=this.getItemData(e);
if(g){e.setAttribute("data-listId",g);
}else{if(/^(?:_TELERIK_I_)*_TELERIK_CHROME_/gi.test(e.innerHTML)){var h=e.style.marginLeft?e.style.marginLeft:"0";
h=h.replace(/[a-z]+/gi,"");
g="lxlevel"+h+"lfox";
e.setAttribute("data-listId",g);
}}}}}},getGroupedListItems:function(e){var f=[];
var h=this;
var d=function(l){var k=0;
while(k<l.length){var j=l[k];
if(!j||j.nodeType!=1){continue;
}var m=h.getItemData(j);
if(m&&m!=""){k=g(l,m,k);
continue;
}if(j.tagName=="DIV"){d(j.children);
k++;
continue;
}if(j.tagName=="TABLE"){var n=j.getElementsByTagName("TD");
for(var i=0;
i<n.length;
i++){var o=n[i];
d(o.children);
}k++;
continue;
}k++;
}};
var g=function(j,l,i){var k=getLastListItemIndex(j,l,i);
f.push({elements:j,startIndex:i,endIndex:k,data:l});
i=k+1;
return i;
};
getLastListItemIndex=function(l,q,j){var p=q.substring(q.indexOf("lfo"),q.length);
var n=j;
for(var m=j+1;
m<l.length;
m++){var k=h.getItemData(l[m]);
if(k){var o=k.substring(k.indexOf("lfo"),k.length);
if(k==q||o==p){n=m;
}}}return n;
};
d(e);
var c=function(){var l=[];
var j=[];
for(var m=0;
m<f.length;
m++){var k=f[m];
for(var n=k.startIndex;
n<=k.endIndex;
n++){j.push(k.elements[n]);
}l.push(j.slice(0,j.length));
j=[];
}return l;
}();
return c;
},getItemData:function(e){if(e.getAttribute("data-listId")){return e.getAttribute("data-listId");
}var c=Telerik.Web.UI.Editor.Utils.getOuterHtml(e).replace(e.innerHTML,"");
var f=c.match(/mso-list:\s?(\w+)\s(\w+)\s(\w+)/i);
var d="";
if(f&&f[0]&&f[1]&&f[2]&&f[3]){d=f[1]+f[2]+f[3];
}return d;
},isListItem:function(d){if(!d||d.nodeType!=1){return false;
}if(d.tagName=="TABLE"||d.tagName=="TR"||d.tagName=="TD"||d.tagName=="TBODY"){return false;
}if(d.getAttribute("data-listId")){return true;
}var c=Telerik.Web.UI.Editor.Utils.getOuterHtml(d).replace(d.innerHTML,"");
var e=c.match(/mso-list:\s?\w+\s\w+\s\w+/i);
if(e){return true;
}if(/MsoListParagraph/i.test(c)||/_TELERIK_I_/gm.test(this.markListItems(d.innerHTML))){return true;
}return false;
},removeListsIds:function(c){a(c).find("UL").removeAttr("id");
a(c).find("OL").removeAttr("id");
},markListItems:function(c){c=c.replace(/(<!--\[if !supportLists\]-->)/gi,"_TELERIK_CHROME__TELERIK_I_");
c=c.replace(/(<span[^>]+:\s*symbol[^>]+>)/gi,"$1_TELERIK_I_");
c=c.replace(/(<span[^>]+mso-list:[^>]+>)/gi,"$1_TELERIK_I_");
c=c.replace(/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1_TELERIK_I_");
return c;
},getUnorderedListType:function(c){var d=null;
if(/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(c)){d="disc";
}else{if(/^o/.test(c)){d="circle";
}else{d="square";
}}return d;
},getOrderedListType:function(d){var c=null;
if(isNaN(d)){c=(/^[a-z]/.test(d)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(d)?"roman":"alpha");
}return c;
},createList:function(f,e,d){f=f?f:"UL";
var c=document.createElement(f);
if(d&&d!=""){c.setAttribute("id",d);
}if(e&&e!=""){c.style.listStyleType=e;
}return c;
},insertList:function(d,c){var f=c.parentNode;
var e=c.nextSibling;
if(e){f.insertBefore(d,e);
}else{f.appendChild(d);
}},replaceNbspWithSpace:function(c){c=c.replace(/&nbsp;/gm,"\u00a0");
return c;
},getElementLevel:function(c){var e=Telerik.Web.UI.Editor.Utils.getOuterHtml(c).match(/level[0-9]+/im);
var d=0;
if(e){var f=e[0].substring(5,e[0].length);
d=parseFloat(f);
}return d;
},setDataLevelAttribute:function(d){var f=true,c=null,e=0;
for(var g=0;
g<d.length;
g++){c=d[g];
if(!c||c.innerHTML.indexOf("_TELERIK_")==-1){continue;
}if(c.style.marginLeft==""){e=this.getElementLevel(c);
if(e!=0&&e!=1){f=false;
break;
}}}if(f){for(var g=0;
g<d.length;
g++){var h=d[g].style.marginLeft==""?0:parseFloat(d[g].style.marginLeft);
d[g].setAttribute("data-level",h);
}return;
}for(var g=0;
g<d.length;
g++){c=d[g];
if(!c||c.innerHTML.indexOf("_TELERIK_")==-1){continue;
}e=this.getElementLevel(c);
c.setAttribute("data-level",e);
}},removeMarkers:function(c){a(c).find("*").removeAttr("data-level");
a(c).find("*").removeAttr("data-listId");
c.innerHTML=c.innerHTML.replace(/_TELERIK_I_/gm,"");
},matchListItem:function(c,e){var d=this.getItemData(e.element);
if(!d){return;
}if(!/^_TELERIK_I_/.test(c)){return;
}c=c.replace(/_TELERIK_I_/gm,"");
var f;
var h=c.match(/^([\u2022\u00b7\u00a7\u00a0\u00fc\u00d8\u002dovn-]*\s*\u00a0*(&nbsp;)*)+/);
if(h){f=h[0];
if(f){f=f.replace(/^[\u00a0\n\r\s]+/,"");
f=f.replace(/[\u00a0\n\r\s]+$/,"");
}e.html=c.replace(h[0],"");
e.type="UL";
e.listStyle=this.getUnorderedListType(f);
}var g=c.match(/^(?:\w*\.?)+[\s\u00a0]*\(?\w+[\.\)]\w*[\s\u00a0]*/);
if(g){f=g[0];
if(f){f=f.replace(/^[\u00a0\n\r\s]+/,"");
f=f.replace(/[\u00a0\n\r\s]+$/,"");
f=f.replace(/[.()\s]+/gm,"");
}e.html=c.replace(g[0],"");
e.type="OL";
e.listStyle=this.getOrderedListType(f);
}},getListElementHtml:function(f,d){if(!f){return"";
}var c=document.createElement("DIV");
b.Utils.setElementInnerHtml(c,f);
var h=this.getInnerText(c);
h=h.trim();
var e=this.getInnerText(d);
var i=e.replace(/_TELERIK_I_/g,"");
i=i.replace(h,"");
i=i.replace(/\n\r?/gm," ");
i=i.replace(/&nbsp;/gm,"");
i=i.trim();
i=i.replace(/([.()])/gm,"\\$1");
var g=d.innerHTML;
g=g.replace(/\n\r?/gm," ");
var j=new RegExp("([^a-z0-9])("+i+")([^a-z0-9])","im");
g=g.replace(j,"$1$3");
g=g.replace(/_TELERIK_I_/g,"");
return g;
},getInnerText:function(c){var d=c.innerHTML;
d=d.replace(/<!--(.|\s)*?-->/gi,"");
d=d.replace(/<\/?[^>]+?\/?>/gm,"");
return d;
},clearListItemHtml:function(f){var d=$telerik.isIE?f.all:f.getElementsByTagName("*");
for(var c=d.length-1;
c>=0;
c--){if(d[c].nodeType==1){var e=this.getInnerText(d[c]);
if(/^\s+$/.test(e)){b.Utils.removeNode(d[c]);
continue;
}e=e.replace(/&nbsp;/gm,"");
e=e.replace(/\s+/gm,"");
if(e==""){d[c].parentNode.removeChild(d[c]);
}}}b.Utils.removeEmptyElements(f);
},convert:function(k){k=b.Utils.clearInvalidHtml(k);
k=this.markListItems(k);
k=b.Utils.clearComments(k);
var c=document.createElement("div");
b.Utils.setElementInnerHtml(c,k);
this.setItemsAttributes(c);
k=c.innerHTML;
k=k.replace(/_TELERIK_CHROME_/gm,"");
c.innerHTML=k;
var g=this.getGroupedListItems(c.children);
for(var m=0;
m<g.length;
m++){var j=g[m];
this.setDataLevelAttribute(j);
var t=null,r=null,p=-1,q=null,y=[];
for(var f=0;
f<j.length;
f++){var d=j[f];
if(!d){return;
}var s="",z=null,x=null,h="";
var e=this.getInnerText(d);
var v={};
v.element=d;
s=this.replaceNbspWithSpace(e);
this.matchListItem(s,v);
if(v.type){z=v.type;
x=v.listStyle;
h=v.html;
}var u=this.getItemData(d);
if(h==""&&u==""){if(t){var n=d.innerHTML;
n=n.replace(/_TELERIK_I_/g,"");
var o=this.getInnerText(d);
o=o.replace(/_TELERIK_I_/g,"").trim();
var l="&nbsp;";
if(o&&o!=""){l=n;
}t.children[t.children.length-1].innerHTML=t.children[t.children.length-1].innerHTML+"<p>"+l+"</p>";
y.push(d);
}continue;
}if(z){q=parseFloat(d.getAttribute("data-level")||0);
if(r&&q>p){if(t&&t.id!=u){t=this.createList(z,x,u);
r.appendChild(t);
}}else{if(q<p){t=a(c).find("#"+u)[0];
if(!t){var w=c.getElementsByTagName(z);
if(w.length>0){t=w[w.length-1];
}}}else{if(!t){t=this.createList(z,x,u);
this.insertList(t,d);
}}}r=document.createElement("li");
r.innerHTML=this.getListElementHtml(h,d);
this.clearListItemHtml(r);
if(!t||(t.getAttribute("id")!=u)){t=this.createList(z,x,u);
this.insertList(t,d);
}t.appendChild(r);
y.push(d);
p=q;
}else{p=0;
x=null;
t=null;
r=null;
}}this.removeOriginalElements(y);
this.removeListsIds(c);
}this.removeMarkers(c);
return c.innerHTML;
}};
})(Telerik.Web.UI.Editor,$telerik.$);
