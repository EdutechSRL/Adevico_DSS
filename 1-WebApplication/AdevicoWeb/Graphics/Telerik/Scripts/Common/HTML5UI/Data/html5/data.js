(function(b,a){a(["./kendo.core","./kendo.data.odata","./kendo.data.xml"],b);
})(function(){var a=0;
(function(b,aX){var C=b.extend,az=b.proxy,Z=b.isPlainObject,W=b.isEmptyObject,U=b.isArray,K=b.grep,c=b.ajax,ae,x=b.each,ak=b.noop,ab=window.kendo,X=ab.isFunction,aq=ab.Observable,i=ab.Class,aR="string",F="function",p="create",aD="read",aZ="update",w="destroy",h="change",aT="sync",H="get",A="error",aK="requestStart",ay="progress",aJ="requestEnd",q=[p,aD,aZ,w],N=function(a3){return a3;
},J=ab.getter,aS=ab.stringify,af=Math,aA=[].push,aa=[].join,ax=[].pop,aO=[].splice,aM=[].shift,aN=[].slice,aY=[].unshift,aV={}.toString,aQ=ab.support.stableSort,u=/^\/Date\((.*?)\)\/$/,ai=/(\r+|\n+)/g,aC=/(?=['\\])/g;
var ar=aq.extend({init:function(a3,a5){var a4=this;
a4.type=a5||at;
aq.fn.init.call(a4);
a4.length=a3.length;
a4.wrapAll(a3,a4);
},at:function(a3){return this[a3];
},toJSON:function(){var a3,a5=this.length,a6,a4=new Array(a5);
for(a3=0;
a3<a5;
a3++){a6=this[a3];
if(a6 instanceof at){a6=a6.toJSON();
}a4[a3]=a6;
}return a4;
},parent:ak,wrapAll:function(a6,a7){var a8=this,a3,a4,a5=function(){return a8;
};
a7=a7||[];
for(a3=0,a4=a6.length;
a3<a4;
a3++){a7[a3]=a8.wrap(a6[a3],a5);
}return a7;
},wrap:function(a3,a5){var a6=this,a4;
if(a3!==null&&aV.call(a3)==="[object Object]"){a4=a3 instanceof a6.type||a3 instanceof ah;
if(!a4){a3=a3 instanceof at?a3.toJSON():a3;
a3=new a6.type(a3);
}a3.parent=a5;
a3.bind(h,function(a7){a6.trigger(h,{field:a7.field,node:a7.node,index:a7.index,items:a7.items||[this],action:a7.node?(a7.action||"itemloaded"):"itemchange"});
});
}return a3;
},push:function(){var a3=this.length,a4=this.wrapAll(arguments),a5;
a5=aA.apply(this,a4);
this.trigger(h,{action:"add",index:a3,items:a4});
return a5;
},slice:aN,sort:[].sort,join:aa,pop:function(){var a3=this.length,a4=ax.apply(this);
if(a3){this.trigger(h,{action:"remove",index:a3-1,items:[a4]});
}return a4;
},splice:function(a5,a3,a6){var a7=this.wrapAll(aN.call(arguments,2)),a9,a4,a8;
a9=aO.apply(this,[a5,a3].concat(a7));
if(a9.length){this.trigger(h,{action:"remove",index:a5,items:a9});
for(a4=0,a8=a9.length;
a4<a8;
a4++){if(a9[a4]&&a9[a4].children){a9[a4].unbind(h);
}}}if(a6){this.trigger(h,{action:"add",index:a5,items:a7});
}return a9;
},shift:function(){var a3=this.length,a4=aM.apply(this);
if(a3){this.trigger(h,{action:"remove",index:0,items:[a4]});
}return a4;
},unshift:function(){var a3=this.wrapAll(arguments),a4;
a4=aY.apply(this,a3);
this.trigger(h,{action:"add",index:0,items:a3});
return a4;
},indexOf:function(a4){var a6=this,a3,a5;
for(a3=0,a5=a6.length;
a3<a5;
a3++){if(a6[a3]===a4){return a3;
}}return -1;
},forEach:function(a3){var a4=0,a5=this.length;
for(;
a4<a5;
a4++){a3(this[a4],a4,this);
}},map:function(a3){var a4=0,a6=[],a5=this.length;
for(;
a4<a5;
a4++){a6[a4]=a3(this[a4],a4,this);
}return a6;
},filter:function(a3){var a4=0,a7=[],a5,a6=this.length;
for(;
a4<a6;
a4++){a5=this[a4];
if(a3(a5,a4,this)){a7[a7.length]=a5;
}}return a7;
},find:function(a3){var a4=0,a5,a6=this.length;
for(;
a4<a6;
a4++){a5=this[a4];
if(a3(a5,a4,this)){return a5;
}}},every:function(a3){var a4=0,a5,a6=this.length;
for(;
a4<a6;
a4++){a5=this[a4];
if(!a3(a5,a4,this)){return false;
}}return true;
},some:function(a3){var a4=0,a5,a6=this.length;
for(;
a4<a6;
a4++){a5=this[a4];
if(a3(a5,a4,this)){return true;
}}return false;
},remove:function(a4){var a3=this.indexOf(a4);
if(a3!==-1){this.splice(a3,1);
}},empty:function(){this.splice(0,this.length);
}});
var ac=ar.extend({init:function(a3,a5){aq.fn.init.call(this);
this.type=a5||at;
for(var a4=0;
a4<a3.length;
a4++){this[a4]=a3[a4];
}this.length=a4;
this._parent=az(function(){return this;
},this);
},at:function(a3){var a4=this[a3];
if(!(a4 instanceof this.type)){a4=this[a3]=this.wrap(a4,this._parent);
}else{a4.parent=this._parent;
}return a4;
}});
function B(a3,a6,a4,a5){return function(a7){var a8={},a9;
for(a9 in a7){a8[a9]=a7[a9];
}if(a5){a8.field=a4+"."+a7.field;
}else{a8.field=a4;
}if(a6==h&&a3._notifyChange){a3._notifyChange(a8);
}a3.trigger(a6,a8);
};
}var at=aq.extend({init:function(a7){var a6=this,a4,a3,a5=function(){return a6;
};
aq.fn.init.call(this);
for(a3 in a7){a4=a7[a3];
if(typeof a4==="object"&&a4&&!a4.getTime&&a3.charAt(0)!="_"){a4=a6.wrap(a4,a3,a5);
}a6[a3]=a4;
}a6.uid=ab.guid();
},shouldSerialize:function(a3){return this.hasOwnProperty(a3)&&a3!=="_events"&&typeof this[a3]!==F&&a3!=="uid";
},forEach:function(a3){for(var a4 in this){if(this.shouldSerialize(a4)){a3(this[a4],a4);
}}},toJSON:function(){var a4={},a5,a3;
for(a3 in this){if(this.shouldSerialize(a3)){a5=this[a3];
if(a5 instanceof at||a5 instanceof ar){a5=a5.toJSON();
}a4[a3]=a5;
}}return a4;
},get:function(a3){var a5=this,a4;
a5.trigger(H,{field:a3});
if(a3==="this"){a4=a5;
}else{a4=ab.getter(a3,true)(a5);
}return a4;
},_set:function(a4,a9){var a8=this;
var a3=a4.indexOf(".")>=0;
if(a3){var a7=a4.split("."),a6="";
while(a7.length>1){a6+=a7.shift();
var a5=ab.getter(a6,true)(a8);
if(a5 instanceof at){a5.set(a7.join("."),a9);
return a3;
}a6+=".";
}}ab.setter(a4)(a8,a9);
return a3;
},set:function(a5,a7){var a6=this,a3=a5.indexOf(".")>=0,a4=ab.getter(a5,true)(a6);
if(a4!==a7){if(!a6.trigger("set",{field:a5,value:a7})){if(!a3){a7=a6.wrap(a7,a5,function(){return a6;
});
}if(!a6._set(a5,a7)||a5.indexOf("(")>=0||a5.indexOf("[")>=0){a6.trigger(h,{field:a5});
}}}},parent:ak,wrap:function(a6,a3,a7){var a8=this,a9=aV.call(a6);
if(a6!=null&&(a9==="[object Object]"||a9==="[object Array]")){var a5=a6 instanceof ar;
var a4=a6 instanceof t;
if(a9==="[object Object]"&&!a4&&!a5){if(!(a6 instanceof at)){a6=new at(a6);
}if(a6.parent()!=a7()){a6.bind(H,B(a8,H,a3,true));
a6.bind(h,B(a8,h,a3,true));
}}else{if(a9==="[object Array]"||a5||a4){if(!a5&&!a4){a6=new ar(a6);
}if(a6.parent()!=a7()){a6.bind(h,B(a8,h,a3,false));
}}}a6.parent=a7;
}return a6;
}});
function z(a4,a6){if(a4===a6){return true;
}var a5=b.type(a4),a7=b.type(a6),a3;
if(a5!==a7){return false;
}if(a5==="date"){return a4.getTime()===a6.getTime();
}if(a5!=="object"&&a5!=="array"){return false;
}for(a3 in a4){if(!z(a4[a3],a6[a3])){return false;
}}return true;
}var aw={number:function(a3){return ab.parseFloat(a3);
},date:function(a3){return ab.parseDate(a3);
},"boolean":function(a3){if(typeof a3===aR){return a3.toLowerCase()==="true";
}return a3!=null?!!a3:a3;
},string:function(a3){return a3!=null?(a3+""):a3;
},"default":function(a3){return a3;
}};
var v={string:"",number:0,date:new Date(),"boolean":false,"default":""};
function I(a6,a5){var a3,a4;
for(a4 in a6){a3=a6[a4];
if(Z(a3)&&a3.field&&a3.field===a5){return a3;
}else{if(a3===a5){return a3;
}}}return null;
}var ah=at.extend({init:function(a3){var a6=this;
if(!a3||b.isEmptyObject(a3)){a3=b.extend({},a6.defaults,a3);
if(a6._initializers){for(var a4=0;
a4<a6._initializers.length;
a4++){var a5=a6._initializers[a4];
a3[a5]=a6.defaults[a5]();
}}}at.fn.init.call(a6,a3);
a6.dirty=false;
if(a6.idField){a6.id=a6.get(a6.idField);
if(a6.id===aX){a6.id=a6._defaultId;
}}},shouldSerialize:function(a3){return at.fn.shouldSerialize.call(this,a3)&&a3!=="uid"&&!(this.idField!=="id"&&a3==="id")&&a3!=="dirty"&&a3!=="_accessors";
},_parse:function(a3,a8){var a7=this,a4=a3,a5=(a7.fields||{}),a6;
a3=a5[a3];
if(!a3){a3=I(a5,a4);
}if(a3){a6=a3.parse;
if(!a6&&a3.type){a6=aw[a3.type.toLowerCase()];
}}return a6?a6(a8):a8;
},_notifyChange:function(a4){var a3=a4.action;
if(a3=="add"||a3=="remove"){this.dirty=true;
}},editable:function(a3){a3=(this.fields||{})[a3];
return a3?a3.editable!==false:true;
},set:function(a3,a6,a4){var a5=this;
if(a5.editable(a3)){a6=a5._parse(a3,a6);
if(!z(a6,a5.get(a3))){a5.dirty=true;
at.fn.set.call(a5,a3,a6,a4);
}}},accept:function(a3){var a6=this,a5=function(){return a6;
},a4;
for(a4 in a3){var a7=a3[a4];
if(a4.charAt(0)!="_"){a7=a6.wrap(a3[a4],a4,a5);
}a6._set(a4,a7);
}if(a6.idField){a6.id=a6.get(a6.idField);
}a6.dirty=false;
},isNew:function(){return this.id===this._defaultId;
}});
ah.define=function(a3,bc){if(bc===aX){bc=a3;
a3=ah;
}var ba,be=C({defaults:{}},bc),bb,a4,bf,bg,a8,a9,a5={},bd,a7=be.id,a6=[];
if(a7){be.idField=a7;
}if(be.id){delete be.id;
}if(a7){be.defaults[a7]=be._defaultId="";
}if(aV.call(be.fields)==="[object Array]"){for(a8=0,a9=be.fields.length;
a8<a9;
a8++){a4=be.fields[a8];
if(typeof a4===aR){a5[a4]={};
}else{if(a4.field){a5[a4.field]=a4;
}}}be.fields=a5;
}for(bb in be.fields){a4=be.fields[bb];
bf=a4.type||"default";
bg=null;
bd=bb;
bb=typeof(a4.field)===aR?a4.field:bb;
if(!a4.nullable){bg=be.defaults[bd!==bb?bd:bb]=a4.defaultValue!==aX?a4.defaultValue:v[bf.toLowerCase()];
if(typeof bg==="function"){a6.push(bb);
}}if(bc.id===bb){be._defaultId=bg;
}be.defaults[bd!==bb?bd:bb]=bg;
a4.parse=a4.parse||aw[bf];
}if(a6.length>0){be._initializers=a6;
}ba=a3.extend(be);
ba.define=function(bh){return ah.define(ba,bh);
};
if(be.fields){ba.fields=be.fields;
ba.idField=be.idField;
}return ba;
};
var k={selector:function(a3){return X(a3)?a3:J(a3);
},compare:function(a3){var a4=this.selector(a3);
return function(a5,a6){a5=a4(a5);
a6=a4(a6);
if(a5==null&&a6==null){return 0;
}if(a5==null){return -1;
}if(a6==null){return 1;
}if(a5.localeCompare){return a5.localeCompare(a6);
}return a5>a6?1:(a5<a6?-1:0);
};
},create:function(a4){var a3=a4.compare||this.compare(a4.field);
if(a4.dir=="desc"){return function(a5,a6){return a3(a6,a5,true);
};
}return a3;
},combine:function(a3){return function(a4,a5){var a8=a3[0](a4,a5),a6,a7;
for(a6=1,a7=a3.length;
a6<a7;
a6++){a8=a8||a3[a6](a4,a5);
}return a8;
};
}};
var aP=C({},k,{asc:function(a3){var a4=this.selector(a3);
return function(a5,a6){var a7=a4(a5);
var a8=a4(a6);
if(a7&&a7.getTime&&a8&&a8.getTime){a7=a7.getTime();
a8=a8.getTime();
}if(a7===a8){return a5.__position-a6.__position;
}if(a7==null){return -1;
}if(a8==null){return 1;
}if(a7.localeCompare){return a7.localeCompare(a8);
}return a7>a8?1:-1;
};
},desc:function(a3){var a4=this.selector(a3);
return function(a5,a6){var a7=a4(a5);
var a8=a4(a6);
if(a7&&a7.getTime&&a8&&a8.getTime){a7=a7.getTime();
a8=a8.getTime();
}if(a7===a8){return a5.__position-a6.__position;
}if(a7==null){return 1;
}if(a8==null){return -1;
}if(a8.localeCompare){return a8.localeCompare(a7);
}return a7<a8?1:-1;
};
},create:function(a3){return this[a3.dir](a3.field);
}});
ae=function(a3,a4){var a5,a6=a3.length,a7=new Array(a6);
for(a5=0;
a5<a6;
a5++){a7[a5]=a4(a3[a5],a5,a3);
}return a7;
};
var av=(function(){function a4(a5){return a5.replace(aC,"\\").replace(ai,"");
}function a3(a9,a5,a6,a8){var a7;
if(a6!=null){if(typeof a6===aR){a6=a4(a6);
a7=u.exec(a6);
if(a7){a6=new Date(+a7[1]);
}else{if(a8){a6="'"+a6.toLowerCase()+"'";
a5="("+a5+" || '').toLowerCase()";
}else{a6="'"+a6+"'";
}}}if(a6.getTime){a5="("+a5+"?"+a5+".getTime():"+a5+")";
a6=a6.getTime();
}}return a5+" "+a9+" "+a6;
}return{quote:function(a5){if(a5&&a5.getTime){return"new Date("+a5.getTime()+")";
}if(typeof a5=="string"){return"'"+a4(a5)+"'";
}return""+a5;
},eq:function(a5,a6,a7){return a3("==",a5,a6,a7);
},neq:function(a5,a6,a7){return a3("!=",a5,a6,a7);
},gt:function(a5,a6,a7){return a3(">",a5,a6,a7);
},gte:function(a5,a6,a7){return a3(">=",a5,a6,a7);
},lt:function(a5,a6,a7){return a3("<",a5,a6,a7);
},lte:function(a5,a6,a7){return a3("<=",a5,a6,a7);
},startswith:function(a5,a6,a7){if(a7){a5="("+a5+" || '').toLowerCase()";
if(a6){a6=a6.toLowerCase();
}}if(a6){a6=a4(a6);
}return a5+".lastIndexOf('"+a6+"', 0) == 0";
},endswith:function(a5,a6,a7){if(a7){a5="("+a5+" || '').toLowerCase()";
if(a6){a6=a6.toLowerCase();
}}if(a6){a6=a4(a6);
}return a5+".indexOf('"+a6+"', "+a5+".length - "+(a6||"").length+") >= 0";
},contains:function(a5,a6,a7){if(a7){a5="("+a5+" || '').toLowerCase()";
if(a6){a6=a6.toLowerCase();
}}if(a6){a6=a4(a6);
}return a5+".indexOf('"+a6+"') >= 0";
},doesnotcontain:function(a5,a6,a7){if(a7){a5="("+a5+" || '').toLowerCase()";
if(a6){a6=a6.toLowerCase();
}}if(a6){a6=a4(a6);
}return a5+".indexOf('"+a6+"') == -1";
}};
})();
function aB(a3){this.data=a3||[];
}aB.filterExpr=function(a4){var a5=[],bc={and:" && ",or:" || "},ba,bb,a8,a3,a7=[],be=[],a6,bd,a9=a4.filters;
for(ba=0,bb=a9.length;
ba<bb;
ba++){a8=a9[ba];
a6=a8.field;
bd=a8.operator;
if(a8.filters){a3=aB.filterExpr(a8);
a8=a3.expression.replace(/__o\[(\d+)\]/g,function(bg,bf){bf=+bf;
return"__o["+(be.length+bf)+"]";
}).replace(/__f\[(\d+)\]/g,function(bg,bf){bf=+bf;
return"__f["+(a7.length+bf)+"]";
});
be.push.apply(be,a3.operators);
a7.push.apply(a7,a3.fields);
}else{if(typeof a6===F){a3="__f["+a7.length+"](d)";
a7.push(a6);
}else{a3=ab.expr(a6);
}if(typeof bd===F){a8="__o["+be.length+"]("+a3+", "+av.quote(a8.value)+")";
be.push(bd);
}else{a8=av[(bd||"eq").toLowerCase()](a3,a8.value,a8.ignoreCase!==aX?a8.ignoreCase:true);
}}a5.push(a8);
}return{expression:"("+a5.join(bc[a4.logic])+")",fields:a7,operators:be};
};
function ap(a6,a5){if(a6){var a3=typeof a6===aR?{field:a6,dir:a5}:a6,a4=U(a3)?a3:(a3!==aX?[a3]:[]);
return K(a4,function(a7){return !!a7.dir;
});
}}var au={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};
function ao(a3){var a6,a7,a4,a8,a5=a3.filters;
if(a5){for(a6=0,a7=a5.length;
a6<a7;
a6++){a4=a5[a6];
a8=a4.operator;
if(a8&&typeof a8===aR){a4.operator=au[a8.toLowerCase()]||a8;
}ao(a4);
}}}function am(a3){if(a3&&!W(a3)){if(U(a3)||!a3.filters){a3={logic:"and",filters:U(a3)?a3:[a3]};
}ao(a3);
return a3;
}}aB.normalizeFilter=am;
function al(a3){return U(a3)?a3:[a3];
}function an(a6,a5){var a3=typeof a6===aR?{field:a6,dir:a5}:a6,a4=U(a3)?a3:(a3!==aX?[a3]:[]);
return ae(a4,function(a7){return{field:a7.field,dir:a7.dir||"asc",aggregates:a7.aggregates};
});
}aB.prototype={toArray:function(){return this.data;
},range:function(a4,a3){return new aB(this.data.slice(a4,a4+a3));
},skip:function(a3){return new aB(this.data.slice(a3));
},take:function(a3){return new aB(this.data.slice(0,a3));
},select:function(a3){return new aB(ae(this.data,a3));
},order:function(a4,a3){var a5={dir:a3};
if(a4){if(a4.compare){a5.compare=a4.compare;
}else{a5.field=a4;
}}return new aB(this.data.slice(0).sort(k.create(a5)));
},orderBy:function(a3){return this.order(a3,"asc");
},orderByDescending:function(a3){return this.order(a3,"desc");
},sort:function(a7,a6,a3){var a8,a9,a5=ap(a7,a6),a4=[];
a3=a3||k;
if(a5.length){for(a8=0,a9=a5.length;
a8<a9;
a8++){a4.push(a3.create(a5[a8]));
}return this.orderBy({compare:a3.combine(a4)});
}return this;
},filter:function(a6){var a9,a4,ba,a3,bc,a5=this.data,a7,bb,bd=[],a8;
a6=am(a6);
if(!a6||a6.filters.length===0){return this;
}a3=aB.filterExpr(a6);
a7=a3.fields;
bb=a3.operators;
bc=a8=new Function("d, __f, __o","return "+a3.expression);
if(a7.length||bb.length){a8=function(be){return bc(be,a7,bb);
};
}for(a9=0,ba=a5.length;
a9<ba;
a9++){a4=a5[a9];
if(a8(a4)){bd.push(a4);
}}return new aB(bd);
},group:function(a5,a3){a5=an(a5||[]);
a3=a3||this.data;
var a7=this,a6=new aB(a7.data),a4;
if(a5.length>0){a4=a5[0];
a6=a6.groupBy(a4).select(function(a9){var a8=new aB(a3).filter([{field:a9.field,operator:"eq",value:a9.value,ignoreCase:false}]);
return{field:a9.field,value:a9.value,items:a5.length>1?new aB(a9.items).group(a5.slice(1),a8.toArray()).toArray():a9.items,hasSubgroups:a5.length>1,aggregates:a8.aggregate(a4.aggregates)};
});
}return a6;
},groupBy:function(a5){if(W(a5)||!this.data.length){return new aB([]);
}var a6=a5.field,bd=this._sortForGrouping(a6,a5.dir||"asc"),a3=ab.accessor(a6),ba,a8=a3.get(bd[0],a6),a7={field:a6,value:a8,items:[]},a4,a9,bb,bc=[a7];
for(a9=0,bb=bd.length;
a9<bb;
a9++){ba=bd[a9];
a4=a3.get(ba,a6);
if(!L(a8,a4)){a8=a4;
a7={field:a6,value:a8,items:[]};
bc.push(a7);
}a7.items.push(ba);
}return new aB(bc);
},_sortForGrouping:function(a5,a4){var a6,a7,a3=this.data;
if(!aQ){for(a6=0,a7=a3.length;
a6<a7;
a6++){a3[a6].__position=a6;
}a3=new aB(a3).sort(a5,a4,aP).toArray();
for(a6=0,a7=a3.length;
a6<a7;
a6++){delete a3[a6].__position;
}return a3;
}return this.sort(a5,a4).toArray();
},aggregate:function(a3){var a4,a5,a6={},a7={};
if(a3&&a3.length){for(a4=0,a5=this.data.length;
a4<a5;
a4++){g(a6,a3,this.data[a4],a4,a5,a7);
}}return a6;
}};
function L(a3,a4){if(a3&&a3.getTime&&a4&&a4.getTime){return a3.getTime()===a4.getTime();
}return a3===a4;
}function g(a3,a5,ba,a9,bc,bd){a5=a5||[];
var a8,a4,a7,bb=a5.length;
for(a8=0;
a8<bb;
a8++){a4=a5[a8];
a7=a4.aggregate;
var a6=a4.field;
a3[a6]=a3[a6]||{};
bd[a6]=bd[a6]||{};
bd[a6][a7]=bd[a6][a7]||{};
a3[a6][a7]=G[a7.toLowerCase()](a3[a6][a7],ba,ab.accessor(a6),a9,bc,bd[a6][a7]);
}}var G={sum:function(a4,a5,a3){var a6=a3.get(a5);
if(!Y(a4)){a4=a6;
}else{if(Y(a6)){a4+=a6;
}}return a4;
},count:function(a3){return(a3||0)+1;
},average:function(a4,a6,a3,a5,a7,a8){var a9=a3.get(a6);
if(a8.count===aX){a8.count=0;
}if(!Y(a4)){a4=a9;
}else{if(Y(a9)){a4+=a9;
}}if(Y(a9)){a8.count++;
}if(a5==a7-1&&Y(a4)){a4=a4/a8.count;
}return a4;
},max:function(a4,a5,a3){var a6=a3.get(a5);
if(!Y(a4)&&!V(a4)){a4=a6;
}if(a4<a6&&(Y(a6)||V(a6))){a4=a6;
}return a4;
},min:function(a4,a5,a3){var a6=a3.get(a5);
if(!Y(a4)&&!V(a4)){a4=a6;
}if(a4>a6&&(Y(a6)||V(a6))){a4=a6;
}return a4;
}};
function Y(a3){return typeof a3==="number"&&!isNaN(a3);
}function V(a3){return a3&&a3.getTime;
}function aU(a3){var a4,a5=a3.length,a6=new Array(a5);
for(a4=0;
a4<a5;
a4++){a6[a4]=a3[a4].toJSON();
}return a6;
}aB.process=function(a3,a7){a7=a7||{};
var a8=new aB(a3),a6=a7.group,ba=an(a6||[]).concat(ap(a7.sort||[])),bc,a5=a7.filterCallback,a4=a7.filter,a9=a7.skip,bb=a7.take;
if(a4){a8=a8.filter(a4);
if(a5){a8=a5(a8);
}bc=a8.toArray().length;
}if(ba){a8=a8.sort(ba);
if(a6){a3=a8.toArray();
}}if(a9!==aX&&bb!==aX){a8=a8.range(a9,bb);
}if(a6){a8=a8.group(a6,a3);
}return{total:bc,data:a8.toArray()};
};
var ad=i.extend({init:function(a3){this.data=a3.data;
},read:function(a3){a3.success(this.data);
},update:function(a3){a3.success(a3.data);
},create:function(a3){a3.success(a3.data);
},destroy:function(a3){a3.success(a3.data);
}});
var aE=i.extend({init:function(a3){var a5=this,a4;
a3=a5.options=C({},a5.options,a3);
x(q,function(a6,a7){if(typeof a3[a7]===aR){a3[a7]={url:a3[a7]};
}});
a5.cache=a3.cache?f.create(a3.cache):{find:ak,add:ak};
a4=a3.parameterMap;
if(X(a3.push)){a5.push=a3.push;
}if(!a5.push){a5.push=N;
}a5.parameterMap=X(a4)?a4:function(a6){var a7={};
x(a6,function(a8,a9){if(a8 in a4){a8=a4[a8];
if(Z(a8)){a9=a8.value(a9);
a8=a8.key;
}}a7[a8]=a9;
});
return a7;
};
},options:{parameterMap:N},create:function(a3){return c(this.setup(a3,p));
},read:function(a5){var a8=this,a7,a4,a6,a3=a8.cache;
a5=a8.setup(a5,aD);
a7=a5.success||ak;
a4=a5.error||ak;
a6=a3.find(a5.data);
if(a6!==aX){a7(a6);
}else{a5.success=function(a9){a3.add(a5.data,a9);
a7(a9);
};
b.ajax(a5);
}},update:function(a3){return c(this.setup(a3,aZ));
},destroy:function(a3){return c(this.setup(a3,w));
},setup:function(a5,a8){a5=a5||{};
var a7=this,a6,a4=a7.options[a8],a3=X(a4.data)?a4.data(a5.data):a4.data;
a5=C(true,{},a4,a5);
a6=C(true,{},a3,a5.data);
a5.data=a7.parameterMap(a6,a8);
if(X(a5.url)){a5.url=a5.url(a6);
}return a5;
}});
var f=i.extend({init:function(){this._store={};
},add:function(a4,a3){if(a4!==aX){this._store[aS(a4)]=a3;
}},find:function(a3){return this._store[aS(a3)];
},clear:function(){this._store={};
},remove:function(a3){delete this._store[aS(a3)];
}});
f.create=function(a3){var a4={inmemory:function(){return new f();
}};
if(Z(a3)&&X(a3.find)){return a3;
}if(a3===true){return new f();
}return a4[a3]();
};
function aL(a3,a6,a9,ba,a4){var bc,a5,bb,a7,a8;
for(a7=0,a8=a3.length;
a7<a8;
a7++){bc=a3[a7];
for(a5 in a6){bb=a4[a5];
if(bb&&bb!==a5){bc[bb]=a6[a5](bc);
delete bc[a5];
}}}}function o(a3,a6,a9,ba,a4){var bc,a5,bb,a7,a8;
for(a7=0,a8=a3.length;
a7<a8;
a7++){bc=a3[a7];
for(a5 in a6){bc[a5]=a9._parse(a5,a6[a5](bc));
bb=a4[a5];
if(bb&&bb!==a5){delete bc[bb];
}}}}function n(a3,a6,a9,ba,a5){var bb,a7,a4,a8;
for(a7=0,a8=a3.length;
a7<a8;
a7++){bb=a3[a7];
a4=ba[bb.field];
if(a4&&a4!=bb.field){bb.field=a4;
}bb.value=a9._parse(bb.field,bb.value);
if(bb.hasSubgroups){n(bb.items,a6,a9,ba,a5);
}else{o(bb.items,a6,a9,ba,a5);
}}}function a0(a8,a6,a3,a5,a7,a4){return function(a9){a9=a8(a9);
if(a9&&!W(a5)){if(aV.call(a9)!=="[object Array]"&&!(a9 instanceof ar)){a9=[a9];
}a3(a9,a5,new a6(),a7,a4);
}return a9||[];
};
}var s=i.extend({init:function(bd){var bh=this,ba,a7,bb,a3;
bd=bd||{};
for(ba in bd){a7=bd[ba];
bh[ba]=typeof a7===aR?J(a7):a7;
}a3=bd.modelBase||ah;
if(Z(bh.model)){bh.model=bb=a3.define(bh.model);
}var a4=az(bh.data,bh);
bh._dataAccessFunction=a4;
if(bh.model){var a9=az(bh.groups,bh),be=az(bh.serialize,bh),bc={},a8={},bf={},a6={},bg=false,a5;
bb=bh.model;
if(bb.fields){x(bb.fields,function(bi,bk){var bj;
a5=bi;
if(Z(bk)&&bk.field){a5=bk.field;
}else{if(typeof bk===aR){a5=bk;
}}if(Z(bk)&&bk.from){bj=bk.from;
}bg=bg||(bj&&bj!==bi)||a5!==bi;
a8[bi]=J(bj||a5);
bf[bi]=J(bi);
bc[bj||a5]=bi;
a6[bi]=bj||a5;
});
if(!bd.serialize&&bg){bh.serialize=a0(be,bb,aL,bf,bc,a6);
}}bh._dataAccessFunction=a4;
bh.data=a0(a4,bb,o,a8,bc,a6);
bh.groups=a0(a9,bb,n,a8,bc,a6);
}},errors:function(a3){return a3?a3.errors:null;
},parse:N,data:N,total:function(a3){return a3.length;
},groups:N,aggregates:function(){return{};
},serialize:function(a3){return a3;
}});
function j(a5){var a9=[];
var a7;
var a4;
for(var a6=0,a8=a5.length;
a6<a8;
a6++){a7=a5[a6];
if(!("field" in a7&&"items" in a7&&"value" in a7)){break;
}a4={};
for(var a3 in a7){var ba=a7.shouldSerialize?a7.shouldSerialize:a7.hasOwnProperty;
if(ba.call(a7,a3)){a4[a3]=a7[a3];
}}a9.push(a4);
if(a4.hasSubgroups){a9=a9.concat(j(a4.items));
}}return a9;
}function ag(ba,a3,a8,a9){var a4,a5=0,a6;
while(a3.length&&a9){a4=a3[a5];
a6=a4.items;
var a7=a6.length;
if(ba&&ba.field===a4.field&&ba.value===a4.value){if(ba.hasSubgroups&&ba.items.length){ag(ba.items[ba.items.length-1],a4.items,a8,a9);
}else{a6=a6.slice(a8,a8+a9);
ba.items=ba.items.concat(a6);
}a3.splice(a5--,1);
}else{if(a4.hasSubgroups&&a6.length){ag(a4,a6,a8,a9);
if(!a4.items.length){a3.splice(a5--,1);
}}else{a6=a6.slice(a8,a8+a9);
a4.items=a6;
if(!a4.items.length){a3.splice(a5--,1);
}}}if(a6.length===0){a8-=a7;
}else{a8=0;
a9-=a6.length;
}if(++a5>=a3.length){break;
}}if(a5<a3.length){a3.splice(a5,a3.length-a5);
}}function E(a3){var a5,a9=[],a8,a7,a6;
for(a5=0,a8=a3.length;
a5<a8;
a5++){var a4=a3.at(a5);
if(a4.hasSubgroups){a9=a9.concat(E(a4.items));
}else{a7=a4.items;
for(a6=0;
a6<a7.length;
a6++){a9.push(a7.at(a6));
}}}return a9;
}function a1(a3,a8){var a5,a7,a4,a6;
if(a8){for(a5=0,a7=a3.length;
a5<a7;
a5++){a4=a3.at(a5);
if(a4.hasSubgroups){a1(a4.items,a8);
}else{a4.items=new ac(a4.items,a8);
}}}}function y(a3,a4){for(var a5=0,a6=a3.length;
a5<a6;
a5++){if(a3[a5].hasSubgroups){if(y(a3[a5].items,a4)){return true;
}}else{if(a4(a3[a5].items,a3[a5])){return true;
}}}}function aH(a7,a3,a5,a6){for(var a4=0;
a4<a7.length;
a4++){if(a7[a4].data===a3){break;
}if(aG(a7[a4].data,a5,a6)){break;
}}}function aG(a5,a4,a7){for(var a3=0,a6=a5.length;
a3<a6;
a3++){if(a5[a3]&&a5[a3].hasSubgroups){return aG(a5[a3].items,a4,a7);
}else{if(a5[a3]===a4||a5[a3]===a7){a5[a3]=a7;
return true;
}}}}function aI(ba,a3,a7,a9,a8){for(var bb=0,a6=ba.length;
bb<a6;
bb++){var a5=ba[bb];
if(!a5||a5 instanceof a9){continue;
}if(a5.hasSubgroups!==aX&&!a8){aI(a5.items,a3,a7,a9,a8);
}else{for(var a4=0;
a4<a3.length;
a4++){if(a3[a4]===a5){ba[bb]=a3.at(a4);
aH(a7,a3,a5,ba[bb]);
break;
}}}}}function aF(a3,a7){var a5,a6;
for(a5=0,a6=a3.length;
a5<a6;
a5++){var a4=a3.at(a5);
if(a4.uid==a7.uid){a3.splice(a5,1);
return a4;
}}}function a2(a4,a7){var a8,a3,a5,a6;
for(a5=a4.length-1,a6=0;
a5>=a6;
a5--){a3=a4[a5];
a8={value:a7.get(a3.field),field:a3.field,items:a8?[a8]:[a7],hasSubgroups:!!a8,aggregates:{}};
}return a8;
}function Q(a3,a4){if(a4){return O(a3,function(a5){if(a5.uid){return a5.uid==a4.uid;
}return a5[a4.idField]===a4.id;
});
}return -1;
}function P(a3,a4){if(a4){return O(a3,function(a5){return a5.uid==a4.uid;
});
}return -1;
}function O(a4,a3){var a5,a6;
for(a5=0,a6=a4.length;
a5<a6;
a5++){if(a3(a4[a5])){return a5;
}}return -1;
}function D(a5,a6){if(a5&&!W(a5)){var a3=a5[a6];
var a4;
if(Z(a3)){a4=a3.from||a3.field||a6;
}else{a4=a5[a6]||a6;
}if(X(a4)){return a6;
}return a4;
}return a6;
}function m(a3,a7){var a5,a6,a8={};
for(var a4 in a3){if(a4!=="filters"){a8[a4]=a3[a4];
}}if(a3.filters){a8.filters=[];
for(a5=0,a6=a3.filters.length;
a5<a6;
a5++){a8.filters[a5]=m(a3.filters[a5],a7);
}}else{a8.field=D(a7.fields,a8.field);
}return a8;
}function l(a4,a8){var a6,a7,a9=[],ba,a3;
for(a6=0,a7=a4.length;
a6<a7;
a6++){ba={};
a3=a4[a6];
for(var a5 in a3){ba[a5]=a3[a5];
}ba.field=D(a8.fields,ba.field);
if(ba.aggregates&&U(ba.aggregates)){ba.aggregates=l(ba.aggregates,a8);
}a9.push(ba);
}return a9;
}var t=aq.extend({init:function(a6){var a7=this,a5,a3;
if(a6){a3=a6.data;
}a6=a7.options=C({},a7.options,a6);
a7._map={};
a7._prefetch={};
a7._data=[];
a7._pristineData=[];
a7._ranges=[];
a7._view=[];
a7._pristineTotal=0;
a7._destroyed=[];
a7._pageSize=a6.pageSize;
a7._page=a6.page||(a6.pageSize?1:aX);
a7._sort=ap(a6.sort);
a7._filter=am(a6.filter);
a7._group=an(a6.group);
a7._aggregate=a6.aggregate;
a7._total=a6.total;
a7._shouldDetachObservableParents=true;
aq.fn.init.call(a7);
a7.transport=aW.create(a6,a3);
if(X(a7.transport.push)){a7.transport.push({pushCreate:az(a7._pushCreate,a7),pushUpdate:az(a7._pushUpdate,a7),pushDestroy:az(a7._pushDestroy,a7)});
}if(a6.offlineStorage!=null){if(typeof a6.offlineStorage=="string"){var a4=a6.offlineStorage;
a7._storage={getItem:function(){return JSON.parse(localStorage.getItem(a4));
},setItem:function(a8){localStorage.setItem(a4,aS(a8));
}};
}else{a7._storage=a6.offlineStorage;
}}a7.reader=new ab.data.readers[a6.schema.type||"json"](a6.schema);
a5=a7.reader.model||{};
a7._detachObservableParents();
a7._data=a7._observe(a7._data);
a7._online=true;
a7.bind(["push",A,h,aK,aT,aJ,ay],a6);
},options:{data:null,schema:{modelBase:ah},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false},online:function(a3){if(a3!==aX){if(this._online!=a3){this._online=a3;
if(a3){return this.sync();
}}return b.Deferred().resolve().promise();
}else{return this._online;
}},offlineData:function(a3){if(this.options.offlineStorage==null){return null;
}if(a3!==aX){return this._storage.setItem(a3);
}return this._storage.getItem()||{};
},_isServerGrouped:function(){var a3=this.group()||[];
return this.options.serverGrouping&&a3.length;
},_pushCreate:function(a3){this._push(a3,"pushCreate");
},_pushUpdate:function(a3){this._push(a3,"pushUpdate");
},_pushDestroy:function(a3){this._push(a3,"pushDestroy");
},_push:function(a5,a4){var a3=this._readData(a5);
if(!a3){a3=a5;
}this[a4](a3);
},_flatData:function(a3,a5){if(a3){if(this._isServerGrouped()){return E(a3);
}if(!a5){for(var a4=0;
a4<a3.length;
a4++){a3.at(a4);
}}}return a3;
},parent:ak,get:function(a4){var a5,a6,a3=this._flatData(this._data);
for(a5=0,a6=a3.length;
a5<a6;
a5++){if(a3[a5].id==a4){return a3[a5];
}}},getByUid:function(a4){var a5,a6,a3=this._flatData(this._data);
if(!a3){return;
}for(a5=0,a6=a3.length;
a5<a6;
a5++){if(a3[a5].uid==a4){return a3[a5];
}}},indexOf:function(a3){return P(this._data,a3);
},at:function(a3){return this._data.at(a3);
},data:function(a5){var a4=this;
if(a5!==aX){a4._detachObservableParents();
a4._data=this._observe(a5);
a4._pristineData=a5.slice(0);
a4._storeData();
a4._ranges=[];
a4.trigger("reset");
a4._addRange(a4._data);
a4._total=a4._data.length;
a4._pristineTotal=a4._total;
a4._process(a4._data);
}else{if(a4._data){for(var a3=0;
a3<a4._data.length;
a3++){a4._data.at(a3);
}}return a4._data;
}},view:function(a3){if(a3===aX){return this._view;
}else{this._view=this._observeView(a3);
}},_observeView:function(a3){var a4=this;
aI(a3,a4._data,a4._ranges,a4.reader.model||at,a4._isServerGrouped());
var a5=new ac(a3,a4.reader.model);
a5.parent=function(){return a4.parent();
};
return a5;
},flatView:function(){var a3=this.group()||[];
if(a3.length){return E(this._view);
}else{return this._view;
}},add:function(a3){return this.insert(this._data.length,a3);
},_createNewModel:function(a3){if(this.reader.model){return new this.reader.model(a3);
}if(a3 instanceof at){return a3;
}return new at(a3);
},insert:function(a3,a4){if(!a4){a4=a3;
a3=0;
}if(!(a4 instanceof ah)){a4=this._createNewModel(a4);
}if(this._isServerGrouped()){this._data.splice(a3,0,a2(this.group(),a4));
}else{this._data.splice(a3,0,a4);
}return a4;
},pushCreate:function(a6){if(!U(a6)){a6=[a6];
}var a8=[];
var a3=this.options.autoSync;
this.options.autoSync=false;
try{for(var a4=0;
a4<a6.length;
a4++){var a5=a6[a4];
var a9=this.add(a5);
a8.push(a9);
var a7=a9.toJSON();
if(this._isServerGrouped()){a7=a2(this.group(),a7);
}this._pristineData.push(a7);
}}finally{this.options.autoSync=a3;
}if(a8.length){this.trigger("push",{type:"create",items:a8});
}},pushUpdate:function(a5){if(!U(a5)){a5=[a5];
}var a7=[];
for(var a3=0;
a3<a5.length;
a3++){var a4=a5[a3];
var a6=this._createNewModel(a4);
var a8=this.get(a6.id);
if(a8){a7.push(a8);
a8.accept(a4);
a8.trigger(h);
this._updatePristineForModel(a8,a4);
}else{this.pushCreate(a4);
}}if(a7.length){this.trigger("push",{type:"update",items:a7});
}},pushDestroy:function(a3){var a4=this._removeItems(a3);
if(a4.length){this.trigger("push",{type:"destroy",items:a4});
}},_removeItems:function(a8){if(!U(a8)){a8=[a8];
}var a4=[];
var a3=this.options.autoSync;
this.options.autoSync=false;
try{for(var a6=0;
a6<a8.length;
a6++){var a7=a8[a6];
var a9=this._createNewModel(a7);
var a5=false;
this._eachItem(this._data,function(bc){for(var ba=0;
ba<bc.length;
ba++){var bb=bc.at(ba);
if(bb.id===a9.id){a4.push(bb);
bc.splice(ba,1);
a5=true;
break;
}}});
if(a5){this._removePristineForModel(a9);
this._destroyed.pop();
}}}finally{this.options.autoSync=a3;
}return a4;
},remove:function(a4){var a5,a6=this,a3=a6._isServerGrouped();
this._eachItem(a6._data,function(a7){a5=aF(a7,a4);
if(a5&&a3){if(!a5.isNew||!a5.isNew()){a6._destroyed.push(a5);
}return true;
}});
this._removeModelFromRanges(a4);
this._updateRangesLength();
return a4;
},sync:function(){var ba=this,a6,a7,a3=[],bb=[],a5=ba._destroyed,a4=ba._flatData(ba._data);
var a8=b.Deferred().resolve().promise();
if(ba.online()){if(!ba.reader.model){return a8;
}for(a6=0,a7=a4.length;
a6<a7;
a6++){if(a4[a6].isNew()){a3.push(a4[a6]);
}else{if(a4[a6].dirty){bb.push(a4[a6]);
}}}var a9=[];
a9.push.apply(a9,ba._send("create",a3));
a9.push.apply(a9,ba._send("update",bb));
a9.push.apply(a9,ba._send("destroy",a5));
a8=b.when.apply(null,a9).then(function(){var bc,bd;
for(bc=0,bd=arguments.length;
bc<bd;
bc++){ba._accept(arguments[bc]);
}ba._storeData(true);
ba._change({action:"sync"});
ba.trigger(aT);
});
}else{ba._storeData(true);
ba._change({action:"sync"});
}return a8;
},cancelChanges:function(a3){var a4=this;
if(a3 instanceof ab.data.Model){a4._cancelModel(a3);
}else{a4._destroyed=[];
a4._detachObservableParents();
a4._data=a4._observe(a4._pristineData);
if(a4.options.serverPaging){a4._total=a4._pristineTotal;
}a4._ranges=[];
a4._addRange(a4._data);
a4._change();
}},hasChanges:function(){var a4,a5,a3=this._data;
if(this._destroyed.length){return true;
}for(a4=0,a5=a3.length;
a4<a5;
a4++){if((a3[a4].isNew&&a3[a4].isNew())||a3[a4].dirty){return true;
}}return false;
},_accept:function(a8){var ba=this,a5=a8.models,a7=a8.response,a3=0,a9=ba._isServerGrouped(),a6=ba._pristineData,bb=a8.type,a4;
ba.trigger(aJ,{response:a7,type:bb});
if(a7&&!W(a7)){a7=ba.reader.parse(a7);
if(ba._handleCustomErrors(a7)){return;
}a7=ba.reader.data(a7);
if(!U(a7)){a7=[a7];
}}else{a7=b.map(a5,function(bc){return bc.toJSON();
});
}if(bb==="destroy"){ba._destroyed=[];
}for(a3=0,a4=a5.length;
a3<a4;
a3++){if(bb!=="destroy"){a5[a3].accept(a7[a3]);
if(bb==="create"){a6.push(a9?a2(ba.group(),a5[a3]):a7[a3]);
}else{if(bb==="update"){ba._updatePristineForModel(a5[a3],a7[a3]);
}}}else{ba._removePristineForModel(a5[a3]);
}}},_updatePristineForModel:function(a3,a4){this._executeOnPristineForModel(a3,function(a5,a6){ab.deepExtend(a6[a5],a4);
});
},_executeOnPristineForModel:function(a4,a3){this._eachPristineItem(function(a6){var a5=Q(a6,a4);
if(a5>-1){a3(a5,a6);
return true;
}});
},_removePristineForModel:function(a3){this._executeOnPristineForModel(a3,function(a4,a5){a5.splice(a4,1);
});
},_readData:function(a3){var a4=!this._isServerGrouped()?this.reader.data:this.reader.groups;
return a4.call(this.reader,a3);
},_eachPristineItem:function(a3){this._eachItem(this._pristineData,a3);
},_eachItem:function(a4,a3){if(a4&&a4.length){if(this._isServerGrouped()){y(a4,a3);
}else{a3(a4);
}}},_pristineForModel:function(a5){var a6,a4,a3=function(a7){a4=Q(a7,a5);
if(a4>-1){a6=a7[a4];
return true;
}};
this._eachPristineItem(a3);
return a6;
},_cancelModel:function(a3){var a4=this._pristineForModel(a3);
this._eachItem(this._data,function(a6){var a5=P(a6,a3);
if(a5>=0){if(a4&&(!a3.isNew()||a4.__state__)){a6[a5].accept(a4);
}else{a6.splice(a5,1);
}}});
},_promise:function(a3,a4,a6){var a5=this;
return b.Deferred(function(a7){a5.trigger(aK,{type:a6});
a5.transport[a6].call(a5.transport,C({success:function(a8){a7.resolve({response:a8,models:a4,type:a6});
},error:function(a9,ba,a8){a7.reject(a9);
a5.error(a9,ba,a8);
}},a3));
}).promise();
},_send:function(a7,a4){var a9=this,a5,a6,a8=[],a3=a9.reader.serialize(aU(a4));
if(a9.options.batch){if(a4.length){a8.push(a9._promise({data:{models:a3}},a4,a7));
}}else{for(a5=0,a6=a4.length;
a5<a6;
a5++){a8.push(a9._promise({data:a3[a5]},[a4[a5]],a7));
}}return a8;
},read:function(a3){var a6=this,a5=a6._params(a3);
var a4=b.Deferred();
a6._queueRequest(a5,function(){var a7=a6.trigger(aK,{type:"read"});
if(!a7){a6.trigger(ay);
a6._ranges=[];
a6.trigger("reset");
if(a6.online()){a6.transport.read({data:a5,success:function(a8){a6.success(a8);
a4.resolve();
},error:function(){var a8=aN.call(arguments);
a6.error.apply(a6,a8);
a4.reject.apply(a4,a8);
}});
}else{if(a6.options.offlineStorage!=null){a6.success(a6.offlineData());
a4.resolve();
}}}else{a6._dequeueRequest();
a4.resolve(a7);
}});
return a4.promise();
},_readAggregates:function(a3){return this.reader.aggregates(a3);
},success:function(a3){var a9=this,a7=a9.options;
a9.trigger(aJ,{response:a3,type:"read"});
if(a9.online()){a3=a9.reader.parse(a3);
if(a9._handleCustomErrors(a3)){a9._dequeueRequest();
return;
}a9._total=a9.reader.total(a3);
if(a9._aggregate&&a7.serverAggregates){a9._aggregateResult=a9._readAggregates(a3);
}a3=a9._readData(a3);
}else{a3=a9._readData(a3);
var a6=[];
for(var a4=0;
a4<a3.length;
a4++){var a5=a3[a4];
var a8=a5.__state__;
if(a8=="destroy"){this._destroyed.push(this._createNewModel(a5));
}else{a6.push(a5);
}}a3=a6;
a9._total=a3.length;
}a9._pristineTotal=a9._total;
a9._pristineData=a3.slice(0);
a9._detachObservableParents();
a9._data=a9._observe(a3);
if(a9.options.offlineStorage!=null){a9._eachItem(a9._data,function(bc){for(var ba=0;
ba<bc.length;
ba++){var bb=bc.at(ba);
if(bb.__state__=="update"){bb.dirty=true;
}}});
}a9._storeData();
a9._addRange(a9._data);
a9._process(a9._data);
a9._dequeueRequest();
},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents){for(var a3=0;
a3<this._data.length;
a3++){if(this._data[a3].parent){this._data[a3].parent=ak;
}}}},_storeData:function(a9){var a7=this._isServerGrouped();
var a6=this.reader.model;
function a5(ba){var be=[];
for(var bc=0;
bc<ba.length;
bc++){var bb=ba.at(bc);
var bd=bb.toJSON();
if(a7&&bb.items){bd.items=a5(bb.items);
}else{bd.uid=bb.uid;
if(a6){if(bb.isNew()){bd.__state__="create";
}else{if(bb.dirty){bd.__state__="update";
}}}}be.push(bd);
}return be;
}if(this.options.offlineStorage!=null){var a8=a5(this._data);
for(var a3=0;
a3<this._destroyed.length;
a3++){var a4=this._destroyed[a3].toJSON();
a4.__state__="destroy";
a8.push(a4);
}this.offlineData(a8);
if(a9){this._pristineData=a8;
}}},_addRange:function(a3){var a6=this,a5=a6._skip||0,a4=a5+a6._flatData(a3,true).length;
a6._ranges.push({start:a5,end:a4,data:a3});
a6._ranges.sort(function(a7,a8){return a7.start-a8.start;
});
},error:function(a5,a4,a3){this._dequeueRequest();
this.trigger(aJ,{});
this.trigger(A,{xhr:a5,status:a4,errorThrown:a3});
},_params:function(a3){var a5=this,a4=C({take:a5.take(),skip:a5.skip(),page:a5.page(),pageSize:a5.pageSize(),sort:a5._sort,filter:a5._filter,group:a5._group,aggregate:a5._aggregate},a3);
if(!a5.options.serverPaging){delete a4.take;
delete a4.skip;
delete a4.page;
delete a4.pageSize;
}if(!a5.options.serverGrouping){delete a4.group;
}else{if(a5.reader.model&&a4.group){a4.group=l(a4.group,a5.reader.model);
}}if(!a5.options.serverFiltering){delete a4.filter;
}else{if(a5.reader.model&&a4.filter){a4.filter=m(a4.filter,a5.reader.model);
}}if(!a5.options.serverSorting){delete a4.sort;
}else{if(a5.reader.model&&a4.sort){a4.sort=l(a4.sort,a5.reader.model);
}}if(!a5.options.serverAggregates){delete a4.aggregate;
}else{if(a5.reader.model&&a4.aggregate){a4.aggregate=l(a4.aggregate,a5.reader.model);
}}return a4;
},_queueRequest:function(a4,a3){var a5=this;
if(!a5._requestInProgress){a5._requestInProgress=true;
a5._pending=aX;
a3();
}else{a5._pending={callback:az(a3,a5),options:a4};
}},_dequeueRequest:function(){var a3=this;
a3._requestInProgress=false;
if(a3._pending){a3._queueRequest(a3._pending.options,a3._pending.callback);
}},_handleCustomErrors:function(a4){if(this.reader.errors){var a3=this.reader.errors(a4);
if(a3){this.trigger(A,{xhr:null,status:"customerror",errorThrown:"custom error",errors:a3});
return true;
}}return false;
},_observe:function(a4){var a6=this,a5=a6.reader.model,a7=false;
a6._shouldDetachObservableParents=true;
if(a5&&a4.length){a7=!(a4[0] instanceof a5);
}if(a4 instanceof ar){a6._shouldDetachObservableParents=false;
if(a7){a4.type=a6.reader.model;
a4.wrapAll(a4,a4);
}}else{var a3=a6.pageSize()&&!a6.options.serverPaging?ac:ar;
a4=new a3(a4,a6.reader.model);
a4.parent=function(){return a6.parent();
};
}if(a6._isServerGrouped()){a1(a4,a5);
}if(a6._changeHandler&&a6._data&&a6._data instanceof ar){a6._data.unbind(h,a6._changeHandler);
}else{a6._changeHandler=az(a6._change,a6);
}return a4.bind(h,a6._changeHandler);
},_change:function(a4){var a7=this,a5,a6,a3=a4?a4.action:"";
if(a3==="remove"){for(a5=0,a6=a4.items.length;
a5<a6;
a5++){if(!a4.items[a5].isNew||!a4.items[a5].isNew()){a7._destroyed.push(a4.items[a5]);
}}}if(a7.options.autoSync&&(a3==="add"||a3==="remove"||a3==="itemchange")){a7.sync();
}else{var a8=parseInt(a7._total,10);
if(!Y(a7._total)){a8=parseInt(a7._pristineTotal,10);
}if(a3==="add"){a8+=a4.items.length;
}else{if(a3==="remove"){a8-=a4.items.length;
}else{if(a3!=="itemchange"&&a3!=="sync"&&!a7.options.serverPaging){a8=a7._pristineTotal;
}else{if(a3==="sync"){a8=a7._pristineTotal=parseInt(a7._total,10);
}}}}a7._total=a8;
a7._process(a7._data,a4);
}},_calculateAggregates:function(a4,a6){a6=a6||{};
var a7=new aB(a4),a3=a6.aggregate,a5=a6.filter;
if(a5){a7=a7.filter(a5);
}return a7.aggregate(a3);
},_process:function(a3,a4){var a7=this,a5={},a6;
if(a7.options.serverPaging!==true){a5.skip=a7._skip;
a5.take=a7._take||a7._pageSize;
if(a5.skip===aX&&a7._page!==aX&&a7._pageSize!==aX){a5.skip=(a7._page-1)*a7._pageSize;
}}if(a7.options.serverSorting!==true){a5.sort=a7._sort;
}if(a7.options.serverFiltering!==true){a5.filter=a7._filter;
}if(a7.options.serverGrouping!==true){a5.group=a7._group;
}if(a7.options.serverAggregates!==true){a5.aggregate=a7._aggregate;
a7._aggregateResult=a7._calculateAggregates(a3,a5);
}a6=a7._queryProcess(a3,a5);
a7.view(a6.data);
if(a6.total!==aX&&!a7.options.serverFiltering){a7._total=a6.total;
}a4=a4||{};
a4.items=a4.items||a7._view;
a7.trigger(h,a4);
},_queryProcess:function(a3,a4){return aB.process(a3,a4);
},_mergeState:function(a3){var a4=this;
if(a3!==aX){a4._pageSize=a3.pageSize;
a4._page=a3.page;
a4._sort=a3.sort;
a4._filter=a3.filter;
a4._group=a3.group;
a4._aggregate=a3.aggregate;
a4._skip=a3.skip;
a4._take=a3.take;
if(a4._skip===aX){a4._skip=a4.skip();
a3.skip=a4.skip();
}if(a4._take===aX&&a4._pageSize!==aX){a4._take=a4._pageSize;
a3.take=a4._take;
}if(a3.sort){a4._sort=a3.sort=ap(a3.sort);
}if(a3.filter){a4._filter=a3.filter=am(a3.filter);
}if(a3.group){a4._group=a3.group=an(a3.group);
}if(a3.aggregate){a4._aggregate=a3.aggregate=al(a3.aggregate);
}}return a3;
},query:function(a4){var a6;
var a5=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;
if(a5||((this._data===aX||this._data.length===0)&&!this._destroyed.length)){return this.read(this._mergeState(a4));
}var a3=this.trigger(aK,{type:"read"});
if(!a3){this.trigger(ay);
a6=this._queryProcess(this._data,this._mergeState(a4));
if(!this.options.serverFiltering){if(a6.total!==aX){this._total=a6.total;
}else{this._total=this._data.length;
}}this._aggregateResult=this._calculateAggregates(this._data,a4);
this.view(a6.data);
this.trigger(aJ,{type:"read"});
this.trigger(h,{items:a6.data});
}return b.Deferred().resolve(a3).promise();
},fetch:function(a3){var a5=this;
var a4=function(a6){if(a6!==true&&X(a3)){a3.call(a5);
}};
return this._query().then(a4);
},_query:function(a3){var a4=this;
return a4.query(C({},{page:a4.page(),pageSize:a4.pageSize(),sort:a4.sort(),filter:a4.filter(),group:a4.group(),aggregate:a4.aggregate()},a3));
},next:function(a3){var a5=this,a4=a5.page(),a6=a5.total();
a3=a3||{};
if(!a4||(a6&&a4+1>a5.totalPages())){return;
}a5._skip=a4*a5.take();
a4+=1;
a3.page=a4;
a5._query(a3);
return a4;
},prev:function(a3){var a5=this,a4=a5.page();
a3=a3||{};
if(!a4||a4===1){return;
}a5._skip=a5._skip-a5.take();
a4-=1;
a3.page=a4;
a5._query(a3);
return a4;
},page:function(a5){var a4=this,a3;
if(a5!==aX){a5=af.max(af.min(af.max(a5,1),a4.totalPages()),1);
a4._query({page:a5});
return;
}a3=a4.skip();
return a3!==aX?af.round((a3||0)/(a4.take()||1))+1:aX;
},pageSize:function(a4){var a3=this;
if(a4!==aX){a3._query({pageSize:a4,page:1});
return;
}return a3.take();
},sort:function(a4){var a3=this;
if(a4!==aX){a3._query({sort:a4});
return;
}return a3._sort;
},filter:function(a4){var a3=this;
if(a4===aX){return a3._filter;
}a3._query({filter:a4,page:1});
a3.trigger("reset");
},group:function(a4){var a3=this;
if(a4!==aX){a3._query({group:a4});
return;
}return a3._group;
},total:function(){return parseInt(this._total||0,10);
},aggregate:function(a4){var a3=this;
if(a4!==aX){a3._query({aggregate:a4});
return;
}return a3._aggregate;
},aggregates:function(){return this._aggregateResult;
},totalPages:function(){var a4=this,a3=a4.pageSize()||a4.total();
return af.ceil((a4.total()||0)/a3);
},inRange:function(a4,a5){var a6=this,a3=af.min(a4+a5,a6.total());
if(!a6.options.serverPaging&&a6._data.length>0){return true;
}return a6._findRange(a4,a3).length>0;
},lastRange:function(){var a3=this._ranges;
return a3[a3.length-1]||{start:0,end:0,data:[]};
},firstItemUid:function(){var a3=this._ranges;
return a3.length&&a3[0].data.length&&a3[0].data[0].uid;
},enableRequestsInProgress:function(){this._skipRequestsInProgress=false;
},range:function(a9,bb){a9=af.min(a9||0,this.total());
var bc=this,a6=af.max(af.floor(a9/bb),0)*bb,a8=af.min(a6+bb,bc.total()),a4;
bc._skipRequestsInProgress=false;
a4=bc._findRange(a9,af.min(a9+bb,bc.total()));
if(a4.length){bc._skipRequestsInProgress=true;
bc._pending=aX;
bc._skip=a9>bc.skip()?af.min(a8,(bc.totalPages()-1)*bc.take()):a6;
bc._take=bb;
var a7=bc.options.serverPaging;
var ba=bc.options.serverSorting;
var a5=bc.options.serverFiltering;
var a3=bc.options.serverAggregates;
try{bc.options.serverPaging=true;
if(!bc._isServerGrouped()&&!(bc.group()&&bc.group().length)){bc.options.serverSorting=true;
}bc.options.serverFiltering=true;
bc.options.serverPaging=true;
bc.options.serverAggregates=true;
if(a7){bc._detachObservableParents();
bc._data=a4=bc._observe(a4);
}bc._process(a4);
}finally{bc.options.serverPaging=a7;
bc.options.serverSorting=ba;
bc.options.serverFiltering=a5;
bc.options.serverAggregates=a3;
}return;
}if(bb!==aX){if(!bc._rangeExists(a6,a8)){bc.prefetch(a6,bb,function(){if(a9>a6&&a8<bc.total()&&!bc._rangeExists(a8,af.min(a8+bb,bc.total()))){bc.prefetch(a8,bb,function(){bc.range(a9,bb);
});
}else{bc.range(a9,bb);
}});
}else{if(a6<a9){bc.prefetch(a8,bb,function(){bc.range(a9,bb);
});
}}}},_findRange:function(bi,a5){var bl=this,be=bl._ranges,bb,a4=[],bg,bk,bj,a6,bc,bd,ba,a9=bl.options,bf=a9.serverSorting||a9.serverPaging||a9.serverFiltering||a9.serverGrouping||a9.serverAggregates,a7,a3,a8;
for(bg=0,a8=be.length;
bg<a8;
bg++){bb=be[bg];
if(bi>=bb.start&&bi<=bb.end){a3=0;
for(bk=bg;
bk<a8;
bk++){bb=be[bk];
a7=bl._flatData(bb.data,true);
if(a7.length&&bi+a3>=bb.start){bc=bb.data;
bd=bb.end;
if(!bf){var bh=an(bl.group()||[]).concat(ap(bl.sort()||[]));
ba=bl._queryProcess(bb.data,{sort:bh,filter:bl.filter()});
a7=bc=ba.data;
if(ba.total!==aX){bd=ba.total;
}}bj=0;
if(bi+a3>bb.start){bj=(bi+a3)-bb.start;
}a6=a7.length;
if(bd>a5){a6=a6-(bd-a5);
}a3+=a6-bj;
a4=bl._mergeGroups(a4,bc,bj,a6);
if(a5<=bb.end&&a3==a5-bi){return a4;
}}}break;
}}return[];
},_mergeGroups:function(a3,a5,a6,a7){if(this._isServerGrouped()){var a8=a5.toJSON(),a4;
if(a3.length){a4=a3[a3.length-1];
}ag(a4,a8,a6,a7);
return a3.concat(a8);
}return a3.concat(a5.slice(a6,a7));
},skip:function(){var a3=this;
if(a3._skip===aX){return(a3._page!==aX?(a3._page-1)*(a3.take()||1):aX);
}return a3._skip;
},take:function(){return this._take||this._pageSize;
},_prefetchSuccessHandler:function(a6,a5,a3,a4){var a7=this;
return function(a8){var a9=false,bc={start:a6,end:a5,data:[]},ba,bb,bd;
a7._dequeueRequest();
a7.trigger(aJ,{response:a8,type:"read"});
a8=a7.reader.parse(a8);
bd=a7._readData(a8);
if(bd.length){for(ba=0,bb=a7._ranges.length;
ba<bb;
ba++){if(a7._ranges[ba].start===a6){a9=true;
bc=a7._ranges[ba];
break;
}}if(!a9){a7._ranges.push(bc);
}}bc.data=a7._observe(bd);
bc.end=bc.start+a7._flatData(bc.data,true).length;
a7._ranges.sort(function(be,bf){return be.start-bf.start;
});
a7._total=a7.reader.total(a8);
if(a4||!a7._skipRequestsInProgress){if(a3&&bd.length){a3();
}else{a7.trigger(h,{});
}}};
},prefetch:function(a6,a7,a3){var a8=this,a5=af.min(a6+a7,a8.total()),a4={take:a7,skip:a6,page:a6/a7+1,pageSize:a7,sort:a8._sort,filter:a8._filter,group:a8._group,aggregate:a8._aggregate};
if(!a8._rangeExists(a6,a5)){clearTimeout(a8._timeout);
a8._timeout=setTimeout(function(){a8._queueRequest(a4,function(){if(!a8.trigger(aK,{type:"read"})){a8.transport.read({data:a8._params(a4),success:a8._prefetchSuccessHandler(a6,a5,a3)});
}else{a8._dequeueRequest();
}});
},100);
}else{if(a3){a3();
}}},_multiplePrefetch:function(a6,a7,a3){var a8=this,a5=af.min(a6+a7,a8.total()),a4={take:a7,skip:a6,page:a6/a7+1,pageSize:a7,sort:a8._sort,filter:a8._filter,group:a8._group,aggregate:a8._aggregate};
if(!a8._rangeExists(a6,a5)){if(!a8.trigger(aK,{type:"read"})){a8.transport.read({data:a8._params(a4),success:a8._prefetchSuccessHandler(a6,a5,a3,true)});
}}else{if(a3){a3();
}}},_rangeExists:function(a7,a3){var a8=this,a6=a8._ranges,a4,a5;
for(a4=0,a5=a6.length;
a4<a5;
a4++){if(a6[a4].start<=a7&&a6[a4].end>=a3){return true;
}}return false;
},_removeModelFromRanges:function(a6){var a8,a3,a7;
for(var a4=0,a5=this._ranges.length;
a4<a5;
a4++){a7=this._ranges[a4];
this._eachItem(a7.data,function(a9){a8=aF(a9,a6);
if(a8){a3=true;
}});
if(a3){break;
}}},_updateRangesLength:function(){var a7=0,a5,a6;
for(var a3=0,a4=this._ranges.length;
a3<a4;
a3++){a5=this._ranges[a3];
a5.start=a5.start-a7;
a6=this._flatData(a5.data,true).length;
a7=a5.end-a6;
a5.end=a5.start+a6;
}}});
var aW={};
aW.create=function(a4,a3){var a5,a6=a4.transport;
if(a6){a6.read=typeof a6.read===aR?{url:a6.read}:a6.read;
if(a4.type){ab.data.transports=ab.data.transports||{};
ab.data.schemas=ab.data.schemas||{};
if(ab.data.transports[a4.type]&&!Z(ab.data.transports[a4.type])){a5=new ab.data.transports[a4.type](C(a6,{data:a3}));
}else{a6=C(true,{},ab.data.transports[a4.type],a6);
}a4.schema=C(true,{},ab.data.schemas[a4.type],a4.schema);
}if(!a5){a5=X(a6.read)?a6:new aE(a6);
}}else{a5=new ad({data:a4.data||[]});
}return a5;
};
t.create=function(ba){if(U(ba)||ba instanceof ar){ba={data:ba};
}var a4=ba||{},a3=a4.data,a6=a4.fields,bc=a4.table,bb=a4.select,a7,a8,a9={},a5;
if(!a3&&a6&&!a4.transport){if(bc){a3=T(bc,a6);
}else{if(bb){a3=S(bb,a6);
}}}if(ab.data.Model&&a6&&(!a4.schema||!a4.schema.model)){for(a7=0,a8=a6.length;
a7<a8;
a7++){a5=a6[a7];
if(a5.type){a9[a5.field]=a5;
}}if(!W(a9)){a4.schema=C(true,a4.schema,{model:{fields:a9}});
}}a4.data=a3;
bc=null;
a4.table=null;
return a4 instanceof t?a4:new t(a4);
};
function S(bc,a4){var a9=b(bc)[0].children,a6,a7,a3=[],ba,a5=a4[0],bb=a4[1],bd,a8;
for(a6=0,a7=a9.length;
a6<a7;
a6++){ba={};
a8=a9[a6];
if(a8.disabled){continue;
}ba[a5.field]=a8.text;
bd=a8.attributes.value;
if(bd&&bd.specified){bd=a8.value;
}else{bd=a8.text;
}ba[bb.field]=bd;
a3.push(ba);
}return a3;
}function T(be,a9){var bf=b(be)[0].tBodies[0],bd=bf?bf.rows:[],ba,bb,a8,a7=a9.length,a5=[],a4,bc,a3,a6;
for(ba=0,bb=bd.length;
ba<bb;
ba++){bc={};
a6=true;
a4=bd[ba].cells;
for(a8=0;
a8<a7;
a8++){a3=a4[a8];
if(a3.nodeName.toLowerCase()!=="th"){a6=false;
bc[a9[a8].field]=a3.innerHTML;
}}if(!a6){a5.push(bc);
}}return a5;
}var aj=ah.define({idField:"id",init:function(a7){var a6=this,a5=a6.hasChildren||a7&&a7.hasChildren,a3="items",a4={};
ab.data.Model.fn.init.call(a6,a7);
if(typeof a6.children===aR){a3=a6.children;
}a4={schema:{data:a3,model:{hasChildren:a5,id:a6.idField,fields:a6.fields}}};
if(typeof a6.children!==aR){C(a4,a6.children);
}a4.data=a7;
if(!a5){a5=a4.schema.data;
}if(typeof a5===aR){a5=ab.getter(a5);
}if(X(a5)){a6.hasChildren=!!a5.call(a6,a6);
}a6._childrenOptions=a4;
if(a6.hasChildren){a6._initChildren();
}a6._loaded=!!(a7&&(a7[a3]||a7._loaded));
},_initChildren:function(){var a5=this;
var a3,a6,a4;
if(!(a5.children instanceof M)){a3=a5.children=new M(a5._childrenOptions);
a6=a3.transport;
a4=a6.parameterMap;
a6.parameterMap=function(a7,a8){a7[a5.idField||"id"]=a5.id;
if(a4){a7=a4(a7,a8);
}return a7;
};
a3.parent=function(){return a5;
};
a3.bind(h,function(a7){a7.node=a7.node||a5;
a5.trigger(h,a7);
});
a3.bind(A,function(a8){var a7=a5.parent();
if(a7){a8.node=a8.node||a5;
a7.trigger(A,a8);
}});
a5._updateChildrenField();
}},append:function(a3){this._initChildren();
this.loaded(true);
this.children.add(a3);
},hasChildren:false,level:function(){var a4=this.parentNode(),a3=0;
while(a4&&a4.parentNode){a3++;
a4=a4.parentNode?a4.parentNode():null;
}return a3;
},_updateChildrenField:function(){var a3=this._childrenOptions.schema.data;
this[a3||"items"]=this.children.data();
},_childrenLoaded:function(){this._loaded=true;
this._updateChildrenField();
},load:function(){var a5={};
var a4="_query";
var a3,a6;
if(this.hasChildren){this._initChildren();
a3=this.children;
a5[this.idField||"id"]=this.id;
if(!this._loaded){a3._data=aX;
a4="read";
}a3.one(h,az(this._childrenLoaded,this));
a6=a3[a4](a5);
}else{this.loaded(true);
}return a6||b.Deferred().resolve().promise();
},parentNode:function(){var a3=this.parent();
return a3.parent();
},loaded:function(a3){if(a3!==aX){this._loaded=a3;
}else{return this._loaded;
}},shouldSerialize:function(a3){return ah.fn.shouldSerialize.call(this,a3)&&a3!=="children"&&a3!=="_loaded"&&a3!=="hasChildren"&&a3!=="_childrenOptions";
}});
function r(a3){return function(){var a4=this._data,a5=t.fn[a3].apply(this,aN.call(arguments));
if(this._data!=a4){this._attachBubbleHandlers();
}return a5;
};
}var M=t.extend({init:function(a4){var a3=aj.define({children:a4});
t.fn.init.call(this,C(true,{},{schema:{modelBase:a3,model:a3}},a4));
this._attachBubbleHandlers();
},_attachBubbleHandlers:function(){var a3=this;
a3._data.bind(A,function(a4){a3.trigger(A,a4);
});
},remove:function(a4){var a5=a4.parentNode(),a3=this,a6;
if(a5&&a5._initChildren){a3=a5.children;
}a6=t.fn.remove.call(a3,a4);
if(a5&&!a3.data().length){a5.hasChildren=false;
}return a6;
},success:r("success"),data:r("data"),insert:function(a3,a4){var a5=this.parent();
if(a5&&a5._initChildren){a5.hasChildren=true;
a5._initChildren();
}return t.fn.insert.call(this,a3,a4);
},_find:function(a7,a9){var a5,a6,a8,a4,a3;
a8=t.fn[a7].call(this,a9);
if(a8){return a8;
}a4=this._flatData(this._data);
if(!a4){return;
}for(a5=0,a6=a4.length;
a5<a6;
a5++){a3=a4[a5].children;
if(!(a3 instanceof M)){continue;
}a8=a3[a7](a9);
if(a8){return a8;
}}},get:function(a3){return this._find("get",a3);
},getByUid:function(a3){return this._find("getByUid",a3);
}});
function R(be,a7){var bc=b(be).children(),a9,bd,a5=[],bf,bi=a7[0].field,bj=a7[1]&&a7[1].field,bg=a7[2]&&a7[2].field,ba=a7[3]&&a7[3].field,bb,a8,bh,a4,a3;
function a6(bk,bl){return bk.filter(bl).add(bk.find(bl));
}for(a9=0,bd=bc.length;
a9<bd;
a9++){bf={_loaded:true};
bb=bc.eq(a9);
bh=bb[0].firstChild;
a3=bb.children();
be=a3.filter("ul");
a3=a3.filter(":not(ul)");
a8=bb.attr("data-id");
if(a8){bf.id=a8;
}if(bh){bf[bi]=bh.nodeType==3?bh.nodeValue:a3.text();
}if(bj){bf[bj]=a6(a3,"a").attr("href");
}if(ba){bf[ba]=a6(a3,"img").attr("src");
}if(bg){a4=a6(a3,".k-sprite").prop("className");
bf[bg]=a4&&b.trim(a4.replace("k-sprite",""));
}if(be.length){bf.items=R(be.eq(0),a7);
}if(bb.attr("data-hasChildren")=="true"){bf.hasChildren=true;
}a5.push(bf);
}return a5;
}M.create=function(a7){a7=a7&&a7.push?{data:a7}:a7;
var a4=a7||{},a3=a4.data,a5=a4.fields,a6=a4.list;
if(a3&&a3._dataSource){return a3._dataSource;
}if(!a3&&a5&&!a4.transport){if(a6){a3=R(a6,a5);
}}a4.data=a3;
return a4 instanceof M?a4:new M(a4);
};
var e=ab.Observable.extend({init:function(a4,a6,a5){ab.Observable.fn.init.call(this);
this._prefetching=false;
this.dataSource=a4;
this.prefetch=!a5;
var a3=this;
a4.bind("change",function(){a3._change();
});
a4.bind("reset",function(){a3._reset();
});
this._syncWithDataSource();
this.setViewSize(a6);
},setViewSize:function(a3){this.viewSize=a3;
this._recalculate();
},at:function(a4){var a7=this.pageSize,a5,a6=true,a3;
if(a4>=this.total()){this.trigger("endreached",{index:a4});
return null;
}if(!this.useRanges){return this.dataSource.view()[a4];
}if(this.useRanges){if(a4<this.dataOffset||a4>=this.skip+a7){a6=this.range(Math.floor(a4/a7)*a7);
}if(a4===this.prefetchThreshold){this._prefetch();
}if(a4===this.midPageThreshold){this.range(this.nextMidRange,true);
}else{if(a4===this.nextPageThreshold){this.range(this.nextFullRange);
}else{if(a4===this.pullBackThreshold){if(this.offset===this.skip){this.range(this.previousMidRange);
}else{this.range(this.previousFullRange);
}}}}if(a6){return this.dataSource.at(a4-this.dataOffset);
}else{this.trigger("endreached",{index:a4});
return null;
}}},indexOf:function(a3){return this.dataSource.data().indexOf(a3)+this.dataOffset;
},total:function(){return parseInt(this.dataSource.total(),10);
},next:function(){var a3=this,a5=a3.pageSize,a4=a3.skip-a3.viewSize+a5,a6=af.max(af.floor(a4/a5),0)*a5;
this.offset=a4;
this.dataSource.prefetch(a6,a5,function(){a3._goToRange(a4,true);
});
},range:function(a6,a5){if(this.offset===a6){return true;
}var a3=this,a7=this.pageSize,a8=af.max(af.floor(a6/a7),0)*a7,a4=this.dataSource;
if(a5){a8+=a7;
}if(a4.inRange(a6,a7)){this.offset=a6;
this._recalculate();
this._goToRange(a6);
return true;
}else{if(this.prefetch){a4.prefetch(a8,a7,function(){a3.offset=a6;
a3._recalculate();
a3._goToRange(a6,true);
});
return false;
}}return true;
},syncDataSource:function(){var a3=this.offset;
this.offset=null;
this.range(a3);
},destroy:function(){this.unbind();
},_prefetch:function(){var a3=this,a5=this.pageSize,a6=this.skip+a5,a4=this.dataSource;
if(!a4.inRange(a6,a5)&&!this._prefetching&&this.prefetch){this._prefetching=true;
this.trigger("prefetching",{skip:a6,take:a5});
a4.prefetch(a6,a5,function(){a3._prefetching=false;
a3.trigger("prefetched",{skip:a6,take:a5});
});
}},_goToRange:function(a4,a3){if(this.offset!==a4){return;
}this.dataOffset=a4;
this._expanding=a3;
this.dataSource.range(a4,this.pageSize);
this.dataSource.enableRequestsInProgress();
},_reset:function(){this._syncPending=true;
},_change:function(){var a3=this.dataSource;
this.length=this.useRanges?a3.lastRange().end:a3.view().length;
if(this._syncPending){this._syncWithDataSource();
this._recalculate();
this._syncPending=false;
this.trigger("reset",{offset:this.offset});
}this.trigger("resize");
if(this._expanding){this.trigger("expand");
}delete this._expanding;
},_syncWithDataSource:function(){var a3=this.dataSource;
this._firstItemUid=a3.firstItemUid();
this.dataOffset=this.offset=a3.skip()||0;
this.pageSize=a3.pageSize();
this.useRanges=a3.options.serverPaging;
},_recalculate:function(){var a4=this.pageSize,a3=this.offset,a6=this.viewSize,a5=Math.ceil(a3/a4)*a4;
this.skip=a5;
this.midPageThreshold=a5+a4-1;
this.nextPageThreshold=a5+a6-1;
this.prefetchThreshold=a5+Math.floor(a4/3*2);
this.pullBackThreshold=this.offset-1;
this.nextMidRange=a5+a4-a6;
this.nextFullRange=a5;
this.previousMidRange=a3-a6;
this.previousFullRange=a5-a4;
}});
var d=ab.Observable.extend({init:function(a5,a4){var a3=this;
ab.Observable.fn.init.call(a3);
this.dataSource=a5;
this.batchSize=a4;
this._total=0;
this.buffer=new e(a5,a4*3);
this.buffer.bind({endreached:function(a6){a3.trigger("endreached",{index:a6.index});
},prefetching:function(a6){a3.trigger("prefetching",{skip:a6.skip,take:a6.take});
},prefetched:function(a6){a3.trigger("prefetched",{skip:a6.skip,take:a6.take});
},reset:function(){a3._total=0;
a3.trigger("reset");
},resize:function(){a3._total=Math.ceil(this.length/a3.batchSize);
a3.trigger("resize",{total:a3.total(),offset:this.offset});
}});
},syncDataSource:function(){this.buffer.syncDataSource();
},at:function(a5){var a3=this.buffer,a7=a5*this.batchSize,a8=this.batchSize,a9=[],a6;
if(a3.offset>a7){a3.at(a3.offset-1);
}for(var a4=0;
a4<a8;
a4++){a6=a3.at(a7+a4);
if(a6===null){break;
}a9.push(a6);
}return a9;
},total:function(){return this._total;
},destroy:function(){this.buffer.destroy();
this.unbind();
}});
C(true,ab.data,{readers:{json:s},Query:aB,DataSource:t,HierarchicalDataSource:M,Node:aj,ObservableObject:at,ObservableArray:ar,LazyObservableArray:ac,LocalTransport:ad,RemoteTransport:aE,Cache:f,DataReader:s,Model:ah,Buffer:e,BatchBuffer:d});
})(window.kendo.jQuery);
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
