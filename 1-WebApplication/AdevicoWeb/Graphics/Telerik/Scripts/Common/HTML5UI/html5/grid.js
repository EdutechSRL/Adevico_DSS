(function(b,a){a(["./kendo.data","./kendo.columnsorter","./kendo.editable","./kendo.window","./kendo.filtermenu","./kendo.columnmenu","./kendo.groupable","./kendo.pager","./kendo.selectable","./kendo.sortable","./kendo.reorderable","./kendo.resizable","./kendo.mobile.actionsheet","./kendo.mobile.pane","./kendo.ooxml","./kendo.excel","./kendo.pdf"],b);
})(function(){(function(a,bl){var az=window.kendo,bk=az.ui,F=az.data.DataSource,ae=bk.Groupable,bh=az.support.tbodyInnerHtml,b=az._activeElement,bw=bk.Widget,aA=az.keys,aw=a.isPlainObject,P=a.extend,aE=a.map,ac=a.grep,ap=a.isArray,ao=a.inArray,aX=Array.prototype.push,aW=a.proxy,at=az.isFunction,ar=a.isEmptyObject,aG=Math,aV="progress",O="error",D=":not(.k-group-cell):not(.k-hierarchy-cell):visible",a6="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",aN="tr:not(.k-footer-template):visible",aM=":not(.k-group-cell):not(.k-hierarchy-cell):visible",T=aN+":first>"+aM+":first",aj="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",aT=".kendoGrid",M="edit",a3="save",aY="remove",L="detailInit",Q="filterMenuInit",p="columnMenuInit",k="change",n="columnHide",v="columnShow",a4="saveChanges",E="dataBound",K="detailExpand",J="detailCollapse",W="k-state-focused",a5="k-state-selected",u="columnResize",t="columnReorder",o="columnLock",x="columnUnlock",m="click",ak="height",bd="tabIndex",aa="function",ba="string",H="Are you sure you want to delete this record?",A="Delete",j="Cancel",Z=/(\}|\#)/ig,bi=/#/ig,bv="[\\x20\\t\\r\\n\\f]",aO=new RegExp("(^|"+bv+")(k-group-cell|k-hierarchy-cell)("+bv+"|$)"),R=new RegExp("(^|"+bv+")(k-filter-row)("+bv+"|$)"),z='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',ax=false,h=az.support.browser,au=h.msie&&h.version==7,av=h.msie&&h.version==8;
var bq=bw.extend({init:function(bx,by){var bz=this;
bw.fn.init.call(bz,bx,by);
bz._refreshHandler=aW(bz.refresh,bz);
bz.setDataSource(by.dataSource);
bz.wrap();
},setDataSource:function(bx){var by=this;
if(by.dataSource){by.dataSource.unbind(k,by._refreshHandler);
}by.dataSource=bx;
by.dataSource.bind(k,by._refreshHandler);
},options:{name:"VirtualScrollable",itemHeight:a.noop,prefetch:true},destroy:function(){var bx=this;
bw.fn.destroy.call(bx);
bx.dataSource.unbind(k,bx._refreshHandler);
bx.wrapper.add(bx.verticalScrollbar).off(aT);
if(bx.drag){bx.drag.destroy();
bx.drag=null;
}bx.wrapper=bx.element=bx.verticalScrollbar=null;
bx._refreshHandler=null;
},wrap:function(){var bz=this,by=az.support.scrollbar()+1,bx=bz.element,bA;
bx.css({width:"auto",overflow:"hidden"}).css((ax?"padding-left":"padding-right"),by);
bz.content=bx.children().first();
bA=bz.wrapper=bz.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+aT+" mousewheel"+aT,aW(bz._wheelScroll,bz));
if(az.support.kineticScrollNeeded){bz.drag=new az.UserEvents(bz.wrapper,{global:true,start:function(bB){bB.sender.capture();
},move:function(bB){bz.verticalScrollbar.scrollTop(bz.verticalScrollbar.scrollTop()-bB.y.delta);
bA.scrollLeft(bA.scrollLeft()-bB.x.delta);
bB.preventDefault();
}});
}bz.verticalScrollbar=a('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:by}).appendTo(bx).bind("scroll"+aT,aW(bz._scroll,bz));
},_wheelScroll:function(by){if(by.ctrlKey){return;
}var bz=this.verticalScrollbar.scrollTop(),bx=az.wheelDeltaY(by);
if(bx){by.preventDefault();
a(by.currentTarget).one("wheel"+aT,false);
this.verticalScrollbar.scrollTop(bz+(-bx));
}},_scroll:function(bz){var bI=this,by=!bI.options.prefetch,bF=bz.currentTarget.scrollTop,bx=bI.dataSource,bE=bI.itemHeight,bG=bx.skip()||0,bH=bI._rangeStart||bG,bB=bI.element.innerHeight(),bC=!!(bI._scrollbarTop&&bI._scrollbarTop>bF),bA=aG.max(aG.floor(bF/bE),0),bD=aG.max(bA+aG.floor(bB/bE),0);
bI._scrollTop=bF-(bH*bE);
bI._scrollbarTop=bF;
bI._scrolling=by;
if(!bI._fetch(bA,bD,bC)){bI.wrapper[0].scrollTop=bI._scrollTop;
}if(by){if(bI._scrollingTimeout){clearTimeout(bI._scrollingTimeout);
}bI._scrollingTimeout=setTimeout(function(){bI._scrolling=false;
bI._page(bI._rangeStart,bI.dataSource.take());
},100);
}},_fetch:function(bA,bC,bF){var bH=this,by=bH.dataSource,bB=bH.itemHeight,bG=by.take(),bE=bH._rangeStart||by.skip()||0,bx=aG.floor(bA/bG)*bG,bz=false,bD=0.33;
if(bA<bE){bz=true;
bE=aG.max(0,bC-bG);
bH._scrollTop=(bA-bE)*bB;
bH._page(bE,bG);
}else{if(bC>=bE+bG&&!bF){bz=true;
bE=bA;
bH._scrollTop=bB;
bH._page(bE,bG);
}else{if(!bH._fetching&&bH.options.prefetch){if(bA<(bx+bG)-bG*bD&&bA>bG){by.prefetch(bx-bG,bG);
}if(bC>bx+bG*bD){by.prefetch(bx+bG,bG);
}}}}return bz;
},_page:function(bz,bA){var bB=this,by=!bB.options.prefetch,bx=bB.dataSource;
clearTimeout(bB._timeout);
bB._fetching=true;
bB._rangeStart=bz;
if(bx.inRange(bz,bA)){bx.range(bz,bA);
}else{if(!by){az.ui.progress(bB.wrapper.parent(),true);
}bB._timeout=setTimeout(function(){if(!bB._scrolling){if(by){az.ui.progress(bB.wrapper.parent(),true);
}bx.range(bz,bA);
}},100);
}},repaintScrollbar:function(){var bE=this,bz="",bC=250000,by=bE.dataSource,bD=!az.support.kineticScrollNeeded?az.support.scrollbar():0,bG=bE.wrapper[0],bF,bA,bB;
bB=bE.itemHeight=bE.options.itemHeight()||0;
var bx=(bG.scrollWidth>bG.offsetWidth)?bD:0;
bF=by.total()*bB+bx;
for(bA=0;
bA<aG.floor(bF/bC);
bA++){bz+='<div style="width:1px;height:'+bC+'px"></div>';
}if(bF%bC){bz+='<div style="width:1px;height:'+(bF%bC)+'px"></div>';
}bE.verticalScrollbar.html(bz);
bG.scrollTop=bE._scrollTop;
},refresh:function(){var bz=this,bx=bz.dataSource,by=bz._rangeStart;
az.ui.progress(bz.wrapper.parent(),false);
clearTimeout(bz._timeout);
bz.repaintScrollbar();
if(bz.drag){bz.drag.cancel();
}if(by&&!bz._fetching){bz._rangeStart=bx.skip();
if(bx.page()===1){bz.verticalScrollbar[0].scrollTop=0;
}}bz._fetching=false;
}});
function af(bx){return new Array(bx+1).join('<td class="k-group-cell">&nbsp;</td>');
}function bb(by){var bx,bz=" ";
if(by){if(typeof by===ba){return by;
}for(bx in by){bz+=bx+'="'+by[bx]+'"';
}}return bz;
}var G={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}};
function al(bx){var by=0;
a("> .k-grouping-header, > .k-grid-toolbar",bx).each(function(){by+=this.offsetHeight;
});
return by;
}function C(bx,by){a("th, th .k-grid-filter, th .k-link",bx).add(document.body).css("cursor",by);
}function i(by){var bA,bB,bx={},bz={};
if(!ar(by)){if(!ap(by)){by=[by];
}for(bA=0,bB=by.length;
bA<bB;
bA++){bx[by[bA].aggregate]=0;
bz[by[bA].field]=bx;
}}return bz;
}function a2(bB,bC,bz,bx,by){var bD=bC;
bC=a();
by=by||1;
for(var bA=0;
bA<by;
bA++){bC=bC.add(bB.eq(bD+bA));
}if(typeof bz=="number"){bC[bx?"insertBefore":"insertAfter"](bB.eq(bz));
}else{bC.appendTo(bz);
}}function N(bz,bx,by){return a(bz).add(bx).find(by);
}function g(bB,bA,bz){var bC,bD,bx,by;
bz=!ap(bz)?[bz]:bz;
for(bC=0,bD=bz.length;
bC<bD;
bC++){bx=bz[bC];
if(aw(bx)&&bx.click){by=bx.name||bx.text;
bA.on(m+aT,"a.k-grid-"+(by||"").replace(/\s/g,""),{commandName:by},aW(bx.click,bB));
}}}function aR(bx,by,bz){return aE(bx,function(bA){bA=typeof bA===ba?{field:bA}:bA;
var bB;
if(!ay(bA)||bz){bA.attributes=c(bA.attributes);
bA.footerAttributes=c(bA.footerAttributes);
bA.headerAttributes=c(bA.headerAttributes);
bB=true;
}if(bA.columns){bA.columns=aR(bA.columns,by,bB);
}return P({encoded:by,hidden:bB},bA);
});
}function q(bx,by){var bz=[];
r(bx,by,bz);
return bz[bz.length-1];
}function r(bx,by,bB){bB=bB||[];
for(var bz=0;
bz<by.length;
bz++){if(bx===by[bz]){return true;
}else{if(by[bz].columns){var bA=bB.length;
bB.push(by[bz]);
if(!r(bx,by[bz].columns,bB)){bB.splice(bA,bB.length-bA);
}else{return true;
}}}}return false;
}function a8(bx,bz){var by=bz?a0:c;
bx.hidden=!bz;
bx.attributes=by(bx.attributes);
bx.footerAttributes=by(bx.footerAttributes);
bx.headerAttributes=by(bx.headerAttributes);
}function aq(){return this.style.display!=="none";
}function ay(bx){return br([bx]).length>0;
}function br(bx){return ac(bx,function(by){var bz=!by.hidden;
if(bz&&by.columns){bz=br(by.columns).length>0;
}return bz;
});
}function bj(bx){return a(bx).map(function(){return this.toArray();
});
}function bn(bx,by,bC){var bz=I(aD(by));
var bA=I(aP(by));
var bB=bx.rowSpan;
if(bC){if(bz>bA){bx.rowSpan=(bB-(bz-bA))||1;
}else{bx.rowSpan=bB+(bA-bz);
}}else{if(bz>bA){bx.rowSpan=bB+(bz-bA);
}else{bx.rowSpan=(bB-(bA-bz))||1;
}}}function aI(bE,bG,bC,bx,by,bz,bB){var bF=I(bE);
var bH=I([bG]);
if(bF>bH){var bA=new Array(bB+1).join('<th class="k-group-cell k-header">&nbsp;</th>');
var bD=bz.children(":not(.k-filter-row)");
a(new Array((bF-bH)+1).join("<tr>"+bA+"</tr>")).insertAfter(bD.last());
}d(bz,bF-bH);
aH(bC,bx,by,bz);
}function bm(bH,bA,bE){bE=bE||0;
var bF;
var by;
var bx=bA;
bA=aB(bA);
var bz={};
var bG=bH.find(">tr:not(.k-filter-row)");
var bB=function(){var bI=a(this);
return !bI.hasClass("k-group-cell")&&!bI.hasClass("k-hierarchy-cell");
};
for(var bC=0,bD=bA.length;
bC<bD;
bC++){bF=s(bA[bC],bx);
if(!bz[bF.row]){bz[bF.row]=bG.eq(bF.row).find(".k-header").filter(bB);
}by=bz[bF.row].eq(bF.cell);
by.attr(az.attr("index"),bE+bC);
}return bA.length;
}function I(bx){var bA=1;
var bz=0;
for(var by=0;
by<bx.length;
by++){if(bx[by].columns){var bB=I(bx[by].columns);
if(bB>bz){bz=bB;
}}}return bA+bz;
}function aH(bC,by,bz,bA){var bE=y(bC[0],by);
var bG=bz.find(">tr:not(.k-filter-row):eq("+bE.row+")>th.k-header");
var bF=a();
var bD=bE.cell;
var bB;
for(bB=0;
bB<bC.length;
bB++){bF=bF.add(bG.eq(bD+bB));
}bA.find(">tr:not(.k-filter-row)").eq(bE.row).append(bF);
var bx=[];
for(bB=0;
bB<bC.length;
bB++){if(bC[bB].columns){bx=bx.concat(bC[bB].columns);
}}if(bx.length){aH(bx,by,bz,bA);
}}function s(by,bz,bC,bx){var bB;
var bA;
bC=bC||0;
bx=bx||{};
bx[bC]=bx[bC]||0;
for(bA=0;
bA<bz.length;
bA++){if(bz[bA]==by){bB={cell:bx[bC],row:bC};
break;
}else{if(bz[bA].columns){bB=s(by,bz[bA].columns,bC+1,bx);
if(bB){break;
}}}bx[bC]++;
}return bB;
}function S(by,bD,bC,bx){if(bD.columns){bD=bD.columns;
return bD[bx?0:bD.length-1];
}else{var bA=q(bD,by);
var bB;
if(bA){bB=bA.columns;
}else{bB=by;
}var bz=ao(bD,bB);
if(bz===0&&bx){bz++;
}else{if(bz==bB.length-1&&!bx){bz--;
}else{if(bz>0||(bz===0&&!bx)){bz+=bx?-1:1;
}}}bD=bB[Math.max(bz,0)];
if(bD&&bD!=bC&&bD.columns){return S(by,bD,bC,bx);
}}return null;
}function y(by,bz,bC,bx){var bB;
var bA;
bC=bC||0;
bx=bx||{};
bx[bC]=bx[bC]||0;
for(bA=0;
bA<bz.length;
bA++){if(bz[bA]==by){bB={cell:bx[bC],row:bC};
break;
}else{if(bz[bA].columns){bB=y(by,bz[bA].columns,bC+1,bx);
if(bB){break;
}}}if(!bz[bA].hidden){bx[bC]++;
}}return bB;
}function V(bx){var by=U(aD(bx));
return by.concat(U(aP(bx)));
}function U(by){var bA=[];
var bx=[];
for(var bz=0;
bz<by.length;
bz++){bA.push(by[bz]);
if(by[bz].columns){bx=bx.concat(by[bz].columns);
}}if(bx.length){bA=bA.concat(U(bx));
}return bA;
}function am(by){var bz=0;
var bx;
for(var bA=0;
bA<by.length;
bA++){bx=by[bA];
if(bx.columns){bz+=am(bx.columns);
}else{if(bx.hidden){bz++;
}}}return bz;
}function w(bx){var by,bB=0;
for(var bz=0,bA=bx.length;
bz<bA;
bz++){by=bx[bz].style.width;
if(by&&by.indexOf("%")==-1){bB+=parseInt(by,10);
}}return bB;
}function a1(by,bz){var bx=by.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
var bB;
for(var bA=0;
bA<bx.length;
bA++){bB=bx[bA].rowSpan;
if(bB>1){bx[bA].rowSpan=(bB-bz)||1;
}}}function d(by,bz){var bx=by.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bA=0;
bA<bx.length;
bA++){bx[bA].rowSpan+=bz;
}}function aZ(by){var bB=by.find("tr:not(.k-filter-row)");
var bz=bB.filter(function(){return !a(this).children().length;
}).remove().length;
var bx=bB.find("th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bA=0;
bA<bx.length;
bA++){if(bx[bA].rowSpan>1){bx[bA].rowSpan-=bz;
}}return bB.length-bz;
}function aF(bz,bx,bF,bE,bC){var bA,bD,bB,by=[];
for(bA=0,bB=bz.length;
bA<bB;
bA++){bD=bF[bE]||[];
bD.push(bx.eq(bC+bA));
bF[bE]=bD;
if(bz[bA].columns){by=by.concat(bz[bA].columns);
}}if(by.length){aF(by,bx,bF,bE+1,bC+bz.length);
}}function aD(bx){return ac(bx,function(by){return by.locked;
});
}function aP(bx){return ac(bx,function(by){return !by.locked;
});
}function bu(bx){return ac(bx,function(by){return !by.locked&&ay(by);
});
}function bt(bx){return ac(bx,function(by){return by.locked&&ay(by);
});
}function bs(bx){var bz=[];
for(var by=0;
by<bx.length;
by++){if(bx[by].hidden){continue;
}if(bx[by].columns){bz=bz.concat(bs(bx[by].columns));
}else{bz.push(bx[by]);
}}return bz;
}function aB(bx){var bz=[];
for(var by=0;
by<bx.length;
by++){if(!bx[by].columns){bz.push(bx[by]);
continue;
}bz=bz.concat(aB(bx[by].columns));
}return bz;
}function aC(by){var bB=by.find(">tr:not(.k-filter-row)");
var bz=function(){var bC=a(this);
return !bC.hasClass("k-group-cell")&&!bC.hasClass("k-hierarchy-cell");
};
var bx=a();
if(bB.length>1){bx=bB.find("th").filter(bz).filter(function(){return this.rowSpan>1;
});
}bx=bx.add(bB.last().find("th").filter(bz));
var bA=az.attr("index");
bx.sort(function(bC,bD){bC=a(bC);
bD=a(bD);
var bE=bC.attr(bA);
var bF=bD.attr(bA);
if(bE===bl){bE=a(bC).index();
}if(bF===bl){bF=a(bD).index();
}bE=parseInt(bE,10);
bF=parseInt(bF,10);
return bE>bF?1:(bE<bF?-1:0);
});
return bx;
}function aU(bx){var by=bx.closest("table");
var bI=a().add(bx);
var bJ=bx.closest("tr");
var bz=by.find("tr:not(.k-filter-row)");
var bC=bz.index(bJ);
if(bC>0){var bE=bz.eq(bC-1);
var bG=bE.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !a(this).attr("rowspan");
});
var bD=0;
var bB=bJ.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bx);
var bH=bx.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1;
});
for(bA=0;
bA<bH.length;
bA++){bD+=bH[bA].colSpan||1;
}bB+=Math.max(bD-1,0);
bD=0;
for(var bA=0;
bA<bG.length;
bA++){var bF=bG.eq(bA);
if(bF.attr("colSpan")){bD+=bF[0].colSpan;
}else{bD+=1;
}if(bB>=bA&&bB<bD){bI=aU(bF).add(bI);
break;
}}}return bI;
}function l(bx){var bC=bx.closest("table");
var bJ=a().add(bx);
var bK=bx.closest("tr");
var bD=bC.find("tr:not(.k-filter-row)");
var bG=bD.index(bK)+bx[0].rowSpan;
var bB=az.attr("colspan");
if(bG<=bD.length-1){var bz=bK.next();
var bF=bK.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bx);
var bI=bx.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");
var bE;
bI=bI.filter(function(){return !this.rowSpan||this.rowSpan===1;
});
var bH=0;
for(bE=0;
bE<bI.length;
bE++){bH+=parseInt(bI.eq(bE).attr(bB),10)||1;
}var by=bz.find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bA=parseInt(bx.attr(bB),10)||1;
bE=0;
while(bE<bA){bz=by.eq(bE+bH);
bJ=bJ.add(l(bz));
var bL=parseInt(bz.attr(bB),10);
if(bL>1){bA-=bL-1;
}bE++;
}}return bJ;
}function f(bA,bz,bx){var by,bB=bA;
if(bh){bA[0].innerHTML=bx;
}else{by=document.createElement("div");
by.innerHTML="<table><tbody>"+bx+"</tbody></table>";
bA=by.firstChild.firstChild;
bz[0].replaceChild(bA,bB[0]);
bA=a(bA);
}return bA;
}function c(bx){bx=bx||{};
var by=bx.style;
if(!by){by="display:none";
}else{by=by.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none");
if(by===bx.style){by=by.replace(/(.*)?/i,"display:none;$1");
}}return P({},bx,{style:by});
}function a0(bx){bx=bx||{};
var by=bx.style;
if(by){bx.style=by.replace(/(display\s*:\s*none\s*;?)*/ig,"");
}return bx;
}function aQ(bB,bC,bA,bz){var bx=bB.find(">colgroup"),bD,by=aE(bC,function(bE){bD=bE.width;
if(bD&&parseInt(bD,10)!==0){return az.format('<col style="width:{0}"/>',typeof bD===ba?bD:bD+"px");
}return"<col />";
});
if(bA||bx.find(".k-hierarchy-col").length){by.splice(0,0,'<col class="k-hierarchy-col" />');
}if(bx.length){bx.remove();
}bx=a(new Array(bz+1).join('<col class="k-group-col">')+by.join(""));
if(!bx.is("colgroup")){bx=a("<colgroup/>").append(bx);
}bB.prepend(bx);
if(h.msie&&h.version==8){bB.css("display","inline-table");
window.setTimeout(function(){bB.css("display","");
},1);
}}function aS(bB,bx){var bz=0;
var by,bA;
for(by=0,bA=bx.length;
by<bA;
by++){if(bx[by].locked){bB.eq(by).insertBefore(bB.eq(bz));
bz++;
}}}function B(bx){var bB={},bz,by,bA;
for(by=0,bA=bx.length;
by<bA;
by++){bz=bx[by];
bB[bz.value]=bz.text;
}return bB;
}function Y(bB,by,bx){var bA=bx&&bx.length&&aw(bx[0])&&"value" in bx[0],bz=bA?B(bx)[bB]:bB;
bz=bz!=null?bz:"";
return by?az.format(by,bz):bz;
}function a7(by,bz,bC){var bA=0,bB,bx=by[bA];
while(bx){bB=bC?true:bx.style.display!=="none";
if(bB&&!aO.test(bx.className)&&--bz<0){bx.style.display=bC?"":"none";
break;
}bx=by[++bA];
}}function an(bC,by){var bz=0,bA=bC.length,bx,bB;
for(;
bz<bA;
bz+=1){bB=bC.eq(bz);
if(bB.is(".k-grouping-row,.k-detail-row")){bx=bB.children(":not(.k-group-cell):first,.k-detail-cell").last();
bx.attr("colspan",parseInt(bx.attr("colspan"),10)-1);
}else{if(bB.hasClass("k-grid-edit-row")&&(bx=bB.children(".k-edit-container")[0])){bx=a(bx);
bx.attr("colspan",parseInt(bx.attr("colspan"),10)-1);
bx.find("col").eq(by).remove();
bB=bx.find("tr:first");
}a7(bB[0].cells,by,false);
}}}function ai(bx){var bA=[];
var bz;
for(var by=0;
by<bx.length;
by++){bz=bx[by];
if(!("field" in bz&&"value" in bz&&"items" in bz)){break;
}bA.push(bz);
if(bz.hasSubgroups){bA=bA.concat(ai(bz.items));
}}return bA;
}function a9(bD,by){var bA=0,bB=bD.length,bx,bC,bz;
for(;
bA<bB;
bA+=1){bC=bD.eq(bA);
if(bC.is(".k-grouping-row,.k-detail-row")){bx=bC.children(":not(.k-group-cell):first,.k-detail-cell").last();
bx.attr("colspan",parseInt(bx.attr("colspan"),10)+1);
}else{if(bC.hasClass("k-grid-edit-row")&&(bx=bC.children(".k-edit-container")[0])){bx=a(bx);
bx.attr("colspan",parseInt(bx.attr("colspan"),10)+1);
aQ(bx.find(">form>table"),br(bz),false,0);
bC=bx.find("tr:first");
}a7(bC[0].cells,by,true);
}}}function bo(bB,bC,bA){bA=bA||1;
var by,bx,bz;
for(bx=0,bz=bB.length;
bx<bz;
bx++){by=bB.eq(bx).children().last();
by.attr("colspan",parseInt(by.attr("colspan"),10)+bA);
by=bC.eq(bx).children().last();
by.attr("colspan",parseInt(by.attr("colspan"),10)-bA);
}}function bf(bA){var by,bz,bB=0;
var bx=bA.find(">colgroup>col");
for(by=0,bz=bx.length;
by<bz;
by+=1){bB+=parseInt(bx[by].style.width,10);
}return bB;
}var ad=az.ui.DataBoundWidget.extend({init:function(bx,bz,by){var bA=this;
bz=ap(bz)?{dataSource:bz}:bz;
bw.fn.init.call(bA,bx,bz);
if(by){bA._events=by;
}ax=az.support.isRtl(bx);
bA._element();
bA._aria();
bA._columns(bA.options.columns);
bA._dataSource();
bA._tbody();
bA._pageable();
bA._thead();
bA._groupable();
bA._toolbar();
bA._setContentHeight();
bA._templates();
bA._navigatable();
bA._selectable();
bA._clipboard();
bA._details();
bA._editable();
bA._attachCustomCommandsEvent();
bA._minScreenSupport();
if(bA.options.autoBind){bA.dataSource.fetch();
}else{bA._footer();
}if(bA.lockedContent){bA.wrapper.addClass("k-grid-lockedcolumns");
bA._resizeHandler=function(){bA.resize();
};
a(window).on("resize"+aT,bA._resizeHandler);
}az.notify(bA);
},events:[k,"dataBinding","cancel",E,K,J,L,Q,p,M,a3,aY,a4,u,t,v,n,o,x],setDataSource:function(bx){var bz=this;
var by=bz.options.scrollable;
bz.options.dataSource=bx;
bz._dataSource();
bz._pageable();
bz._thead();
if(by){if(by.virtual){bz.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0);
}else{bz.content.scrollLeft(0);
}}if(bz.options.groupable){bz._groupable();
}if(bz.virtualScrollable){bz.virtualScrollable.setDataSource(bz.options.dataSource);
}if(bz.options.navigatable){bz._navigatable();
}if(bz.options.selectable){bz._selectable();
}if(bz.options.autoBind){bx.fetch();
}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:j,confirmation:H,confirmDelete:A},commands:{create:G.create.text,cancel:G.cancel.text,save:G.save.text,destroy:G.destroy.text,edit:G.edit.text,update:G.update.text,canceledit:G.canceledit.text,excel:G.excel.text,pdf:G.pdf.text}}},destroy:function(){var by=this,bx;
by._destroyColumnAttachments();
bw.fn.destroy.call(by);
if(by._resizeHandler){a(window).off("resize"+aT,by._resizeHandler);
}if(by.pager&&by.pager.element){by.pager.destroy();
}by.pager=null;
if(by.groupable&&by.groupable.element){by.groupable.element.kendoGroupable("destroy");
}by.groupable=null;
if(by.options.reorderable){by.wrapper.data("kendoReorderable").destroy();
}if(by.selectable&&by.selectable.element){by.selectable.destroy();
by.clearArea();
if(by.copyHandler){by.wrapper.off("keydown",by.copyHandler);
by.unbind(by.copyHandler);
}if(by.updateClipBoardState){by.unbind(by.updateClipBoardState);
by.updateClipBoardState=null;
}if(by.clearAreaHandler){by.wrapper.off("keyup",by.clearAreaHandler);
}}by.selectable=null;
if(by.resizable){by.resizable.destroy();
if(by._resizeUserEvents){if(by._resizeHandleDocumentClickHandler){a(document).off("click",by._resizeHandleDocumentClickHandler);
}by._resizeUserEvents.destroy();
by._resizeUserEvents=null;
}by.resizable=null;
}if(by.virtualScrollable&&by.virtualScrollable.element){by.virtualScrollable.destroy();
}by.virtualScrollable=null;
by._destroyEditable();
if(by.dataSource){by.dataSource.unbind(k,by._refreshHandler).unbind(aV,by._progressHandler).unbind(O,by._errorHandler);
by._refreshHandler=by._progressHandler=by._errorHandler=null;
}bx=by.element.add(by.wrapper).add(by.table).add(by.thead).add(by.wrapper.find(">.k-grid-toolbar"));
if(by.content){bx=bx.add(by.content).add(by.content.find(">.k-virtual-scrollable-wrap"));
}if(by.lockedHeader){by._removeLockedContainers();
}if(by.pane){by.pane.destroy();
}if(by.minScreenResizeHandler){a(window).off("resize",by.minScreenResizeHandler);
}if(by._draggableInstance&&by._draggableInstance.element){by._draggableInstance.destroy();
}by._draggableInstance=null;
bx.off(aT);
az.destroy(by.wrapper);
by.rowTemplate=by.altRowTemplate=by.lockedRowTemplate=by.lockedAltRowTemplate=by.detailTemplate=by.footerTemplate=by.groupFooterTemplate=by.lockedGroupFooterTemplate=null;
by.scrollables=by.thead=by.tbody=by.element=by.table=by.content=by.footer=by.wrapper=by._groupableClickHandler=by._setContentWidthHandler=null;
},getOptions:function(){var bz=this.options;
bz.dataSource=null;
var bA=P(true,{},this.options);
bA.columns=az.deepExtend([],this.columns);
var bx=this.dataSource;
var by=bx.options.data&&bx._data;
bx.options.data=null;
bA.dataSource=a.extend(true,{},bx.options);
bA.dataSource.data=by;
bA.dataSource.page=bx.page();
bA.dataSource.filter=bx.filter();
bA.dataSource.pageSize=bx.pageSize();
bA.dataSource.sort=bx.sort();
bA.dataSource.group=bx.group();
bA.dataSource.aggregate=bx.aggregate();
bA.$angular=bl;
return bA;
},setOptions:function(bB){var bx=this.getOptions();
az.deepExtend(bx,bB);
if(!bB.dataSource){bx.dataSource=this.dataSource;
}var bC=this.wrapper;
var bz=this._events;
var by=this.element;
this.destroy();
this.options=null;
if(this._isMobile){var bA=bC.closest(az.roleSelector("pane")).parent();
bA.after(bC);
bA.remove();
bC.removeClass("k-grid-mobile");
}if(bC[0]!==by[0]){bC.before(by);
bC.remove();
}by.empty();
this.init(by,bx,bz);
this._setEvents(bx);
},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));
}else{return this._items(this.tbody);
}},_items:function(bx){return bx.children().filter(function(){var by=a(this);
return !by.hasClass("k-grouping-row")&&!by.hasClass("k-detail-row")&&!by.hasClass("k-group-footer");
});
},dataItems:function(){var bx=az.ui.DataBoundWidget.fn.dataItems.call(this);
if(this.lockedContent){var bz=bx.length,bA=new Array(2*bz);
for(var by=bz;
--by>=0;
){bA[by]=bA[by+bz]=bx[by];
}bx=bA;
}return bx;
},_destroyColumnAttachments:function(){var bx=this;
bx.resizeHandle=null;
if(!bx.thead){return;
}this.angular("cleanup",function(){return{elements:bx.thead.get()};
});
bx.thead.find("th").each(function(){var bB=a(this),bz=bB.data("kendoFilterMenu"),bA=bB.data("kendoColumnSorter"),by=bB.data("kendoColumnMenu");
if(bz){bz.destroy();
}if(bA){bA.destroy();
}if(by){by.destroy();
}});
},_attachCustomCommandsEvent:function(){var bB=this,bx=aB(bB.columns||[]),by,bz,bA;
for(bz=0,bA=bx.length;
bz<bA;
bz++){by=bx[bz].command;
if(by){g(bB,bB.wrapper,by);
}}},_aria:function(){var bx=this.element.attr("id")||"aria";
if(bx){this._cellId=bx+"_active_cell";
}},_element:function(){var by=this,bx=by.element;
if(!bx.is("table")){if(by.options.scrollable){bx=by.element.find("> .k-grid-content > table");
}else{bx=by.element.children("table");
}if(!bx.length){bx=a("<table />").appendTo(by.element);
}}if(au){bx.attr("cellspacing",0);
}by.table=bx.attr("role",by._hasDetails()?"treegrid":"grid");
by._wrapper();
},_createResizeHandle:function(by,bI){var bJ=this;
var bE=bJ.options.columnResizeHandleWidth;
var bH=bJ.options.scrollable;
var bG=bJ.resizeHandle;
var bA=this._groups();
var bF;
if(bG&&bJ.lockedContent&&bG.data("th")[0]!==bI[0]){bG.off(aT).remove();
bG=null;
}if(!bG){bG=bJ.resizeHandle=a('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');
by.append(bG);
}if(!ax){bF=bI[0].offsetWidth;
var bx=aC(bI.closest("thead"));
for(var bC=0;
bC<bx.length;
bC++){if(bx[bC]==bI[0]){break;
}bF+=bx[bC].offsetWidth;
}if(bA>0){bF+=by.find(".k-group-cell:first").outerWidth()*bA;
}if(bJ._hasDetails()){bF+=by.find(".k-hierarchy-cell:first").outerWidth();
}}else{bF=bI.position().left;
if(bH){var bB=bI.closest(".k-grid-header-wrap, .k-grid-header-locked"),bD=h.msie?bB.scrollLeft():0,bK=h.webkit?(bB[0].scrollWidth-bB[0].offsetWidth-bB.scrollLeft()):0,bz=h.mozilla?(bB[0].scrollWidth-bB[0].offsetWidth-(bB[0].scrollWidth-bB[0].offsetWidth-bB.scrollLeft())):0;
bF-=bK-bz+bD;
}}bG.css({top:bI.position().top,left:bF-bE,height:bI.outerHeight(),width:bE*3}).data("th",bI).show();
bG.off("dblclick"+aT).on("dblclick"+aT,function(){bJ._autoFitLeafColumn(bI.data("index"));
});
},_positionColumnResizeHandle:function(bx){var bA=this,by=bA.options.columnResizeHandleWidth,bz=bA.lockedHeader?bA.lockedHeader.find("thead:first"):a();
bA.thead.add(bz).on("mousemove"+aT,"th",function(bC){var bE=a(this);
if(bE.hasClass("k-group-cell")||bE.hasClass("k-hierarchy-cell")){return;
}var bB=bC.clientX,bF=a(window).scrollLeft(),bD=bE.offset().left+(!ax?this.offsetWidth:0);
if(bB+bF>bD-by&&bB+bF<bD+by){bA._createResizeHandle(bE.closest("div"),bE);
}else{if(bA.resizeHandle){bA.resizeHandle.hide();
}else{C(bA.wrapper,"");
}}});
},_resizeHandleDocumentClick:function(bx){if(a(bx.target).closest(".k-column-active").length){return;
}a(document).off(bx);
this._hideResizeHandle();
},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");
if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(aT).remove();
this.resizeHandle=null;
}else{this.resizeHandle.hide();
}}},_positionColumnResizeHandleTouch:function(bx){var bz=this,by=bz.lockedHeader?bz.lockedHeader.find("thead:first"):a();
bz._resizeUserEvents=new az.UserEvents(by.add(bz.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(bA){var bB=a(bA.target);
bA.preventDefault();
bB.addClass("k-column-active");
bz._createResizeHandle(bB.closest("div"),bB);
if(!bz._resizeHandleDocumentClickHandler){bz._resizeHandleDocumentClickHandler=aW(bz._resizeHandleDocumentClick,bz);
}a(document).on("click",bz._resizeHandleDocumentClickHandler);
}});
},_resizable:function(){var bH=this,bE=bH.options,bA,by,bz,bB,bD=this._isMobile,bF=!az.support.mobileOS?az.support.scrollbar():0,bC,bx,bG;
if(bE.resizable){bA=bE.scrollable?bH.wrapper.find(".k-grid-header-wrap:first"):bH.wrapper;
if(bD){bH._positionColumnResizeHandleTouch(bA);
}else{bH._positionColumnResizeHandle(bA);
}if(bH.resizable){bH.resizable.destroy();
}bH.resizable=new bk.Resizable(bA.add(bH.lockedHeader),{handle:".k-resize-handle",hint:function(bI){return a('<div class="k-grid-resize-indicator" />').css({height:bI.data("th").outerHeight()+bH.tbody.attr("clientHeight")});
},start:function(bJ){bG=a(bJ.currentTarget).data("th");
if(bD){bH._hideResizeHandle();
}var bL=bG.closest("table"),bM=a.inArray(bG[0],aC(bG.closest("thead")).filter(":visible"));
bC=bL.parent().hasClass("k-grid-header-locked");
var bI=bC?bH.lockedTable:bH.table,bK=bH.footer||a();
if(bH.footer&&bH.lockedContent){bK=bC?bH.footer.children(".k-grid-footer-locked"):bH.footer.children(".k-grid-footer-wrap");
}C(bH.wrapper,"col-resize");
if(bE.scrollable){bx=bL.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")").add(bI.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")")).add(bK.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")"));
}else{bx=bI.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")");
}by=bJ.x.location;
bz=bG.outerWidth();
bB=bC?bI.children("tbody").outerWidth():bH.tbody.outerWidth();
if(h.webkit){bH.wrapper.addClass("k-grid-column-resizing");
}},resize:function(bL){var bO=ax?-1:1,bK=bz+(bL.x.location*bO)-(by*bO);
if(bE.scrollable){var bM;
if(bC&&bH.lockedFooter){bM=bH.lockedFooter.children("table");
}else{if(bH.footer){bM=bH.footer.find(">.k-grid-footer-wrap>table");
}}if(!bM||!bM[0]){bM=a();
}var bN=bG.closest("table");
var bJ=bC?bH.lockedTable:bH.table;
var bI=false;
var bP=bH.wrapper.width()-bF;
var bQ=bK;
if(bC&&bB-bz+bQ>bP){bQ=bz+(bP-bB-bF*2);
if(bQ<0){bQ=bK;
}bI=true;
}if(bQ>10){bx.css("width",bQ);
if(bB){if(bI){bQ=bP-bF*2;
}else{bQ=bB+(bL.x.location*bO)-(by*bO);
}bJ.add(bN).add(bM).css("width",bQ);
if(!bC){bH._footerWidth=bQ;
}}}}else{if(bK>10){bx.css("width",bK);
}}},resizeend:function(){var bL=bG.outerWidth(),bI,bJ;
C(bH.wrapper,"");
if(h.webkit){bH.wrapper.removeClass("k-grid-column-resizing");
}if(bz!=bL){bJ=bH.lockedHeader?bH.lockedHeader.find("thead:first tr:first").add(bH.thead.find("tr:first")):bG.parent();
var bK=bG.attr(az.attr("index"));
if(!bK){bK=bJ.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(bG);
}bI=aB(bH.columns)[bK];
bI.width=bL;
bH.trigger(u,{column:bI,oldWidth:bz,newWidth:bL});
bH._applyLockedContainersWidth();
bH._syncLockedContentHeight();
bH._syncLockedHeaderHeight();
}bH._hideResizeHandle();
bG=null;
}});
}},_draggable:function(){var bx=this;
if(bx.options.reorderable){if(bx._draggableInstance){bx._draggableInstance.destroy();
}bx._draggableInstance=bx.wrapper.kendoDraggable({group:az.guid(),filter:bx.content?".k-grid-header:first "+aj:"table:first>.k-grid-header "+aj,drag:function(){bx._hideResizeHandle();
},hint:function(by){return a('<div class="k-header k-drag-clue" />').css({width:by.width(),paddingLeft:by.css("paddingLeft"),paddingRight:by.css("paddingRight"),lineHeight:by.height()+"px",paddingTop:by.css("paddingTop"),paddingBottom:by.css("paddingBottom")}).html(by.attr(az.attr("title"))||by.attr(az.attr("field"))||by.text()).prepend('<span class="k-icon k-drag-status k-denied" />');
}}).data("kendoDraggable");
}},_reorderable:function(){var by=this;
if(by.options.reorderable){if(by.wrapper.data("kendoReorderable")){by.wrapper.data("kendoReorderable").destroy();
}var bx=function(bA,bC,bE){var bz=bA[bC];
var bD=bA[bE];
var bB=q(bz,by.columns);
bA=bB?bB.columns:by.columns;
return ao(bD,bA);
};
by.wrapper.kendoReorderable({draggable:by._draggableInstance,dragOverContainers:function(bA,bB){var bz=V(by.columns);
return bz[bA].lockable!==false&&bx(bz,bA,bB)>-1;
},inSameContainer:function(bz){return a(bz.source).parent()[0]===a(bz.target).parent()[0]&&bx(V(by.columns),bz.sourceIndex,bz.targetIndex)>-1;
},change:function(bB){var bA=V(by.columns);
var bz=bA[bB.oldIndex];
var bC=bx(bA,bB.oldIndex,bB.newIndex);
by.trigger(t,{newIndex:bC,oldIndex:ao(bz,bA),column:bz});
by.reorderColumn(bC,bz,bB.position==="before");
}});
}},_reorderHeader:function(bD,bE,bx){var bG=this;
var bC=s(bD[0],bG.columns);
var by=s(bE,bG.columns);
var bA=[];
for(var bz=0;
bz<bD.length;
bz++){if(bD[bz].columns){bA=bA.concat(bD[bz].columns);
}}var bH=N(bG.lockedHeader,bG.thead,"tr:eq("+bC.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
var bB=aD(bD).length;
var bF=aD([bE]).length;
if(bA.length){if(bB>0&&bF===0){aI(bD,bE,bA,bG.columns,bG.lockedHeader.find("thead"),bG.thead,this._groups());
}else{if(bB===0&&bF>0){aI(bD,bE,bA,bG.columns,bG.thead,bG.lockedHeader.find("thead"),this._groups());
}}if(bE.columns||bC.cell-by.cell>1||by.cell-bC.cell>1){bE=S(bG.columns,bE,bD[0],bx);
if(bE){bG._reorderHeader(bA,bE,bx);
}}}else{if(bB!==bF){bn(bH[bC.cell],bG.columns,bB);
}}a2(bH,bC.cell,by.cell,bx,bD.length);
},_reorderContent:function(bN,bA,bx){var bO=this;
var bJ=a();
var bL=bN[0];
var bP=br(bN);
var bM=ao(bL,aB(bO.columns));
var bB=ao(bA,aB(bO.columns));
var bz=ao(bL,bs(bO.columns));
var by=ao(bA,bs(bO.columns));
var bI=aD(bO.columns).length;
var bG=!!bA.locked;
var bC=bO.footer||bO.wrapper.find(".k-grid-footer");
var bE,bD;
bE=bD=by;
if(bA.hidden){if(bG){by=bO.lockedTable.find("colgroup");
bE=bO.lockedHeader.find("colgroup");
bD=a(bO.lockedFooter).find(">table>colgroup");
}else{by=bO.tbody.prev();
bE=bO.thead.prev();
bD=bC.find(".k-grid-footer-wrap").find(">table>colgroup");
}}if(bO._hasFilterRow()){a2(bO.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}a2(N(bO.lockedHeader,bO.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bz,bE,bx,bP.length);
if(bO.options.scrollable){a2(N(bO.lockedTable,bO.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bz,by,bx,bP.length);
}if(bC&&bC.length){a2(N(bO.lockedFooter,bC.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),bz,bD,bx,bP.length);
a2(bC.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}var bK=bO.tbody.children(":not(.k-grouping-row,.k-detail-row)");
if(bO.lockedTable){if(bI>bB){if(bI<=bM){bo(bO.lockedTable.find(">tbody>tr.k-grouping-row"),bO.table.find(">tbody>tr.k-grouping-row"),bN.length);
}}else{if(bI>bM){bo(bO.table.find(">tbody>tr.k-grouping-row"),bO.lockedTable.find(">tbody>tr.k-grouping-row"),bN.length);
}}bJ=bO.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)");
}for(var bF=0,bH=bK.length;
bF<bH;
bF+=1){a2(N(bJ[bF],bK[bF],">td:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}},_autoFitLeafColumn:function(bx){this.autoFitColumn(aB(this.columns)[bx]);
},autoFitColumn:function(bz){var bS=this,bP=bS.options,bA=bS.columns,bI,bR,bF,bG,bJ,bU=bS.lockedHeader?aC(bS.lockedHeader.find(">table>thead")).filter(aq).length:0,bx;
if(typeof bz=="number"){bz=bA[bz];
}else{if(aw(bz)){bz=ac(U(bA),function(bV){return bV===bz;
})[0];
}else{bz=ac(U(bA),function(bV){return bV.field===bz;
})[0];
}}if(!bz||!ay(bz)){return;
}bI=ao(bz,aB(bA));
bJ=bz.locked;
if(bJ){bG=bS.lockedHeader.children("table");
}else{bG=bS.thead.parent();
}bR=bG.find("[data-index='"+bI+"']");
var bC=bJ?bS.lockedTable:bS.table,bD=bS.footer||a();
if(bS.footer&&bS.lockedContent){bD=bJ?bS.footer.children(".k-grid-footer-locked"):bS.footer.children(".k-grid-footer-wrap");
}var bE=bD.find("table").first();
if(bS.lockedHeader&&bU>=bI&&!bJ){bI-=bU;
}for(var bK=0;
bK<bA.length;
bK++){if(bA[bK]===bz){break;
}else{if(bA[bK].hidden){bI--;
}}}if(bP.scrollable){bx=bG.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bI+")").add(bC.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bI+")")).add(bE.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bI+")"));
}else{bx=bC.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bI+")");
}var bQ=bG.add(bC).add(bE);
var bO=bR.outerWidth();
bx.width("");
bQ.css("table-layout","fixed");
bx.width("auto");
bQ.addClass("k-autofitting");
bQ.css("table-layout","");
var bN=Math.max(bG.width(),bC.width(),bE.width());
var bM=Math.ceil(Math.max(bR.outerWidth(),bC.find("tr").eq(0).children("td:visible").eq(bI).outerWidth(),bE.find("tr").eq(0).children("td:visible").eq(bI).outerWidth()));
bx.width(bM);
bz.width=bM;
if(bP.scrollable){var by=bG.find("col"),bB,bT=0;
for(var bH=0,bL=by.length;
bH<bL;
bH+=1){bB=by[bH].style.width;
if(bB&&bB.indexOf("%")==-1){bT+=parseInt(bB,10);
}else{bT=0;
break;
}}if(bT){bQ.each(function(){this.style.width=bT+"px";
});
}}if(h.msie&&h.version==8){bQ.css("display","inline-table");
setTimeout(function(){bQ.css("display","table");
},1);
}bQ.removeClass("k-autofitting");
bS.trigger(u,{column:bz,oldWidth:bO,newWidth:bM});
bS._applyLockedContainersWidth();
bS._syncLockedContentHeight();
bS._syncLockedHeaderHeight();
},reorderColumn:function(bB,by,bx){var bI=this,bF=q(by,bI.columns),bz=bF?bF.columns:bI.columns,bH=ao(by,bz),bA=bz[bB],bD,bC=!!bA.locked,bE=aD(bI.columns).length;
if(bH===bB){return;
}if(!by.locked&&bC&&aP(bI.columns).length==1){return;
}if(by.locked&&!bC&&bE==1){return;
}bI._hideResizeHandle();
if(bx===bl){bx=bB<bH;
}var bG=[by];
bI._reorderHeader(bG,bA,bx);
if(bI.lockedHeader){aZ(bI.thead);
aZ(bI.lockedHeader);
}if(bA.columns){bA=aB(bA.columns);
bA=bA[bx?0:bA.length-1];
}if(by.columns){bG=aB(by.columns);
}bI._reorderContent(bG,bA,bx);
bD=!!by.locked;
bD=bD!=bC;
by.locked=bC;
bz.splice(bx?bB:bB+1,0,by);
bz.splice(bH<bB?bH:bH+1,1);
bI._templates();
bI._updateColumnCellIndex();
bI._updateTablesWidth();
bI._applyLockedContainersWidth();
bI._syncLockedHeaderHeight();
bI._syncLockedContentHeight();
bI._updateFirstColumnClass();
if(!bD){return;
}if(bC){bI.trigger(o,{column:by});
}else{bI.trigger(x,{column:by});
}},_updateColumnCellIndex:function(){var bx;
var by=0;
if(this.lockedHeader){bx=this.lockedHeader.find("thead");
by=bm(bx,aD(this.columns));
}bm(this.thead,aP(this.columns),by);
},lockColumn:function(bx){var by=this.columns;
if(typeof bx=="number"){bx=by[bx];
}else{bx=ac(by,function(bA){return bA.field===bx;
})[0];
}if(!bx||bx.locked||bx.hidden){return;
}var bz=aD(by).length-1;
this.reorderColumn(bz,bx,false);
},unlockColumn:function(bx){var by=this.columns;
if(typeof bx=="number"){bx=by[bx];
}else{bx=ac(by,function(bA){return bA.field===bx;
})[0];
}if(!bx||!bx.locked||bx.hidden){return;
}var bz=aD(by).length;
this.reorderColumn(bz,bx,true);
},cellIndex:function(by){var bx=0;
if(this.lockedTable&&!a.contains(this.lockedTable[0],by[0])){bx=aB(aD(this.columns)).length;
}return a(by).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(by)+bx;
},_modelForContainer:function(bx){bx=a(bx);
if(!bx.is("tr")&&this._editMode()!=="popup"){bx=bx.closest("tr");
}var by=bx.attr(az.attr("uid"));
return this.dataSource.getByUid(by);
},_editable:function(){var bB=this,bA=bB.selectable&&bB.selectable.options.multiple,bx=bB.options.editable,by=function(){var bD=b(),bC=bB._editContainer;
if(bC&&!a.contains(bC[0],bD)&&bC[0]!==bD&&!a(bD).closest(".k-animation-container").length){if(bB.editable.end()){bB.closeCell();
}}};
if(bx){var bz=bB._editMode();
if(bz==="incell"){if(bx.update!==false){bB.wrapper.on(m+aT,"tr:not(.k-grouping-row) > td",function(bC){var bE=a(this),bD=bB.lockedTable&&bE.closest("table")[0]===bB.lockedTable[0];
if(bE.hasClass("k-hierarchy-cell")||bE.hasClass("k-detail-cell")||bE.hasClass("k-group-cell")||bE.hasClass("k-edit-cell")||bE.has("a.k-grid-delete").length||bE.has("button.k-grid-delete").length||(bE.closest("tbody")[0]!==bB.tbody[0]&&!bD)||a(bC.target).is(":input")){return;
}if(bB.editable){if(bB.editable.end()){if(bA){a(b()).blur();
}bB.closeCell();
bB.editCell(bE);
}}else{bB.editCell(bE);
}}).on("focusin"+aT,function(){clearTimeout(bB.timer);
bB.timer=null;
}).on("focusout"+aT,function(){bB.timer=setTimeout(by,1);
});
}}else{if(bx.update!==false){bB.wrapper.on(m+aT,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(bC){bC.preventDefault();
bB.editRow(a(this).closest("tr"));
});
}}if(bx.destroy!==false){bB.wrapper.on(m+aT,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(bC){bC.preventDefault();
bC.stopPropagation();
bB.removeRow(a(this).closest("tr"));
});
}else{bB.wrapper.on(m+aT,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(bC){bC.stopPropagation();
if(!bB._confirmation()){bC.preventDefault();
}});
}}},editCell:function(bx){bx=a(bx);
var bA=this,by=aB(bA.columns)[bA.cellIndex(bx)],bz=bA._modelForContainer(bx);
bA.closeCell();
if(bz&&(!bz.editable||bz.editable(by.field))&&!by.command&&by.field){bA._attachModelChange(bz);
bA._editContainer=bx;
bA.editable=bx.addClass("k-edit-cell").kendoEditable({fields:{field:by.field,format:by.format,editor:by.editor,values:by.values},model:bz,target:bA,change:function(bC){if(bA.trigger(a3,{values:bC.values,container:bx,model:bz})){bC.preventDefault();
}}}).data("kendoEditable");
var bB=bx.parent().addClass("k-grid-edit-row");
if(bA.lockedContent){e(bB[0],bA._relatedRow(bB).addClass("k-grid-edit-row")[0]);
}bA.trigger(M,{container:bx,model:bz});
}},_adjustLockedHorizontalScrollBar:function(){var bz=this.table,bx=bz.parent();
var by=bz[0].offsetWidth>bx[0].clientWidth?az.support.scrollbar():0;
this.lockedContent.height(bx.height()-by);
},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar();
}this._adjustRowsHeight(this.table,this.lockedTable);
}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var bx=this.lockedHeader.children("table");
var by=this.thead.parent();
this._adjustRowsHeight(bx,by);
bc(bx,by);
}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"));
}},_destroyEditable:function(){var by=this;
var bx=function(){if(by.editable){var bz=by.editView?by.editView.element:by._editContainer;
if(bz){bz.off(m+aT,"a.k-grid-cancel",by._editCancelClickHandler);
bz.off(m+aT,"a.k-grid-update",by._editUpdateClickHandler);
}by._detachModelChange();
by.editable.destroy();
by.editable=null;
by._editContainer=null;
by._destroyEditView();
}};
if(by.editable){if(by._editMode()==="popup"&&!by._isMobile){by._editContainer.data("kendoWindow").bind("deactivate",bx).close();
}else{bx();
}}if(by._actionSheet){by._actionSheet.destroy();
by._actionSheet=null;
}},_destroyEditView:function(){if(this.editView){this.editView.purge();
this.editView=null;
this.pane.navigate("");
}},_attachModelChange:function(bx){var by=this;
by._modelChangeHandler=function(bz){by._modelChange({field:bz.field,model:this});
};
bx.bind("change",by._modelChangeHandler);
},_detachModelChange:function(){var bz=this,bx=bz._editContainer,by=bz._modelForContainer(bx);
if(by){by.unbind(k,bz._modelChangeHandler);
}},closeCell:function(bA){var bC=this,bx=bC._editContainer,bz,by,bD,bB;
if(!bx){return;
}bz=bx.closest("tr").attr(az.attr("uid"));
bB=bC.dataSource.getByUid(bz);
if(bA&&bC.trigger("cancel",{container:bx,model:bB})){return;
}bx.removeClass("k-edit-cell");
by=aB(bC.columns)[bC.cellIndex(bx)];
bD=bx.parent().removeClass("k-grid-edit-row");
bC._destroyEditable();
bC._displayCell(bx,by,bB);
if(bx.hasClass("k-dirty-cell")){a('<span class="k-dirty"/>').prependTo(bx);
}if(bC.lockedContent){e(bD.css("height","")[0],bC._relatedRow(bD).css("height","")[0]);
}},_displayCell:function(bx,by,bz){var bC=this,bB={storage:{},count:0},bA=P({},az.Template,bC.options.templateSettings),bD=az.template(bC._cellTmpl(by,bB),bA);
if(bB.count>0){bD=aW(bD,bB.storage);
}bx.empty().html(bD(bz));
bC.angular("compile",function(){return{elements:bx,data:[{dataItem:bz}]};
});
},removeRow:function(bx){if(!this._confirmation(bx)){return;
}this._removeRow(bx);
},_removeRow:function(bz){var bA=this,by,bx=bA._editMode();
if(bx!=="incell"){bA.cancelRow();
}bz=a(bz).hide();
by=bA._modelForContainer(bz);
if(by&&!bA.trigger(aY,{row:bz,model:by})){bA.dataSource.remove(by);
if(bx==="inline"||bx==="popup"){bA.dataSource.sync();
}}else{if(bx==="incell"){bA._destroyEditable();
}}},_editMode:function(){var by="incell",bx=this.options.editable;
if(bx!==true){if(typeof bx=="string"){by=bx;
}else{by=bx.mode||by;
}}return by;
},editRow:function(bA){var bz;
var bB=this;
if(bA instanceof az.data.ObservableObject){bz=bA;
}else{bA=a(bA);
bz=bB._modelForContainer(bA);
}var by=bB._editMode();
var bx;
bB.cancelRow();
if(bz){bB._attachModelChange(bz);
if(by==="popup"){bB._createPopupEditor(bz);
}else{if(by==="inline"){bB._createInlineEditor(bA,bz);
}else{if(by==="incell"){a(bA).children(D).each(function(){var bC=a(this);
var bD=aB(bB.columns)[bC.index()];
bz=bB._modelForContainer(bC);
if(bz&&(!bz.editable||bz.editable(bD.field))&&bD.field){bB.editCell(bC);
return false;
}});
}}}bx=bB.editView?bB.editView.element:bB._editContainer;
if(bx){if(!this._editCancelClickHandler){this._editCancelClickHandler=aW(this._editCancelClick,this);
}bx.on(m+aT,"a.k-grid-cancel",this._editCancelClickHandler);
if(!this._editUpdateClickHandler){this._editUpdateClickHandler=aW(this._editUpdateClick,this);
}bx.on(m+aT,"a.k-grid-update",this._editUpdateClickHandler);
}}},_editUpdateClick:function(bx){bx.preventDefault();
bx.stopPropagation();
this.saveRow();
},_editCancelClick:function(bz){var bC=this;
var bB=bC.options.navigatable;
var bA=bC.editable.options.model;
var bx=bC.editView?bC.editView.element:bC._editContainer;
bz.preventDefault();
bz.stopPropagation();
if(bC.trigger("cancel",{container:bx,model:bA})){return;
}var by=bC.items().index(a(bC.current()).parent());
bC.cancelRow();
if(bB){bC.current(bC.items().eq(by).children().filter(aM).first());
X(bC.table,true);
}},_createPopupEditor:function(bI){var bO=this,bF="<div "+az.attr("uid")+'="'+bI.uid+'" class="k-popup-edit-form'+(bO._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',bz,bB,bE=[],bG,bH,bP,bQ,by,bM,bA=aB(bO.columns),bx,bD=bO.options.editable,bN=bD.template,bJ=aw(bD)?bD.window:{},bK=P({},az.Template,bO.options.templateSettings);
bJ=bJ||{};
if(bN){if(typeof bN===ba){bN=window.unescape(bN);
}bF+=(az.template(bN,bK))(bI);
for(bG=0,bH=bA.length;
bG<bH;
bG++){bz=bA[bG];
if(bz.command){bM=ab(bz.command,"edit");
if(bM){bB=bM;
}}}}else{for(bG=0,bH=bA.length;
bG<bH;
bG++){bz=bA[bG];
if(!bz.command){bF+='<div class="k-edit-label"><label for="'+bz.field+'">'+(bz.title||bz.field||"")+"</label></div>";
if((!bI.editable||bI.editable(bz.field))&&bz.field){bE.push({field:bz.field,format:bz.format,editor:bz.editor,values:bz.values});
bF+="<div "+az.attr("container-for")+'="'+bz.field+'" class="k-edit-field"></div>';
}else{var bL={storage:{},count:0};
bP=az.template(bO._cellTmpl(bz,bL),bK);
if(bL.count>0){bP=aW(bP,bL.storage);
}bF+='<div class="k-edit-field">'+bP(bI)+"</div>";
}}else{if(bz.command){bM=ab(bz.command,"edit");
if(bM){bB=bM;
}}}}}if(bB){if(aw(bB)){if(bB.text&&aw(bB.text)){bQ=bB.text.update;
by=bB.text.cancel;
}if(bB.attr){bx=bB.attr;
}}}var bC;
if(!bO._isMobile){bF+='<div class="k-edit-buttons k-state-default">';
bF+=bO._createButton({name:"update",text:bQ,attr:bx})+bO._createButton({name:"canceledit",text:by,attr:bx});
bF+="</div></div></div>";
bC=bO._editContainer=a(bF).appendTo(bO.wrapper).eq(0).kendoWindow(P({modal:true,resizable:false,draggable:true,title:"Edit",visible:false,close:function(bS){if(bS.userTriggered){bS.sender.element.focus();
if(bO.trigger("cancel",{container:bC,model:bI})){bS.preventDefault();
return;
}var bR=bO.items().index(a(bO.current()).parent());
bO.cancelRow();
if(bO.options.navigatable){bO.current(bO.items().eq(bR).children().filter(aM).first());
X(bO.table,true);
}}}},bJ));
}else{bF+="</div></div>";
bO.editView=bO.pane.append("<div data-"+az.ns+'role="view" data-'+az.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+az.ns+'role="header" class="k-header">'+bO._createButton({name:"update",text:bQ,attr:bx})+(bJ.title||"Edit")+bO._createButton({name:"canceledit",text:by,attr:bx})+"</div>"+bF+"</div>");
bC=bO._editContainer=bO.editView.element.find(".k-popup-edit-form");
}bO.editable=bO._editContainer.kendoEditable({fields:bE,model:bI,clearContainer:false,target:bO}).data("kendoEditable");
if(bO._isMobile){bC.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){a(this).next().children("input").click();
});
}bO._openPopUpEditor();
bO.trigger(M,{container:bC,model:bI});
},_openPopUpEditor:function(){if(!this._isMobile){this._editContainer.data("kendoWindow").center().open();
}else{this.pane.navigate(this.editView,this._editAnimation);
}},_createInlineEditor:function(bC,bB){var bD=this,by,bx,bz,bA=[];
if(bD.lockedContent){bC=bC.add(bD._relatedRow(bC));
}bC.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bx=a(this);
by=aB(bD.columns)[bD.cellIndex(bx)];
if(!by.command&&by.field&&(!bB.editable||bB.editable(by.field))){bA.push({field:by.field,format:by.format,editor:by.editor,values:by.values});
bx.attr(az.attr("container-for"),by.field);
bx.empty();
}else{if(by.command){bz=ab(by.command,"edit");
if(bz){bx.empty();
var bG,bF,bE;
if(aw(bz)){if(bz.text&&aw(bz.text)){bG=bz.text.update;
bF=bz.text.cancel;
}if(bz.attr){bE=bz.attr;
}}a(bD._createButton({name:"update",text:bG,attr:bE})+bD._createButton({name:"canceledit",text:bF,attr:bE})).appendTo(bx);
}}}});
bD._editContainer=bC;
bD.editable=new az.ui.Editable(bC.addClass("k-grid-edit-row"),{target:bD,fields:bA,model:bB,clearContainer:false});
if(bC.length>1){e(bC[0],bC[1]);
bD._applyLockedContainersWidth();
}bD.trigger(M,{container:bC,model:bB});
},cancelRow:function(){var bz=this,bx=bz._editContainer,by,bA;
if(bx){by=bz._modelForContainer(bx);
bz._destroyEditable();
bz.dataSource.cancelChanges(by);
if(bz._editMode()!=="popup"){bz._displayRow(bx);
}else{bz._displayRow(bz.tbody.find("["+az.attr("uid")+"="+by.uid+"]"));
}}},saveRow:function(){var bA=this,bx=bA._editContainer,bz=bA._modelForContainer(bx),by=bA.editable;
if(bx&&by&&by.end()&&!bA.trigger(a3,{container:bx,model:bz})){bA.dataSource.sync();
}},_displayRow:function(bD){var bE=this,bz=bE._modelForContainer(bD),bC,bA,bB,by=bD.hasClass("k-state-selected"),bx=bD.hasClass("k-alt");
if(bz){if(bE.lockedContent){bC=a((bx?bE.lockedAltRowTemplate:bE.lockedRowTemplate)(bz));
bE._relatedRow(bD.last()).replaceWith(bC);
}bE.angular("cleanup",function(){return{elements:bD.get()};
});
bA=a((bx?bE.altRowTemplate:bE.rowTemplate)(bz));
bD.replaceWith(bA);
bE.angular("compile",function(){return{elements:bA.get(),data:[{dataItem:bz}]};
});
if(by&&bE.options.selectable){bE.select(bA.add(bC));
}if(bC){e(bA[0],bC[0]);
}bB=bA.next();
if(bB.hasClass("k-detail-row")&&bB.is(":visible")){bA.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus");
}}},_showMessage:function(bz,bA){var bC=this;
if(!bC._isMobile){return window.confirm(bz.title);
}var bB=az.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>');
var by=a(bB(bz)).appendTo(bC.view.element);
var bx=bC._actionSheet=new az.mobile.ui.ActionSheet(by,{cancel:bz.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy();
},command:function(bD){var bE=a(bD.currentTarget).parent();
if(!bE.hasClass("km-actionsheet-cancel")){bC._removeRow(bA);
}},popup:bC._actionSheetPopupOptions});
bx.open(bA);
return false;
},_confirmation:function(bz){var bA=this,by=bA.options.editable,bx=by===true||typeof by===ba?bA.options.messages.editable.confirmation:by.confirmation;
if(bx!==false&&bx!=null){if(typeof bx===aa){bx=bx(bA._modelForContainer(bz));
}return bA._showMessage({confirmDelete:by.confirmDelete||bA.options.messages.editable.confirmDelete,cancelDelete:by.cancelDelete||bA.options.messages.editable.cancelDelete,title:bx===true?bA.options.messages.editable.confirmation:bx},bz);
}return true;
},cancelChanges:function(){this.dataSource.cancelChanges();
},saveChanges:function(){var bx=this;
if(((bx.editable&&bx.editable.end())||!bx.editable)&&!bx.trigger(a4)){bx.dataSource.sync();
}},addRow:function(){var bH=this,bB,bz=bH.dataSource,bC=bH._editMode(),by=bH.options.editable.createAt||"",bE=bz.pageSize(),bI=bz.view()||[];
if((bH.editable&&bH.editable.end())||!bH.editable){if(bC!="incell"){bH.cancelRow();
}bB=bz.indexOf(bI[0]);
if(by.toLowerCase()=="bottom"){bB+=bI.length;
if(bE&&!bz.options.serverPaging&&bE<=bI.length){bB-=1;
}}if(bB<0){if(bz.page()>bz.totalPages()){bB=(bz.page()-1)*bE;
}else{bB=0;
}}var bD=bz.insert(bB,{}),bA=bD.uid,bG=bH.lockedContent?bH.lockedTable:bH.table,bF=bG.find("tr["+az.attr("uid")+"="+bA+"]"),bx=bF.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(bH._firstEditableColumnIndex(bF));
if(bC==="inline"&&bF.length){bH.editRow(bF);
}else{if(bC==="popup"){bH.editRow(bD);
}else{if(bx.length){bH.editCell(bx);
}}}if(by.toLowerCase()=="bottom"&&bH.lockedContent){bH.lockedContent[0].scrollTop=bH.content[0].scrollTop=bH.content[0].offsetHeight;
}}},_firstEditableColumnIndex:function(bz){var bD=this,bx,by=aB(bD.columns),bA,bB,bC=bD._modelForContainer(bz);
for(bA=0,bB=by.length;
bA<bB;
bA++){bx=by[bA];
if(bC&&(!bC.editable||bC.editable(bx.field))&&!bx.command&&bx.field&&bx.hidden!==true){return bA;
}}return -1;
},_toolbar:function(){var bz=this,bB=bz.wrapper,bA=bz.options.toolbar,by=bz.options.editable,bx;
if(bA){bx=bz.wrapper.find(".k-grid-toolbar");
if(!bx.length){if(!at(bA)){bA=(typeof bA===ba?bA:bz._toolbarTmpl(bA).replace(bi,"\\#"));
bA=aW(az.template(bA),bz);
}bx=a('<div class="k-header k-grid-toolbar" />').html(bA({})).prependTo(bB);
bz.angular("compile",function(){return{elements:bx.get()};
});
}if(by&&by.create!==false){bx.on(m+aT,".k-grid-add",function(bC){bC.preventDefault();
bz.addRow();
}).on(m+aT,".k-grid-cancel-changes",function(bC){bC.preventDefault();
bz.cancelChanges();
}).on(m+aT,".k-grid-save-changes",function(bC){bC.preventDefault();
bz.saveChanges();
});
}bx.on(m+aT,".k-grid-excel",function(bC){bC.preventDefault();
bz.saveAsExcel();
});
bx.on(m+aT,".k-grid-pdf",function(bC){bC.preventDefault();
bz.saveAsPDF();
});
}},_toolbarTmpl:function(bx){var bB=this,bz,bA,by="";
if(ap(bx)){for(bz=0,bA=bx.length;
bz<bA;
bz++){by+=bB._createButton(bx[bz]);
}}return by;
},_createButton:function(bz){var bD=bz.template||z,bA=typeof bz===ba?bz:bz.name||bz.text,by=G[bA]?G[bA].className:"k-grid-"+(bA||"").replace(/\s/g,""),bC={className:by,text:bA,imageClass:"",attr:"",iconClass:""},bB=this.options.messages.commands,bx;
if(!bA&&!(aw(bz)&&bz.template)){throw new Error("Custom commands should have name specified");
}if(aw(bz)){if(bz.className&&ao(bC.className,bz.className.split(" "))<0){bz.className+=" "+bC.className;
}else{if(bz.className===bl){bz.className=bC.className;
}}if(bA==="edit"&&aw(bz.text)){bz=P(true,{},bz);
bz.text=bz.text.edit;
}if(bz.attr){if(aw(bz.attr)){bz.attr=bb(bz.attr);
}if(typeof bz.attr===ba){bx=bz.attr.match(/class="(.+?)"/);
if(bx&&ao(bx[1],bz.className.split(" "))<0){bz.className+=" "+bx[1];
}}}bC=P(true,bC,G[bA],{text:bB[bA]},bz);
}else{bC=P(true,bC,G[bA],{text:bB[bA]});
}return az.template(bD)(bC);
},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||(this.footer&&this.footer.length>0)||this.wrapper.find(".k-grid-footer").length>0;
},_groupable:function(){var bx=this;
if(bx._groupableClickHandler){bx.table.add(bx.lockedTable).off(m+aT,bx._groupableClickHandler);
}else{bx._groupableClickHandler=function(by){var bz=a(this),bA=bz.closest("tr");
if(bz.hasClass("k-i-collapse")){bx.collapseGroup(bA);
}else{bx.expandGroup(bA);
}by.preventDefault();
by.stopPropagation();
};
}if(bx._isLocked()){bx.lockedTable.on(m+aT,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bx._groupableClickHandler);
}else{bx.table.on(m+aT,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bx._groupableClickHandler);
}bx._attachGroupable();
},_attachGroupable:function(){var bA=this,bB=bA.wrapper,bz=bA.options.groupable,bx=aj+"["+az.attr("field")+"]",by=bA.content?".k-grid-header:first "+bx:"table:first>.k-grid-header "+bx;
if(bz&&bz.enabled!==false){if(!bB.has("div.k-grouping-header")[0]){a("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(bB);
}if(bA.groupable){bA.groupable.destroy();
}bA.groupable=new ae(bB,P({},bz,{draggable:bA._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:bA.dataSource,draggableElements:by,filter:by,allowDrag:bA.options.reorderable}));
}},_continuousItems:function(bA,bx){if(!this.lockedContent){return;
}var bG=this;
var bz=bG.table.add(bG.lockedTable);
var bC=a(bA,bz[0]);
var bE=a(bA,bz[1]);
var by=bx?aD(bG.columns).length:1;
var bD=bx?bG.columns.length-by:1;
var bF=[];
for(var bB=0;
bB<bC.length;
bB+=by){aX.apply(bF,bC.slice(bB,bB+by));
aX.apply(bF,bE.splice(0,bD));
}return bF;
},_selectable:function(){var bE=this,bB,bx,bC=[],bA=bE._isLocked(),bD=bE.options.selectable;
if(bD){if(bE.selectable){bE.selectable.destroy();
}bD=az.ui.Selectable.parseOptions(bD);
bB=bD.multiple;
bx=bD.cell;
if(bE._hasDetails()){bC[bC.length]=".k-detail-row";
}if(bE.options.groupable||bE._hasFooters()){bC[bC.length]=".k-grouping-row,.k-group-footer";
}bC=bC.join(",");
if(bC!==""){bC=":not("+bC+")";
}var by=bE.table;
if(bA){by=by.add(bE.lockedTable);
}var bz=">"+(bx?a6:"tbody>tr"+bC);
bE.selectable=new az.ui.Selectable(by,{filter:bz,aria:true,multiple:bB,change:function(){bE.trigger(k);
},useAllItems:bA&&bB&&bx,relatedTarget:function(bG){if(bx||!bA){return;
}var bI;
var bJ=a();
for(var bF=0,bH=bG.length;
bF<bH;
bF++){bI=bE._relatedRow(bG[bF]);
if(ao(bI[0],bG)<0){bJ=bJ.add(bI);
}}return bJ;
},continuousItems:function(){return bE._continuousItems(bz,bx);
}});
if(bE.options.navigatable){by.on("keydown"+aT,function(bG){var bF=bE.current();
var bH=bG.target;
if(bG.keyCode===aA.SPACEBAR&&a.inArray(bH,by)>-1&&!bF.is(".k-edit-cell,.k-header")&&bF.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){bG.preventDefault();
bG.stopPropagation();
bF=bx?bF:bF.parent();
if(bA&&!bx){bF=bF.add(bE._relatedRow(bF));
}if(bB){if(!bG.ctrlKey){bE.selectable.clear();
}else{if(bF.hasClass(a5)){bF.removeClass(a5);
bE.trigger(k);
return;
}}}else{bE.selectable.clear();
}bE.selectable.value(bF);
}});
}}},_clipboard:function(){var by=this.options;
var bz=by.selectable;
if(bz&&by.allowCopy){var bx=this;
if(!by.navigatable){bx.table.add(bx.lockedTable).attr("tabindex",0).on("mousedown"+aT+" keydown"+aT,".k-detail-cell",function(bA){if(bA.target!==bA.currentTarget){bA.stopImmediatePropagation();
}}).on("mousedown"+aT,aN+">"+aM,aW(be,bx));
}bx.copyHandler=aW(bx.copySelection,bx);
bx.updateClipBoardState=function(){if(bx.areaClipBoard){bx.areaClipBoard.val(bx.getTSV()).focus().select();
}};
bx.bind("change",bx.updateClipBoardState);
bx.wrapper.on("keydown",bx.copyHandler);
bx.clearAreaHandler=aW(bx.clearArea,bx);
bx.wrapper.on("keyup",bx.clearAreaHandler);
}},copySelection:function(bx){if((bx instanceof jQuery.Event&&!(bx.ctrlKey||bx.metaKey))||a(bx.target).is("input:visible,textarea:visible")||(window.getSelection&&window.getSelection().toString())||(document.selection&&document.selection.createRange().text)){return;
}if(!this.areaClipBoard){this.areaClipBoard=a("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper);
}this.areaClipBoard.val(this.getTSV()).focus().select();
},getTSV:function(){var bA=this;
var bF=bA.select();
var bz="\t";
var bx=bA.options.allowCopy;
if(a.isPlainObject(bx)&&bx.delimeter){bz=bx.delimeter;
}var bG="";
if(bF.length){if(bF.eq(0).is("tr")){bF=bF.find("td:not(.k-group-cell)");
}var bD=[];
var by=this.columns.length;
var bC=bA._isLocked()&&aD(bA.columns).length;
var bB=true;
a.each(bF,function(bK,bH){bH=a(bH);
var bM=bH.closest("tr");
var bL=bM.index();
var bI=bH.index();
if(bC&&bB){bB=a.contains(bA.lockedTable[0],bH[0]);
}if(bA._groups()&&bB){bI-=bA._groups();
}bI=bB?bI:(bI+bC);
if(by>bI){by=bI;
}var bJ=bH.text();
if(!bD[bL]){bD[bL]=[];
}bD[bL][bI]=bJ;
});
var bE=bD.length;
bD=a.each(bD,function(bH,bI){if(bI){bD[bH]=bI.slice(by);
if(bE>bH){bE=bH;
}}});
a.each(bD.slice(bE),function(bH,bI){if(bI){bG+=bI.join(bz)+"\r\n";
}else{bG+="\r\n";
}});
}return bG;
},clearArea:function(bx){if(this.areaClipBoard&&bx&&bx.target===this.areaClipBoard[0]){if(this.options.navigatable){a(this.current()).closest("table").focus();
}else{this.table.focus();
}}if(this.areaClipBoard){this.areaClipBoard.remove();
this.areaClipBoard=null;
}},_minScreenSupport:function(){var bx=this.hideMinScreenCols();
if(bx){this.minScreenResizeHandler=aW(this.hideMinScreenCols,this);
a(window).on("resize",this.minScreenResizeHandler);
}},hideMinScreenCols:function(){var bz=this.columns,bx=false,bC=(window.innerWidth>0)?window.innerWidth:screen.width;
for(var bA=0;
bA<bz.length;
bA++){var by=bz[bA];
var bB=by.minScreenWidth;
if(bB!==bl&&bB!==null){bx=true;
if(bB>bC){this.hideColumn(by);
}else{this.showColumn(by);
}}}return bx;
},_relatedRow:function(bz){var by=this.lockedTable;
bz=a(bz);
if(!by){return bz;
}var bA=bz.closest(this.table.add(this.lockedTable));
var bx=bA.find(">tbody>tr").index(bz);
bA=bA[0]===this.table[0]?by:this.table;
return bA.find(">tbody>tr").eq(bx);
},clearSelection:function(){var bx=this;
bx.selectable.clear();
bx.trigger(k);
},select:function(bx){var bz=this,by=bz.selectable;
bx=a(bx);
if(bx.length){if(!by.options.multiple){by.clear();
bx=bx.first();
}if(bz._isLocked()){bx=bx.add(bx.map(function(){return bz._relatedRow(this);
}));
}by.value(bx);
return;
}return by.value();
},current:function(bz){var bC=this,bA=bC.options.scrollable,by=bC._current,bB=bC.table.add(bC.thead.parent());
if(bz!==bl&&bz.length){if(!by||by[0]!==bz[0]){if(by){by.removeClass(W).removeAttr("id");
bB.removeAttr("aria-activedescendant");
}bz.attr("id",bC._cellId);
bC._current=bz.addClass(W);
bB.attr("aria-activedescendant",bC._cellId);
if(bz.length&&bA){var bx=bz.closest("table").parent();
if(bx.is(".k-grid-content")){bC._scrollTo(bz.parent()[0],bC.content[0]);
}else{if(bx.is(".k-grid-content-locked")){bC._scrollTo(bC._relatedRow(bz.parent())[0],bC.content[0]);
if(!bA.virtual){bC.lockedContent[0].scrollTop=bC.content[0].scrollTop;
}}}if(!bx.is(".k-grid-content-locked,.k-grid-header-locked")){if(bA.virtual){bC._scrollTo(bz[0],bC.content.find(">.k-virtual-scrollable-wrap")[0]);
}else{bC._scrollTo(bz[0],bC.content[0]);
}}}}}return bC._current;
},_removeCurrent:function(){if(this._current){this._current.removeClass(W);
this._current=null;
}},_scrollTo:function(bB,by){var bE=bB.tagName.toLowerCase(),bF=bE==="td"||bE==="th",bC=bB[bF?"offsetLeft":"offsetTop"],bD=bB[bF?"offsetWidth":"offsetHeight"],bA=by[bF?"scrollLeft":"scrollTop"],bz=by[bF?"clientWidth":"clientHeight"],bx=bC+bD,bG=0;
if(bA>bC){bG=bC;
}else{if(bx>(bA+bz)){if(bD<=bz){bG=(bx-bz);
}else{bG=bC;
}}else{bG=bA;
}}by[bF?"scrollLeft":"scrollTop"]=bG;
},_navigatable:function(){var bD=this,bx=aW(bD.current,bD),bC=bD.table.add(bD.lockedTable),bz=bD.thead.parent().add(a(">table",bD.lockedHeader)),bA=bD._isLocked(),by=bC,bB=az.support.isRtl(bD.element);
if(!bD.options.navigatable){return;
}if(bD.options.scrollable){by=bC.add(bz);
bz.attr(bd,-1);
}by.off("mousedown"+aT+" focus"+aT+" focusout"+aT+" keydown"+aT);
bz.on("keydown"+aT,function(bE){if(bE.altKey&&bE.keyCode==aA.DOWN){bx().find(".k-grid-filter, .k-header-column-menu").click();
bE.stopImmediatePropagation();
}}).find("a.k-link").attr("tabIndex",-1);
bC.attr(bd,aG.max(bC.attr(bd)||0,0)).on("mousedown"+aT+" keydown"+aT,".k-detail-cell",function(bE){if(bE.target!==bE.currentTarget){bE.stopImmediatePropagation();
}});
by.on((az.support.touch?"touchstart"+aT:"mousedown"+aT),aN+">"+aM,aW(be,bD)).on("focus"+aT,function(){if(az.support.touch){return;
}var bE=bx();
if(bE&&bE.is(":visible")){bE.addClass(W);
}else{bx(a(this).find(T));
}bC.attr(bd,-1);
bz.attr(bd,-1);
a(this).attr(bd,0);
}).on("focusout"+aT,function(){var bE=bx();
if(bE){bE.removeClass(W);
}}).on("keydown"+aT,function(bL){var bQ=bL.keyCode,bN=false,bF=!bL.isDefaultPrevented()&&!a(bL.target).is(":button,a,:input,a>.k-icon"),bR=bD.options.pageable,bK=bD.dataSource,bP=bD._editMode()=="incell",bE,bJ,bT,bO,bV,bU=bL.shiftKey,bS=aW(bD._relatedRow,bD),bI=bx();
if(bI&&bI.is("th")){bF=true;
}if(bF&&bQ==aA.UP){bx(aL(bI,bL.currentTarget,bC,bz,true,aD(bD.columns).length));
bN=true;
}else{if(bF&&bQ==aA.DOWN){bx(aL(bI,bL.currentTarget,bC,bz,false,aD(bD.columns).length));
bN=true;
}else{if(bF&&bQ==(bB?aA.RIGHT:aA.LEFT)){bx(aJ(bI,bL.currentTarget,bC,bz,bS));
bN=true;
}else{if(bF&&bQ==(bB?aA.LEFT:aA.RIGHT)){bx(aK(bI,bL.currentTarget,bC,bz,bS));
bN=true;
}else{if(bF&&bR&&aA.PAGEDOWN==bQ){bK.page(bK.page()+1);
bN=true;
}else{if(bF&&bR&&aA.PAGEUP==bQ){bK.page(bK.page()-1);
bN=true;
}else{if(bQ==aA.ENTER||aA.F2==bQ){bI=bI?bI:bC.find(T);
if(!bI.length){return;
}if(!a(bL.target).is("table")&&!a.contains(bI[0],bL.target)){bI=a(bL.target).closest("[role=gridcell]");
}if(bI.is("th")){bI.find(".k-link").click();
bN=true;
}else{if(bI.parent().is(".k-master-row,.k-grouping-row")){bI.parent().find(".k-icon:first").click();
bN=true;
}else{var bM=bI.find(":kendoFocusable:first");
if(!bI.hasClass("k-edit-cell")&&bM[0]&&bI.hasClass("k-state-focused")){bM.focus();
bN=true;
}else{if(bD.options.editable&&!a(bL.target).is(":button,.k-button,textarea")){var bH=a(bL.target).closest("[role=gridcell]");
if(!bH[0]){bH=bI;
}bD._handleEditing(bH,false,bP?bL.currentTarget:bC[0]);
bN=true;
}}}}}else{if(aA.ESC==bQ){bE=b();
if(bI&&a.contains(bI[0],bE)&&!bI.hasClass("k-edit-cell")&&!bI.parent().hasClass("k-grid-edit-row")){X(bL.currentTarget,true);
bN=true;
}else{if(bD._editContainer&&(!bI||bD._editContainer.has(bI[0])||bI[0]===bD._editContainer[0])){if(bP){bD.closeCell(true);
}else{bJ=a(bI).parent().index();
if(bE){bE.blur();
}bD.cancelRow();
if(bJ>=0){bD.current(bC.find(">tbody>tr").eq(bJ).children().filter(aM).first());
}}if(h.msie&&h.version<9){document.body.focus();
}X(bP?bL.currentTarget:bC[0],true);
bN=true;
}}}else{if(aA.TAB==bQ){var bG;
bI=a(bI);
if(bD.options.editable&&bP){bG=a(b()).closest(".k-edit-cell");
if(bG[0]&&bG[0]!==bI[0]){bI=bG;
}}bG=bg(bI,bL.currentTarget,bC,bS,bU);
if(!bI.is("th")&&bG.length&&bD.options.editable&&bP){bD._handleEditing(bI,bG,bG.closest(bC));
bN=true;
}}}}}}}}}}if(bN){bL.preventDefault();
bL.stopPropagation();
}});
},_handleEditing:function(by,bE,bG){var bH=this,bx=a(b()),bD=bH._editMode(),bC=h.msie,bF=bC&&h.version<9,bz=bH._editContainer,bA,bB;
bG=a(bG);
if(bD=="incell"){bB=by.hasClass("k-edit-cell");
}else{bB=by.parent().hasClass("k-grid-edit-row");
}if(bH.editable){if(a.contains(bz[0],bx[0])){if(h.opera||bF){bx.change().triggerHandler("blur");
}else{bx.blur();
if(bC){bx.blur();
}}}if(!bH.editable){X(bG);
return;
}if(bH.editable.end()){if(bD=="incell"){bH.closeCell();
}else{bH.saveRow();
bB=true;
}}else{if(bD=="incell"){bH.current(bz);
}else{bH.current(bz.children().filter(D).first());
}bA=bz.find(":kendoFocusable:first")[0];
if(bA){bA.focus();
}return;
}}if(bE){bH.current(bE);
}if(bF){document.body.focus();
}X(bG,true);
if((!bB&&!bE)||bE){if(bD=="incell"){bH.editCell(bH.current());
}else{bH.editRow(bH.current().parent());
}}},_wrapper:function(){var bz=this,by=bz.table,bx=bz.options.height,bA=bz.element;
if(!bA.is("div")){bA=bA.wrap("<div/>").parent();
}bz.wrapper=bA.addClass("k-grid k-widget");
if(bx){bz.wrapper.css(ak,bx);
by.css(ak,"auto");
}bz._initMobile();
},_initMobile:function(){var by=this.options;
var bz=this;
this._isMobile=(by.mobile===true&&az.support.mobileOS)||by.mobile==="phone"||by.mobile==="tablet";
if(this._isMobile){var bx=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+az.ns+'role="view" data-'+az.ns+'init-widgets="false"></div>').parent();
this.pane=az.mobile.ui.Pane.wrap(bx);
this.view=this.pane.view();
this._actionSheetPopupOptions=a(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"};
if(by.height){this.pane.element.parent().css(ak,by.height);
}this._editAnimation="slide";
this.view.bind("show",function(){if(bz._isLocked()){bz._updateTablesWidth();
bz._applyLockedContainersWidth();
bz._syncLockedContentHeight();
bz._syncLockedHeaderHeight();
bz._syncLockedFooterHeight();
}});
}},_tbody:function(){var bz=this,bx=bz.table,by;
by=bx.find(">tbody");
if(!by.length){by=a("<tbody/>").appendTo(bx);
}bz.tbody=by.attr("role","rowgroup");
},_scrollable:function(){var bE=this,bz,bD,bA=bE.options,bB=bA.scrollable,by=bB!==true&&bB.virtual&&!bE.virtualScrollable,bC=!az.support.kineticScrollNeeded||by?az.support.scrollbar():0;
if(bB){bz=bE.wrapper.children(".k-grid-header");
if(!bz[0]){bz=a('<div class="k-grid-header" />').insertBefore(bE.table);
}bz.css((ax?"padding-left":"padding-right"),bB.virtual?bC+1:bC);
bD=a('<table role="grid" />');
if(au){bD.attr("cellspacing",0);
}bD.width(bE.table[0].style.width);
bD.append(bE.thead);
bz.empty().append(a('<div class="k-grid-header-wrap" />').append(bD));
bE.content=bE.table.parent();
if(bE.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")){bE.content=bE.content.parent();
}if(!bE.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){bE.content=bE.table.wrap('<div class="k-grid-content" />').parent();
}if(by){bE.virtualScrollable=new bq(bE.content,{dataSource:bE.dataSource,itemHeight:function(){return bE._averageRowHeight();
}});
}bE.scrollables=bz.children(".k-grid-header-wrap");
var bx=bE.wrapper.find(".k-grid-footer");
if(bx.length){bE.scrollables=bE.scrollables.add(bx.children(".k-grid-footer-wrap"));
}if(bB.virtual){bE.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+aT).bind("scroll"+aT,function(){bE.scrollables.scrollLeft(this.scrollLeft);
if(bE.lockedContent){bE.lockedContent[0].scrollTop=this.scrollTop;
}});
}else{bE.content.unbind("scroll"+aT).bind("scroll"+aT,function(){bE.scrollables.scrollLeft(this.scrollLeft);
if(bE.lockedContent){bE.lockedContent[0].scrollTop=this.scrollTop;
}});
var bF=bE.content.data("kendoTouchScroller");
if(bF){bF.destroy();
}bF=az.touchScroller(bE.content);
if(bF&&bF.movable){bE.touchScroller=bF;
bF.movable.bind("change",function(bG){bE.scrollables.scrollLeft(-bG.sender.x);
if(bE.lockedContent){bE.lockedContent.scrollTop(-bG.sender.y);
}});
bE.one(E,function(bG){bG.sender.wrapper.addClass("k-grid-backface");
});
}}}},_setContentWidth:function(bB){var bC=this,bz="k-grid-content-expander",by='<div class="'+bz+'"></div>',bA=bC.resizable,bx;
if(bC.options.scrollable&&bC.wrapper.is(":visible")){bx=bC.table.parent().children("."+bz);
bC._setContentWidthHandler=aW(bC._setContentWidth,bC);
if(!bC.dataSource||!bC.dataSource.view().length){if(!bx[0]){bx=a(by).appendTo(bC.table.parent());
if(bA){bA.bind("resize",bC._setContentWidthHandler);
}}if(bC.thead){bx.width(bC.thead.width());
if(bB){bC.content.scrollLeft(bB);
}}}else{if(bx[0]){bx.remove();
if(bA){bA.unbind("resize",bC._setContentWidthHandler);
}}}bC._applyLockedContainersWidth();
}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var bB=this.thead.parent(),bC=bB.parent(),by=this.wrapper[0].clientWidth,bA=this._groups(),bF=az.support.scrollbar(),bx=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bD=bB.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bG=w(bx),bE=w(bD),bz;
if(bA>0){bG+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*bA;
}if(bG>=by){bG=by-3*bF;
}this.lockedHeader.add(this.lockedContent).width(bG);
bC[0].style.width=bC.parent().width()-bG-2+"px";
bB.add(this.table).width(bE);
if(this.virtualScrollable){by-=bF;
}this.content[0].style.width=by-bG-2+"px";
if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(bG);
bz=this.footer.find(".k-grid-footer-wrap");
bz[0].style.width=bC[0].clientWidth+"px";
bz.children().first().width(bE);
}}},_setContentHeight:function(){var bC=this,bA=bC.options,by=bC.wrapper.innerHeight(),bx=bC.wrapper.children(".k-grid-header"),bB=az.support.scrollbar();
if(bA.scrollable&&bC.wrapper.is(":visible")){by-=bx.outerHeight();
if(bC.pager){by-=bC.pager.element.outerHeight();
}if(bA.groupable){by-=bC.wrapper.children(".k-grouping-header").outerHeight();
}if(bA.toolbar){by-=bC.wrapper.children(".k-grid-toolbar").outerHeight();
}if(bC.footerTemplate){by-=bC.wrapper.children(".k-grid-footer").outerHeight();
}var bz=function(bD){var bE,bF;
if(bD[0].style.height){return true;
}else{bE=bD.height();
}bD.height("auto");
bF=bD.height();
if(bE!=bF){bD.height("");
return true;
}bD.height("");
return false;
};
if(bz(bC.wrapper)){if(by>bB*2){if(bC.lockedContent){bB=bC.table[0].offsetWidth>bC.table.parent()[0].clientWidth?bB:0;
bC.lockedContent.height(by-bB);
}bC.content.height(by);
}else{bC.content.height(bB*2+1);
}}}},_averageRowHeight:function(){var bA=this,by=bA._items(bA.tbody).length,bz=bA._rowHeight;
if(by===0){return bz;
}if(!bA._rowHeight){bA._rowHeight=bz=bA.table.outerHeight()/by;
bA._sum=bz;
bA._measures=1;
}var bx=bA.table.outerHeight()/by;
if(bz!==bx){bA._measures++;
bA._sum+=bx;
bA._rowHeight=bA._sum/bA._measures;
}return bz;
},_dataSource:function(){var bA=this,by=bA.options,bz,bx=by.dataSource;
bx=ap(bx)?{data:bx}:bx;
if(aw(bx)){P(bx,{table:bA.table,fields:bA.columns});
bz=by.pageable;
if(aw(bz)&&bz.pageSize!==bl){bx.pageSize=bz.pageSize;
}}if(bA.dataSource&&bA._refreshHandler){bA.dataSource.unbind(k,bA._refreshHandler).unbind(aV,bA._progressHandler).unbind(O,bA._errorHandler);
}else{bA._refreshHandler=aW(bA.refresh,bA);
bA._progressHandler=aW(bA._requestStart,bA);
bA._errorHandler=aW(bA._error,bA);
}bA.dataSource=F.create(bx).bind(k,bA._refreshHandler).bind(aV,bA._progressHandler).bind(O,bA._errorHandler);
},_error:function(){this._progress(false);
},_requestStart:function(){this._progress(true);
},_modelChange:function(bB){var bN=this,bM=bN.tbody,bG=bB.model,bJ=bN.tbody.find("tr["+az.attr("uid")+"="+bG.uid+"]"),bI,by,bA,bD=bJ.hasClass("k-alt"),bO,bC=bN._items(bM).index(bJ),bE=bN.lockedContent,bK,bL,bz,bH,bF;
if(bE){bI=bN._relatedRow(bJ);
}if(bJ.add(bI).children(".k-edit-cell").length&&!bN.options.rowTemplate){bJ.add(bI).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){by=a(this);
bA=aB(bN.columns)[bN.cellIndex(by)];
if(bA.field===bB.field){if(!by.hasClass("k-edit-cell")){bN._displayCell(by,bA,bG);
a('<span class="k-dirty"/>').prependTo(by);
}else{by.addClass("k-dirty-cell");
}}});
}else{if(!bJ.hasClass("k-grid-edit-row")){bL=a().add(bJ);
if(bE){bO=(bD?bN.lockedAltRowTemplate:bN.lockedRowTemplate)(bG);
bL=bL.add(bI);
bI.replaceWith(bO);
}bN.angular("cleanup",function(){return{elements:bL.get()};
});
bO=(bD?bN.altRowTemplate:bN.rowTemplate)(bG);
bJ.replaceWith(bO);
bO=bN._items(bM).eq(bC);
var bx=[{dataItem:bG}];
if(bE){bJ=bJ.add(bI);
bI=bN._relatedRow(bO)[0];
e(bO[0],bI);
bO=bO.add(bI);
bx.push({dataItem:bG});
}bN.angular("compile",function(){return{elements:bO.get(),data:bx};
});
bK=bN.options.selectable;
if(bK&&bJ.hasClass("k-state-selected")){bN.select(bO);
}bH=bL.children(":not(.k-group-cell,.k-hierarchy-cell)");
bz=bO.children(":not(.k-group-cell,.k-hierarchy-cell)");
for(bC=0,bF=bN.columns.length;
bC<bF;
bC++){bA=bN.columns[bC];
by=bz.eq(bC);
if(bK&&bH.eq(bC).hasClass("k-state-selected")){by.addClass("k-state-selected");
}if(bA.field===bB.field){a('<span class="k-dirty"/>').prependTo(by);
}}bN.trigger("itemChange",{item:bO,data:bG,ns:bk});
}}},_pageable:function(){var by=this,bz,bx=by.options.pageable;
if(bx){bz=by.wrapper.children("div.k-grid-pager");
if(!bz.length){bz=a('<div class="k-pager-wrap k-grid-pager"/>').appendTo(by.wrapper);
}if(by.pager){by.pager.destroy();
}if(typeof bx==="object"&&bx instanceof az.ui.Pager){by.pager=bx;
}else{by.pager=new az.ui.Pager(bz,P({},bx,{dataSource:by.dataSource}));
}}},_footer:function(){var bF=this,bx=bF.dataSource.aggregates(),bC="",bz=bF.footerTemplate,bE=bF.options,bA,by=bF.footer||bF.wrapper.find(".k-grid-footer");
if(bz){bx=!ar(bx)?bx:i(bF.dataSource.aggregate());
bC=a(bF._wrapFooter(bz(bx)));
if(by.length){var bG=bC;
bF.angular("cleanup",function(){return{elements:by.get()};
});
by.replaceWith(bG);
by=bF.footer=bG;
}else{if(bE.scrollable){by=bF.footer=bE.pageable?bC.insertBefore(bF.wrapper.children("div.k-grid-pager")):bC.appendTo(bF.wrapper);
}else{by=bF.footer=bC.insertBefore(bF.tbody);
}}bF.angular("compile",function(){return{elements:by.find("td").get(),data:aE(bF.columns,function(bH,bI){return{column:bH,aggregate:bx[bH.field]};
})};
});
}else{if(by&&!bF.footer){bF.footer=by;
}}if(by.length){if(bE.scrollable){bA=by.attr("tabindex",-1).children(".k-grid-footer-wrap");
bF.scrollables=bF.scrollables.filter(function(){return !a(this).is(".k-grid-footer-wrap");
}).add(bA);
}if(bF._footerWidth){by.find("table").css("width",bF._footerWidth);
}if(bA){var bD=bF.content.scrollLeft();
var bB=bE.scrollable!==true&&bE.scrollable.virtual&&!bF.virtualScrollable;
if(bB){bD=bF.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft();
}bA.scrollLeft(bD);
}}if(bF.lockedContent){bF._appendLockedColumnFooter();
bF._applyLockedContainersWidth();
bF._syncLockedFooterHeight();
}},_wrapFooter:function(bx){var bA=this,by="",bz=!az.support.mobileOS?az.support.scrollbar():0;
if(bA.options.scrollable){by=a('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(au?' cellspacing="0"':"")+"><tbody>"+bx+"</tbody></table></div></div>");
bA._appendCols(by.find("table"));
by.css((ax?"padding-left":"padding-right"),bz);
return by;
}return'<tfoot class="k-grid-footer">'+bx+"</tfoot>";
},_columnMenu:function(){var bO=this,bK,bD=aB(bO.columns),bB,bM=bO.options,bC=bM.columnMenu,bL,bN,bE,bz,bF=ac(bO.columns,function(bP){return bP.columns!==bl;
}).length>0,bI=this._isMobile,bH=function(bP){bO.trigger(p,{field:bP.field,container:bP.container});
},bA=function(bP){X(bP.closest("table"),true);
},bx=bM.$angular;
if(bC){if(typeof bC=="boolean"){bC={};
}bz=aC(bO.thead);
for(var bG=0,bJ=bz.length;
bG<bJ;
bG++){bB=bD[bG];
var by=bz.eq(bG);
if(!bB.command&&(bB.field||by.attr("data-"+az.ns+"field"))){bK=by.data("kendoColumnMenu");
if(bK){bK.destroy();
}bN=bB.sortable!==false&&bC.sortable!==false&&bM.sortable!==false?P({},bM.sortable,{compare:(bB.sortable||{}).compare}):false;
bE=bM.filterable&&bB.filterable!==false&&bC.filterable!==false?P({pane:bO.pane},bM.filterable,bB.filterable):false;
if(bB.filterable&&bB.filterable.dataSource){bE.forceUnique=false;
bE.checkSource=bB.filterable.dataSource;
}if(bE){bE.format=bB.format;
}bL={dataSource:bO.dataSource,values:bB.values,columns:bC.columns,sortable:bN,filterable:bE,messages:bC.messages,owner:bO,closeCallback:bA,init:bH,pane:bO.pane,filter:bI?":not(.k-column-active)":"",lockedColumns:!bF&&bB.lockable!==false&&aD(bD).length>0};
if(bx){bL.$angular=bx;
}by.kendoColumnMenu(bL);
}}}},_headerCells:function(){return this.thead.find("th").filter(function(){var bx=a(this);
return !bx.hasClass("k-group-cell")&&!bx.hasClass("k-hierarchy-cell");
});
},_filterable:function(){var bI=this,bB=aB(bI.columns),bE,by,bx,bD=function(bJ){bI.trigger(Q,{field:bJ.field,container:bJ.container});
},bz=function(bJ){X(bJ.closest("table"),true);
},bC=bI.options.filterable;
if(bC&&typeof bC.mode==ba&&bC.mode.indexOf("menu")==-1){bC=false;
}if(bC&&!bI.options.columnMenu){by=aC(bI.thead);
for(var bF=0,bG=by.length;
bF<bG;
bF++){bx=by.eq(bF);
if(bB[bF].filterable!==false&&!bB[bF].command&&(bB[bF].field||bx.attr("data-"+az.ns+"field"))){bE=bx.data("kendoFilterMenu");
if(bE){bE.destroy();
}var bA=bB[bF].filterable;
var bH=P({},bC,bA,{dataSource:bI.dataSource,values:bB[bF].values,format:bB[bF].format,closeCallback:bz,init:bD,pane:bI.pane});
if(bA&&bA.messages){bH.messages=P(true,{},bC.messages,bA.messages);
}if(bA&&bA.dataSource){bH.forceUnique=false;
bH.checkSource=bA.dataSource;
}if(bA&&bA.multi){bx.kendoFilterMultiCheck(bH);
}else{bx.kendoFilterMenu(bH);
}}}}},_filterRow:function(){var bJ=this;
if(!bJ._hasFilterRow()){return;
}var bz=aB(bJ.columns),bC=bJ.options.filterable,bG=bJ.thead.find(".k-filter-row");
this._updateHeader(this.dataSource.group().length);
for(var bD=0;
bD<bz.length;
bD++){var bH,by=bz[bD],bF=bJ.options.filterable.operators,bA=false,bI=a("<th/>"),bB=by.field;
if(by.hidden){bI.hide();
}bG.append(bI);
if(bB&&by.filterable!==false){var bx=by.filterable&&by.filterable.cell||{};
bH=bJ.options.dataSource;
if(bH instanceof F){bH=bJ.options.dataSource.options;
}var bE=P(true,{},bC.messages);
if(by.filterable){P(true,bE,by.filterable.messages);
}if(bx.enabled===false){bI.html("&nbsp;");
continue;
}if(bx.dataSource){bH=bx.dataSource;
bA=true;
}if(by.filterable&&by.filterable.operators){bF=by.filterable.operators;
}a("<span/>").attr(az.attr("field"),bB).kendoFilterCell({dataSource:bJ.dataSource,suggestDataSource:bH,customDataSource:bA,field:bB,messages:bE,values:by.values,template:bx.template,delay:bx.delay,inputWidth:bx.inputWidth,suggestionOperator:bx.suggestionOperator,minLength:bx.minLength,dataTextField:bx.dataTextField,operator:bx.operator,operators:bF,showOperators:bx.showOperators}).appendTo(bI);
}else{bI.html("&nbsp;");
}}},_sortable:function(){var bF=this,bA=aB(bF.columns),bz,bE,bx,bD=bF.options.sortable;
if(bD){var by=aC(bF.thead);
for(var bB=0,bC=by.length;
bB<bC;
bB++){bz=bA[bB];
if(bz.sortable!==false&&!bz.command&&bz.field){bx=by.eq(bB);
bE=bx.data("kendoColumnSorter");
if(bE){bE.destroy();
}bx.attr("data-"+az.ns+"field",bz.field).kendoColumnSorter(P({},bD,bz.sortable,{dataSource:bF.dataSource,aria:true,filter:":not(.k-column-active)"}));
}}by=null;
}},_columns:function(by){var bE=this,bD=bE.table,bA,bx=bD.find("col"),bC,bz=bE.options.dataSource;
by=by.length?by:aE(bD.find("th"),function(bL,bI){bL=a(bL);
var bK=bL.attr(az.attr("sortable")),bG=bL.attr(az.attr("filterable")),bM=bL.attr(az.attr("type")),bH=bL.attr(az.attr("groupable")),bF=bL.attr(az.attr("field")),bJ=bL.attr(az.attr("menu"));
if(!bF){bF=bL.text().replace(/\s|[^A-z0-9]/g,"");
}return{field:bF,type:bM,sortable:bK!=="false",filterable:bG!=="false",groupable:bH!=="false",menu:bJ,template:bL.attr(az.attr("template")),width:bx.eq(bI).css("width")};
});
bA=!(bE.table.find("tbody tr").length>0&&(!bz||!bz.transport));
if(bE.options.scrollable){var bB=by;
bC=aD(by);
by=aP(by);
if(bC.length>0&&by.length===0){throw new Error("There should be at least one non locked column");
}aS(bE.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),bB);
by=bC.concat(by);
}bE.columns=aR(by,bA);
},_groups:function(){var bx=this.dataSource.group();
return bx?bx.length:0;
},_tmpl:function(bF,bA,bx,bH){var bK=this,bG=P({},az.Template,bK.options.templateSettings),bD,bE=bA.length,bJ,bI={storage:{},count:0},bz,bL,bC=bK._hasDetails(),by=[],bB=bK._groups();
if(!bF){bF="<tr";
if(bx){by.push("k-alt");
}if(bC){by.push("k-master-row");
}if(by.length){bF+=' class="'+by.join(" ")+'"';
}if(bE){bF+=" "+az.attr("uid")+'="#='+az.expr("uid",bG.paramName)+'#"';
}bF+=" role='row'>";
if(bB>0&&!bH){bF+=af(bB);
}if(bC){bF+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>';
}for(bD=0;
bD<bE;
bD++){bz=bA[bD];
bJ=bz.template;
bL=typeof bJ;
bF+="<td"+bb(bz.attributes)+" role='gridcell'>";
bF+=bK._cellTmpl(bz,bI);
bF+="</td>";
}bF+="</tr>";
}bF=az.template(bF,bG);
if(bI.count>0){return aW(bF,bI.storage);
}return bF;
},_headerCellText:function(bx){var bB=this,by=P({},az.Template,bB.options.templateSettings),bz=bx.headerTemplate,bC=typeof(bz),bA=bx.title||bx.field||"";
if(bC===aa){bA=az.template(bz,by)({});
}else{if(bC===ba){bA=bz;
}}return bA;
},_cellTmpl:function(bx,bG){var bI=this,bF=P({},az.Template,bI.options.templateSettings),bH=bx.template,bE=bF.paramName,bz=bx.field,bB="",bC,bD,bA=bx.format,bJ=typeof bH,by=bx.values;
if(bx.command){if(ap(bx.command)){for(bC=0,bD=bx.command.length;
bC<bD;
bC++){bB+=bI._createButton(bx.command[bC]);
}return bB.replace(bi,"\\#");
}return bI._createButton(bx.command).replace(bi,"\\#");
}if(bJ===aa){bG.storage["tmpl"+bG.count]=bH;
bB+="#=this.tmpl"+bG.count+"("+bE+")#";
bG.count++;
}else{if(bJ===ba){bB+=bH;
}else{if(by&&by.length&&aw(by[0])&&"value" in by[0]&&bz){bB+="#var v ="+az.stringify(B(by)).replace(bi,"\\#")+"#";
bB+="#var f = v[";
if(!bF.useWithBlock){bB+=bE+".";
}bB+=bz+"]#";
bB+="${f != null ? f : ''}";
}else{bB+=bx.encoded?"#:":"#=";
if(bA){bB+='kendo.format("'+bA.replace(Z,"\\$1")+'",';
}if(bz){bz=az.expr(bz,bE);
bB+=bz+"==null?'':"+bz;
}else{bB+="''";
}if(bA){bB+=")";
}bB+="#";
}}}return bB;
},_templates:function(){var bF=this,bE=bF.options,bB=bF.dataSource,bD=bB.group(),bC=bF.footer||bF.wrapper.find(".k-grid-footer"),bx=bB.aggregate(),by=aB(bF.columns),bA=aB(aD(bF.columns)),bz=bE.scrollable?aB(aP(bF.columns)):by;
if(bE.scrollable&&bA.length){if(bE.rowTemplate||bE.altRowTemplate){throw new Error("Having both row template and locked columns is not supported");
}bF.rowTemplate=bF._tmpl(bE.rowTemplate,bz,false,true);
bF.altRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bz,true,true);
bF.lockedRowTemplate=bF._tmpl(bE.rowTemplate,bA);
bF.lockedAltRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bA,true);
}else{bF.rowTemplate=bF._tmpl(bE.rowTemplate,bz);
bF.altRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bz,true);
}if(bF._hasDetails()){bF.detailTemplate=bF._detailTmpl(bE.detailTemplate||"");
}if((bF._group&&!ar(bx))||(!ar(bx)&&!bC.length)||ac(by,function(bG){return bG.footerTemplate;
}).length){bF.footerTemplate=bF._footerTmpl(by,bx,"footerTemplate","k-footer-template");
}if(bD&&ac(by,function(bG){return bG.groupFooterTemplate;
}).length){bx=a.map(bD,function(bG){return bG.aggregates;
});
bF.groupFooterTemplate=bF._footerTmpl(bz,bx,"groupFooterTemplate","k-group-footer",bA.length);
if(bE.scrollable&&bA.length){bF.lockedGroupFooterTemplate=bF._footerTmpl(bA,bx,"groupFooterTemplate","k-group-footer");
}}},_footerTmpl:function(bz,bx,bN,bH,bK){var bO=this,bJ=P({},az.Template,bO.options.templateSettings),bG=bJ.paramName,bD="",bE,bF,bM,bP,bL={},bA=0,bI={},bC=bO._groups(),bB=i(bx),by;
bD+='<tr class="'+bH+'">';
if(bC>0&&!bK){bD+=af(bC);
}if(bO._hasDetails()){bD+='<td class="k-hierarchy-cell">&nbsp;</td>';
}for(bE=0,bF=bz.length;
bE<bF;
bE++){by=bz[bE];
bM=by[bN];
bP=typeof bM;
bD+="<td"+bb(by.footerAttributes)+">";
if(bM){if(bP!==aa){bI=bB[by.field]?P({},bJ,{paramName:bG+"['"+by.field+"']"}):{};
bM=az.template(bM,bI);
}bL["tmpl"+bA]=bM;
bD+="#=this.tmpl"+bA+"("+bG+")#";
bA++;
}else{bD+="&nbsp;";
}bD+="</td>";
}bD+="</tr>";
bD=az.template(bD,bJ);
if(bA>0){return aW(bD,bL);
}return bD;
},_detailTmpl:function(bC){var bF=this,bz="",bB=P({},az.Template,bF.options.templateSettings),bA=bB.paramName,bE={},bD=0,by=bF._groups(),bx=br(aB(bF.columns)).length,bG=typeof bC;
bz+='<tr class="k-detail-row">';
if(by>0){bz+=af(by);
}bz+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(bx?' colspan="'+bx+'"':"")+">";
if(bG===aa){bE["tmpl"+bD]=bC;
bz+="#=this.tmpl"+bD+"("+bA+")#";
bD++;
}else{bz+=bC;
}bz+="</td></tr>";
bz=az.template(bz,bB);
if(bD>0){return aW(bz,bE);
}return bz;
},_hasDetails:function(){var bx=this;
return bx.options.detailTemplate!==null||(bx._events[L]||[]).length;
},_hasFilterRow:function(){var bz=this.options.filterable;
var bA=bz&&typeof bz.mode==ba&&bz.mode.indexOf("row")!=-1;
var bx=this.columns;
var by=a.grep(bx,function(bB,bC){return bB.filterable===false;
});
if(bx.length&&by.length==bx.length){bA=false;
}return bA;
},_details:function(){var bx=this;
if(bx.options.scrollable&&bx._hasDetails()&&aD(bx.columns).length){throw new Error("Having both detail template and locked columns is not supported");
}bx.table.on(m+aT,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(bC){var by=a(this),bD=by.hasClass("k-plus"),bF=by.closest("tr.k-master-row"),bA,bB=bx.detailTemplate,bz,bE=bx._hasDetails();
by.toggleClass("k-plus",!bD).toggleClass("k-minus",bD);
bA=bF.next();
if(bE&&!bA.hasClass("k-detail-row")){bz=bx.dataItem(bF);
bA=a(bB(bz)).addClass(bF.hasClass("k-alt")?"k-alt":"").insertAfter(bF);
bx.angular("compile",function(){return{elements:bA.get(),data:[{dataItem:bz}]};
});
bx.trigger(L,{masterRow:bF,detailRow:bA,data:bz,detailCell:bA.find(".k-detail-cell")});
}bx.trigger(bD?K:J,{masterRow:bF,detailRow:bA});
bA.toggle(bD);
if(bx._current){bx._current.attr("aria-expanded",bD);
}bC.preventDefault();
return false;
});
},dataItem:function(bC){bC=a(bC)[0];
if(!bC){return null;
}var bB=this.tbody.children(),bx=/k-grouping-row|k-detail-row|k-group-footer/,bz=bC.sectionRowIndex,bA,by;
by=bz;
for(bA=0;
bA<bz;
bA++){if(bx.test(bB[bA].className)){by--;
}}return this._data[by];
},expandRow:function(bx){a(bx).find("> td .k-plus, > td .k-i-expand").click();
},collapseRow:function(bx){a(bx).find("> td .k-minus, > td .k-i-collapse").click();
},_createHeaderCells:function(bx,bD){var bG=this,bz,bF,bE,by="",bC,bB=aB(bG.columns);
for(bz=0,bC=bx.length;
bz<bC;
bz++){bF=bx[bz].column||bx[bz];
bE=bG._headerCellText(bF);
var bA=ao(bF,bB);
if(!bF.command){by+="<th role='columnheader' "+az.attr("field")+"='"+(bF.field||"")+"' ";
if(bD&&!bx[bz].colSpan){by+=" rowspan='"+bD+"'";
}if(bx[bz].colSpan>1){by+='colspan="'+(bx[bz].colSpan-am(bF.columns))+'" ';
by+=az.attr("colspan")+"='"+bx[bz].colSpan+"'";
}if(bF.title){by+=az.attr("title")+'="'+bF.title.replace(/'/g,"'")+'" ';
}if(bF.groupable!==bl){by+=az.attr("groupable")+"='"+bF.groupable+"' ";
}if(bF.aggregates&&bF.aggregates.length){by+=az.attr("aggregates")+"='"+bF.aggregates+"'";
}if(bA>-1){by+=az.attr("index")+"='"+bA+"'";
}by+=bb(bF.headerAttributes);
by+=">"+bE+"</th>";
}else{by+="<th"+bb(bF.headerAttributes);
if(bD&&!bx[bz].colSpan){by+=" rowspan='"+bD+"'";
}if(bA>-1){by+=az.attr("index")+"='"+bA+"'";
}by+=">"+bE+"</th>";
}}return by;
},_appendLockedColumnContent:function(){var bB=this.columns,bD,bx=this.table.find("colgroup"),bz=bx.find("col:not(.k-group-col,.k-hierarchy-col)"),bE,bF=a(),bG=0,bC,bA,bH,by=0;
for(bD=0,bE=bB.length;
bD<bE;
bD++){if(bB[bD].locked){if(ay(bB[bD])){bA=1;
if(bB[bD].columns){bA=aB(bB[bD].columns).length-am(bB[bD].columns);
}bA=bA||1;
for(bH=0;
bH<bA;
bH++){bF=bF.add(bz.eq(bD+by+bH-bG));
}by+=bA-1;
}else{bG++;
}}}bC=a('<div class="k-grid-content-locked"><table'+(au?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");
bx.detach();
bC.find("colgroup").append(bF);
bx.insertBefore(this.table.find("tbody"));
this.lockedContent=bC.insertBefore(this.content);
this.lockedTable=bC.children("table");
},_appendLockedColumnFooter:function(){var bG=this;
var bz=bG.footer;
var bx=bz.find(".k-footer-template>td");
var by=bz.find(".k-grid-footer-wrap>table>colgroup>col");
var bB=a('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');
var bC,bD;
var bA=bG._groups();
var bE=a(),bF=a();
bE=bE.add(bx.filter(".k-group-cell"));
for(bC=0,bD=aB(aD(bG.columns)).length;
bC<bD;
bC++){bE=bE.add(bx.eq(bC+bA));
}bF=bF.add(by.filter(".k-group-col"));
for(bC=0,bD=aB(bt(bG.columns)).length;
bC<bD;
bC++){bF=bF.add(by.eq(bC+bA));
}bE.appendTo(bB.find("tr"));
bF.appendTo(bB.find("colgroup"));
bG.lockedFooter=bB.prependTo(bz);
},_appendLockedColumnHeader:function(bE){var bU=this,bD=this.columns,bM,bL,bP,bz,bV,bW,bT,bK,bG,bQ=[],bR=0,bB=a(),bJ=bU._hasFilterRow(),bH=0,bI=a(),bx,bO=0,by=a();
bz=bU.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");
bK=bU.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");
bG=bU.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bA=0;
for(bM=0,bP=bD.length;
bM<bP;
bM++){if(bD[bM].locked){bx=bK.eq(bM);
bO=aB(bD[bM].columns||[]).length;
if(ay(bD[bM])){var bC;
if(bD[bM].columns){bC=bO-am(bD[bM].columns);
}bC=bC||1;
for(var bS=0;
bS<bC;
bS++){bB=bB.add(bz.eq(bM+bA+bS-bR));
}bA+=bC-1;
}aF([bD[bM]],l(bx),bQ,0,0);
bO=bO||1;
for(var bN=0;
bN<bO;
bN++){bI=bI.add(bG.eq(bH+bN));
}bH+=bO;
}if(bD[bM].columns){bR+=am(bD[bM].columns);
}if(!ay(bD[bM])){bR++;
}}if(bQ.length){bL='<div class="k-grid-header-locked" style="width:1px"><table'+(au?' cellspacing="0"':"")+"><colgroup/><thead>";
bL+=new Array(bQ.length+1).join("<tr></tr>");
bL+=(bJ?'<tr class="k-filter-row" />':"")+"</thead></table></div>";
bT=a(bL);
bz=bT.find("colgroup");
bz.append(bU.thead.prev().find("col.k-group-col").add(bB));
bV=bT.find("thead tr:not(.k-filter-row)");
for(bM=0,bP=bQ.length;
bM<bP;
bM++){by=bj(bQ[bM]);
bV.eq(bM).append(bU.thead.find("tr:eq("+bM+") .k-group-cell").add(by));
}var bF=aZ(this.thead);
if(bQ.length<bF){a1(bT,bF);
}bW=bT.find(".k-filter-row");
bW.append(bU.thead.find(".k-filter-row .k-group-cell").add(bI));
this.lockedHeader=bT.prependTo(bE);
this.thead.find(".k-group-cell").remove();
this._syncLockedHeaderHeight();
}},_removeLockedContainers:function(){var bx=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);
az.destroy(bx);
bx.off(aT).remove();
this.lockedHeader=this.lockedContent=this.lockedFooter=null;
this.selectable=null;
},_thead:function(){var bJ=this,bx=bJ.columns,bA=bJ._hasDetails()&&bx.length,bB=bJ._hasFilterRow(),bE,bF,bD="",bK=bJ.table.find(">thead"),bC=bJ.element.find("thead:first").length>0,bL,bH,bI;
if(!bK.length){bK=a("<thead/>").insertBefore(bJ.tbody);
}if(bJ.lockedHeader&&bJ.thead){bL=bJ.thead.find("tr:has(th):not(.k-filter-row)").html("");
bJ._removeLockedContainers();
}else{if(bC){bL=bJ.element.find("thead:first tr:has(th):not(.k-filter-row)");
}else{bL=bJ.element.find("tr:has(th):first");
}}if(!bL.length){bL=bK.children().first();
if(!bL.length){var bG=[{rowSpan:1,cells:[],index:0}];
bJ._prepareColumns(bG,bx);
for(bE=0;
bE<bG.length;
bE++){bD+="<tr>";
if(bA){bD+='<th class="k-hierarchy-cell">&nbsp;</th>';
}bD+=bJ._createHeaderCells(bG[bE].cells,bG[bE].rowSpan);
bD+="</tr>";
}bL=a(bD);
}}if(bB){var bz=a("<tr/>");
bz.addClass("k-filter-row");
if(bA){bz.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');
}var by=bK.find(".k-filter-row");
if(by.length){az.destroy(by);
by.remove();
}bK.append(bz);
}if(!bL.children().length){bD="";
if(bA){bD+='<th class="k-hierarchy-cell">&nbsp;</th>';
}bD+=bJ._createHeaderCells(bx);
bL.html(bD);
}else{if(bA&&!bL.find(".k-hierarchy-cell")[0]){bL.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');
}}bL.attr("role","row").find("th").addClass("k-header");
if(!bJ.options.scrollable){bK.addClass("k-grid-header");
}bL.find("script").remove().end().prependTo(bK);
if(bJ.thead){bJ._destroyColumnAttachments();
}this.angular("cleanup",function(){return{elements:bK.find("th").get()};
});
this.angular("compile",function(){return{elements:bK.find("th").get(),data:aE(bx,function(bM){return{column:bM};
})};
});
bJ.thead=bK.attr("role","rowgroup");
bJ._sortable();
bJ._filterable();
bJ._filterRow();
bJ._scrollable();
bJ._updateCols();
bJ._columnMenu();
if(this.options.scrollable&&aD(this.columns).length){bJ._appendLockedColumnHeader(bJ.thead.closest(".k-grid-header"));
bJ._appendLockedColumnContent();
bJ.lockedContent.bind("DOMMouseScroll"+aT+" mousewheel"+aT,aW(bJ._wheelScroll,bJ));
bJ._applyLockedContainersWidth();
}bJ._updateColumnCellIndex();
bJ._updateFirstColumnClass();
bJ._resizable();
bJ._draggable();
bJ._reorderable();
if(bJ.groupable){bJ._attachGroupable();
}},_updateFirstColumnClass:function(){var bA=this,bx=bA.columns||[],by=bA._hasDetails()&&bx.length;
if(!by&&!bA._groups()){var bz=a();
var bB=bA.thead.find(">tr:not(.k-filter-row):not(:first)");
bx=aP(bx);
if(bB.length&&bx[0]&&!bx[0].columns){bz=bz.add(bB);
}if(bA._isLocked()){bB=bA.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");
bx=aD(bA.columns);
if(bB.length&&bx[0]&&!bx[0].columns){bz=bz.add(bB);
}}bz.each(function(){var bC=a(this).find("th");
bC.removeClass("k-first");
bC.eq(0).addClass("k-first");
});
}},_prepareColumns:function(bE,bz,bB,bC){var bD=bC||bE[bE.length-1];
var by=bE[bD.index+1];
var bF=0;
for(var bA=0;
bA<bz.length;
bA++){var bx={column:bz[bA],colSpan:0};
bD.cells.push(bx);
if(bz[bA].columns&&bz[bA].columns.length){if(!by){by={rowSpan:0,cells:[],index:bE.length};
bE.push(by);
}bx.colSpan=bz[bA].columns.length;
this._prepareColumns(bE,bz[bA].columns,bx,by);
bF+=bx.colSpan-1;
bD.rowSpan=bE.length-bD.index;
}}if(bB){bB.colSpan+=bF;
}},_wheelScroll:function(bz){if(bz.ctrlKey){return;
}var bx=this.content;
if(this.options.scrollable.virtual){bx=this.virtualScrollable.verticalScrollbar;
}var bA=bx.scrollTop(),by=az.wheelDeltaY(bz);
if(by){bz.preventDefault();
a(bz.currentTarget).one("wheel"+aT,false);
bx.scrollTop(bA+(-by));
}},_isLocked:function(){return this.lockedHeader!=null;
},_updateCols:function(bx){bx=bx||this.thead.parent().add(this.table);
this._appendCols(bx,this._isLocked());
},_updateLockedCols:function(bx){if(this._isLocked()){bx=bx||this.lockedHeader.find("table").add(this.lockedTable);
aQ(bx,bs(bt(this.columns)),this._hasDetails(),this._groups());
}},_appendCols:function(by,bx){if(bx){aQ(by,bs(bu(this.columns)),this._hasDetails(),0);
}else{aQ(by,bs(br(this.columns)),this._hasDetails(),this._groups());
}},_autoColumns:function(by){if(by&&by.toJSON){var bz=this,bx;
by=by.toJSON();
for(bx in by){bz.columns.push({field:bx});
}bz._thead();
bz._templates();
}},_rowsHtml:function(by,bD){var bE=this,bz="",bA,bC=bD.rowTemplate,bx=bD.altRowTemplate,bB;
for(bA=0,bB=by.length;
bA<bB;
bA++){if(bA%2){bz+=bx(by[bA]);
}else{bz+=bC(by[bA]);
}bE._data.push(by[bA]);
}return bz;
},_groupRowHtml:function(bE,bz,bL,bG,bP,bN){var bR=this,bI="",bJ,bK,bC=bE.field,bA=ac(aB(bR.columns),function(bS){return bS.field==bC;
})[0]||{},bO=bA.groupHeaderTemplate,bQ=(bA.title||bC)+": "+Y(bE.value,bA.format,bA.values),bD=bR._groupAggregatesDefaultObject||{},bx=P({},bD,bE.aggregates),bB=P({},{field:bE.field,value:bE.value,aggregates:bx},bE.aggregates[bE.field]),bM=bP.rowTemplate,by=bP.altRowTemplate,bF=bP.groupFooterTemplate,bH=bE.items;
if(bO){bQ=typeof bO===aa?bO(bB):az.template(bO)(bB);
}bI+=bG(bz,bL,bQ);
if(bE.hasSubgroups){for(bJ=0,bK=bH.length;
bJ<bK;
bJ++){bI+=bR._groupRowHtml(bH[bJ],bN?bz:bz-1,bL+1,bG,bP,bN);
}}else{bI+=bR._rowsHtml(bH,bP);
}if(bF){bI+=bF(bx);
}return bI;
},collapseGroup:function(by){by=a(by);
var bC,bz=this.options.groupable,bF=bz.showFooter,bx=bF?0:1,bD,bE=a(),bA,bB,bG;
if(this._isLocked()){if(!by.closest("div").hasClass("k-grid-content-locked")){bE=by.nextAll("tr");
by=this.lockedTable.find(">tbody>tr:eq("+by.index()+")");
}else{bE=this.tbody.children("tr:eq("+by.index()+")").nextAll("tr");
}}bC=by.find(".k-group-cell").length;
by.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse");
by.find("td:first").attr("aria-expanded",false);
by=by.nextAll("tr");
for(bA=0,bB=by.length;
bA<bB;
bA++){bG=by.eq(bA);
bD=bG.find(".k-group-cell").length;
if(bG.hasClass("k-grouping-row")){bx++;
}else{if(bG.hasClass("k-group-footer")){bx--;
}}if(bD<=bC||(bG.hasClass("k-group-footer")&&bx<0)){break;
}bG.hide();
bE.eq(bA).hide();
}},expandGroup:function(by){by=a(by);
var bG=this,bF=bG.options.groupable.showFooter,bC,bH,bD,bE=a(),bA,bB,bx=[],bz=1;
if(this._isLocked()){if(!by.closest("div").hasClass("k-grid-content-locked")){bE=by.nextAll("tr");
by=this.lockedTable.find(">tbody>tr:eq("+by.index()+")");
}else{bE=this.tbody.children("tr:eq("+by.index()+")").nextAll("tr");
}}bC=by.find(".k-group-cell").length;
by.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand");
by.find("td:first").attr("aria-expanded",true);
by=by.nextAll("tr");
for(bA=0,bB=by.length;
bA<bB;
bA++){bH=by.eq(bA);
bD=bH.find(".k-group-cell").length;
if(bD<=bC){break;
}if(bD==bC+1&&!bH.hasClass("k-detail-row")){bH.show();
bE.eq(bA).show();
if(bH.hasClass("k-grouping-row")&&bH.find(".k-icon").hasClass("k-i-collapse")){bG.expandGroup(bH);
}if(bH.hasClass("k-master-row")&&bH.find(".k-icon").hasClass("k-minus")){bH.next().show();
bE.eq(bA+1).show();
}}if(bH.hasClass("k-grouping-row")){if(bF){bx.push(bH.is(":visible"));
}bz++;
}if(bH.hasClass("k-group-footer")){if(bF){bH.toggle(bx.pop());
}if(bz==1){bH.show();
bE.eq(bA).show();
}else{bz--;
}}}},_updateHeader:function(bz){var bC=this,bx=bC._isLocked()?bC.lockedHeader.find("thead"):bC.thead,by=bx.find("tr.k-filter-row").find("th.k-group-cell").length,bA=bx.find("tr:first").find("th.k-group-cell").length,bB=bx.children("tr:not(:first)").filter(function(){return !a(this).children(":visible").length;
});
if(bz>bA){a(new Array(bz-bA+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(bx.children("tr:not(.k-filter-row)"));
if(bC.element.is(":visible")){bB.find("th.k-group-cell").hide();
}}else{if(bz<bA){bx.find("tr").each(function(){a(this).find("th.k-group-cell").filter(":eq("+bz+"),:gt("+bz+")").remove();
});
}}if(bz>by){a(new Array(bz-by+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(bx.find(".k-filter-row"));
}},_firstDataItem:function(bx,by){if(bx&&by){if(bx.hasSubgroups){bx=this._firstDataItem(bx.items[0],by);
}else{bx=bx.items[0];
}}return bx;
},_updateTablesWidth:function(){var by=this,bx;
if(!by._isLocked()){return;
}bx=a(">.k-grid-footer>.k-grid-footer-wrap>table",by.wrapper).add(by.thead.parent()).add(by.table);
by._footerWidth=bf(bx.eq(0));
bx.width(by._footerWidth);
bx=a(">.k-grid-footer>.k-grid-footer-locked>table",by.wrapper).add(by.lockedHeader.find(">table")).add(by.lockedTable);
bx.width(bf(bx.eq(0)));
},hideColumn:function(bz){var bM=this,bx,bL,bG,by,bC,bJ,bK,bO=0,bI=[],bF,bH,bE=bM.footer||bM.wrapper.find(".k-grid-footer"),bB=bM.columns,bN=bM.lockedHeader?aC(bM.lockedHeader.find(">table>thead")).filter(aq).length:0,bA;
if(typeof bz=="number"){bz=bB[bz];
}else{if(aw(bz)){bz=ac(U(bB),function(bP){return bP===bz;
})[0];
}else{bz=ac(U(bB),function(bP){return bP.field===bz;
})[0];
}}if(!bz||!ay(bz)){return;
}if(bz.columns&&bz.columns.length){bJ=y(bz,bB);
a8(bz,false);
a7(N(a(">table>thead",bM.lockedHeader),bM.thead,">tr:eq("+bJ.row+")>th"),bJ.cell,false);
for(bG=0;
bG<bz.columns.length;
bG++){this.hideColumn(bz.columns[bG]);
}bM.trigger(n,{column:bz});
return;
}bA=ao(bz,br(aB(bB)));
a8(bz,false);
bM._setParentsVisibility(bz,false);
bM._templates();
bM._updateCols();
bM._updateLockedCols();
var bD=bM.thead;
bF=bA;
if(bM.lockedHeader&&bN>bA){bD=bM.lockedHeader.find(">table>thead");
}else{bF-=bN;
}bx=aC(bD).filter(aq).eq(bF);
bx[0].style.display="none";
a7(N(a(">table>thead",bM.lockedHeader),bM.thead,">tr.k-filter-row>th"),bA,false);
if(bE[0]){bM._updateCols(bE.find(">.k-grid-footer-wrap>table"));
bM._updateLockedCols(bE.find(">.k-grid-footer-locked>table"));
a7(bE.find(".k-footer-template>td"),bA,false);
}if(bM.lockedTable&&bN>bA){an(bM.lockedTable.find(">tbody>tr"),bA);
}else{an(bM.tbody.children(),bA-bN);
}if(bM.lockedTable){bM._updateTablesWidth();
bM._applyLockedContainersWidth();
bM._syncLockedContentHeight();
bM._syncLockedHeaderHeight();
bM._syncLockedFooterHeight();
}else{by=bM.thead.prev().find("col");
for(bG=0,bH=by.length;
bG<bH;
bG+=1){bC=by[bG].style.width;
if(bC&&bC.indexOf("%")==-1){bO+=parseInt(bC,10);
}else{bO=0;
break;
}}bL=a(">.k-grid-header table:first,>.k-grid-footer table:first",bM.wrapper).add(bM.table);
bM._footerWidth=null;
if(bO){bL.each(function(){this.style.width=bO+"px";
});
bM._footerWidth=bO;
}if(h.msie&&h.version==8){bL.css("display","inline-table");
setTimeout(function(){bL.css("display","table");
},1);
}}bM._updateFirstColumnClass();
bM.trigger(n,{column:bz});
},_setParentsVisibility:function(bz,bG){var bA=this.columns;
var bB;
var bD=[];
var bC;
var bE;
var bx;
var by;
var bF=bG?function(bH){return br(bH.columns).length&&bH.hidden;
}:function(bH){return !br(bH.columns).length&&!bH.hidden;
};
if(r(bz,bA,bD)&&bD.length){for(bB=bD.length-1;
bB>=0;
bB--){bC=bD[bB];
bE=s(bC,bA);
bx=N(a(">table>thead",this.lockedHeader),this.thead,">tr:eq("+bE.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bE.cell);
if(bF(bC)){a8(bC,bG);
bx[0].style.display=bG?"":"none";
}if(bx.filter("["+az.attr("colspan")+"]").length){by=parseInt(bx.attr(az.attr("colspan")),10);
bx[0].colSpan=(by-am(bC.columns))||1;
}}}},showColumn:function(bz){var bM=this,bG,bH,bx,bL,bN,bK,bF,bJ,bC,by,bB=bM.columns,bE=bM.footer||bM.wrapper.find(".k-grid-footer"),bI=bM.lockedHeader?aC(bM.lockedHeader.find(">table>thead")).length:0,bA;
if(typeof bz=="number"){bz=bB[bz];
}else{if(aw(bz)){bz=ac(U(bB),function(bO){return bO===bz;
})[0];
}else{bz=ac(U(bB),function(bO){return bO.field===bz;
})[0];
}}if(!bz||ay(bz)){return;
}if(bz.columns&&bz.columns.length){bJ=y(bz,bB);
a8(bz,true);
a7(N(a(">table>thead",bM.lockedHeader),bM.thead,">tr:eq("+bJ.row+")>th"),bJ.cell,true);
for(bG=0;
bG<bz.columns.length;
bG++){this.showColumn(bz.columns[bG]);
}bM.trigger(v,{column:bz});
return;
}bA=ao(bz,aB(bB));
a8(bz,true);
bM._setParentsVisibility(bz,true);
bM._templates();
bM._updateCols();
bM._updateLockedCols();
var bD=bM.thead;
bF=bA;
if(bM.lockedHeader&&bI>bA){bD=bM.lockedHeader.find(">table>thead");
}else{bF-=bI;
}bx=aC(bD).eq(bF);
bx[0].style.display="";
a7(N(a(">table>thead",bM.lockedHeader),bM.thead,">tr.k-filter-row>th"),bA,true);
if(bE[0]){bM._updateCols(bE.find(">.k-grid-footer-wrap>table"));
bM._updateLockedCols(bE.find(">.k-grid-footer-locked>table"));
a7(bE.find(".k-footer-template>td"),bA,true);
}if(bM.lockedTable&&bI>bA){a9(bM.lockedTable.find(">tbody>tr"),bA);
}else{a9(bM.tbody.children(),bA-bI);
}if(bM.lockedTable){bM._updateTablesWidth();
bM._applyLockedContainersWidth();
bM._syncLockedContentHeight();
bM._syncLockedHeaderHeight();
}else{bL=a(">.k-grid-header table:first,>.k-grid-footer table:first",bM.wrapper).add(bM.table);
if(!bz.width){bL.width("");
}else{bN=0;
by=bM.thead.prev().find("col");
for(bG=0,bH=by.length;
bG<bH;
bG+=1){bC=by[bG].style.width;
if(bC.indexOf("%")>-1){bN=0;
break;
}bN+=parseInt(bC,10);
}bM._footerWidth=null;
if(bN){bL.each(function(){this.style.width=bN+"px";
});
bM._footerWidth=bN;
}}}bM._updateFirstColumnClass();
bM.trigger(v,{column:bz});
},_progress:function(by){var bx=this.element;
if(this.lockedContent){bx=this.wrapper;
}else{if(this.element.is("table")){bx=this.element.parent();
}else{if(this.content&&this.content.length){bx=this.content;
}}}az.ui.progress(bx,by);
},_resize:function(){if(this.content){this._setContentWidth();
this._setContentHeight();
}if(this.virtualScrollable){this.virtualScrollable.repaintScrollbar();
}},_isActiveInTable:function(){var bx=b();
return this.table[0]===bx||a.contains(this.table[0],bx)||(this._isLocked()&&(this.lockedTable[0]===bx||a.contains(this.lockedTable[0],bx)));
},refresh:function(bB){var bJ=this,bG,bE,bD="",bA=bJ.dataSource.view(),bH=bJ.options.navigatable,bz,by=a(bJ.current()),bF=false,bC=(bJ.dataSource.group()||[]).length,bI=bJ.content&&bJ.content.scrollLeft(),bx=bC+bs(br(bJ.columns)).length;
if(bB&&bB.action==="itemchange"&&bJ.editable){return;
}bB=bB||{};
if(bJ.trigger("dataBinding",{action:bB.action||"rebind",index:bB.index,items:bB.items})){return;
}bJ._angularItems("cleanup");
if(bH&&(bJ._isActiveInTable()||(bJ._editContainer&&bJ._editContainer.data("kendoWindow")))){bF=by.is("th");
bz=0;
if(bF){bz=bJ.thead.find("th:not(.k-group-cell)").index(by);
}}bJ._destroyEditable();
bJ._progress(false);
bJ._hideResizeHandle();
bJ._data=[];
if(!bJ.columns.length){bJ._autoColumns(bJ._firstDataItem(bA[0],bC));
bx=bC+bJ.columns.length;
}bJ._group=bC>0||bJ._group;
if(bJ._group){bJ._templates();
bJ._updateCols();
bJ._updateLockedCols();
bJ._updateHeader(bC);
bJ._group=bC>0;
}bJ._renderContent(bA,bx,bC);
bJ._renderLockedContent(bA,bx,bC);
bJ._footer();
bJ._setContentHeight();
bJ._setContentWidth(bI);
if(bJ.lockedTable){if(bJ.options.scrollable.virtual){bJ.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");
}else{if(bJ.touchScroller){bJ.touchScroller.movable.trigger("change");
}else{bJ.content.trigger("scroll");
}}}if(bz>=0){bJ._removeCurrent();
if(!bF){bJ.current(bJ.table.add(bJ.lockedTable).find(T).first());
}else{bJ.current(bJ.thead.find("th:not(.k-group-cell)").eq(bz));
}if(bJ._current){X(bJ._current.closest("table")[0],true);
}}if(bJ.touchScroller){bJ.touchScroller.contentResized();
}if(bJ.selectable){bJ.selectable.resetTouchEvents();
}bJ._angularItems("compile");
bJ.trigger(E);
},_angularItems:function(bx){az.ui.DataBoundWidget.fn._angularItems.call(this,bx);
this._angularGroupItems(bx);
},_angularGroupItems:function(bx){var by=this;
if(by._group){by.angular(bx,function(){return{elements:by.tbody.children(".k-grouping-row"),data:a.map(ai(by.dataSource.view()),function(bz){return{dataItem:bz};
})};
});
}},_renderContent:function(by,bx,bz){var bF=this,bB,bD,bA="",bC=bF.lockedContent!=null,bE={rowTemplate:bF.rowTemplate,altRowTemplate:bF.altRowTemplate,groupFooterTemplate:bF.groupFooterTemplate};
bx=bC?bx-bs(bt(bF.columns)).length:bx;
if(bz>0){bx=bC?bx-bz:bx;
if(bF.detailTemplate){bx++;
}if(bF.groupFooterTemplate){bF._groupAggregatesDefaultObject=i(bF.dataSource.aggregate());
}for(bB=0,bD=by.length;
bB<bD;
bB++){bA+=bF._groupRowHtml(by[bB],bx,0,bC?ah:ag,bE,bC);
}}else{bA+=bF._rowsHtml(by,bE);
}bF.tbody=f(bF.tbody,bF.table,bA);
},_renderLockedContent:function(by,bx,bz){var bA="",bB,bC,bE={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};
if(this.lockedContent){var bD=this.lockedTable;
if(bz>0){bx=bx-br(aB(aP(this.columns))).length;
for(bB=0,bC=by.length;
bB<bC;
bB++){bA+=this._groupRowHtml(by[bB],bx,0,ag,bE);
}}else{bA=this._rowsHtml(by,bE);
}f(bD.children("tbody"),bD,bA);
this._syncLockedContentHeight();
}},_adjustRowsHeight:function(bH,bI){var bF=bH[0].rows,bC=bF.length,bB,bG=bI[0].rows,bx=bH.add(bI),by=bx.length,bA=[];
for(bB=0;
bB<bC;
bB++){if(!bG[bB]){break;
}if(bF[bB].style.height){bF[bB].style.height=bG[bB].style.height="";
}var bD=bF[bB].offsetHeight;
var bE=bG[bB].offsetHeight;
var bz=0;
if(bD>bE){bz=bD;
}else{if(bD<bE){bz=bE;
}}bA.push(bz);
}for(bB=0;
bB<by;
bB++){bx[bB].style.display="none";
}for(bB=0;
bB<bC;
bB++){if(bA[bB]){bF[bB].style.height=bG[bB].style.height=(bA[bB]+1)+"px";
}}for(bB=0;
bB<by;
bB++){bx[bB].style.display="";
}}});
if(az.ExcelMixin){az.ExcelMixin.extend(ad.prototype);
}if(az.PDFMixin){az.PDFMixin.extend(ad.prototype);
ad.prototype._drawPDF=function(bC){var bE=new a.Deferred();
var bB=this;
var by=bB.dataSource;
var bx=bB.options.pdf.allPages;
this._initPDFProgress(bC);
var bz=new az.drawing.Group();
var bF=by.page();
function bD(){if(bx){by.unbind("change",bA);
by.one("change",function(){bE.resolve(bz);
});
by.page(bF);
}else{bE.resolve(bz);
}}function bA(){bB._drawPDFShadow().done(function(bH){var bI=by.page();
var bJ=bx?by.totalPages():1;
var bG={page:bH,pageNumber:bI,progress:bI/bJ,totalPages:bJ};
bC.notify(bG);
bz.append(bG.page);
if(bI<bJ){by.page(bI+1);
}else{bD();
}}).fail(function(bG){bE.reject(bG);
});
}if(bx){by.bind("change",bA);
by.page(1);
}else{bA();
}return bE.promise();
};
ad.prototype._initPDFProgress=function(bx){var by=a("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");
by.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));
this.wrapper.append(by);
var bz=a("<div class='k-loading-pdf-progress'>").appendTo(by).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");
bx.progress(function(bA){bz.value(bA.progress);
}).always(function(){az.destroy(by);
by.remove();
});
};
}function bc(bA,bB){bA=bA[0];
bB=bB[0];
if(bA.rows.length!==bB.rows.length){var by=bA.offsetHeight;
var bC=bB.offsetHeight;
var bz;
var bx;
if(by>bC){bz=bB.rows[bB.rows.length-1];
if(R.test(bz.className)){bz=bB.rows[bB.rows.length-2];
}bx=by-bC;
}else{bz=bA.rows[bA.rows.length-1];
if(R.test(bz.className)){bz=bA.rows[bA.rows.length-2];
}bx=bC-by;
}bz.style.height=bz.offsetHeight+bx+"px";
}}function e(bA,bB){var bx;
var by=bA.offsetHeight;
var bz=bB.offsetHeight;
if(by>bz){bx=by+"px";
}else{if(by<bz){bx=bz+"px";
}}if(bx){bA.style.height=bB.style.height=bx;
}}function ab(by,bB){var bz,bA,bx;
if(typeof by===ba&&by===bB){return by;
}if(aw(by)&&by.name===bB){return by;
}if(ap(by)){for(bz=0,bA=by.length;
bz<bA;
bz++){bx=by[bz];
if((typeof bx===ba&&bx===bB)||(bx.name===bB)){return bx;
}}}return null;
}function X(bD,by){var bA=h.msie;
if(by===true){bD=a(bD);
var bx=true||bA&&bD.parent().is(".k-grid-content,.k-grid-header-wrap"),bC,bB;
if(bx){bC=bD.parent().scrollTop();
bB=bD.parent().scrollLeft();
}if(bA){try{bD[0].setActive();
}catch(bz){bD[0].focus();
}}else{bD[0].focus();
}if(bx){bD.parent().scrollTop(bC);
bD.parent().scrollLeft(bB);
}}else{a(bD).one("focusin",function(bE){bE.preventDefault();
}).focus();
}}function be(bz){var by=a(bz.currentTarget),bB=by.is("th"),bD=this.table.add(this.lockedTable),bA=this.thead.parent().add(a(">table",this.lockedHeader)),bC=a(bz.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),bx=by.closest("table")[0];
if(az.support.touch){return;
}if(bC&&by.find(az.roleSelector("filtercell")).length){this.current(by);
return;
}if(bx!==bD[0]&&bx!==bD[1]&&bx!==bA[0]&&bx!==bA[1]){return;
}if(a(bz.target).is("a.k-i-collapse, a.k-i-expand")){return;
}if(this.options.navigatable){this.current(by);
}if(bB||!bC){setTimeout(function(){if(!(av&&a(az._activeElement()).hasClass("k-widget"))){X(bx,true);
}});
}if(bB){bz.preventDefault();
}}function bp(bx,by,bB,bA){bx=a(bx);
if(bA){var bz=by;
by=bB;
bB=bz;
}if(by.not(bx).length!=by.length){return bx;
}return bx[0]==bB[0]?by.eq(0):by.eq(1);
}function aL(bx,by,bz,bA,bG,bC){var bF,bB;
var bD=bG?"prevAll":"nextAll";
if(bx){bF=bx.parent()[bD](aN).first();
if(!bF[0]&&(bG||bx.is("th"))||(!bG&&bx[0].rowSpan>1)){by=bp(by,bz,bA,bG);
X(by,true);
if(bG&&!bx.is(".k-header")){return aC(by.find("thead:first")).eq(bx.index());
}bF=by.find((bG?">thead>":">tbody>")+aN).first();
}if(!bG&&bx[0].colSpan>1&&bx.is(".k-header")){bx=l(bx).eq(1);
}else{if(bx.is(".k-header")&&bG){var bE=aU(bx);
bx=bE.eq(bE.length-2);
}else{bB=bx.attr(az.attr("index"));
if(bB===bl||bG){bB=bx.index();
}else{if(by.parent().prev().hasClass("k-grid-content-locked")){bB-=bC;
}}bx=bF.children().eq(bB);
}}if(!bx[0]||!bx.is(aM)){bx=bF.children(aM).first();
}}else{bx=bz.find(T);
}return bx;
}function aJ(bx,by,bz,bA,bC){var bB=bz.length>1;
if(bx){if(bx.prevAll(":visible")[0]){bx=bx.prevAll(D).first();
}else{if(bB){if(by==bz[1]){X(bz[0]);
bx=bC(bx.parent()).children(D).last();
}else{if(by==bA[1]){X(bA[0]);
bx=bA.eq(0).find("tr>"+D).last();
}}}}}else{bx=bz.find(T);
}return bx;
}function aK(bx,by,bz,bA,bC){var bB=bz.length>1;
if(bx){if(bx.nextAll(":visible")[0]){bx=bx.nextAll(D).first();
}else{if(bB){if(by==bz[0]){X(bz[1]);
bx=bC(bx.parent()).children(D).first();
}else{if(by==bA[0]){X(bA[1]);
bx=bA.eq(1).find("tr>"+D).first();
}}}}}else{bx=bz.find(T);
}return bx;
}function bg(by,bz,bA,bD,bx){var bB=bA.length==2;
var bE=true;
var bC=bx?by.prevAll(D+":first"):by.nextAll(":visible:first");
if(!bC.length){bC=by.parent();
if(bB){bE=(bx&&bz==bA[0])||(!bx&&bz==bA[1]);
bC=bD(bC);
}if(bE){bC=bC[bx?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first");
}bC=bC.children(D+(bx?":last":":first"));
}return bC;
}function ag(bx,by,bz){return'<tr class="k-grouping-row">'+af(by)+'<td colspan="'+bx+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+bz+"</p></td></tr>";
}function ah(bx,by,bz){return'<tr class="k-grouping-row"><td colspan="'+bx+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>';
}bk.plugin(ad);
bk.plugin(bq);
})(window.kendo.jQuery);
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b){b();
});
